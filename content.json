{"meta":{"title":"èŠéº»çš„blog","subtitle":"ç™¾ äº‹ å¯ ä¹","description":"èŠéº»çš„blog","author":"èŠéº»","url":"https://li-zhi.net.cn","root":"/"},"pages":[{"title":"about","date":"2022-01-26T14:34:59.000Z","updated":"2022-01-26T14:35:42.811Z","comments":true,"path":"about/index.html","permalink":"https://li-zhi.net.cn/about/index.html","excerpt":"","text":"è¿™ä¸ªæ˜¯abouté¡µé¢"},{"title":"åˆ†ç±»","date":"2022-01-27T03:28:29.000Z","updated":"2022-10-23T00:50:10.215Z","comments":false,"path":"categories/index.html","permalink":"https://li-zhi.net.cn/categories/index.html","excerpt":"","text":""},{"title":"å¸¸ç”¨é…ç½®","date":"2023-01-14T12:54:05.000Z","updated":"2023-01-14T13:14:47.638Z","comments":true,"path":"commonlyUsedConfiguration/index.html","permalink":"https://li-zhi.net.cn/commonlyUsedConfiguration/index.html","excerpt":"","text":"MySQLé…ç½®123456789101112131415spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/xxx?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8 username: username password: password hikari: connection-timeout: 10000 validation-timeout: 3000 idle-timeout: 60000 login-timeout: 5 max-lifetime: 60000 maximum-pool-size: 10 minimum-idle: 5 read-only: false Redisé…ç½®1234567891011spring: redis: host: r-2zec1xnklp1y8ipk4vpd.redis.rds.aliyuncs.com password: Root9275 port: 6379 lettuce: pool: max-active: 8 #æœ€å¤§è¿æ¥ max-idle: 8 #æœ€å¤§ç©ºé—²è¿æ¥ min-idle: 0 #æœ€å°ç©ºé—²è¿æ¥ max-wait: 100ms #è¿æ¥ç­‰å¾…æ—¶é—´ Mailé…ç½®12345678spring: mail: # ä¸åŒçš„é‚®ç®±æ˜¯ä¸åŒçš„é‚®ç®±æœåŠ¡å™¨åŸŸå # qqæ˜¯smtp.qq.com host: smtp.163.com protocol: smtp username: é‚®ç®± password: å¯†é’¥ MyBatis-Plusé…ç½®12345678mybatis-plus: mapper-locations: classpath:com/wisdom/mapper/*/*.xml configuration: map-underscore-to-camel-case: true log-impl: org.apache.ibatis.logging.stdout.StdOutImpl default-enum-type-handler: org.apache.ibatis.type.EnumOrdinalTypeHandler type-aliases-package: com.zhima.entity type-enums-package: com.zhima.enums"},{"title":"æ ‡ç­¾","date":"2022-01-27T03:32:41.000Z","updated":"2022-10-04T13:44:08.523Z","comments":false,"path":"tags/index.html","permalink":"https://li-zhi.net.cn/tags/index.html","excerpt":"","text":""},{"title":"æœ‰æ–™","date":"2022-01-26T14:36:13.000Z","updated":"2023-01-28T07:30:12.335Z","comments":true,"path":"sometips/index.html","permalink":"https://li-zhi.net.cn/sometips/index.html","excerpt":"","text":"Windowsä¸‹ç«¯å£å ç”¨é—®é¢˜è§£å†³1234567891011121314# æŸ¥çœ‹ç«¯å£netstat -ano# æŸ¥è¯¢æŒ‡å®šç«¯å£netstat -ano | findstr &quot;ç«¯å£å·&quot;# æ ¹æ®è¿›ç¨‹pidæŸ¥è¯¢è¿›ç¨‹åç§°netstat |findstr &quot;è¿›ç¨‹pid&quot;# æ ¹æ®pidæ€æ­»ä»»åŠ¡taskkill /f /pid &quot;è¿›ç¨‹pid&quot;# æ ¹æ®è¿›ç¨‹åæ€æ­»ä»»åŠ¡taskkill -f -t -im &quot;è¿›ç¨‹åç§°&quot; Springæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ¨¡æ¿1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt; Dockerå‘½ä»¤å›¾ Dockerfileæ–‡ä»¶æ ¼å¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103# åŸºç¡€é•œåƒï¼Œtagä¸å†™é»˜è®¤ä¸ºlatest# åªèƒ½å†™ä¸€æ¬¡FROM &lt;image&gt;FROM &lt;image&gt;:&lt;tag&gt;# example# FROM centos# ä½œè€…ä¿¡æ¯nameä¸€èˆ¬ä¸ºé‚®ç®±MAINTAINER &lt;name&gt;# example# MAINTAINER zhima&lt;1158778689@qq.com&gt;# è®¾ç½®é•œåƒçš„å…ƒæ•°æ®æ ‡ç­¾ä¿¡æ¯LABEL &lt;info&gt;# example# LABEL version=&quot;1.0&quot;# LABEL description=&quot;this is description&quot;# è®¾ç½®ç¯å¢ƒå˜é‡ENV &lt;key&gt; &lt;value&gt;ENV &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...# example# ENV DIRPATH /path# è®¾ç½®è¿è¡ŒRUN CMD ENTRYPOINTçš„ç”¨æˆ·åUSER &lt;userName&gt;USER &lt;UID&gt;# è®¾ç½®å·¥ä½œç›®å½•# å¯¹RUN,CMD,ENTRYPOINT,COPY,ADDç”Ÿæ•ˆ# å¦‚æœä¸å­˜åœ¨åˆ™ä¼šåˆ›å»ºWORKDIR é•œåƒå†…åœ°å€# example# ä½¿ç”¨$è¯»å–ç¯å¢ƒå˜é‡# WORKDIR $DIRPATH# å®šä¹‰å˜é‡# åœ¨docker buildåˆ›å»ºé•œåƒçš„æ—¶å€™ï¼Œä½¿ç”¨ --build-arg &lt;varname&gt;=&lt;value&gt;æ¥æŒ‡å®šå‚æ•°ARG &lt;name&gt;[=&lt;default value&gt;]# ä¸ºå­é•œåƒè®¾ç½®å‘½ä»¤# å½“æœ¬é•œåƒä½œä¸ºå…¶ä»–å®¹å™¨çš„åŸºç¡€é•œåƒçš„æ—¶å€™ï¼ŒINSTRUCTIONä¼šåœ¨å­é•œåƒè¿è¡Œçš„æ—¶å€™æ‰§è¡ŒONBUILD [INSTRUCTION]# example# ONBUILD RUN ls -al# æ·»åŠ æ–‡ä»¶åˆ°é•œåƒ# sourceå¯å†™# å®¿ä¸»æœºçš„ç»å¯¹è·¯å¾„# æœ¬Dockerfileæ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„# urlï¼Œå¦‚æœä½¿ç”¨urlï¼Œåˆ™æ­¤ADDç›¸å½“äºwget# sourceå¦‚æœæ˜¯å‹ç¼©åŒ…ï¼Œåˆ™ä¼šè‡ªåŠ¨è§£å‹ADD &lt;source&gt; &lt;dest&gt;# å¤åˆ¶æ–‡ä»¶åˆ°é•œåƒä¸­# COPYçš„&lt;source&gt;åªèƒ½æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œå…¶ä»–ç”¨æ³•ä¸ADDä¸€è‡´COPY &lt;source&gt; &lt;dest&gt;# åœ¨**æ„å»º**é•œåƒçš„æ—¶å€™è¿è¡Œçš„å‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯å®‰è£…å‘½ä»¤RUN &lt;command&gt;RUN [&quot;executable&quot;,&quot;param1&quot;]# example# RUN yum install -y gcc# ä¸‹é¢ä¸‰è¡ŒRUNå‘½ä»¤æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸‹è¿™ä¸ªé”™è¯¯çš„# Error: Failed to download metadata for repo &#x27;appstream&#x27;: Cannot prepare internal mirrorlist: No URLs in mirrorlist# RUN cd /etc/yum.repos.d/# RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*# RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*# æš´éœ²å®¹å™¨è¿è¡Œæ—¶çš„ç›‘å¬ç«¯å£ç»™å¤–éƒ¨EXPOSE &lt;port&gt;# ä½†æ˜¯EXPOSEå¹¶ä¸ä¼šä½¿å®¹å™¨è®¿é—®ä¸»æœºçš„ç«¯å£# å¦‚æœæƒ³ä½¿å¾—å®¹å™¨ä¸ä¸»æœºçš„ç«¯å£æœ‰æ˜ å°„å…³ç³»ï¼Œå¿…é¡»åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™åŠ ä¸Š -på‚æ•°# æ•°æ®å·# è¿™ç§æ˜¯åŒ¿åæ•°æ®å· å®¿ä¸»æœºä¼šåœ¨/var/lib/docker/volumesä¸‹ç”Ÿæˆä¸€ä¸ªéšæœºå‘½åçš„ç›®å½•# å¯ä»¥åœ¨è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼ŒæŒ‡å®šæŒ‚è½½å·çš„åå­—# -v å·å:é•œåƒå†…æƒ³è¦è¢«æŒ‚è½½çš„åœ°å€2VOLUME [&quot;é•œåƒå†…æƒ³è¦è¢«æŒ‚è½½çš„åœ°å€1&quot;,&quot;é•œåƒå†…æƒ³è¦è¢«æŒ‚è½½çš„åœ°å€2&quot;]VOLUME &quot;é•œåƒå†…æƒ³è¦è¢«æŒ‚è½½çš„åœ°å€1&quot; &quot;é•œåƒå†…æƒ³è¦è¢«æŒ‚è½½çš„åœ°å€2&quot; # å®¹å™¨**è¿è¡Œ**çš„æ—¶å€™è¿è¡Œçš„å‘½ä»¤CMD &lt;command&gt;CMD [&quot;executable&quot;,&quot;param1&quot;]# example# CMD [&quot;cd&quot;,&quot;/usr/local&quot;]# CMD cd /usr/local # å®¹å™¨è¿è¡Œçš„æ—¶å€™è¿è¡Œçš„å‘½ä»¤ENTRYPOINT java -jar demo.jarENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;demo.jar&quot;]# ENTRYPOINTå’ŒCMDçš„åŒºåˆ«# ä¸åŒä¹‹å¤„# 1.ENTRYPOINTä¸ä¼šè¢«è¿è¡Œçš„commandè¦†ç›–ï¼Œè€ŒCMDåˆ™ä¼šè¢«è¦†ç›–# 2.å¦‚æœæˆ‘ä»¬åœ¨Dockerfileç§åŒæ—¶å†™äº†ENTRYPOINTå’ŒCMD# å¹¶ä¸”CMDæŒ‡ä»¤ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆCMDæŒ‡å®šçš„å†…å®¹å°†ä¼šä½œä¸ºENTRYPOINTçš„å‚æ•°# 3.docker run image &lt;å‚æ•°&gt;# ä¼ å…¥çš„å‚æ•°ä¼šè¿½åŠ åœ¨ENTRYPOINTä¹‹å# å¦‚æœæ˜¯CMDï¼Œä¼šç›´æ¥è¦†ç›–æ­¤CMD# ç›¸åŒä¹‹å¤„# åªèƒ½å†™ä¸€æ¡ï¼Œå¦‚æœå†™äº†å¤šæ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€åä¸€æ¡ç”Ÿæ•ˆ# å®¹å™¨å¯åŠ¨æ—¶æ‰è¿è¡Œ# å¦‚æœæˆ‘ä»¬åœ¨Dockerfileç§åŒæ—¶å†™äº†ENTRYPOINTå’Œå®Œæ•´çš„CMDï¼ŒENTRYPOINTä¸€å®šä¼šæ‰§è¡Œï¼ŒCMDä¸ä¼šæ‰§è¡Œ Docker-composeæ ¼å¼1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950# æŒ‡å®šcomposeç‰ˆæœ¬ï¼Œä¸€èˆ¬3.1å°±å¯ä»¥äº†version: &#x27;3.1&#x27;# æœåŠ¡åˆ—è¡¨services: # è‡ªå®šä¹‰æœåŠ¡å service_name1: # ä½¿ç”¨docker buildæ„å»ºé•œåƒ # Dockerfileçš„åœ°å€ build: context: . dockerfile: custom-Dockerfile # å¦‚æœdockerfileæ–‡ä»¶åå°±å«Dockerfileï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç®€å†™æ¨¡å¼ # build: . # å¦‚æœæœ‰buildåˆ™æ˜¯æŒ‡å®šæ„å»ºå‡ºæ¥çš„é•œåƒçš„é•œåƒå # å¦‚æœæ²¡æœ‰buildåˆ™æ˜¯æŒ‡å®šè¿è¡Œçš„é•œåƒ image: &lt;imageName&gt;:&lt;tag&gt; # æŒ‡å®šè¿è¡Œå®¹å™¨çš„åç§° container_name: &lt;container_name&gt; # å®¹å™¨å·æŠ€æœ¯ volumes: - /usr/local/mysql # åŒ¿åæŒ‚è½½ - VolumeName:/home/zhima #å…·åæŒ‚è½½ - /temp/mysql/config:/etc/mysql/conf.d # å®¿ä¸»æœºæŒ‚è½½ # ç«¯å£æ˜ å°„ ports: - &quot;å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£&quot; # è¿è¡Œå®¹å™¨çš„æ—¶å€™çš„å‚æ•° command: [ &quot;param1&quot;, &quot;param2&quot; ] # æŒ‡å®šåŠ å…¥çš„ç½‘ç»œ networks: - network1 - network2 # ç¬¬äºŒä¸ªæœåŠ¡ service_name2: # ä½¿ç”¨æ„å»ºå¥½çš„é•œåƒ image: &lt;imageName&gt;:&lt;tag&gt; stdin_open: true # ç±»ä¼¼äºdocker run -d tty: true # ç±»ä¼¼äºdocker run -t depends_on: - service_name1networks: network1: driver: bridge network2: driver: bridge Gitå‘½ä»¤å›¾ SpringMVCçš„web.xmlæ¨¡æ¿123456789101112131415161718192021222324252627282930313233&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; æ•°æ®åº“æ¨¡æ¿é…ç½®æ–‡ä»¶123spring.datasource.url=jdbc:mysql://locoalhost:3306/dbname?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf8spring.datasource.username=rootspring.datasource.password=123456 MyBatisé…ç½®æ–‡ä»¶çš„æ¨¡æ¿æ ¸å¿ƒé…ç½®æ–‡ä»¶1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;/configuration&gt; æ˜ å°„å™¨xmlæ–‡ä»¶123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.youkeda.comment.dao.UserDAO&quot;&gt;&lt;/mapper&gt; druidè¿æ¥æ± é…ç½®æ–‡ä»¶mavenåæ ‡12345678910&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.2.8&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.2.8&lt;/version&gt;&lt;/dependency&gt; ä¸€éƒ¨åˆ†æ ¸å¿ƒé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334spring: datasource: username: root password: 123456 url: jdbc:mysql://localhost:3306/dbName?serverTimezone=UTC&amp;useUnicodestrue&amp;characterEncoding=utf-8 driver-class-name: com.mysql.cj.jdbc.Driver type: com.alibaba.druid.pool.DruidDataSource #Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š #druid druidç‰¹æœ‰é…ç½® druid: initialSize: 5 minIdle: 5 maxActive: 20 maxwait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true #é…ç½®ç›‘æ§ç»Ÿè®¡æ æˆªçš„filtersï¼Œstat: ç›‘æ§ç»Ÿè®¡ã€Log4j: æ—¥å¿—è®°å½•ã€wall: é˜²å¾¡sqLæ³¨å…¥ #å¦‚æœå…è®¸æ—¶æŠ¥å€Ÿ java.Lang.CLassNotFoundException: org.apache.Log4j.Priority filters: stat,wall,log4j maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourcestat: true connectionProperties: druid.stat.mergesqletrue;druid.stat.slowSq1Millis=500 stat-view-servlet: enabled: true url-pattern: /druid/* login-password: admin login-username: 123456 allow: deny: åå°ç›‘æ§é¡µé¢ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½® 12345678910@Beanpublic ServletRegistrationBean statViewServlet()&#123; ServletRegistrationBean&lt;Servlet&gt; bean = new ServletRegistrationBean&lt;&gt;(new StatViewServlet(),&quot;/druid/*&quot;); Map&lt;String, String&gt; params = new HashMap&lt;&gt;(); params.put(&quot;loginUserName&quot;,&quot;admin&quot;); params.put(&quot;loginPassword&quot;,&quot;123456&quot;); params.put(&quot;allow&quot;,&quot;localhost&quot;); bean.setInitParameters(params); return bean;&#125; å»é™¤druidçš„å¹¿å‘Š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package com.lizhi.springbootdata;import com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure;import com.alibaba.druid.spring.boot.autoconfigure.properties.DruidStatProperties;import com.alibaba.druid.util.Utils;import org.springframework.boot.autoconfigure.AutoConfigureAfter;import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import javax.servlet.FilterConfig;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;import javax.servlet.*;import java.io.IOException;@Configuration@ConditionalOnWebApplication@AutoConfigureAfter(DruidDataSourceAutoConfigure.class)@ConditionalOnProperty(name = &quot;spring.datasource.druid.stat-view-servlet.enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)public class RemoveDruidAdConfig &#123; /** * æ–¹æ³•å: removeDruidAdFilterRegistrationBean * æ–¹æ³•æè¿°: é™¤å»é¡µé¢åº•éƒ¨çš„å¹¿å‘Š * @param properties * @return org.springframework.boot.web.servlet.FilterRegistrationBean * @throws */ @Bean public FilterRegistrationBean removeDruidAdFilterRegistrationBean(DruidStatProperties properties) &#123; // è·å–webç›‘æ§é¡µé¢çš„å‚æ•° DruidStatProperties.StatViewServlet config = properties.getStatViewServlet(); // æå–common.jsçš„é…ç½®è·¯å¾„ String pattern = config.getUrlPattern() != null ? config.getUrlPattern() : &quot;/druid/*&quot;; String commonJsPattern = pattern.replaceAll(&quot;\\\\*&quot;, &quot;js/common.js&quot;); final String filePath = &quot;support/http/resources/js/common.js&quot;; //åˆ›å»ºfilterè¿›è¡Œè¿‡æ»¤ Filter filter = new Filter() &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; chain.doFilter(request, response); // é‡ç½®ç¼“å†²åŒºï¼Œå“åº”å¤´ä¸ä¼šè¢«é‡ç½® response.resetBuffer(); // è·å–common.js String text = Utils.readFromResource(filePath); // æ­£åˆ™æ›¿æ¢banner, é™¤å»åº•éƒ¨çš„å¹¿å‘Šä¿¡æ¯ text = text.replaceAll(&quot;&lt;a.*?banner\\&quot;&gt;&lt;/a&gt;&lt;br/&gt;&quot;, &quot;&quot;); text = text.replaceAll(&quot;powered.*?shrek.wang&lt;/a&gt;&quot;, &quot;&quot;); response.getWriter().write(text); &#125; @Override public void destroy() &#123; &#125; &#125;; FilterRegistrationBean registrationBean = new FilterRegistrationBean(); registrationBean.setFilter(filter); registrationBean.addUrlPatterns(commonJsPattern); return registrationBean; &#125;&#125; GitHubåŠ é€Ÿhttps://gitee.com/docmirror/dev-sidecar?_from=gitee_search é«˜è´¨é‡é¡¹ç›®https://github.com/kon9chunkit/Github-Chinese-Top-Charts#%E7%9B%AE%E5%BD%95 å®˜æ–¹æ–‡æ¡£https://docs.github.com/cn mavenä¸­èµ„æºå¯¼å‡ºå‡ºç°é—®é¢˜123456789101112131415161718192021&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå‡ºç°çš„é—®é¢˜--&gt;&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; CORSè·¨åŸŸè¯·æ±‚çš„é…ç½®1234567891011121314151617import org.springframework.context.annotation.Configuration;import org.springframework.web.servlet.config.annotation.CorsRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;@Configurationpublic class CorsConfig implements WebMvcConfigurer &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;) .allowedHeaders(&quot;*&quot;) .allowedMethods(&quot;*&quot;) .allowCredentials(true) .allowedOriginPatterns(&quot;*&quot;) .maxAge(2000); &#125;&#125; 12345678910111213141516171819202122232425import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.cors.CorsConfiguration;import org.springframework.web.cors.UrlBasedCorsConfigurationSource;import org.springframework.web.filter.CorsFilter;@Configurationpublic class CorsConfig1 &#123; private static final long MAX_AGE=24*60*60; private CorsConfiguration buildConfig()&#123; CorsConfiguration corsConfiguration = new CorsConfiguration(); corsConfiguration.addAllowedOrigin(&quot;*&quot;); corsConfiguration.addAllowedHeader(&quot;*&quot;); corsConfiguration.addAllowedMethod(&quot;*&quot;); corsConfiguration.setMaxAge(MAX_AGE); return corsConfiguration; &#125; @Bean public CorsFilter corsFilter()&#123; UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration(&quot;/**&quot;,buildConfig()); return new CorsFilter(source); &#125;&#125; SpringSessionçš„é…ç½®123456789101112131415161718192021222324252627282930import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.session.MapSessionRepository;import org.springframework.session.config.annotation.web.http.EnableSpringHttpSession;import org.springframework.session.web.http.CookieSerializer;import org.springframework.session.web.http.DefaultCookieSerializer;import java.util.concurrent.ConcurrentHashMap;@Configuration@EnableSpringHttpSessionpublic class SpringHttpSessionConfig &#123; @Bean public CookieSerializer cookieSerializer() &#123; DefaultCookieSerializer serializer = new DefaultCookieSerializer(); serializer.setCookieName(&quot;JSESSIONID&quot;); // ç”¨æ­£åˆ™è¡¨è¾¾å¼é…ç½®åŒ¹é…çš„åŸŸåï¼Œå¯ä»¥å…¼å®¹ localhostã€127.0.0.1 ç­‰å„ç§åœºæ™¯ serializer.setDomainNamePattern(&quot;^.+?\\\\.(\\\\w+\\\\.[a-z]+)$&quot;); serializer.setCookiePath(&quot;/&quot;); serializer.setUseHttpOnlyCookie(false); // æœ€å¤§ç”Ÿå‘½å‘¨æœŸçš„å•ä½æ˜¯ç§’ serializer.setCookieMaxAge(48 * 60 * 60); return serializer; &#125; @Bean public MapSessionRepository sessionRepository() &#123; return new MapSessionRepository(new ConcurrentHashMap&lt;&gt;()); &#125;&#125; Log4j æ ¸å¿ƒé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425#å°†ç­‰çº§ä¸ºDEBUGçš„å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ã€‚consoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç log4j.rootLogger=DEBUG,console,file#èŒƒåˆ¶å°å·å‡ºçš„ç›¸å…³è®¾ç½®log4j.appender.console =org.apache.log4j.ConsoleAppenderlog4j.appender.console.Target=System.outlog4j.appender.console.Threshold=DEBUglog4j.appender.console.layout =org.apache.log4j.PatternLayoutlog4j.appender.console.layout.ConversionPattern=[%c]-%m%n#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®log4j.appender.file =org.apache.log4j.RollingFileAppender#æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„ç£ç›˜è·¯å¾„log4j.appender.file.File=./log/lizhi.loglog4j.appender.file.MaxFileSize=10mblog4j.appender.file.Threshold=DEBUGlog4j.appender.file.layout=org.apache.log4j.PatternLayoutlog4j.appender.file.layout.ConversionPattern=[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n#æ—¥å»è¾“å‡ºçº§åˆ«log4j.logger.org.mybatis=DEBUGlog4j.logger.java.sql=DEBUGlog4j.logger.java.sql.Statement=DEBUGlog4j.logger.java.sql.ResultSet=DEBUGlog4j.logger.java.sql.Preparedstatement=DEBUG å­—ä½“å›¾æ ‡çš„ä½¿ç”¨ä½¿ç”¨å­—ä½“å›¾æ ‡å‰ï¼Œæ·»åŠ å­—ä½“ç”³æ˜ï¼Œå‚è€ƒå¦‚ä¸‹æˆ–è€…ç›´æ¥åœ¨style.cssæ–‡ä»¶ä¸­å¤åˆ¶ 1234567891011@font-face &#123; font-family: &#x27;icomoon&#x27;; src: url(&#x27;fonts/icomoon.eot?suef9x&#x27;); src: url(&#x27;fonts/icomoon.eot?suef9x#iefix&#x27;) format(&#x27;embedded-opentype&#x27;), url(&#x27;fonts/icomoon.ttf?suef9x&#x27;) format(&#x27;truetype&#x27;), url(&#x27;fonts/icomoon.woff?suef9x&#x27;) format(&#x27;woff&#x27;), url(&#x27;fonts/icomoon.svg?suef9x#icomoon&#x27;) format(&#x27;svg&#x27;); font-weight: normal; font-style: normal; font-display: block;&#125; è®°å¾—ä¿®æ”¹å­—ä½“ï¼ˆfont-familyï¼‰ä¸ºicomoon æ›´æ–°æœåŠ¡å™¨æ—¶é—´12345[root@localhost ~]# date -RFri, 27 Jan 2023 00:23:13 +0800[root@localhost /]# yum install -y ntp[root@localhost /]# date -RSat, 28 Jan 2023 15:27:20 +0800"}],"posts":[{"title":"Linux-ç³»ç»Ÿç®¡ç†","slug":"Linux-ç³»ç»Ÿç®¡ç†","date":"2023-01-09T07:35:23.000Z","updated":"2023-01-10T12:07:04.295Z","comments":true,"path":"javaEE/2023/01/09/Linux-ç³»ç»Ÿç®¡ç†/","link":"","permalink":"https://li-zhi.net.cn/javaEE/2023/01/09/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/","excerpt":"","text":"ç³»ç»Ÿç®¡ç†findä½œç”¨æ ¹æ®ç»™å®šè·¯å¾„å’Œæœç´¢æ¡ä»¶æŸ¥æ‰¾æ–‡ä»¶ ä½¿ç”¨è¯´æ˜1234567891011121314# æ ¼å¼ï¼šfind [è·¯å¾„] [å‚æ•°] å¾…æœç´¢å­—æ®µ# å¸¸ç”¨å‚æ•° -name åŒ¹é…åç§° -user åŒ¹é…æ‰€æœ‰è€… -perm åŒ¹é…æƒé™ï¼ˆmodeä¸ºå®Œå…¨åŒ¹é…ï¼Œ-modeä¸ºåŒ…å«å³å¯ï¼‰ -type b(å—è®¾å¤‡)/d(ç›®å½•)/c(å­—ç¬¦è®¾å¤‡)/p(ç®¡é“)/l(é“¾æ¥æ–‡ä»¶)/f(æ–‡æœ¬æ–‡ä»¶) åŒ¹é…æ–‡ä»¶ç±»å‹ -group åŒ¹é…æ‰€æœ‰ç»„ -mtime -n +n åŒ¹é…ä¿®æ”¹å†…å®¹çš„æ—¶é—´ï¼ˆ-næŒ‡nå¤©ä»¥å†…ï¼Œ+næŒ‡nå¤©ä»¥å‰ï¼‰ -atime -n +n åŒ¹é…è®¿é—®æ–‡ä»¶çš„æ—¶é—´ï¼ˆ-næŒ‡nå¤©ä»¥å†…ï¼Œ+næŒ‡nå¤©ä»¥å‰ï¼‰ -ctime -n +n åŒ¹é…ä¿®æ”¹æ–‡ä»¶æƒé™çš„æ—¶é—´ï¼ˆ-næŒ‡nå¤©ä»¥å†…ï¼Œ+næŒ‡nå¤©ä»¥å‰ï¼‰ -nouser åŒ¹é…æ— æ‰€æœ‰è€…çš„æ–‡ä»¶ -nogroup åŒ¹é…æ— æ‰€æœ‰ç»„çš„æ–‡ä»¶ -size åŒ¹é…æ–‡ä»¶çš„å¤§å°ï¼ˆ+50KBä¸ºæŸ¥æ‰¾è¶…è¿‡50KBçš„æ–‡ä»¶ï¼Œè€Œ-1Mä¸ºæŸ¥æ‰¾å°äº1Mçš„æ–‡ä»¶ï¼‰ -exec [å¤„ç†æœç´¢ç»“æœçš„å‘½ä»¤] &#123;&#125;\\; åé¢å¯è·Ÿç”¨äºè¿›ä¸€æ­¥å¤„ç†æœç´¢ç»“æœçš„å‘½ä»¤ locateä½œç”¨locateå‘½ä»¤çš„åŠŸèƒ½æ˜¯ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½• ä¸findå‘½ä»¤è¿›è¡Œå…¨å±€æœç´¢ä¸åŒï¼Œlocateå‘½ä»¤æ˜¯åŸºäºäº†æ•°æ®æ–‡ä»¶ï¼ˆ&#x2F;var&#x2F;lib&#x2F;locatedbï¼‰è¿›è¡Œçš„å®šç‚¹æŸ¥æ‰¾ æ­¤å‘½ä»¤ç¼©å°äº†æœç´¢èŒƒå›´ï¼Œå› æ­¤å¿«é€Ÿå¿«å¾ˆå¤š ä½¿ç”¨è¯´æ˜123456# æ ¼å¼ï¼šlocate å…³é”®è¯# æ›´æ–°æ•°æ®åº“æ–‡ä»¶[root@zhima home]# updatedb# æŸ¥æ‰¾ç³»ç»Ÿä¸­æ–‡ä»¶åä¸­æœ‰networkçš„æ–‡ä»¶[root@zhima home]# locate network whichä½œç”¨æ‰¾åˆ°å‘½ä»¤æœ¬èº«æ‰€åœ¨çš„è·¯å¾„ ä½¿ç”¨è¯´æ˜1# æ ¼å¼ï¼šwhich [å‚æ•°] å‘½ä»¤ å‚è€ƒæ¡ˆä¾‹123456[root@zhima home]# which yum/usr/bin/yum[root@zhima home]# which rpm/usr/bin/rpm[root@zhima home]# which docker/usr/bin/docker whereisä½œç”¨å®šä½å‘½ä»¤çš„äºŒè¿›åˆ¶ç¨‹åºã€æºä»£ç æ–‡ä»¶å’Œmanæ‰‹å†Œé¡µç­‰ç›¸å…³æ–‡ä»¶çš„è·¯å¾„ å®ƒä¸æ˜¯åœ¨ç£ç›˜ä¸­ä¹±æ‰¾ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ä¸­æŸ¥è¯¢ æ­¤æ•°æ®åº“æ–‡ä»¶æ˜¯åŒ…å«æœ‰æœ¬åœ°æ‰€æœ‰æ–‡ä»¶çš„ä¿¡æ¯ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ä½¿ç”¨updatedbæ›´æ–°æ•°æ®åº“ æ­£å› ä¸ºè¿™æ ·ï¼Œwhereiså‘½ä»¤çš„æœç´¢ç»“æœæœ‰æ—¶å€™ä¼šä¸å‡†ç¡®ï¼Œæ¯”å¦‚åˆšæ·»åŠ çš„æ–‡ä»¶å¯èƒ½æœä¸åˆ°ï¼Œ åŸå› å°±æ˜¯è¯¥æ•°æ®åº“æ–‡ä»¶æ²¡æœ‰è¢«æ›´æ–°ã€‚ ä½¿ç”¨è¯´æ˜1234567891011121314# æ ¼å¼ï¼šwhereis [å‚æ•°] å‘½ä»¤å# å¸¸ç”¨å‚æ•° # åªæœç´¢äºŒè¿›åˆ¶æ–‡ä»¶ -b search only for binaries # æŒ‡å®šè·¯å¾„æœç´¢äºŒè¿›åˆ¶æ–‡ä»¶ -B &lt;dirs&gt; define binaries lookup path # åªæœç´¢manæ‰‹å†Œ -m search only for manuals # æŒ‡å®šè·¯å¾„ä¸‹æœç´¢manæ‰‹å†Œ -M &lt;dirs&gt; define man lookup path # åªæœç´¢æºä»£ç  -s search only for sources # æŒ‡å®šè·¯å¾„ä¸‹æœç´¢æºä»£ç  -S &lt;dirs&gt; define sources lookup path rpmä½œç”¨åŒ…ç®¡ç†å™¨ï¼ˆRedHat Package Managerï¼‰ ä½¿ç”¨è¯´æ˜123456789101112131415161718# æ ¼å¼ï¼šrpm [å‚æ•°] è½¯ä»¶åŒ…å# å¸¸ç”¨å‚æ•° # åˆ—å‡ºæ‰€æœ‰è½¯ä»¶åŒ… -a, --all query/verify all packages # å¸è½½è½¯ä»¶åŒ… -e, --erase=&lt;package&gt;+ erase (uninstall) package # æŸ¥è¯¢æ–‡ä»¶æˆ–å‘½ä»¤å±äºå“ªä¸ªè½¯ä»¶åŒ… -f, --file query/verify package(s) owning file # ä¸‹è½½è½¯ä»¶åŒ… -i, --install install package(s) # æ˜¾ç¤ºè½¯ä»¶åŒ…çš„æ–‡ä»¶åˆ—è¡¨ -l, --list list files in package # æŸ¥è¯¢æŒ‡å®šçš„rpmè½¯ä»¶åŒ… -p, --package query/verify a package file # å®‰è£…è½¯ä»¶åŒ…æ—¶åˆ—å‡ºæ ‡è®° -h, --hash print hash marks as package installs (good with -v) # æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ -v, --verbose provide more detailed output å‚è€ƒæ¡ˆä¾‹1234567891011121314# å®‰è£…è½¯ä»¶åŒ…[root@zhima home]# rmp ivh cockpit-185-2.el8.x86_64.rpm # åˆ—å‡ºç³»ç»Ÿå®‰è£…çš„æ‰€æœ‰è½¯ä»¶[root@zhima home]# rpm -qa# æŸ¥çœ‹cockpitçš„æ–‡ä»¶åˆ—è¡¨[root@zhima home]#rpm -ql cockpit# å‡çº§æŒ‡å®šè½¯ä»¶åŒ…[root@zhima home]#rpm -Uvh cockpit-185-2.el8.x86_64.rpm # å¸è½½cockpit[root@zhima home]#rpm -evh cockpit psä½œç”¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼ˆprocess statusï¼‰ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šps [å‚æ•°]# å¸¸ç”¨å‚æ•° a æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åº u ä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µ x æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ† r åªåˆ—å‡ºç°è¡Œç»ˆç«¯æœºæ­£åœ¨æ‰§è¡Œä¸­çš„ç¨‹åº e åˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºæ‰€ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ -f æ˜¾ç¤ºUID,PPIP,Cä¸STIMEæ ä½ -l é‡‡ç”¨è¯¦ç»†çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µ -y é…åˆé€‰é¡¹â€-lâ€ä½¿ç”¨æ—¶ï¼Œä¸æ˜¾ç¤ºF(flag)æ ä½ï¼Œå¹¶ä»¥RSSæ ä½å–ä»£ADDRæ ä½ å‚è€ƒæ¡ˆä¾‹123456789101112# æ˜¾ç¤ºç³»ç»Ÿä¸­å…¨éƒ¨çš„è¿›ç¨‹ä¿¡æ¯ï¼ŒåŒ…å«è¯¦ç»†ä¿¡æ¯# ç»“åˆè¾“å‡ºé‡å®šå‘ï¼Œå°†å½“å‰è¿›ç¨‹ä¿¡æ¯ä¿ç•™å¤‡ä»½è‡³æŒ‡å®šæ–‡ä»¶ps aux &gt; now_process_status.txt# æ˜¾ç¤ºå½“å‰ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è¯¦ç»†ä¿¡æ¯ps -ely# æ˜¾ç¤ºå½“å‰ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ps -ef# ä¾æ®å†…å­˜ä½¿ç”¨é‡ï¼ˆç¬¬å››åˆ—ï¼‰æƒ…å†µé™åºæ’åºps aux | sort -rnk 4 nohupä½œç”¨åå°å¯åŠ¨ç¨‹åº ä½¿ç”¨è¯´æ˜1# æ ¼å¼ï¼šnohup [å‚æ•°] ç¨‹åºå å‚è€ƒæ¡ˆä¾‹12345# ä»¥åå°æ¨¡å¼è¿è¡Œxxx.jaråŒ…nohup java -jar xxx.jar &amp;# ä»¥åå°æ¨¡å¼è¿è¡Œxxx.jaråŒ…å¹¶è®²è¾“å‡ºç»“æœéƒ½å†™å…¥xxx_log.txtæ–‡ä»¶nohup java -jar xxx.jar &amp; &gt; xxx_log.txt systemctlä½œç”¨ç®¡ç†ç³»ç»ŸæœåŠ¡ï¼ˆåå°è¿›ç¨‹ï¼‰ ä½¿ç”¨è¯´æ˜1234567891011121314151617181920# å¼€å¯æœåŠ¡systemctl start servieName# é‡å¯æœåŠ¡systemctl restart servieName# å…³é—­æœåŠ¡systemctl stop servieName# æŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl status servieName# å…³é—­åå°æœåŠ¡è‡ªå¯åŠ¨systemctl disable serviceName# å¼€å¯åå°æœåŠ¡è‡ªå¯åŠ¨systemctl enable serviceName# æŸ¥çœ‹æ‰€æœ‰åå°æœåŠ¡çŠ¶æ€systemctl list-units --type service --all unameä½œç”¨æ˜¾ç¤ºç³»ç»Ÿå†…æ ¸å†…å®¹ ä½¿ç”¨è¯´æ˜12345678910111213141516171819# æ ¼å¼ï¼šuname [å‚æ•°]# å¸¸ç”¨å‚æ•° # æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯ -a, --all print all information, in the following order, except omit -p and -i if unknown: # æ˜¾ç¤ºä¸»æœºå -n, --nodename print the network node hostname # æ˜¾ç¤ºå†…æ ¸å -s, --kernel-name print the kernel name # æ˜¾ç¤ºç¡¬ä»¶æ¶æ„ -m, --machine print the machine hardware name # æ˜¾ç¤ºå†…æ ¸å‘è¡Œå· -r, --kernel-release print the kernel release # æ˜¾ç¤ºå†…æ ¸ç‰ˆæœ¬ -v, --kernel-version print the kernel version # æ˜¾ç¤ºå¤„ç†å™¨çš„ç±»å‹ -p, --processor print the processor type or &quot;unknown&quot; # æ˜¾ç¤ºæ“ä½œç³»ç»Ÿç±»å‹ -o, --operating-system print the operating system shutdownä½œç”¨å…³æœº ä½¿ç”¨è¯´æ˜123456789101112131415161718# Linuxç³»ç»Ÿä¸­ä¸ºäº†æé«˜ç£ç›˜çš„è¯»å†™æ•ˆç‡ï¼Œå¯¹ç£ç›˜é‡‡ç”¨äº†â€œé¢„è¯»è¿Ÿå†™â€æ“ä½œæ–¹å¼ã€‚å½“ç”¨æˆ·ä¿å­˜æ–‡ä»¶æ—¶ï¼ŒLinuxæ ¸å¿ƒå¹¶ä¸ä¸€å®šç«‹å³å°†æ•°æ®å†™å…¥ç‰©ç†ç£ç›˜ä¸­ï¼Œè€Œæ˜¯å°†æ•°æ®ä¿å­˜åœ¨ç¼“å­˜åŒºä¸­ï¼Œç­‰åˆ°ç¼“å­˜åŒºè¢«å¡«æ»¡äº†ä¹‹åå†å°†æ•°æ®å†™å…¥ç£ç›˜ï¼Œè¿™ç§æ–¹å¼ç¡®å®æå¤§åœ°æé«˜äº†è¯»å†™æ•ˆç‡ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶æ‰€åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œå½“æœåŠ¡å™¨é­å—åˆ°æ–­ç”µæˆ–è€…å…¶ä»–æ„å¤–æƒ…å†µçš„æ—¶å€™ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¼šç›´æ¥ä¸¢å¤±ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œsyncå°±æ˜¯å°†ç¼“å­˜ä¸­çš„ä¸œè¥¿ç›´æ¥å†™å…¥åˆ°ç£ç›˜ä¸­å»ï¼Œæ— éœ€ç­‰å¾…ç¼“å­˜è¢«å¡«æ»¡#å°†æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜ï¼ˆå…³æœºå‰å¿…é¡»åšï¼‰sync#æœåŠ¡å™¨åœ¨ååˆ†é’Ÿåå…³æœºshutdown -h 10#ç«‹å³å…³æœºshutdown -h now#åœ¨20:35å…³æœºshutdown -h 20:35#ç«‹é©¬é‡å¯shutdown -r now#ç«‹é©¬é‡å¯reboot","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-æ–‡ä»¶ç¼–è¾‘","slug":"Linux-æ–‡ä»¶ç¼–è¾‘","date":"2023-01-08T03:58:38.000Z","updated":"2023-01-10T11:51:20.533Z","comments":true,"path":"javaEE/Linux/2023/01/08/Linux-æ–‡ä»¶ç¼–è¾‘/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Linux/2023/01/08/Linux-%E6%96%87%E4%BB%B6%E7%BC%96%E8%BE%91/","excerpt":"","text":"Linux-æ–‡ä»¶ç¼–è¾‘chgrpä½œç”¨ä¿®æ”¹æ–‡ä»¶å±ç»„ï¼ˆchange groupï¼‰ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šchgrp [å‚æ•°] [ç›®å½•]# å¸¸ç”¨å‚æ•° # å’Œ-vç±»ä¼¼ï¼Œä½†æ˜¯-cæ˜¯åªæ˜¾ç¤ºå‘ç”Ÿä¿®æ”¹çš„éƒ¨åˆ† -c, --changes like verbose but report only when a change is made # ä¸æ˜¾ç¤ºæŠ¥é”™ -f, --silent, --quiet suppress most error messages # è¾“å‡ºå¯¹æ¯ä¸ªæ–‡ä»¶çš„å¤„ç†è¿‡ç¨‹ -v, --verbose output a diagnostic for every file processed # é€’å½’å¤„ç†å­ç›®å½• -R, --recursive operate on files and directories recursively chownä½œç”¨ä¿®æ”¹æ–‡ä»¶å±ç»„å’Œå±ä¸»ï¼ˆchange ownerï¼‰ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šchown [å‚æ•°] å±ä¸»:å±ç»„ ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # å’Œ-vç±»ä¼¼ï¼Œä½†æ˜¯-cæ˜¯åªæ˜¾ç¤ºå‘ç”Ÿä¿®æ”¹çš„éƒ¨åˆ† -c, --changes like verbose but report only when a change is made # ä¸æ˜¾ç¤ºæŠ¥é”™ -f, --silent, --quiet suppress most error messages # è¾“å‡ºå¯¹æ¯ä¸ªæ–‡ä»¶çš„å¤„ç†è¿‡ç¨‹ -v, --verbose output a diagnostic for every file processed # é€’å½’å¤„ç†å­ç›®å½• -R, --recursive operate on files and directories recursively chomdä½œç”¨ä¿®æ”¹æ–‡ä»¶çš„æƒé™ï¼ˆchange modeï¼‰ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šchomd å‚æ•° ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # å’Œ-vç±»ä¼¼ï¼Œä½†æ˜¯-cæ˜¯åªæ˜¾ç¤ºå‘ç”Ÿä¿®æ”¹çš„éƒ¨åˆ† -c, --changes like verbose but report only when a change is made # ä¸æ˜¾ç¤ºæŠ¥é”™ -f, --silent, --quiet suppress most error messages # è¾“å‡ºå¯¹æ¯ä¸ªæ–‡ä»¶çš„å¤„ç†è¿‡ç¨‹ -v, --verbose output a diagnostic for every file processed # é€’å½’å¤„ç†å­ç›®å½• -R, --recursive operate on files and directories recursively æƒé™è¯´æ˜Linuxä¸­æƒé™å¯ä»¥ä»¥ä¸¤ç§æ–¹å¼è¯´æ˜ï¼Œä¸€ç§æ˜¯ç¬¦å·ï¼Œä¸€ç§æ˜¯æ•°å­— ä¸¤è€…å­˜åœ¨çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ 1r:4 w:2 x:1 ä½¿ç”¨chmodä¿®æ”¹æ–‡ä»¶æƒé™ 1234567chmod rwxrw---x filename# ä¸¤è€…ä½œç”¨ä¸€è‡´chmod 761 filename# è¯´æ˜ï¼š# 7 -&gt; r + w + x =&gt; 4 + 2 + 1 = 7# 6 -&gt; r + w + - =&gt; 4 + 2 + 0 = 6# 1 -&gt; - + - + x =&gt; 0 + 0 + 1 = 1 catä½œç”¨æŸ¥çœ‹æ–‡ä»¶å†…å®¹ ä½¿ç”¨è¯´æ˜12345678910# cat [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # æ˜¾ç¤ºè¡Œå·ï¼ˆç©ºè¡Œä¹Ÿç¼–å·ï¼‰ -n, --number number all output lines # æ˜¾ç¤ºè¡Œå·ï¼ˆå¤šä¸ªè¿ç»­ç©ºè¡Œç®—ä¸€è¡Œï¼‰ -s, --squeeze-blank suppress repeated empty output lines # æ˜¾ç¤ºè¡Œå·ï¼ˆç©ºè¡Œä¸ç¼–å·ï¼‰ -b, --number-nonblank number nonempty output lines, overrides -n # åœ¨æ¯ä¸€è¡Œç»“å°¾å¤„åŠ ä¸Šä¸€ä¸ª$ -E, --show-ends display $ at end of each line å‚è€ƒæ¡ˆä¾‹1234567891011121314151617181920212223242526# å°†file1.txtæ–‡ä»¶ä¸­çš„å†…å®¹è¾“å‡ºåˆ°copy.txt[root@zhima home]# cat file1.txt &gt; copy.txt [root@zhima home]# lscopy.txt file1.txt university zhima[root@zhima home]# cat copy.txt abcdefg[root@zhima home]# cat file1.txt abcdefg# æŒç»­å†™å…¥è¾“å…¥çš„å†…å®¹åˆ°æ–‡ä»¶input.txt# ç›´åˆ°è¾“å…¥äº†ENDï¼Œé€€å‡ºå¹¶ä¿å­˜[root@zhima home]# cat &gt; input.txt &lt;&lt; END&gt; Hello&gt; world&gt; end&gt; END[root@zhima home]# cat input.txt Helloworldend# å†æ¬¡æ‰§è¡Œå°±ä¼šè¦†ç›–åŸå…ˆæ–‡ä»¶[root@zhima home]# cat &gt; input.txt &lt;&lt; e&gt; overide&gt; e[root@zhima home]# cat input.txt overide moreä½œç”¨åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶ï¼ˆåªèƒ½å‘åæµè§ˆï¼Œä¸èƒ½å‘å‰ï¼‰ ä½¿ç”¨è¯´æ˜123456789101112# æ ¼å¼ï¼šmore [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # æ¯é¡µæ˜¾ç¤ºå‡ è¡Œ -NUM specify the number of lines per screenful # ä¸æ»šåŠ¨ï¼Œå…ˆæ¸…é™¤å±å¹•å†å±•ç¤ºæ–‡æœ¬ -p do not scroll, clean screen and display text # ä¸æ»šåŠ¨ï¼Œå…ˆå±•ç¤ºæ–‡æœ¬å†å–å‡ºæ—§å†…å®¹ -c do not scroll, display text and clean line ends # å‹ç¼©å¤šè¡Œè¿ç»­ç©ºç™½åˆ°ä¸€è¡Œ -s squeeze multiple blank lines into one # ä»ç¬¬å‡ è¡Œå¼€å§‹æ˜¾ç¤º +NUM display file beginning from line number NUM lessä½œç”¨åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼ˆæ—¢å¯ä»¥å‘å‰æµè§ˆåˆå¯ä»¥å‘åæµè§ˆï¼‰ ä½¿ç”¨è¯´æ˜12345678910111213# æ ¼å¼ï¼šless [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° -b è®¾ç½®ç¼“å†²åŒºçš„å¤§å° -e å½“æ–‡ä»¶æ˜¾ç¤ºç»“æŸåè‡ªåŠ¨é€€å‡º -f å¼ºåˆ¶æ‰“å¼€æ–‡ä»¶ -i å¿½ç•¥æœç´¢æ—¶çš„å¤§å°å†™ -m æ˜¾ç¤ºé˜…è¯»è¿›åº¦ç™¾åˆ†æ¯” -N æ˜¾ç¤ºæ¯è¡Œçš„è¡Œå· -o å°†è¾“å‡ºçš„å†…å®¹åœ¨æŒ‡å®šæ–‡ä»¶ä¸­ä¿å­˜èµ·æ¥ -Q ä¸ä½¿ç”¨è­¦å‘ŠéŸ³ -s æ˜¾ç¤ºè¿ç»­ç©ºè¡Œä¸ºä¸€è¡Œ -S åœ¨å•è¡Œæ˜¾ç¤ºè¾ƒé•¿çš„å†…å®¹ï¼Œè€Œä¸æ¢è¡Œæ˜¾ç¤º -x å°†TABå­—ç¬¦æ˜¾ç¤ºä¸ºæŒ‡å®šä¸ªæ•°çš„ç©ºæ ¼å­—ç¬¦ headä½œç”¨æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´å†…å®¹ï¼ˆé»˜è®¤å‰10è¡Œï¼‰ ä½¿ç”¨è¯´æ˜1234567891011121314# æ ¼å¼ï¼šhead [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # åªæ˜¾ç¤ºå¼€å¤´å‰kä¸ªå­—ç¬¦ # åŠ äº†-å°±æ˜¯é™¤äº†å€’æ•°kä¸ªå­—ç¬¦ä¸æ˜¾ç¤ºï¼Œå…¶ä»–éƒ½æ˜¾ç¤º -n, --lines=[-]K print the first K lines instead of the first 10; with the leading &#x27;-&#x27;, print all but the last K lines of each file # åªæ˜¾ç¤ºå¼€å¤´å‰kè¡Œ # åŠ äº†-å°±æ˜¯é™¤äº†å€’æ•°kè¡Œä¸æ˜¾ç¤ºï¼Œå…¶ä»–éƒ½æ˜¾ç¤º -c, --bytes=[-]K print the first K bytes of each file; with the leading &#x27;-&#x27;, print all but the last K bytes of each file # æ˜¾ç¤ºæ–‡ä»¶åçš„å¤´ä¿¡æ¯ -v, --verbose always print headers giving file names tailä½œç”¨æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹ï¼ˆé»˜è®¤å€’æ•°10è¡Œï¼‰ ä½¿ç”¨è¯´æ˜123456789101112# æ ¼å¼ï¼štail [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # æ˜¾ç¤ºæœ€åkä¸ªå­—ç¬¦ -c, --bytes=K output the last K bytes; or use -c +K to output bytes starting with the Kth of each file # æŒç»­æ˜¾ç¤ºæ–‡ä»¶æœ€æ–°è¿½åŠ çš„å†…å®¹ -f, --follow[=&#123;name|descriptor&#125;] output appended data as the file grows; an absent option argument means &#x27;descriptor&#x27; # æ˜¾ç¤ºæœ€åkè¡Œ -n, --lines=K output the last K lines, instead of the last 10; or use -n +K to output starting with the Kth rmä½œç”¨åˆ é™¤æ–‡ä»¶ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šrm [å‚æ•°] ç›®æ ‡æ–‡ä»¶# å¸¸ç”¨å‚æ•° # å¼ºåˆ¶åˆ é™¤ -f, --force ignore nonexistent files and arguments, never prompt # åˆ é™¤å‰è¯¢é—® -i prompt before every removal # é€’å½’åˆ é™¤å­æ–‡ä»¶å¤¹ -r, -R, --recursive remove directories and their contents recursively # æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ -v, --verbose explain what is being done echoä½œç”¨è¾“å‡ºå­—ç¬¦ä¸²æˆ–æå–åçš„å˜é‡å€¼ ä½¿ç”¨è¯´æ˜1# æ ¼å¼ï¼šecho [å‚æ•°] å­—ç¬¦ä¸²/$å˜é‡å å‚è€ƒæ¡ˆä¾‹123456789101112# æ˜¾ç¤ºstudy[root@zhima home]# echo studystudy# æ˜¾ç¤ºç³»ç»Ÿå˜é‡PATHçš„å€¼[root@zhima home]# echo $PATH/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin# å°†å†…å®¹é‡å®šå‘åˆ°path.txtæ–‡ä»¶ä¸­[root@zhima home]# echo $PATH &gt; path.txt[root@zhima home]# cat path.txt /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin grepä½œç”¨æ–‡æœ¬æœç´¢å·¥å…· ä¸ä¹‹å®¹æ˜“æ··æ·†çš„æ˜¯egrepå‘½ä»¤å’Œfgrepå‘½ä»¤ egrepç­‰ä»·äºgrep -Eï¼Œæ”¯æŒæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ fgrepç­‰ä»·äºgrep -Fï¼Œä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œç›´æ¥æŒ‰ç…§å­—ç¬¦ä¸²å†…å®¹è¿›è¡ŒåŒ¹é…ã€‚ ä½¿ç”¨è¯´æ˜12345678910111213141516# æ ¼å¼ï¼šgrep [å‚æ•°] å¾…æœç´¢æ–‡æœ¬ ç›®æ ‡æ–‡ä»¶1 ç›®æ ‡æ–‡ä»¶2 ...# å¸¸ç”¨å‚æ•° # å¿½ç•¥å¤§å°å†™ -i, --ignore-case ignore case distinctions # åªæ˜¾ç¤ºåŒ¹é…çš„è¡Œæ•° -c, --count print only a count of matching lines per FILE # ä¸æç¤ºæ–‡ä»¶å -h, --no-filename suppress the file name prefix on output # è¾“å‡ºå…³é”®è¯ä½ç½®çš„è¡Œå·åŠå†…å®¹ -n, --line-number print line number with output lines # æ˜¾ç¤ºä¸åŒ¹é…çš„è¡Œ -v, --invert-match select non-matching lines # é€’å½’æœç´¢ -r, --recursive like --directories=recurs # åªåˆ—å‡ºåŒ¹é…çš„æ–‡ä»¶å -l, --files-with-matches print only names of FILEs containing matches","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"https://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-æ–‡ä»¶ç®¡ç†","slug":"Linux-æ–‡ä»¶ç®¡ç†","date":"2023-01-07T07:25:34.000Z","updated":"2023-01-10T12:02:12.501Z","comments":true,"path":"javaEE/2023/01/07/Linux-æ–‡ä»¶ç®¡ç†/","link":"","permalink":"https://li-zhi.net.cn/javaEE/2023/01/07/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/","excerpt":"","text":"æ–‡ä»¶ç®¡ç†lsä½œç”¨æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ ä½¿ç”¨è¯´æ˜1234567891011121314151617181920212223242526272829# æ ¼å¼ï¼šls [å‚æ•°] [è·¯å¾„]# å¸¸ç”¨å¯é€‰å‚æ•° # ä¸è¦å¿½ç•¥ä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼Œå³ä¸å¿½ç•¥éšè—æ–‡ä»¶ -a, --all do not ignore entries starting with . # ä»¥åˆ—è¡¨å½¢å¼å±•ç¤ºæ‰€æœ‰çš„æ–‡ä»¶ -l use a long listing format # è¾“å‡ºæ¯ä¸ªæ–‡ä»¶çš„ç´¢å¼•å€¼ -i, --inode print the index number of each file # æŒ‰ç…§æ–‡ä»¶å¤§å°æ’åº -S sort by file size # ä»¥ç›¸åæ¬¡åºå±•ç¤º -r, --reverse reverse order while sorting # åŒ -a ï¼Œä½†ä¸åˆ—å‡º â€œ.â€ (å½“å‰ç›®å½•) åŠ â€œ..â€ (çˆ¶ç›®å½•) -A, --almost-all do not list implied . and .. # æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„ä½œè€…ï¼Œå’Œ-lé…åˆä½¿ç”¨ --author with -l, print the author of each file # é€’å½’æ˜¾ç¤ºæ‰€æœ‰çš„å­æ–‡ä»¶å¤¹ -R, --recursive list subdirectories recursively # æ°´å¹³åˆ—å‡ºæ–‡ä»¶ï¼Œä»¥é€—å·åˆ†éš” -m fill width with a comma separated list of entries # æ–‡ä»¶é¢œè‰²è¯´æ˜ ç™½è‰² æ™®é€šæ–‡ä»¶ è“è‰² æ–‡ä»¶å¤¹ ç»¿è‰² å¯æ‰§è¡Œæ–‡ä»¶ çº¢è‰² å‹ç¼©æ–‡ä»¶ æµ…è“è‰² é“¾æ¥æ–‡ä»¶ çº¢è‰²é—ªçƒ é“¾æ¥çš„æ–‡ä»¶æœ‰é—®é¢˜ é»„è‰² è®¾å¤‡æ–‡ä»¶ å‚è€ƒæ¡ˆä¾‹12345678910111213141516171819202122232425262728# æ˜¾ç¤ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶# PSï¼šæ–‡ä»¶å¤¹ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ï¼Œå«æ–‡ä»¶å¤¹æ–‡ä»¶[root@zhima /]# lsbin boot data dev etc home lib lib64 lost+found media mnt opt proc root run sbin srv sys tmp usr var# ä»¥åˆ—è¡¨å½¢å¼æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸æ˜¾ç¤º.å’Œ..[root@zhima home]# ls -A -ltotal 20-rw-r--r-- 1 root root 4 Jan 8 10:37 file1-rw-r--r-- 1 root root 4 Jan 8 10:41 file2drwxr-xr-x 2 root root 4096 Jan 8 10:47 tempdrwxr-xr-x 3 root root 4096 Jan 5 16:05 universitydrwxr-xr-x 3 root root 4096 Jan 5 16:14 zhima# ä»¥åˆ—è¡¨å½¢å¼æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶[root@zhima home]# ls -a -ltotal 28drwxr-xr-x. 5 root root 4096 Jan 8 10:47 .dr-xr-xr-x. 19 root root 4096 Jan 8 11:19 ..-rw-r--r-- 1 root root 4 Jan 8 10:37 file1-rw-r--r-- 1 root root 4 Jan 8 10:41 file2drwxr-xr-x 2 root root 4096 Jan 8 10:47 tempdrwxr-xr-x 3 root root 4096 Jan 5 16:05 universitydrwxr-xr-x 3 root root 4096 Jan 5 16:14 zhima# æ˜¾ç¤º / ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶[root@zhima home]# ls /bin boot data dev etc home lib lib64 lost+found media mnt opt proc root run sbin srv sys tmp usr var æ–‡ä»¶å±æ€§è¿™é‡Œè¯´ä¸€ä¸‹ls -alä¸­å±•ç¤ºäº†æ–‡ä»¶çš„å“ªäº›å±æ€§ï¼Œåˆ†åˆ«éƒ½ä»£è¡¨ä»€ä¹ˆæ„æ€ 1234567[root@zhima home]# ls -Altotal 20-rw-r--r-- 1 root root 4 Jan 8 10:37 file1-rw-r--r-- 1 root root 4 Jan 8 10:41 file2drwxr-xr-x 2 root root 4096 Jan 8 10:47 tempdrwxr-xr-x 3 root root 4096 Jan 5 16:05 universitydrwxr-xr-x 3 root root 4096 Jan 5 16:14 zhima å°†æ¯ä¸€è¡Œåˆ†ä¸º6ç»„æ¥çœ‹ ç¬¬ä¸€ç»„ 12345678910111213141516# è¿™ä¸€ç»„å›ºå®š10ä¸ªå­—ç¬¦# ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼Œæœ‰ä¸‹é¢å¸¸è§çš„å‡ ç§ d æ–‡ä»¶å¤¹ - æ™®é€šæ–‡ä»¶ l é“¾æ¥æ–‡ä»¶ï¼ˆLinked Fileï¼‰ b è£…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å¯èƒ½æœ‰ä¾›å­˜å‚¨çš„æ¥å£è®¾å¤‡ c è£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜æˆ–è€…é¼ æ ‡# å9ä¸ªå­—ç¬¦è¡¨ç¤ºæ“ä½œæƒé™ï¼Œæ¯3ä¸ªå­—ç¬¦ä¸ºä¸€ç»„# ä¸‹é¢æ˜¯å››ç§æƒé™ç±»å‹çš„è¡¨ç¤º r readï¼ˆå¯è¯»ï¼‰ w writeï¼ˆå¯å†™ï¼‰ x executeï¼ˆå¯æ‰§è¡Œï¼‰ - æ²¡æœ‰æ­¤æƒé™# ç¬¬ä¸€ç»„ä¸‰ä¸ªå­—ç¬¦æ˜¯è¡¨ç¤º å±ä¸»ï¼ˆæ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰ å¯¹æ­¤æ–‡ä»¶çš„æƒé™# ç¬¬äºŒç»„ä¸‰ä¸ªå­—ç¬¦æ˜¯è¡¨ç¤º å±ç»„ï¼ˆæ–‡ä»¶çš„æ‰€æœ‰è€…çš„åŒç»„çš„ç”¨æˆ·ï¼‰ å¯¹æ­¤æ–‡ä»¶çš„æƒé™# ç¬¬ä¸‰ç»„ä¸‰ä¸ªå­—ç¬¦æ˜¯è¡¨ç¤º å…¶ä»–ç”¨æˆ· å¯¹æ­¤æ–‡ä»¶çš„æƒé™è¯´æ˜ ç¬¬äºŒç»„ 1234# æ­¤æ–‡ä»¶æ˜¯æ–‡ä»¶å¤¹æ–‡ä»¶ æ­¤ä½æ•°å­—è¡¨ç¤ºçš„æ˜¯æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶æ•°é‡# æ­¤æ–‡ä»¶å¤¹æ˜¯æ–‡ä»¶ æ­¤ä½æ•°å­—å›ºå®šæ˜¯1 ç¬¬ä¸‰ç»„ 12# ç¬¬ä¸€åˆ—æ˜¯å±ä¸»# ç¬¬ä¸€åˆ—æ˜¯å±ç»„ ç¬¬å››ç»„ 1# æ–‡ä»¶å¤§å° ç¬¬äº”ç»„ 1# æ–‡ä»¶åˆ›å»ºæ—¶é—´ ç¬¬å…­ç»„ 1# æ–‡ä»¶å cpä½œç”¨å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• ä½¿ç”¨è¯´æ˜12345678910111213141516171819202122# æ ¼å¼ï¼šcp [å‚æ•°] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶[root@zhima home]# cp file1 file2# å¸¸ç”¨å¯é€‰å‚æ•° # è‹¥ç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥è¦†ç›– -f, --force if an existing destination file cannot be opened, remove it and try again # é€’å½’å¤åˆ¶æ–‡ä»¶å¤¹ -R, -r, --recursive copy directories recursively # è¦†ç›–å‰è¯¢é—® -i, --interactive prompt before overwrite # è¯¦ç»†æ˜¾ç¤ºå¤åˆ¶è¿‡ç¨‹ -v, --verbose explain what is being done # å»ºç«‹ç¡¬é“¾æ¥ -l, --link hard link files instead of copying # å»ºç«‹è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰ -s, --symbolic-link make symbolic links instead of copying # ä¿ç•™æºæ–‡ä»¶æˆ–è€…ç›®å½•çš„æ‰€æœ‰å±æ€§ -p same as --preserve=mode,ownership,timestamps # å½“å¤åˆ¶ç¬¦å·è¿æ¥æ—¶ï¼ŒæŠŠç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ä¹Ÿå»ºç«‹ä¸ºç¬¦å·è¿æ¥ï¼Œå¹¶æŒ‡å‘ä¸æºæ–‡ä»¶æˆ–ç›®å½•è¿æ¥çš„åŸå§‹æ–‡ä»¶æˆ–ç›®å½• -d same as --no-dereference --preserve=links # ç­‰åŒäº -p -d -r -a, --archive same as -dR --preserve=all å‚è€ƒæ¡ˆä¾‹1234567891011121314# å°†æºæ–‡ä»¶file1å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶file2[root@zhima home]# lsfile1 temp university zhima[root@zhima home]# cp file1 file2[root@zhima home]# lsfile1 file2 temp university zhima# å°†æºæ–‡ä»¶file1å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶file2ï¼Œå¦‚æœå­˜åœ¨file2ï¼Œåˆ™æ‹·è´ä¸€ä»½[root@zhima home]# lsfile1 file2 temp university zhima[root@zhima home]# cp -b file1 file2cp: overwrite â€˜file2â€™? y[root@zhima home]# lsfile1 file2 file2~ temp university zhima mkdirä½œç”¨åˆ›å»ºç›®å½•æ–‡ä»¶ ä½¿ç”¨è¯´æ˜123456789# æ ¼å¼ï¼šmkdir [å‚æ•°] ç›®å½•å[root@zhima home]# mkdir temp# å¸¸ç”¨å‚æ•° # åˆ›å»ºç›®å½•çš„æ—¶å€™è®¾ç½®æƒé™ -m, --mode=MODE set file mode (as in chmod) # é€’å½’åˆ›å»ºå¤šçº§ç›®å½• -p, --parents no error if existing, make parent directories as needed # æ˜¾ç¤ºåˆ›å»ºè¿‡ç¨‹ -v, --verbose print a message for each created directory å‚è€ƒæ¡ˆä¾‹12345678910111213141516171819202122# åˆ›å»ºdir1ã€dir2ä¸¤ä¸ªç›®å½•æ–‡ä»¶[root@zhima home]# lsfile1 temp university zhima[root@zhima home]# mkdir dir1 dir2[root@zhima home]# lsdir1 dir2 file1 temp university zhima# é€’å½’åˆ›å»ºç›®å½•# é”™è¯¯ç¤ºèŒƒ[root@zhima home]# mkdir a/b/c/dmkdir: cannot create directory â€˜a/b/c/dâ€™: No such file or directory# æ­£ç¡®ç¤ºèŒƒ[root@zhima home]# mkdir -p a/b/c/d[root@zhima home]# lsa dir1 dir2 file1 temp university zhima# åˆ›å»ºç›®å½•çš„æ—¶å€™æŒ‡å®šæƒé™[root@zhima home]# mkdir -m 700 dir3[root@zhima home]# ls -l# ...çœç•¥æ— å…³æ–‡ä»¶...drwx------ 2 root root 4096 Jan 8 11:32 dir3# ...çœç•¥æ— å…³æ–‡ä»¶... pwdä½œç”¨æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½• å‚è€ƒæ¡ˆä¾‹123# æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•[root@zhima c]# pwd/home/a/b/c mvä½œç”¨ç§»åŠ¨æ–‡ä»¶æˆ–è€…é‡å‘½å ä½¿ç”¨è¯´æ˜1234567891011# æ ¼å¼ï¼šmv [å‚æ•°] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ # è¦†ç›–å‰è¯¢é—® -i, --interactive prompt before overwrite # ç›´æ¥è¦†ç›–ï¼Œä¸è¯¢é—® -f, --force do not prompt before overwriting # å½“æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œè¦†ç›–å‰ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå¤‡ä»½ -b like --backup but does not accept an argument # å½“æºæ–‡ä»¶æ¯”ç›®æ ‡æ–‡ä»¶æ–°æˆ–è€…ç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™æ‰æ‰§è¡Œç§»åŠ¨æ“ä½œ -u, --update move only when the SOURCE file is newer than the destination file or when the destination file is missing å‚è€ƒæ¡ˆä¾‹123456789101112131415161718# å°†dir1é‡å‘½åä¸ºdir4[root@zhima home]# lsa dir1 file1 temp university zhima[root@zhima home]# mv dir1 dir4[root@zhima home]# lsa dir4 file1 temp university zhima# å°†file1ç§»åŠ¨åˆ°tempæ–‡ä»¶å¤¹ä¸­[root@zhima home]# lsfile1 temp university zhima[root@zhima home]# mv file1 temp/[root@zhima home]# lstemp university zhima# å°†/home/tempç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¤åˆ¶åˆ°å½“å‰å·¥ä½œè·¯å¾„ä¸‹ï¼Œå¹¶ä¸”é‡å‘½åä¸ºdir[root@zhima zhima]# mv -f /home/temp/ ./dir[root@zhima zhima]# lsnextcloud dir cdä½œç”¨åˆ‡æ¢å·¥ä½œç›®å½• Linuxç›®å½•ç»“æ„åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¸€åˆ‡çš†æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯Linuxç³»ç»Ÿä¸­çš„ç›®å½•ç»“æ„ &#x2F;bin: binæ˜¯Binaryçš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ &#x2F;boot: è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxçš„æ—¶å€™ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;dev: devæ˜¯Deviceçš„ç¼©å†™ï¼Œå­˜æ”¾çš„æ˜¯Linuxçš„å¤–è®¾è®¾å¤‡ï¼Œ &#x2F;etc: è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½• &#x2F;home: ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä½¿ç”¨ç”¨æˆ·çš„è´¦å·æ¥å‘½åçš„ &#x2F;lib: è¿™é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;lost+found: è¿™ä¸ªç›®å½•ä¸€èˆ¬æ˜¯ç©ºçš„ï¼Œä½†æ˜¯å½“æœåŠ¡å™¨æ„å¤–å…³é—­çš„æ—¶å€™ï¼Œé‡Œé¢ä¼šå­˜åœ¨ä¸€äº›é”™è¯¯æ–‡ä»¶ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;media: Linuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚uç›˜ï¼Œå…‰é©±ç­‰ç­‰ &#x2F;mnt: è¿™ä¸ªç›®å½•æ˜¯ç»™ç”¨æˆ·æ¥ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼ˆåé¢ä¼šæŠŠæœ¬åœ°æ–‡ä»¶æŒ‚è½½åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼‰ &#x2F;opt: ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€åœ¨çš„ç›®å½• &#x2F;proc: è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œä»–æ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å¾—ç³»ç»Ÿä¿¡æ¯ï¼ˆä¸ç”¨ç®¡ï¼‰ &#x2F;rootï¼ˆä¹Ÿå°±æ˜¯ ~ ï¼‰: è¯¥ç›®å½•æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ç›®å½•ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½• &#x2F;sbin: så°±æ˜¯superçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åº &#x2F;srv: è¯¥ç›®å½•ç”¨æ¥å­˜æ”¾ä¸€äº›å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ® &#x2F;sys: è¿™æ˜¯Linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„æ”¹å˜ï¼Œè¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿsysfs &#x2F;tmp: è¿™ä¸ªç›®å½•ä½¿ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ &#x2F;usr: è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶ &#x2F;usr&#x2F;bin: ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åº &#x2F;usr&#x2F;sbin: è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ **&#x2F;usr&#x2F;src: ** å†…æ ¸æºä»£ç é»˜è®¤å­˜æ”¾çš„åœ°å€ &#x2F;var: è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç€ä¸€äº›ä¸æ–­åœ¨æ‹“å……çš„ä¸œè¥¿ï¼Œä¹ æƒ¯æ€§çš„å°†ä¸€äº›ç»å¸¸ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¯¥ç›®å½•ä¸‹ &#x2F;run: æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ï¼Œå½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰ï¼ˆä¸ç”¨ç®¡ï¼‰ &#x2F;www: å­˜æ”¾æœåŠ¡å™¨ç½‘ç«™çš„ç›¸å…³çš„èµ„æºï¼Œç¯å¢ƒï¼Œç½‘ç«™ ä¸æ˜¯æ¯ä¸€ä¸ªç›®å½•éƒ½ä¸€å®šä¼šå­˜åœ¨ ç„¶åå°±æ˜¯è¦çŸ¥é“è¿™ä¸¤ä¸ªæ¦‚å¿µ å†³å®šè·¯å¾„ ç›¸å¯¹è·¯å¾„ ç»å¯¹è·¯å¾„ï¼šæŒ‡çš„æ˜¯èµ„æºçš„å…¨è·¯å¾„ï¼Œæ¯”å¦‚D:\\APP\\Typora ç›¸å¯¹è·¯å¾„ï¼šæŒ‡çš„æ˜¯èµ„æºåœ¨å½“å‰ç›®å½•ä¸‹çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨åœ¨D:\\APPç›®å½•ä¸‹ï¼Œæˆ‘è¦å®šä½åˆ°Typoraè¿™ä¸ªç›®å½•ï¼Œæˆ‘å¯ä»¥ç›´æ¥ä½¿ç”¨Typoraæ¥è¡¨ç¤ºè¯¥æ–‡ä»¶å¤¹ ä½¿ç”¨è¯´æ˜12345678#è¿›å…¥æ ¹è·¯å¾„ä¸‹çš„usrç›®å½•[root@iZbp18qscowpmxk6xpk38iZ /]#cd /usr#å½“å‰åœ¨æ ¹è·¯å¾„ä¸‹ï¼Œæˆ‘è¦è¿›å…¥usrç›®å½•[root@iZbp18qscowpmxk6xpk38iZ /]#cd usr#è¿”å›ä¸Šä¸€çº§ç›®å½•[root@iZbp18qscowpmxk6xpk38iZ usr]#cd ..","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://li-zhi.net.cn/tags/Linux/"}]},{"title":"ç®—æ³•-éå†äºŒç»´çŸ©é˜µçš„å„ç§èŠ±æ ·","slug":"ç®—æ³•-éå†äºŒç»´çŸ©é˜µçš„å„ç§èŠ±æ ·","date":"2022-10-23T08:05:15.000Z","updated":"2023-03-06T06:45:09.780Z","comments":true,"path":"ç®—æ³•/æŠ€å·§ç¯‡/2022/10/23/ç®—æ³•-éå†äºŒç»´çŸ©é˜µçš„å„ç§èŠ±æ ·/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E6%8A%80%E5%B7%A7%E7%AF%87/2022/10/23/%E7%AE%97%E6%B3%95-%E9%81%8D%E5%8E%86%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5%E7%9A%84%E5%90%84%E7%A7%8D%E8%8A%B1%E6%A0%B7/","excerpt":"","text":"éå†äºŒç»´çŸ©é˜µçš„å„ç§èŠ±æ · PSï¼šå¹²è´§å¾ˆå¤šï¼Œå»ºè®®åˆ†å¤šæ¬¡é£Ÿç”¨ å¸¸è§„éå†1# è¾“å‡ºä»¥ä¸‹åºåˆ—: [1 2 3 4...15 16] è¿™ä¸ªå°±æ˜¯æŒ‰è¡Œéå†å³å¯ ç¤ºä¾‹ä»£ç  123456int len = matrix.length;for (int i = 0; i &lt; len; i++) &#123; for (int j = 0; j &lt; len; j++) &#123; System.out.print(matrix[i][j]+&quot; &quot;); &#125;&#125; æ—‹è½¬éå† PSï¼šæœ¬éå†æ–¹æ³•ä½¿ç”¨ç”Ÿæˆä»¥ä¸‹çŸ©é˜µæ¥è®²è¿°ï¼Œç”Ÿæˆä¼šäº†ï¼Œéå†è‡ªç„¶ä¹Ÿä¼šäº† ç¤ºæ„å›¾ éå†æ€è·¯ 12345# [0,0] [0,1] [0,2] [0,3] ğŸ‘‰å‘å³# [0,4] [1,4] [2,4] [3,4] ğŸ‘‡å‘ä¸‹# [4,4] [4,3] [4,2] [4,1] ğŸ‘†å‘ä¸Š# [4,0] [3,0] [2,0] [1,0] ğŸ‘ˆå‘å·¦# ...... åœˆåœˆæ³•ç¬¬ä¸€ä¸ªæ€è·¯å°±æ˜¯ä¸€åœˆä¸€åœˆçš„éå† å°†æ¯ä¸€ä¸ªåœˆæ‹†ä¸ºå››ä¸ªéƒ¨åˆ† ç¬¬ä¸€ä¸ªå¾ªç¯ç”¨æ¥ç”Ÿæˆæ°´å¹³å‘å·¦çš„æ•°æ® ç¬¬äºŒä¸ªå¾ªç¯ç”¨æ¥ç”Ÿæˆå‚ç›´å‘ä¸‹çš„æ•°æ® ç¬¬ä¸‰ä¸ªå¾ªç¯ç”¨æ¥ç”Ÿæˆæ°´å¹³å‘å³çš„æ•°æ® ç¬¬å››ä¸ªå¾ªç¯ç”¨æ¥ç”Ÿæˆå‚ç›´å‘ä¸Šçš„æ•°æ® æµç¨‹å›¾ç²‰çº¢è‰²çš„æ˜¯æ ‡æ³¨ä¸ºæ¯æ¬¡å¤§å¾ªç¯çš„å¼€å§‹å¤„ PSï¼šå›¾ç‰‡å¾ˆå¤šï¼Œè¿‡ç¨‹å¾ˆè¯¦ç»† ç¤ºä¾‹ä»£ç 123456789101112131415161718192021222324252627282930public int[][] rotateNumber(int n) &#123; int[][] matrix = new int[n][n]; int counter = 1; // n / 2å³è¿™ä¸ªçŸ©é˜µæœ‰å‡ ä¸ªåœˆ for (int i = 0; i &lt; n / 2; i++) &#123; // endå³æœ¬æ¬¡è¿™ä¸ªåœˆçš„å®½-1 int end = n - i - 1; // â†’ for (int j = i; j &lt; end; j++) &#123; matrix[i][j] = counter++; &#125; // â†“ for (int j = i; j &lt; end; j++) &#123; matrix[j][end] = counter++; &#125; // â† for (int j = end; j &gt; i; j--) &#123; matrix[end][j] = counter++; &#125; // â†‘ for (int j = end; j &gt; i; j--) &#123; matrix[j][i] = counter++; &#125; &#125; // å¦‚æœæ˜¯å¥‡æ•°ï¼Œå•ç‹¬å¤„ç†ä¸­é—´é‚£ä¸€æ ¼æ•°æ® if (n % 2 != 0) &#123; matrix[n / 2][n / 2] = n * n; &#125; return matrix;&#125; æ¨ªå¹³ç«–ç›´æ³•ï¼ˆæ¨èï¼‰è¿™ç§æ–¹æ³•æ˜¯é€šè¿‡å››ä¸ªè¾¹ç•Œæ¥è¾…åŠ©ç”ŸæˆçŸ©é˜µ å››ä¸ªè¾¹ç•Œçš„ç¤ºæ„å›¾ ç¤ºä¾‹ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243public int[][] rotateNumber(int n)&#123; // ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„æ—‹è½¬æ•°å­—çŸ©é˜µ int[][] matrix = new int[n][n]; // è®¡æ•°å™¨ int counter = 1; // ä¸Šè¾¹ç•Œ int up = 0; // ä¸‹è¾¹ç•Œ int down = n-1; // å·¦è¾¹ç•Œ int left = 0; // å³è¾¹ç•Œ int right = n-1; // å½“ counter æ¯” n * n å°å°±ä¸€ç›´å¾ªç¯ while (counter &lt;= n * n) &#123; // éå†ä¸Šè¾¹ç•Œçš„é‚£ä¸€è¡Œ for (int j = left; j &lt;= right; j++) &#123; matrix[up][j] = counter++; &#125; // ä¸Šè¾¹ç•Œå‘ä¸‹ç§»åŠ¨ä¸€è¡Œ up++; // éå†å³è¾¹ç•Œçš„é‚£ä¸€è¡Œ for (int i = up; i &lt;= down; i++) &#123; matrix[i][right] = counter++; &#125; // å³è¾¹ç•Œå‘å·¦ç§»åŠ¨ä¸€è¡Œ right--; // éå†ä¸‹è¾¹ç•Œçš„é‚£ä¸€è¡Œ for (int j = right; j &gt;= left; j--) &#123; matrix[down][j] = counter++; &#125; // ä¸‹è¾¹ç•Œå‘ä¸Šç§»åŠ¨ä¸€è¡Œ down--; // éå†å·¦è¾¹ç•Œçš„é‚£ä¸€è¡Œ for (int i = down; i &gt;= up; i--) &#123; matrix[i][left] = counter++; &#125; // å·¦è¾¹ç•Œå‘å³ç§»åŠ¨é‚£ä¸€è¡Œ left++; &#125; // è¿”å›ç»“æœæ•°ç»„ return matrix;&#125; æ–œéå†1# è¾“å‡ºæ‰€æœ‰ç”±å·¦ä¸Šå‘å³ä¸‹æ–¹å‘çš„å¯¹è§’çº¿: [13 9 14 5 10 15 1 6 11 16 2 7 12 3 8 4] åç§»Xæ³•å’Œå¾€å¸¸ä¸€æ ·éå†ç¬¬ä¸€è¡Œï¼Œ[0,0] [0,1] [0,2] [0,3] [0,4] å¯ä»¥å‘ç°ä¸­é—´é‚£ä¸ªå¯¹è§’çº¿æ˜¯è¿™ä¸€è¡Œå‘ä¸‹åç§»çš„ç»“æœï¼Œä½†æ˜¯ä¸åŒçš„ä½ç½®åœ¨ X æ–¹å‘ä¸Šçš„åç§»é‡æ˜¯ä¸ä¸€æ ·çš„ éå†ç¬¬äºŒè¡Œ[1,0] [1,1] [1,2] [1,3] [1,4] å¯ä»¥çœ‹åˆ°å’Œåˆšåˆšç¬¬ä¸€è¡Œä¸€æ ·ï¼Œæ¯ä¸€åˆ—å‘ä¸‹åç§»ä¸€å®šé‡å°±å¯ä»¥å¾—åˆ°ä¸»å¯¹è§’çº¿ä¸‹é¢çš„é‚£ä¸ªå¯¹è§’çº¿äº† ï¼ˆè¿™é‡Œå…ˆä¸è¦ç®¡è¶Šç•Œçš„é—®é¢˜ï¼Œå…ˆæŠŠæ€è·¯ç†æ¸…æ¥šï¼Œå†åœ¨ä»£ç é‡Œé¢è§£å†³è¶Šç•Œé—®é¢˜ï¼‰ å…ˆå†™å‡ºéå†æ¯ä¸€è¡Œçš„åˆå§‹ä»£ç ï¼Œç„¶åæˆ‘ä»¬åœ¨è¿™ä¸ªä¸Šé¢æ”¹é€  12345for (int i = 0; i &lt; len; i++) &#123; for (int j = 0; j &lt; len; j++) &#123; System.out.println(matrix[i][j]); &#125;&#125; åœ¨éå†æ¯ä¸€è¡Œçš„æƒ…å†µï¼Œå‘ä¸‹åç§»å°±æ˜¯å¯¹è§’çº¿äº† æ¯ä¸€åˆ—çš„åç§»é‡éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¥ä¸‹æ¥è¦è§£å†³çš„å°±æ˜¯å¦‚ä½•ç®—å‡ºæ¯ä¸€åˆ—çš„åç§»é‡ ç»è¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œå½“å‰è¿™ä¸€åˆ—çš„åç§»é‡å°±æ˜¯å½“å‰çš„åˆ—å€¼ï¼Œé‚£ä¹ˆå°±å¥½åŠäº†ç›´æ¥ç”¨jå°±å¯ä»¥äº† 12345for (int i = 0; i &lt; len; i++) &#123; for (int j = 0; j &lt; len; j++) &#123; System.out.println(matrix[i + j][j]); &#125;&#125; ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¾—åˆ°çš„å¯¹è§’çº¿æ˜¯éƒ¨åˆ†ä¸åˆæ³•çš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æˆªå–åˆæ³•çš„å¯¹è§’çº¿éƒ¨åˆ† å› ä¸ºå¯¹è§’çº¿æ˜¯ç”±æ¯ä¸€è¡Œå‘ä¸‹åç§»è€Œæ¥ï¼Œå¯¹è§’çº¿è¶Šç•Œçš„æ ¹æœ¬åŸå› æ˜¯æ¯ä¸€è¡Œéå†å¤šäº† é‚£ä¹ˆåªè¦é€æ¸å‡å°‘æ¯ä¸€è¡Œçš„éå†é•¿åº¦å³å¯ï¼Œæ¯ä¸€è¡Œå°‘éå† i çš„é•¿åº¦å³å¯ 12345for (int i = 0; i &lt; len; i++) &#123; for (int j = 0; j &lt; len - i; j++) &#123; System.out.println(matrix[i + j][j]); &#125;&#125; å®Œæ•´ç¤ºä¾‹ä»£ç  PSï¼šæ³¨æ„å³ä¸Šè§’ 123456789101112for (int i = len - 1; i &gt;= 0; i--) &#123; for (int j = 0; j &lt; len - i; j++) &#123; System.out.println(matrix[i + j][j]); &#125;&#125;for (int i = len - 2; i &gt;= 0; i--) &#123; for (int j = len - 1 - i; j &lt; len; j++) &#123; // åç§»é‡ int offset = len - 1 - j; System.out.println(matrix[i - offset][j]); &#125;&#125; åç§»Yæ³•è¿™ä¸ªæ–¹æ³•å’Œåç§» X æ³•æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ åªä¸è¿‡ä»éå†æ¯ä¸€è¡Œå˜æˆäº†éå†æ¯ä¸€åˆ— å’Œåˆšåˆšä¸€æ ·ï¼Œå…ˆå†™å‡ºéå†æ¯ä¸€åˆ— 12345for (int j = 0; j &lt; len; j++) &#123; for (int i = 0; i &lt; len; i++) &#123; System.out.println(matrix[i][j]); &#125;&#125; ç„¶åå‘å³è¾¹åç§» 12345for (int j = 0; j &lt; len; j++) &#123; for (int i = 0; i &lt; len; i++) &#123; System.out.println(matrix[i][j + i]); &#125;&#125; å¯¹è§’çº¿ä¸åˆæ³•ï¼Œæˆªå–åˆæ³•éƒ¨åˆ† 12345for (int j = 0; j &lt; len; j++) &#123; for (int i = 0; i &lt; len - j; i++) &#123; System.out.println(matrix[i][j + i]); &#125;&#125; å®Œæ•´ç¤ºä¾‹ä»£ç  PSï¼šæ³¨æ„å·¦ä¸‹è§’ 1234567891011for (int j = 0; j &lt; len; j++) &#123; for (int i = len - 1 - j; i &lt; len; i++) &#123; int offset = len - 1 - i; System.out.println(matrix[i][j - offset]); &#125;&#125;for (int j = 1; j &lt; len; j++) &#123; for (int i = 0; i &lt; len - j; i++) &#123; System.out.println(matrix[i][i + j]); &#125;&#125; åç§»å¯¹è§’çº¿æ³•ï¼ˆæ¨èï¼‰å¯ä»¥å‘ç°åç§» X æ³•å’Œåç§» Y æ³•éƒ½æ¯”è¾ƒéº»çƒ¦ æ‰€ä»¥æˆ‘æ¯”è¾ƒæ¨èè¿™ç§æ–¹æ³•ï¼Œæ ¹æ®å¯¹è§’çº¿æ¥åšåç§»å°±ä¼šç®€å•å¾ˆå¤š ä»å·¦ä¸Šé¡¶è§’åˆ°å³ä¸‹é¡¶è§’çš„é‚£æ¡å¯¹è§’çº¿å¦‚ä¸‹[0,0] [1,1] [2,2] [3,3] @è¡¨ç¤ºè¶Šç•Œèˆå¼ƒ æ•´ä½“å¾€ä¸‹åç§» 1 ä½ï¼Œå°±æ˜¯[1,0] [2,1] [3,2] [4,3](@) æ•´ä½“å¾€ä¸‹åç§» 2 ä½ï¼Œå°±æ˜¯[2,0] [3,1] [4,2](@) [5,3](@) æ•´ä½“å¾€ä¸‹åç§» 3 ä½ï¼Œå°±æ˜¯[3,0] [4,1] [5,2](@) [6,3](@) æ•´ä½“å¾€ä¸Šåç§» 1 ä½ï¼Œå°±æ˜¯[-1,0](@) [0,1] [1,2] [2,3] æ•´ä½“å¾€ä¸Šåç§» 2 ä½ï¼Œå°±æ˜¯[-2,0](@) [-1,1](@) [-1,0][0,2] [1,3] æ•´ä½“å¾€ä¸Šåç§» 3 ä½ï¼Œå°±æ˜¯[-3,0](@) [-2,1](@) [-1,2](@) [0,3] å¦‚ä½•è§£å†³è¶Šç•Œ æ—¢ç„¶å®Œæ•´çš„å¯¹è§’çº¿åç§»ä¼šå‡ºç°è¶Šç•Œï¼Œé‚£å°±åç§»éƒ¨åˆ†çš„å¯¹è§’çº¿ä¸å°±è¡Œäº† 1234567891011121314151617181920212223int len = matrix.length;// è¾“å‡ºéƒ¨åˆ†å¯¹è§’çº¿ï¼Œä»å®Œæ•´å¼€å§‹é€æ¸å˜çŸ­for (int offset = 0; offset &lt; len; offset++) &#123; for (int i = 0; i &lt; len - offset; i++) &#123; System.out.println(matrix[i][i]); &#125;&#125;// è¿™æ—¶å€™è¾“å‡ºçš„ä¾æ¬¡æ˜¯// [0,0] [1,1] [2,2] [3,3] (offset=0)// [0,0] [1,1] [2,2] (offset=1)// [0,0] [1,1] (offset=2)// [0,0] (offset=3)// é‚£ä¹ˆåªéœ€è¦æ ¹æ®éƒ¨åˆ†çš„å¯¹è§’çº¿å‘ä¸‹åç§»å³å¯for (int offset = 0; offset &lt; len; offset++) &#123; for (int i = 0; i &lt; len - offset; i++) &#123; System.out.println(matrix[i + offset][i]); &#125;&#125;// è¿™æ ·çš„è¾“å‡ºç»“æœå°±æ˜¯// [0,0] [1,1] [2,2] [3,3] (offset=0)// [1,0] [2,1] [3,2] (offset=1)// [2,0] [3,1] (offset=2)// [3,0] (offset=3) åœ¨ç†è§£äº†ä¸Šè¿°çš„æ–¹æ³•åï¼Œä¿®æ”¹ä¸‹æ¥å®Œæˆç¬¬ä¸€éƒ¨åˆ†çš„éå†ï¼Œå³è¿™ä¸€å—çš„éå† è¿™ä¸ªå’Œåˆšåˆšä¸åŒçš„åœ°æ–¹åœ¨äºå®ƒçš„åç§»é‡æ˜¯ä»å¤§åˆ°å°çš„ï¼Œä¸Šé¢é‚£ä¸ªç†è§£äº†ï¼Œè¿™ä¸ªåº”è¯¥ä¹Ÿä¸éš¾ 1234567891011// [3,0]// [2,0] [3,1]// [1,0] [2,1] [3,2]// [0,0] [1,1] [2,2] [3,3]// offsetæ˜¯å¯¹è§’çº¿åœ¨xæ–¹å‘çš„åç§»é‡for (int offset = len - 1; offset &gt;= 0; offset--) &#123; for (int i = 0; i &lt; len - offset; i++) &#123; // å‘ä¸‹åç§» System.out.println(matrix[i + offset][i]); &#125;&#125; å®Œæ•´ç¤ºä¾‹ä»£ç 123456789101112131415public void tiltPrint(int[][] matrix)&#123; int len = matrix.length; for (int offset = len - 1; offset &gt;= 0; offset--) &#123; for (int i = 0; i &lt; len - offset; i++) &#123; // å‘ä¸‹åç§» System.out.println(matrix[i + offset][i]); &#125; &#125; for (int offset = 1; offset &lt; len; offset++) &#123; for (int i = offset; i &lt; len; i++) &#123; // å‘ä¸Šåç§» System.out.println(matrix[i - offset][i]); &#125; &#125;&#125; èºæ—‹éå†1# è¾“å‡ºèºæ—‹éå†é¡ºåº: [1 2 3 4 5 6 7 8 9 10 11 ... 21] æ‹†è§£æ³•å°†è¿™ä¸ªè·¯å¾„æ‹†è§£å¼€ æ‹†è§£å¦‚ä¸‹ 123# [0,0] -- [0,1] [1,0]# [2,0] [1,1] [0,2] --- [0,3] [1,2] [2,1] [3,0]# [4,0] [3,1] [2,2] [1,3] [0,4] --- [0,5] [1,4] [2,3] [3,2] [4,1] [5,0] æµç¨‹å›¾ç²‰çº¢è‰²çš„æ˜¯æ ‡æ³¨ä¸ºæ¯æ¬¡å¤§å¾ªç¯çš„å¼€å§‹å¤„ æ ‡æ³¨å†…å±‚å¾ªç¯åˆå§‹åŒ–çš„æ˜¯è¯¥å¾ªç¯åˆšè¦å¼€å§‹æ—¶å€™çš„æ•°æ® PSï¼šå›¾ç‰‡å¾ˆå¤šï¼Œè¿‡ç¨‹å¾ˆè¯¦ç»† ç¤ºä¾‹ä»£ç 12345678910111213141516171819202122232425// iè®°å½•äº†æ¬¡æ•°å’Œæ¯ä¸€æ¬¡è¾“å‡ºå¼€å§‹çš„ç‚¹çš„row// 0 2 4for (int i = 0; i &lt; matrix.length; i+=2) &#123; // ç¬¬ä¸€ä¸ªè¾“å‡ºçš„æ•°å­—çš„columnåæ ‡å¼€å¤´éƒ½æ˜¯0 // [0,0][2,0][4,0] int j = 0; // ç¬¬ä¸€ä¸ªå†…å¾ªç¯æ˜¯å·¦ä¸‹è§’å¾€å³ä¸Šè§’æ–¹å‘çš„ // kï¼ˆrowï¼‰ä»iè‡ªå‡ // jï¼ˆcolumnï¼‰è‡ªå¢åˆ°rowåˆ°0 for (int k = i; k &gt;= 0; k--) &#123; System.out.print(matrix[k][j++]+&quot; &quot;); &#125; // è®°å½•ç»“æŸä½ç½® int end=j; // å¦‚æœnæ˜¯å¥‡æ•°ï¼Œåœ¨æœ€åä¸€æ¬¡å¤§å¾ªç¯ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªå°å¾ªç¯äº† if(j &gt;= matrix.length)&#123; break; &#125; // ç¬¬äºŒä¸ªå†…å¾ªç¯æ˜¯å³ä¸Šè§’å¾€å·¦ä¸‹è§’æ–¹å‘çš„ // kï¼ˆrowï¼‰ä»0å¼€å§‹è‡ªå¢åˆ°end // jï¼ˆcolumnï¼‰è‡ªå‡åˆ°kåˆ°end for (int k = 0; k &lt;= end; k++) &#123; System.out.print(matrix[k][j--]+&quot; &quot;); &#125;&#125; è¿ç»­æ³•æŠŠè¿™äº›è·¯å¾„å½“ä½œæ˜¯è¿ç»­çš„ ç»´æŠ¤ä¸€ä¸ª[rowIndex,columnIndex]æ¥èµ°è¿™ä¸€æ¡è¿ç»­çš„è·¯å¾„ ç¤ºä¾‹ä»£ç 123456789101112131415161718192021int row = matrix.length;int column = matrix[0].length;int whole = row * column;int counter = 0;int rowIndex = 0;int columnIndex = 0;// åªè¦è®¡æ•°å™¨æ¯”ä¸€åŠå°‘ï¼Œå°±è¯´æ˜è¿˜æ²¡èµ°å®Œwhile (counter &lt; whole / 2) &#123; while (rowIndex &gt;= 0) &#123; System.out.println(matrix[rowIndex--][columnIndex++]); counter++; &#125; // å¤ä½ rowIndex = 0; while (columnIndex &gt;= 0) &#123; System.out.println(matrix[rowIndex++][columnIndex--]); counter++; &#125; // å¤ä½ columnIndex = 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"æŠ€å·§ç¯‡","slug":"ç®—æ³•/æŠ€å·§ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E6%8A%80%E5%B7%A7%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€37-Hardã€‘è§£æ•°ç‹¬","slug":"ã€37-Hardã€‘è§£æ•°ç‹¬","date":"2022-10-20T03:14:43.000Z","updated":"2023-03-06T06:46:27.181Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/10/20/ã€37-Hardã€‘è§£æ•°ç‹¬/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/10/20/%E3%80%9037-Hard%E3%80%91%E8%A7%A3%E6%95%B0%E7%8B%AC/","excerpt":"","text":"è§£æ•°ç‹¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚ æ•°ç‹¬çš„è§£æ³•éœ€ éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰ æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ &#39;.&#39; è¡¨ç¤ºã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šboard = [[&quot;5&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],[&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;,&quot;9&quot;,&quot;5&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],[&quot;.&quot;,&quot;9&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;],[&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;3&quot;],[&quot;4&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;],[&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;],[&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;8&quot;,&quot;.&quot;],[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;4&quot;,&quot;1&quot;,&quot;9&quot;,&quot;.&quot;,&quot;.&quot;,&quot;5&quot;],[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;9&quot;]]è¾“å‡ºï¼š[[&quot;5&quot;,&quot;3&quot;,&quot;4&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;1&quot;,&quot;2&quot;],[&quot;6&quot;,&quot;7&quot;,&quot;2&quot;,&quot;1&quot;,&quot;9&quot;,&quot;5&quot;,&quot;3&quot;,&quot;4&quot;,&quot;8&quot;],[&quot;1&quot;,&quot;9&quot;,&quot;8&quot;,&quot;3&quot;,&quot;4&quot;,&quot;2&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;],[&quot;8&quot;,&quot;5&quot;,&quot;9&quot;,&quot;7&quot;,&quot;6&quot;,&quot;1&quot;,&quot;4&quot;,&quot;2&quot;,&quot;3&quot;],[&quot;4&quot;,&quot;2&quot;,&quot;6&quot;,&quot;8&quot;,&quot;5&quot;,&quot;3&quot;,&quot;7&quot;,&quot;9&quot;,&quot;1&quot;],[&quot;7&quot;,&quot;1&quot;,&quot;3&quot;,&quot;9&quot;,&quot;2&quot;,&quot;4&quot;,&quot;8&quot;,&quot;5&quot;,&quot;6&quot;],[&quot;9&quot;,&quot;6&quot;,&quot;1&quot;,&quot;5&quot;,&quot;3&quot;,&quot;7&quot;,&quot;2&quot;,&quot;8&quot;,&quot;4&quot;],[&quot;2&quot;,&quot;8&quot;,&quot;7&quot;,&quot;4&quot;,&quot;1&quot;,&quot;9&quot;,&quot;6&quot;,&quot;3&quot;,&quot;5&quot;],[&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;2&quot;,&quot;8&quot;,&quot;6&quot;,&quot;1&quot;,&quot;7&quot;,&quot;9&quot;]]è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š æç¤ºï¼š board.length == 9 board[i].length == 9 board[i][j] æ˜¯ä¸€ä½æ•°å­—æˆ–è€… &#39;.&#39; é¢˜ç›®æ•°æ® ä¿è¯ è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£ Related Topics æ•°ç»„ å›æº¯ çŸ©é˜µ å›æº¯è¿™é‡Œéœ€è¦å…³æ³¨ä¸€ä¸‹é¢˜ç›®ç»™çš„æç¤ºï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€åˆ†æ ç¬¬ä¸€æ¡å’Œç¬¬äºŒæ¡å‘Šè¯‰æˆ‘ä»¬ï¼Œä¼ å…¥çš„æ•°ç»„æ˜¯ä¸€ä¸ªå›ºå®š9 * 9çš„çŸ©é˜µ ç¬¬ä¸‰æ¡å‘Šè¯‰æˆ‘ä»¬&#39;.&#39;æŒ‡çš„æ˜¯ç©ºä½ ç¬¬å››æ¡å‘Šè¯‰æˆ‘ä»¬é¢˜ç›®ä¼ å…¥çš„æ•°ç‹¬åªæœ‰ä¸€ä¸ªç­”æ¡ˆï¼Œè¿™å°±ä»£è¡¨ç€æˆ‘æœ€åç©·ä¸¾å‡ºæ¥è§£æ»¡è¶³æ¡ä»¶çš„åªæœ‰ä¸€ä¸ª å›æº¯ä¸‰è¦ç´  1ã€è·¯å¾„ï¼šå¡«ä¸Šçš„æ•°å­—ï¼Œå°±æ˜¯æ£‹ç›˜ä¸Šçš„æ•°å­— 2ã€é€‰æ‹©åˆ—è¡¨ï¼š&#39;1&#39;-&#39;9&#39; 3ã€ç»“æŸæ¡ä»¶ï¼šç©·ä¸¾åˆ°æœ€åä¸€ä¸ªæ ¼å­ï¼ˆç”±ç¬¬å››æ¡æç¤ºå¯å¾—ï¼‰ ä¸‹é¢ç›´æ¥ä¸Šä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263class Solution &#123; public void solveSudoku(char[][] board) &#123; // è¾…åŠ©å‡½æ•° solveSudoku(board,0,0); &#125; // è·¯å¾„ï¼šå·²ç»è¢«å¡«ä¸Šæ•°å­—çš„æ£‹ç›˜ï¼Œå³rowä¹‹å‰ // å¯¹æ¯ä¸€ä¸ªæ ¼å­çš„é€‰æ‹©åˆ—è¡¨: 1 - 9 // ç»“æŸæ¡ä»¶ï¼šç©·ä¸¾åˆ°æœ€åä¸€è¡Œ private boolean solveSudoku(char[][] board, int row, int column) &#123; // è¿”å›trueï¼Œç»“æŸé€’å½’ // åˆ°äº†æœ€åä¸€è¡Œ if (row==board.length)&#123; return true; &#125; // åˆ°äº†è¿™ä¸€è¡Œçš„ç»“å°¾äº†ï¼Œæ¢è¡Œ if (column==board[0].length)&#123; return solveSudoku(board,row+1,0); &#125; // å¦‚æœå·²ç»æœ‰æ•°å­—äº†ï¼Œç›´æ¥ä¸‹ä¸€åˆ— // å› ä¸ºç»™å‡ºçš„æ£‹ç›˜ä¸­æœ‰çš„æ ¼å­ä¸­æ˜¯æœ‰æ•°å­—çš„ if (board[row][column]!=&#x27;.&#x27;)&#123; return solveSudoku(board,row,column+1); &#125; // ç©·ä¸¾ for (char ch = &#x27;1&#x27;; ch &lt;= &#x27;9&#x27;; ch++) &#123; // å¦‚æœè¦å¡«å†™çš„æ•°å­—ä¸åˆæ³•ï¼Œç›´æ¥è·³è¿‡æ­¤æ¬¡é€‰æ‹© if (!valid(board,row,column,ch))&#123; continue; &#125; // åšå‡ºé€‰æ‹© board[row][column] = ch; // å¦‚æœå·²ç»å¾—åˆ°ç­”æ¡ˆï¼Œç›´æ¥ç»“æŸç©·ä¸¾ï¼Œè¿”å›true if(solveSudoku(board,row,column+1))&#123; return true; &#125; // æ’¤é”€é€‰æ‹© board[row][column] = &#x27;.&#x27;; &#125; // [row][column]è¿™ä¸ªæ ¼å­å¡«1-9éƒ½ä¸åˆæ³•ï¼Œå›é€€ä¸Šä¸€ä¸ªæ ¼å­ï¼Œæ’¤é”€ä¸Šä¸€æ¬¡çš„é€‰æ‹© return false; &#125; // åˆ¤æ–­è¦å¡«å…¥[row,column]çš„è¿™ä¸ªkeyæ˜¯å¦ç¬¦åˆè§„åˆ™ private boolean valid(char[][] board, int row, int column, char key) &#123; for (int i = 0; i &lt; board.length; i++) &#123; // è¿™ä¸€åˆ—ä¸èƒ½æœ‰é‡å¤æ•°å­— if (board[i][column]==key)&#123; return false; &#125; // è¿™ä¸€è¡Œä¸èƒ½ç”¨é‡å¤æ•°å­— if (board[row][i]==key)&#123; return false; &#125; // ä¹å®«æ ¼ä¸èƒ½æœ‰é‡å¤æ•°å­— // è¿™é‡Œè¦æ–Ÿé…Œä¸€ä¸‹çš„ if (board[(row / 3) * 3 + i / 3][(column / 3) * 3 + i % 3]==key)&#123; return false; &#125; &#125; return true; &#125;&#125; æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ªvalidå‡½æ•°ä¸­åˆ¤æ–­ä¹å®«æ ¼å†…æ˜¯å¦æœ‰é‡å¤æ•°å­—çš„ä»£ç  123if (board[(row / 3) * 3 + i / 3][(column / 3) * 3 + i % 3]==key)&#123; return false;&#125; 12345row/3 å¯ä»¥å°†å…¶æ˜ å°„åˆ°å…¶å¯¹åº”çš„ä¹å®«æ ¼è¡Œcolumn/3 å¯ä»¥å°†å…¶æ˜ å°„åˆ°å…¶å¯¹åº”çš„ä¹å®«æ ¼åˆ—i -&gt; [0,1,2,3,4,5,6,7,8]i/3 -&gt; [0,0,0,1,1,1,2,2,2]i%3 -&gt; [0,1,2,0,1,2,0,1,2] è¿›é˜¶å¦‚æœæˆ‘å°†æç¤ºçš„ç¬¬å››æ¡ï¼Œå³åªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆè¿™ä¸ªæ¡ä»¶åˆ é™¤ï¼Œé‚£è¿™é“é¢˜è¯¥æ€ä¹ˆåšï¼Ÿ å…¶å®ä¹Ÿä¸éš¾ï¼Œåªè¦æ”¹å˜ç»“æŸæ¡ä»¶å³å¯ï¼Œä¸Šè¿°ä»£ç æ˜¯ç›´æ¥å°†å¯ä»¥ç©·ä¸¾åˆ°æœ€åçš„ç­”æ¡ˆè¿”å› å› ä¸ºé¢˜ç›®è¯´äº†åªæœ‰å”¯ä¸€è§£ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦å†å¯¹å…¶è¿›è¡Œåˆ¤æ–­ æ—¢ç„¶åˆ é™¤äº†åªæœ‰å”¯ä¸€è§£è¿™ä¸ªæ¡ä»¶ï¼Œé‚£æˆ‘å°±è¦å¯¹ç©·ä¸¾åˆ°æœ€åçš„ç­”æ¡ˆè¿›è¡ŒéªŒè¯ æ€ä¹ˆéªŒè¯å‘¢ï¼Œé‚£å°±æ˜¯éªŒè¯æ¯ä¸€è¡Œæ¯ä¸€åˆ—å¯¹è§’çº¿åŠ èµ·æ¥éƒ½æ˜¯ä¸€æ ·çš„ 12345678910111213141516171819202122232425262728293031private boolean valid(int[][] board)&#123; int sum = Arrays.stream(board[0]).sum(); int row = 0; int column = 0; int downCatercorner = 0; int upCatercorner = 0; // è®¡ç®—è¡Œåˆ—å’Œå¯¹è§’çº¿çš„å’Œ for (int i = 0; i &lt; board.length; i++) &#123; row = 0; for (int j = 0; j &lt; board[0].length; j++) &#123; row += board[i][j]; column += board[j][i]; // ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„å¯¹è§’çº¿ if (i==j)&#123; downCatercorner+=board[i][j]; &#125; // ä»å·¦ä¸‹è§’åˆ°å³ä¸Šè§’çš„å¯¹è§’çº¿ if (i+j==board.length-1)&#123; upCatercorner += board[i][j]; &#125; &#125; // æ¯ä¸€æ¬¡å¾ªç¯ä¸­å¯¹æ¯”è¡Œå’Œåˆ—çš„å’Œ if (row!=sum||column!=sum)&#123; return false; &#125; row = 0; column=0; &#125; // æœ€åå¯¹æ¯”å¯¹è§’çº¿çš„å’Œ return downCatercorner == sum &amp;&amp; upCatercorner == sum;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€22-Mediumã€‘æ‹¬å·ç”Ÿæˆ","slug":"ã€22-Mediumã€‘æ‹¬å·ç”Ÿæˆ","date":"2022-10-18T12:44:00.000Z","updated":"2023-03-06T06:45:49.804Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/10/18/ã€22-Mediumã€‘æ‹¬å·ç”Ÿæˆ/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/10/18/%E3%80%9022-Medium%E3%80%91%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/","excerpt":"","text":"æ‹¬å·ç”Ÿæˆæ•°å­— n ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” æœ‰æ•ˆçš„ æ‹¬å·ç»„åˆã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šn = 3è¾“å‡ºï¼š[&quot;((()))&quot;,&quot;(()())&quot;,&quot;(())()&quot;,&quot;()(())&quot;,&quot;()()()&quot;] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šn = 1è¾“å‡ºï¼š[&quot;()&quot;] æç¤ºï¼š 1 &lt;= n &lt;= 8 Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ å›æº¯ å›æº¯ç›´æ¥ç©·ä¸¾æ‰€æœ‰æƒ…å†µ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475public List&lt;String&gt; generateParenthesis(int n) &#123; // ç»“æœé›† LinkedList&lt;String&gt; res = new LinkedList&lt;&gt;(); // è·¯å¾„ char[] track = new char[n * 2]; // å›æº¯ generateParenthesis(track, 0, res, n); return res;&#125;private void generateParenthesis(char[] track, int index, LinkedList&lt;String&gt; res, int n) &#123; // èµ°åˆ°å¤´äº† if (index == track.length) &#123; // åˆ¤æ–­è·¯å¾„ç»„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦åˆæ³• if (isValid(track)) &#123; res.add(new String(track)); &#125; return; &#125; // åˆ¤æ–­è¿™æ¬¡æ˜¯å¦å¯ä»¥åŠ å…¥å·¦æ‹¬å· if (canAdd(track, index, LEFT_BRACKET)) &#123; track[index] = LEFT_BRACKET; generateParenthesis(track, index + 1, res, n); &#125; // åˆ¤æ–­è¿™æ¬¡æ˜¯å¦å¯ä»¥åŠ å…¥å³æ‹¬å· if (canAdd(track, index, RIGHT_BRACKET)) &#123; track[index] = RIGHT_BRACKET; generateParenthesis(track, index + 1, res, n); &#125;&#125;private boolean isValid(char[] sArray) &#123; // leftä¸ºå‰©ä½™å¤šå°‘å·¦æ‹¬å·æ²¡æœ‰è¢«åŒ¹é… int left = 0; for (int i = 0; i &lt; sArray.length; i++) &#123; char curr = sArray[i]; if (curr == LEFT_BRACKET) &#123; left++; &#125; else if (curr == RIGHT_BRACKET) &#123; left--; // æ¯å‡ºç°ä¸€ä¸ªå³æ‹¬å·ï¼Œå°±å¯¹åº”ä¸€ä¸ªå·¦æ‹¬å·è¢«åŒ¹é… if (left &lt; 0) &#123; return false; &#125; &#125; &#125; // å¦‚æœå…¨éƒ¨åŒ¹é…æˆåŠŸï¼Œè¯´æ˜åˆæ³• return left == 0;&#125;private boolean canAdd(char[] sArray, int index, char bracket) &#123; int left = 0; int right = 0; for (int i = 0; i &lt; index; i++) &#123; char curr = sArray[i]; if (curr == LEFT_BRACKET) &#123; left++; &#125; else if (curr == RIGHT_BRACKET) &#123; left--; right++; &#125; // å¦‚æœå³æ‹¬å·æ•°ç›®å·²ç»æ¯”å·¦æ‹¬å·å¤šäº†ï¼Œè¯´æ˜å·²ç»ä¸åˆæ³•äº† if (right &gt; left) &#123; return false; &#125; &#125; if (bracket == RIGHT_BRACKET) &#123; right++; &#125; else &#123; left++; &#125; // å·¦æ‹¬å·æ•°ç›®æ¯”å³æ‹¬å·å¤šå³å¯ return left &gt;= right;&#125; è¿™ç§æ–¹æ³•çš„é€’å½’æ ‘ä¼šå¾ˆå¤§ åŸå› åœ¨äºä¿®å‰ªçš„åŠ›åº¦ä¸å¤Ÿå¤§ï¼ŒcanAddåªèƒ½åˆ¤æ–­å½“å‰çš„indexä½æ˜¯å¦å¯ä»¥åŠ å…¥choice ä½†æ˜¯æ— æ³•ä¿è¯æœ€åç”Ÿæˆçš„å­—ç¬¦ä¸²æ˜¯ç¬¦åˆå·¦å³æ‹¬å·æ•°ç›®ç›¸ç­‰çš„ æ‰€ä»¥éœ€è¦åœ¨æ»¡è¶³æ¨å‡ºæ¡ä»¶çš„æ—¶å€™ï¼Œå†æ¬¡åˆ¤æ–­æ˜¯å¦ç¬¦åˆå·¦å³æ‹¬å·æ•°ç›®ä¸€è‡´ åŸå› åœ¨äºæˆ‘æ— æ³•æ ¹æ®å·²ä½œå‡ºé€‰æ‹©çš„å·¦å³æ‹¬å·æ•°é‡æ¥åˆ¤æ–­æœ€åæ˜¯å¦åˆæ³• æ¢ä¸‹æ€è·¯ï¼Œç”¨å·¦å³æ‹¬å·çš„å‰©ä½™æ•°é‡å°±å¯ä»¥æ¥åˆ¤æ–­æœ€åæ˜¯å¦åˆæ³•ï¼Œåªè¦right&gt;=leftå³å¯ ä»£ç ä¼˜åŒ– 12345678910111213141516171819202122232425262728293031323334353637383940public List&lt;String&gt; generateParenthesis(int n) &#123; LinkedList&lt;String&gt; res = new LinkedList&lt;&gt;(); char[] track = new char[n * 2]; // indexä»0å¼€å§‹ // è¿˜å‰©ä¸‹nä¸ªå·¦æ‹¬å· // è¿˜å‰©ä¸‹nä¸ªå³æ‹¬å· // traceç”¨æ¥è®°å½•è·¯å¾„ // resç”¨æ¥æ”¶é›†ç»“æœ generateParenthesis(track, 0, n, n, res); return res;&#125;private void generateParenthesis(char[] track, int index, int leftBract, int rightBract, LinkedList&lt;String&gt; res) &#123; // å¦‚æœå‰©ä½™çš„å·¦æ‹¬å·ä¸ªæ•°å°äº0ï¼Œè¯´æ˜å·¦æ‹¬å·å·²ç»è¶…æ ‡äº† if (left &lt; 0)&#123; return; &#125; // å¦‚æœå‰©ä¸‹çš„å³æ‹¬å·æ¯”å·¦æ‹¬å·å°‘ // n = 5 // å‰©ä¸‹äº†4ä¸ªå·¦æ‹¬å·ï¼Œ1ä¸ªå³æ‹¬å· ï¼Œè¿™æ˜¯é”™çš„æƒ…å†µ // å‰©ä¸‹äº†4ä¸ªå³æ‹¬å·ï¼Œ1ä¸ªå·¦æ‹¬å· ï¼Œè¿™æ˜¯å¯¹çš„æƒ…å†µ // å‰©ä¸‹äº†3ä¸ªå³æ‹¬å·ï¼Œ3ä¸ªå·¦æ‹¬å· ï¼Œè¿™æ˜¯å¯¹çš„æƒ…å†µ // è¯´æ˜å·¦æ‹¬å·å¤šæ”¾äº† if (rightBract &lt; leftBract) &#123; return; &#125; // é•¿åº¦åˆ°è¾¾è¦ï¼Œå› ä¸ºä¸ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸²å·²ç»è¢«ä¿®å‰ª // æ‰€ä»¥èƒ½èµ°åˆ°è¿™é‡Œçš„è‚¯å®šæ˜¯åˆæ³•çš„å­—ç¬¦ä¸²äº† // å°†å…¶åŠ å…¥åˆ°ç»“æœé›†åˆä¸­ if (index == track.length) &#123; res.add(new String(track)); return; &#125; // é€‰æ‹©å·¦æ‹¬å· track[index] = LEFT_BRACKET; generateParenthesis(track, index + 1, leftBract - 1, rightBract, res); // é€‰æ‹©å³æ‹¬å· track[index] = RIGHT_BRACKET; generateParenthesis(track, index + 1, leftBract, rightBract - 1, res);&#125; è¿™é‡Œç»™å‡ºä¼˜åŒ–å n=2 çš„é€’å½’æ ‘ ä¼˜åŒ–å‰çš„ n=2 çš„é€’å½’æ ‘ n=2 çœ‹ä¸å‡ºä¼˜åŒ–åæ˜æ˜¾çš„å¢åŠ ä¿®å‰ªçš„åŠ›åº¦ æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±ç”»ä¸€ç”» n=3 çš„é€’å½’æ ‘ï¼Œä½ å°±ä¼šå‘ç°æœ‰å¾ˆæ˜æ˜¾çš„åŒºåˆ«","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å¹¶å‘ä¸­Interruptçš„ç›¸å…³çŸ¥è¯†","slug":"å¹¶å‘ä¸­Interruptçš„ç›¸å…³çŸ¥è¯†","date":"2022-07-25T08:21:32.000Z","updated":"2023-01-13T03:24:38.359Z","comments":true,"path":"javaEE/JUC/2022/07/25/å¹¶å‘ä¸­Interruptçš„ç›¸å…³çŸ¥è¯†/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JUC/2022/07/25/%E5%B9%B6%E5%8F%91%E4%B8%ADInterrupt%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/","excerpt":"","text":"Interruptinterrupt()æ˜¯çº¿ç¨‹ç±»çš„æˆå‘˜æ–¹æ³•ï¼Œä½œç”¨æ˜¯æ‰“æ–­çº¿ç¨‹ ä¸ä¹‹æœ‰å…³çš„è¿˜æœ‰isInterrupted()å’Œinterrupted() interrupt()çš„ä½œç”¨æ˜¯åˆ†æƒ…å†µçš„ å½“çº¿ç¨‹è¢«join()ã€sleep()ã€wait()é˜»å¡çš„æ—¶å€™ ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä¼šè®¾ç½®æ‰“æ–­æ ‡è®°ä¸ºfalseï¼Œå¹¶ä¸”æŠ›å‡ºå¼‚å¸¸InterruptedException å½“çº¿ç¨‹æ­£åœ¨è¿è¡Œçš„æ—¶å€™ ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä¼šè®¾ç½®æ‰“æ–­æ ‡è®°ä¸ºtrueï¼Œä½†æ˜¯ä¸ä¼šå½±å“çº¿ç¨‹ç»§ç»­è¿è¡Œ å½“çº¿ç¨‹ä½¿ç”¨LockSupport.park()æŒ‚èµ· ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä¼šè®¾ç½®æ‰“æ–­æ ‡è®°ä¸ºtrueï¼Œä½†æ˜¯ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ Tipsï¼šåœ¨æ‰“æ–­çŠ¶æ€ä¸‹ï¼Œæ— æ³•ä½¿ç”¨LockSupport.park()æŒ‚èµ·å½“å‰çº¿ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/** * Interrupts this thread. * * &lt;p&gt; Unless the current thread is interrupting itself, which is * always permitted, the &#123;@link #checkAccess() checkAccess&#125; method * of this thread is invoked, which may cause a &#123;@link * SecurityException&#125; to be thrown. * * &lt;p&gt; If this thread is blocked in an invocation of the &#123;@link * Object#wait() wait()&#125;, &#123;@link Object#wait(long) wait(long)&#125;, or &#123;@link * Object#wait(long, int) wait(long, int)&#125; methods of the &#123;@link Object&#125; * class, or of the &#123;@link #join()&#125;, &#123;@link #join(long)&#125;, &#123;@link * #join(long, int)&#125;, &#123;@link #sleep(long)&#125;, or &#123;@link #sleep(long, int)&#125;, * methods of this class, then its interrupt status will be cleared and it * will receive an &#123;@link InterruptedException&#125;. * * &lt;p&gt; If this thread is blocked in an I/O operation upon an &#123;@link * java.nio.channels.InterruptibleChannel InterruptibleChannel&#125; * then the channel will be closed, the thread&#x27;s interrupt * status will be set, and the thread will receive a &#123;@link * java.nio.channels.ClosedByInterruptException&#125;. * * &lt;p&gt; If this thread is blocked in a &#123;@link java.nio.channels.Selector&#125; * then the thread&#x27;s interrupt status will be set and it will return * immediately from the selection operation, possibly with a non-zero * value, just as if the selector&#x27;s &#123;@link * java.nio.channels.Selector#wakeup wakeup&#125; method were invoked. * * &lt;p&gt; If none of the previous conditions hold then this thread&#x27;s interrupt * status will be set. &lt;/p&gt; * * &lt;p&gt; Interrupting a thread that is not alive need not have any effect. * * @throws SecurityException * if the current thread cannot modify this thread * * @revised 6.0 * @spec JSR-51 */public void interrupt() &#123; if (this != Thread.currentThread()) &#123; checkAccess(); // thread may be blocked in an I/O operation synchronized (blockerLock) &#123; Interruptible b = blocker; if (b != null) &#123; interrupt0(); // set interrupt status b.interrupt(this); return; &#125; &#125; &#125; // set interrupt status interrupt0();&#125; isInterruptedæ­¤æ–¹æ³•ä¹Ÿæ˜¯çº¿ç¨‹ç±»çš„æˆå‘˜æ–¹æ³•ï¼Œä½œç”¨æ˜¯è¿”å›æ‰“æ–­æ ‡è®° 12345678910111213141516/** * Tests whether this thread has been interrupted. The &lt;i&gt;interrupted * status&lt;/i&gt; of the thread is unaffected by this method. * * &lt;p&gt;A thread interruption ignored because a thread was not alive * at the time of the interrupt will be reflected by this method * returning false. * * @return &#123;@code true&#125; if this thread has been interrupted; * &#123;@code false&#125; otherwise. * @see #interrupted() * @revised 6.0 */public boolean isInterrupted() &#123; return isInterrupted(false);&#125; interruptedæ­¤æ–¹æ³•æ˜¯Threadçš„é™æ€æ–¹æ³•ï¼Œä½œç”¨æ˜¯é‡ç½®å½“å‰è¿è¡Œçº¿ç¨‹çš„æ‰“æ–­æ ‡è®°ï¼ˆå°±æ˜¯å°†æ‰“æ–­æ ‡è®°ç½®ä¸ºfalseï¼‰ï¼Œå¹¶è¿”å›ä¹‹å‰çš„æ‰“æ–­æ ‡è®° 1234567891011121314151617181920/** * Tests whether the current thread has been interrupted. The * &lt;i&gt;interrupted status&lt;/i&gt; of the thread is cleared by this method. In * other words, if this method were to be called twice in succession, the * second call would return false (unless the current thread were * interrupted again, after the first call had cleared its interrupted * status and before the second call had examined it). * * &lt;p&gt;A thread interruption ignored because a thread was not alive * at the time of the interrupt will be reflected by this method * returning false. * * @return &#123;@code true&#125; if the current thread has been interrupted; * &#123;@code false&#125; otherwise. * @see #isInterrupted() * @revised 6.0 */public static boolean interrupted() &#123; return currentThread().isInterrupted(true);&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"https://li-zhi.net.cn/categories/javaEE/JUC/"}],"tags":[{"name":"å¹¶å‘","slug":"å¹¶å‘","permalink":"https://li-zhi.net.cn/tags/%E5%B9%B6%E5%8F%91/"}]},{"title":"Docker-åŸºç¡€","slug":"Docker-åŸºç¡€","date":"2022-07-13T10:18:52.000Z","updated":"2023-02-27T09:11:55.097Z","comments":true,"path":"javaEE/Docker/2022/07/13/Docker-åŸºç¡€/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Docker/2022/07/13/Docker-%E5%9F%BA%E7%A1%80/","excerpt":"","text":"Docker-åŸºç¡€å›é¡¾hello-worldæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹hello-worldçš„æ¡ˆä¾‹ ä¸‹é¢æ˜¯å®Œæ•´çš„æµç¨‹å›¾ 12345678å…ˆåœ¨æœ¬åœ°æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨hello-worldé•œåƒ æœ‰åˆ™ç›´æ¥ä½¿ç”¨æ­¤é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ æ²¡æœ‰åˆ™è¿æ¥é•œåƒæœåŠ¡å™¨æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨hello-worldé•œåƒ å¦‚æœåœ¨é•œåƒæœåŠ¡å™¨æŸ¥æ‰¾åˆ°äº†è¯¥é•œåƒï¼Œåˆ™å°†è¯¥é•œåƒä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åå»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠ¥é”™ ä¸‹é¢ä»‹ç»å…³äºé•œåƒå’Œå®¹å™¨çš„å‘½ä»¤ Dockeré•œåƒå‘½ä»¤æœç´¢é•œåƒ123456789101112131415[root@zhima ~]# docker search --help# ä½¿ç”¨è¯´æ˜Usage: docker search [OPTIONS] TERM# åœ¨docker hubä¸Šæœç´¢TERMé•œåƒSearch the Docker Hub for images# å¯é€‰å‚æ•°Options:# è¿‡æ»¤# æ —å­ -f=STARS=3000æ„æ€çš„ç­›é€‰å‡ºSTARSå¤§äº3000çš„ -f, --filter filter Filter output based on conditions provided# æ ¼å¼åŒ–è¾“å‡ºï¼Œä½¿ç”¨goè¯­è¨€çš„æ¨¡æ¿ --format string Pretty-print search using a Go template# é™åˆ¶æ•°é‡ --limit int Max number of search results (default 25) --no-trunc Don&#x27;t truncate output æ‹‰å–é•œåƒ1234567891011121314[root@zhima ~]# docker pull --helpUsage: docker pull [OPTIONS] NAME[:TAG|@DIGEST]# ä»ä»“åº“æ‹‰å–ä¸€ä¸ªé•œåƒæˆ–è€…ä¸€ä¸ªä»“åº“Pull an image or a repository from a registry# å¯é€‰é¡¹Options:# ä¸‹è½½å…¨éƒ¨çš„ç‰ˆæœ¬ -a, --all-tags Download all tagged images in the repository# è·³è¿‡é•œåƒè®¤è¯ï¼Œé»˜è®¤å¼€å¯ --disable-content-trust Skip image verification (default true) --platform string Set platform if server is multi-platform capable# è·³è¿‡å†—é•¿çš„è¾“å‡ºï¼Œç­‰åˆ°ä¸‹è½½ç»“æŸåå†è¾“å‡ºé•œåƒid -q, --quiet Suppress verbose output æŸ¥çœ‹æœ¬åœ°é•œåƒ123456789101112131415161718[root@zhima ~]# docker images --helpUsage: docker images [OPTIONS] [REPOSITORY[:TAG]]# åˆ—ä¸¾é•œåƒList imagesOptions:# å±•ç¤ºå…¨éƒ¨çš„é•œåƒï¼Œé»˜è®¤æ·»åŠ  -a, --all Show all images (default hides intermediate images)# æ˜¾ç¤ºå®Œæ•´çš„é•œåƒid --digests Show digests# è¿‡æ»¤ -f, --filter filter Filter output based on conditions provided# æ ¼å¼åŒ–è¾“å‡º --format string Pretty-print images using a Go template --no-trunc Don&#x27;t truncate output# åªæ˜¾ç¤ºé•œåƒç®€å†™id -q, --quiet Only show image IDs åˆ é™¤æœ¬åœ°é•œåƒ12345678910[root@zhima ~]# docker rmi --helpUsage: docker rmi [OPTIONS] IMAGE [IMAGE...]# åˆ é™¤é•œåƒRemove one or more imagesOptions:# å¼ºåˆ¶åˆ é™¤ -f, --force Force removal of the image --no-prune Do not delete untagged parents æŸ¥çœ‹é•œåƒå±‚çº§æ„å»ºä¿¡æ¯1234567891011121314[root@zhima ~]# docker history --helpUsage: docker history [OPTIONS] IMAGE# å±•ç¤ºé•œåƒçš„å†å²ï¼ˆæ„å»ºä¿¡æ¯ï¼‰Show the history of an imageOptions:# æ ¼å¼åŒ–è¾“å‡º --format string Pretty-print images using a Go template# ä»¥å¯è¯»åŒ–å¥½çš„æ–¹å¼å±•ç¤º -H, --human Print sizes and dates in human readable format (default true) --no-trunc Don&#x27;t truncate output# åªæ˜¾ç¤ºé•œåƒid -q, --quiet Only show image IDs æ‰“æ ‡ç­¾12345[root@zhima ~]# docker tag --helpUsage: docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]# ç»™SOURCE_IMAGEæ‰“ä¸Šæ–°çš„æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨TARGET_IMAGEä¿å­˜Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE Dockerå®¹å™¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªå®¹å™¨ è¿™é‡Œå› ä¸ºå¯é€‰é¡¹å¤ªå¤šï¼Œæˆ‘åªæ”¾ä¸€äº›å¸¸ç”¨çš„ 12345678910111213141516171819202122232425262728293031[root@zhima ~]# docker run --helpUsage: docker run [OPTIONS] IMAGE [COMMAND] [ARG...]# åˆ›å»ºå¹¶ä½¿ç”¨COMMANDè¿è¡Œä¸€ä¸ªå®¹å™¨Run a command in a new containerOptions:# åå°å¯åŠ¨å®¹å™¨ -d, --detach Run container in background and print container ID# ä¿æŒæ ‡å‡†è¾“å‡ºæµæ‰“å¼€ -i, --interactive Keep STDIN open even if not attached# æŒ‚è½½å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿ --mount mount Attach a filesystem mount to the container# æŒ‡å®šå®¹å™¨åå­— --name string Assign a name to the container# æŒ‡å®šå®¹å™¨æ‰€åœ¨ç½‘ç»œ --network network Connect a container to a network# ç»™å®¹å™¨ç™»å½•ç”¨æˆ·çš„ç‰¹æƒ --privileged Give extended privileges to this container# æŒ‡å®šç«¯å£æ˜ å°„ -p å®¿ä¸»æœºç«¯å£:å®¹å™¨æš´éœ²ç«¯å£ -p, --publish list Publish a container&#x27;s port(s) to the host# éšæœºæŒ‡å®šç«¯å£æ˜ å°„ -P, --publish-all Publish all exposed ports to random ports# å®¹å™¨çš„æ ¹æ–‡ä»¶ç³»ç»Ÿåªè¯» --read-only Mount the container&#x27;s root filesystem as read only# æ¨å‡ºå®¹å™¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨åˆ é™¤å®¹å™¨ --rm Automatically remove the container when it exits# åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š -t, --tty Allocate a pseudo-TTY# æ•°æ®å·ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºçš„ç›®å½• -v, --volume list Bind mount a volume 12345678[root@zhima ~]# docker create --helpUsage: docker create [OPTIONS] IMAGE [COMMAND] [ARG...]# åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½†æ˜¯ä¸è¿è¡ŒCreate a new containerOptions: # ä¸docker run ä¸€è‡´ï¼Œè¿™é‡Œä¸é‡å¤äº† åˆ é™¤ä¸€ä¸ªå®¹å™¨1234567891011[root@zhima ~]# docker rm --helpUsage: docker rm [OPTIONS] CONTAINER [CONTAINER...]# åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨Remove one or more containersOptions:# å¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿å®ƒåœ¨è¿è¡ŒçŠ¶æ€ -f, --force Force the removal of a running container (uses SIGKILL)# åˆ é™¤æŒ‚è½½çš„å®¿ä¸»æœºç›®å½• -v, --volumes Remove anonymous volumes associated with the container æŸ¥çœ‹å®¹å™¨12345678910111213141516171819202122[root@zhima ~]# docker ps --helpUsage: docker ps [OPTIONS]# å±•ç¤ºå®¹å™¨List containersOptions:# å±•ç¤ºæ‰€æœ‰çš„å®¹å™¨ -a, --all Show all containers (default shows just running)# æ¡ä»¶è¿‡æ»¤ -f, --filter filter Filter output based on conditions provided# æ ¼å¼åŒ–è¾“å‡º --format string Pretty-print containers using a Go template# æ§åˆ¶æ˜¾ç¤ºä¸ªæ•°ï¼ŒåŒ…æ‹¬åœæ­¢çš„å®¹å™¨ -n, --last int Show n last created containers (includes all states) (default -1)# æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ï¼ŒåŒ…æ‹¬åœæ­¢çš„å®¹å™¨ -l, --latest Show the latest created container (includes all states) --no-trunc Don&#x27;t truncate output# åªæ˜¾ç¤ºå®¹å™¨id -q, --quiet Only display container IDs# æ˜¾ç¤ºå®¹å™¨å ç”¨å†…å­˜ -s, --size Display total file sizes åœæ­¢å®¹å™¨123456789[root@zhima ~]# docker stop --helpUsage: docker stop [OPTIONS] CONTAINER [CONTAINER...]# åœæ­¢ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨Stop one or more running containersOptions:# åœ¨intsååœæ­¢å®¹å™¨ -t, --time int Seconds to wait for stop before killing it (default 10) è¿è¡Œå®¹å™¨1234567891011[root@zhima ~]# docker start --helpUsage: docker start [OPTIONS] CONTAINER [CONTAINER...]# å¯åŠ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå·²ç»åœæ­¢çš„å®¹å™¨Start one or more stopped containersOptions:# å¯åŠ¨å¹¶è¿›å…¥å®¹å™¨ -a, --attach Attach STDOUT/STDERR and forward signals# å¯åŠ¨å¹¶è¿›å…¥å®¹å™¨çš„æ ‡å‡†è¾“å‡ºè®¾å¤‡ -i, --interactive Attach container&#x27;s STDIN é‡å¯å®¹å™¨12345678[root@zhima ~]# docker restart --helpUsage: docker restart [OPTIONS] CONTAINER [CONTAINER...]Restart one or more containersOptions: -t, --time int Seconds to wait for stop before killing the container (default 10) æš‚åœå®¹å™¨12345[root@zhima ~]# docker pause --helpUsage: docker pause CONTAINER [CONTAINER...]Pause all processes within one or more containers å–æ¶ˆæš‚åœå®¹å™¨12345[root@zhima ~]# docker unpause --helpUsage: docker unpause CONTAINER [CONTAINER...]Unpause all processes within one or more containers æŸ¥çœ‹å®¹å™¨çš„æºæ•°æ®12345678910111213[root@zhima ~]# docker inspect --helpUsage: docker inspect [OPTIONS] NAME|ID [NAME|ID...]Return low-level information on Docker objectsOptions:# æ ¼å¼åŒ–è¾“å‡º -f, --format string Format the output using the given Go template# å±•ç¤ºå®¹å™¨çš„å ç”¨å†…å­˜ -s, --size Display total file sizes if the type is container# å°†JSONæ•°æ®è½¬åŒ–ä¸ºç‰¹æ®Šç±»å‹ --type string Return JSON for specified type æŸ¥çœ‹å®¹å™¨æ—¥å¿—123456789101112131415[root@zhima ~]# docker logs --helpUsage: docker logs [OPTIONS] CONTAINERFetch the logs of a containerOptions:# æ˜¾ç¤ºè¯¦ç»†çš„æ•°æ® --details Show extra details provided to logs# æ—¥å¿—ç»§ç»­è¾“å‡º -f, --follow Follow log output# åªå±•ç¤ºå°¾éƒ¨næ¡æ•°æ® -n, --tail string Number of lines to show from the end of the logs (default &quot;all&quot;)# å±•ç¤ºæ—¶é—´æˆ³ -t, --timestamps Show timestamps è¿›å…¥å®¹å™¨å†…éƒ¨12345[root@zhima ~]# docker attach --helpUsage: docker attach [OPTIONS] CONTAINER# ç›´æ¥è¿›å…¥å®¹å™¨å½“å‰æ­£åœ¨è¿è¡Œçš„æ ‡å‡†è¾“å‡ºAttach local standard input, output, and error streams to a running container 12345678910111213141516171819[root@zhima ~]# docker exec --helpUsage: docker exec [OPTIONS] CONTAINER COMMAND [ARG...]# åœ¨è¿è¡Œçš„å®¹å™¨ä¸­è¿è¡Œä¸€ä¸ªæ–°çš„commandRun a command in a running containerOptions:# åœ¨åå°è¿è¡Œcommand -d, --detach Detached mode: run command in the background# è®¾ç½®ç¯å¢ƒå˜é‡ -e, --env list Set environment variables# è¯»å–æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ --env-file list Read in a file of environment variables# ä¿æŒè¾“å‡ºæµå¼€å¯ -i, --interactive Keep STDIN open even if not attached# ç»™äºˆæ­¤commandç™»å½•ç”¨æˆ·çš„æƒåŠ› --privileged Give extended privileges to the command# åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ -t, --tty Allocate a pseudo-TTY ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨docker exec -it containerId|containerName /bin/bashè¿›å…¥å®¹å™¨ é€€å‡ºå®¹å™¨1234# å…³é—­å½“å‰çš„è¾“å‡ºæµï¼Œå¦‚æœå®¹å™¨ä¸­æ²¡æœ‰å…¶ä»–è¾“å‡ºæµï¼Œå®¹å™¨å°±ä¼šè‡ªå·±å…³é—­exit# ä¿æŒå½“å‰è¾“å‡ºæµå¼€å¯Ctrl+p+q å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰å‰å°è¿è¡Œçš„commandï¼Œåˆ™ä¼šè‡ªåŠ¨å…³é—­å®¹å™¨ æŸ¥çœ‹å®¹å™¨å¼€æ”¾ç«¯å£12345[root@zhima ~]# docker port --helpUsage: docker port CONTAINER [PRIVATE_PORT[/PROTO]]List port mappings or a specific mapping for the container æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹ä¿¡æ¯12345[root@zhima ~]# docker top --helpUsage: docker top CONTAINER [ps OPTIONS]Display the running processes of a container å®¿ä¸»æœºå’Œå®¹å™¨å†…çš„æ–‡ä»¶å¤åˆ¶123456789101112131415[root@zhima ~]# docker cp --helpUsage: # å°†å®¹å™¨å†…çš„æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºå†…docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-# å°†å®¿ä¸»æœºä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨å†…docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATHCopy files/folders between a container and the local filesystemUse &#x27;-&#x27; as the source to read a tar archive from stdinand extract it to a directory destination in a container.Use &#x27;-&#x27; as the destination to stream a tar archive of acontainer source to stdout. å‘½ä»¤æ€»ç»“ é•œåƒçš„ç†è§£ä»€ä¹ˆæ˜¯é•œåƒé•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ… å®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ï¼Œè¿è¡Œæ—¶ï¼ˆä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œæˆ–è€…åœ¨è¢«æ‰§è¡Œçš„ä¾èµ–ï¼‰ã€åº“ï¼Œç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚ é•œåƒåŠ è½½åŸç† UnionFS UnionFS (è”åˆæ–‡ä»¶ç³»ç»Ÿ) æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿ å®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡ä¸€æ¬¡çš„æäº¤åšä¸€å±‚å±‚çš„å åŠ  è”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥,è¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½• BootFS BootFS(Boot file system)ä¸»è¦åŒ…å«Bootloaderå’ŒKernel Bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½Kernelå†…æ ¸ï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½Bootfsæ–‡ä»¶ç³»ç»Ÿ å½“BootloaderåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº† æ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±Bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œç³»ç»Ÿä¹Ÿä¼šå¸è½½BootFS RootFS RootFS (root file system) ï¼Œåœ¨Bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„&#x2F;dev, &#x2F;proc, &#x2F;bin, &#x2F;etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚Rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆ,æ¯”å¦‚Ubuntu , Centosç­‰ç­‰ã€‚ dockerçš„centosé•œåƒä¸ºä»€ä¹ˆé‚£ä¹ˆå°ï¼Ÿ å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSï¼ŒRootFSå¯ä»¥å¾ˆå°ï¼ŒåªåŒ…å«ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·ã€åº“å°±å¯ä»¥äº† å½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒåº•å±‚å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºå·²ç»åŠ è½½å¥½çš„Kernel å°±ä¸éœ€è¦è‡ªå·±å†è™šæ‹Ÿä¸€å¥—ç¯å¢ƒï¼Œé‡æ–°ä½¿ç”¨BootFSåŠ è½½ä¸€ä¸ªæ–°çš„å†…æ ¸ï¼Œå¤§å¤§èŠ‚çœäº†å¼€é”€ Union æ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚ é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿,åŸºäºåŸºç¡€é•œåƒ(æ²¡æœ‰çˆ¶é•œåƒ) , å¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚ å½“æˆ‘ä»¬æ‹‰å–ä¸€ä¸ªé•œåƒ æˆ‘ä»¬å¯ä»¥å‘ç° è¯¥é•œåƒæ˜¯ä¸€å±‚ä¸€å±‚ä¸‹è½½çš„è€Œä¸æ˜¯ä¸€æ•´ä¸ªä¸‹è½½çš„ è¿™å°±ç¬¦åˆäº†UnionFSçš„ç‰¹æ€§ å‰é¢å‡ å±‚æ˜¯åœ¨æˆ‘ä¸‹è½½å…¶ä»–é•œåƒçš„æ—¶å€™å·²ç»ä¸‹è½½è¿‡äº† å°±å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å†æ¬¡ä¸‹è½½ï¼Œå®ç°äº†èµ„æºå…±äº«ï¼Œæå¤§çš„èŠ‚çœäº†å†…å­˜ æŸ¥çœ‹é•œåƒåˆ†å±‚1docker image inspect imageId|imageName ç‰¹ç‚¹Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ å½“ä½¿ç”¨å‘½ä»¤å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„å®¹å™¨çš„æ—¶å€™ è¯¥é•œåƒå…ˆè¢«å¤åˆ¶ æ¥ç€ä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«æ·»åŠ åˆ°è¯¥å¤åˆ¶åçš„é•œåƒçš„é¡¶å±‚ è¿™ä¸€å±‚å°±æ˜¯å®¹å™¨å±‚ æ‰€ä»¥å½“æˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªå®¹å™¨åï¼Œå¦‚æœæƒ³å°†æœ¬æ¬¡ä¿®æ”¹åçš„å®¹å™¨æ‰“åŒ…æˆä¸€ä¸ªæ–°çš„é•œåƒï¼Œå°±éœ€è¦ä½¿ç”¨docker commitå‘½ä»¤ 1234567891011[root@zhima volumes]# docker commit --helpUsage: docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]Create a new image from a container&#x27;s changesOptions: -a, --author string Author (e.g., &quot;John Hannibal Smith &lt;hannibal@a-team.com&gt;&quot;) -c, --change list Apply Dockerfile instruction to the created image -m, --message string Commit message -p, --pause Pause container during commit (default true) æ•°æ®å·æ•°æ®å·æŠ€æœ¯ï¼Œè¯´ç™½äº†ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶çš„åŒæ­¥ æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªMySQLçš„å®¹å™¨ï¼Œæˆ‘ä»¬ä¸å¯¹å…¶åšä»»ä½•æªæ–½ å¦‚æœæˆ‘ä»¬è¯¯åˆ é™¤æˆ–è€…æœ‰äººæ¶æ„åˆ é™¤äº†è¯¥å®¹å™¨ é‚£ä¹ˆé‡Œé¢ä¿å­˜çš„æ•°æ®ä¹Ÿå°±éšä¹‹ä¸¢å¤±äº† è¿™æ˜¯ä¸€ä»¶ååˆ†æ¶åŠ£çš„äº‹æƒ… æ‰€ä»¥ä¸ºäº†é˜²æ­¢è¿™ç§äº‹æƒ… æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸€ç§æŠ€æœ¯ï¼Œå°†å®¹å™¨å†…ä¿å­˜æ•°æ®çš„ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Š è¿™ç§æŠ€æœ¯å°±æ˜¯æ•°æ®å·æŠ€æœ¯ ä½¿ç”¨è¿™é‡Œæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªMySQLæ¥è®©å¤§å®¶æ˜ç™½å¦‚ä½•ä½¿ç”¨å·æŠ€æœ¯ 12345678910111213# -v å®¿ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½•# -p å®¿ä¸»æœºçŸ­è£¤:å®¹å™¨ç«¯å£# -d åå°å¯åŠ¨# -e è®¾ç½®ç¯å¢ƒå˜é‡[root@zhima home]# docker run --name mysql01 -v /home/mysql:/usr/share/mysql -v /home/mysql/conf:/etc/mysql/conf.d -p 49102:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql[root@zhima home]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESd49309c0ab18 mysql &quot;docker-entrypoint.sâ€¦&quot; 6 seconds ago Up 4 seconds 33060/tcp, 0.0.0.0:49102-&gt;3306/tcp mysql01[root@zhima conf]# cd /home/mysql/data/[root@zhima data]# lsauto.cnf binlog.000002 ca-key.pem client-cert.pem #ib_16384_0.dblwr ib_buffer_pool ib_logfile0 ibtmp1 mysql performance_schema public_key.pem server-key.pem undo_001binlog.000001 binlog.index ca.pem client-key.pem #ib_16384_1.dblwr ibdata1 ib_logfile1 #innodb_temp mysql.ibd private_key.pem server-cert.pem sys undo_002 åˆ é™¤å®¹å™¨ä¹‹åï¼Œå®¿ä¸»æœºä¸­ä»ç„¶ä¿å­˜ç€å®¹å™¨å†…çš„æ•°æ® 12345[root@zhima data]# docker stop mysql01mysql01[root@zhima data]# lsauto.cnf binlog.000002 ca-key.pem client-cert.pem #ib_16384_0.dblwr ib_buffer_pool ib_logfile0 #innodb_temp mysql.ibd private_key.pem server-cert.pem sys undo_002binlog.000001 binlog.index ca.pem client-key.pem #ib_16384_1.dblwr ibdata1 ib_logfile1 mysql performance_schema public_key.pem server-key.pem undo_001 å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½12345# åŒ¿åæŒ‚è½½ï¼Œæˆ‘ä¸æŒ‡å®šå®¿ä¸»å¥çš„è·¯å¾„ï¼ŒæŒ‡å®šå®¹å™¨å†…çš„è·¯å¾„[root@zhima home]# docker run --name mysql01 -v /usr/share/mysql -v /etc/mysql/conf.d -p 49102:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql# å…·åæŒ‚è½½ï¼Œæˆ‘ä¸æŒ‡å®šå®¿ä¸»å¥çš„è·¯å¾„ï¼Œä½†æ˜¯æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¹¶æŒ‡å®šå®¹å™¨å†…çš„è·¯å¾„[root@zhima home]# docker run --name mysql01 -v mysql_data:/usr/share/mysql -v mysql_config:/etc/mysql/conf.d -p 49102:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql ä¸ç®¡æ˜¯å…·åæŒ‚è½½è¿˜æ˜¯åŒ¿åæŒ‚è½½éƒ½æ˜¯dockerè‡ªåŠ¨åœ¨/var/lib/docker/volumesç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ åªä¸è¿‡å…·åæŒ‚è½½å¯ä»¥è‡ªå·±æŒ‡å®šè¯¥æ–‡ä»¶å¤¹çš„åå­— æ•°æ®å·å®¹å™¨å¦‚ä½•åšåˆ°å¤šä¸ªå®¹å™¨é—´æ•°æ®å…±äº«å‘¢ï¼Ÿ é‚£å°±éœ€è¦ä½¿ç”¨æ•°æ®å·å®¹å™¨æŠ€æœ¯ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ï¼Œä¸‹é¢çœ‹ä½¿ç”¨ 123[root@zhima home]# docker run --name mysql01 -v mysql_data:/usr/share/mysql -v mysql_config/etc/mysql/conf.d -p 49102:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql[root@zhima home]# docker run --name mysql02 --volumes-from mysql01 -p 49103:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql[root@zhima home]# docker run --name mysql03 --volumes-from mysql01 -p 49103:3306 -d -e MYSQL_ROOT_PASSWORD=123456 mysql mysql01å°±å«æ•°æ®å·å®¹å™¨ mysql02ã€mysql03å°±ä¼šå’Œmysql01çš„æŒ‚è½½æ˜¯ä¸€æ ·çš„ å³mysql02å’Œmysql03éƒ½å’Œmysql01ä¸€æ ·æŒ‚è½½åˆ°äº†å®¿ä¸»æœºçš„åŒä¸ªç›®å½• /var/lib/docker/volumes/mysql_dataå’Œ/var/lib/docker/volumes/mysql_cofig å¯¹æ•°æ®å·çš„æ“ä½œ12345678910111213# å¯¹å·çš„æ“ä½œ[root@zhima etc]# docker volume --helpUsage: docker volume COMMANDManage volumesCommands: create Create a volume inspect Display detailed information on one or more volumes ls List volumes prune Remove all unused local volumes rm Remove one or more volumes DockerfileDockerfileå°±æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ 1ã€Dockerfileä¸­çš„ä¿ç•™å…³é”®è¯ä½¿ç”¨çš„æ—¶å€™éƒ½å¿…é¡»æ˜¯å¤§å†™ 2ã€æŒ‡ä»¤æ˜¯ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„ 3ã€#è¡¨ç¤ºæ³¨é‡Š 4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºå¹¶æäº¤ä¸€å±‚é•œåƒå±‚ æŒ‡ä»¤Dockerfileä¸­çš„æŒ‡ä»¤ æŒ‡ä»¤ è¯´æ˜ FROM è¯´æ˜é•œåƒä½¿ç”¨çš„åŸºç¡€é•œåƒ MAINTAINER è®¾ç½®é•œåƒçš„ä½œè€… ADD æ„å»ºé•œåƒçš„æ—¶å€™å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨å†… COPY æ„å»ºé•œåƒçš„æ—¶å€™å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨å†… RUN è®¾ç½®å®¹å™¨çš„å¯åŠ¨å‘½ä»¤ ONBUILD è®¾ç½®é•œåƒçš„ONBUILDæŒ‡ä»¤ WORKDIR è®¾ç½®è¿è¡ŒRUN CMD ENTRYPOINT COPY ADDæŒ‡ä»¤çš„å·¥ä½œç›®å½• USER è®¾ç½®è¿è¡ŒRUN CMD ENTRYPOINTçš„ç”¨æˆ·å STOPSIGNAL è®¾ç½®å®¹å™¨é€€å‡ºçš„æ—¶å€™çš„ä¿¡å·é‡ ARG è®¾ç½®ç¼–è¯‘é•œåƒçš„æ—¶å€™åŠ å…¥çš„å‚æ•° LABEL è®¾ç½®é•œåƒçš„æ ‡ç­¾ CMD ç¼–è¯‘é•œåƒçš„æ—¶å€™è¿è¡Œçš„è„šæœ¬ ENV è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡ EXPOSE è®¾ç½®é•œåƒæš´éœ²çš„ç«¯å£ ENTRYPOINT è®¾ç½®å®¹å™¨çš„å…¥å£ç¨‹åº VOLUME è®¾ç½®å®¹å™¨çš„æŒ‚è½½å· å°è¯•ç‰›åˆ€è‡ªå·±åˆ¶ä½œä¸€ä¸ªå¸¦ç½‘ç»œé…ç½®å’Œvimçš„centosé•œåƒ 123456789101112131415161718192021222324252627FROM centosMAINTAINER zhima&lt;1158778689@qq.com&gt;ENV MYPATH /usr/localWORKDIR $MYPATH# ä¸‹é¢ä¸‰è¡ŒRUNå‘½ä»¤æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸‹è¿™ä¸ªé”™è¯¯çš„# Error: Failed to download metadata for repo &#x27;appstream&#x27;: Cannot prepare internal mirrorlist: No URLs in mirrorlistRUN cd /etc/yum.repos.d/RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*RUN yum -y install vimRUN yum -y install net-toolsEXPOSE 80CMD echo $MYPATHCMD [&quot;ls&quot;,&quot;-l&quot;]CMD /bin/bash æ„å»ºæ„å»ºå‘½ä»¤ 12345678910111213[root@zhima home]# docker build --helpUsage: docker build [OPTIONS] PATH | URL | -Build an image from a DockerfileOptions:# Dockerfileçš„åå­— -f, --file string Name of the Dockerfile (Default is &#x27;PATH/Dockerfile&#x27;)# ç”Ÿæˆçš„é•œåƒçš„æ ‡ç­¾ -t, --tag list Name and optionally a tag in the &#x27;name:tag&#x27; format docker build -f Dockerfile -t myImageName:tag ./ æ„å»ºé•œåƒ 1[root@zhima lizhi]# docker build -t mycentos:1.0 . å¯åŠ¨å®¹å™¨12[root@zhima lizhi]# docker run -it --name centos1 mycentos:1.0[root@49ea92e17942 local]# CMDå’ŒENTRYPOINTæˆ‘ä»¬æ¥è¯•ä¸€ä¸‹æ„å»ºè¿™ä¸ªDockerfileï¼Œå¹¶è¿è¡Œ 123FROM centosCMD [&quot;ls&quot;,&quot;-a&quot;] æ„å»º 12345678910[root@zhima lizhi]# docker build -t mycentos .Sending build context to Docker daemon 17.92kBStep 1/2 : FROM centos ---&gt; 5d0da3dc9764Step 2/2 : CMD [&quot;ls&quot;,&quot;-a&quot;] ---&gt; Running in a1e70a05d8ddRemoving intermediate container a1e70a05d8dd ---&gt; 00433fd4c299Successfully built 00433fd4c299Successfully tagged mycentos:latest è¿è¡Œ 123[root@zhima lizhi]# docker run -it --name &quot;centos1&quot; mycentos. .dockerenv dev home lib64 media opt root sbin sys usr.. bin etc lib lost+found mnt proc run srv tmp var å¯ä»¥å‘ç°ï¼Œè¿›å…¥å®¹å™¨ä¹‹åï¼Œå°±æ‰§è¡Œäº†ls -aå‘½ä»¤ æˆ‘ä»¬å°è¯•ä¸€ä¸‹åœ¨å¯åŠ¨çš„æ—¶å€™åŠ å…¥ä¸€äº›å‚æ•° 12[root@zhima lizhi]# docker run -it --name &quot;centos2&quot; mycentos -ldocker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: &quot;-l&quot;: executable file not found in $PATH: unknown. æˆ‘ä»¬å‘ç°å®¹å™¨å¹¶æ²¡æœ‰æ‰§è¡Œls -alï¼Œè€Œæ˜¯ç›´æ¥æŠ¥é”™äº† å…¶å®è¿™å°±æ˜¯CMDçš„ç‰¹æ€§ï¼Œå½“æˆ‘åœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™æ·»åŠ äº†ä¸€ä¸ªCMDå é•œåƒä¸­å®šä¹‰çš„CMDå°±è¢«è¦†ç›–æ‰äº† å•ç‹¬çš„-lå½“ç„¶ä¼šæŠ¥é”™äº† æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨ENTRYPOINTä¼šæ€ä¹ˆæ · ä¿®æ”¹Dockerfile 123FROM centosENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;] é‡æ–°æ„å»º 12345678910[root@zhima lizhi]# docker build -t mycentos .Sending build context to Docker daemon 17.92kBStep 1/2 : FROM centos ---&gt; 5d0da3dc9764Step 2/2 : ENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;] ---&gt; Running in 22ef40dea625Removing intermediate container 22ef40dea625 ---&gt; 73a3d51b4d84Successfully built 73a3d51b4d84Successfully tagged mycentos:latest è¿è¡Œå®¹å™¨ 123456789101112131415161718192021222324[root@zhima lizhi]# docker run -it --name &quot;centos1&quot; mycentos -ltotal 56drwxr-xr-x 1 root root 4096 Jul 14 08:52 .drwxr-xr-x 1 root root 4096 Jul 14 08:52 ..-rwxr-xr-x 1 root root 0 Jul 14 08:52 .dockerenvlrwxrwxrwx 1 root root 7 Nov 3 2020 bin -&gt; usr/bindrwxr-xr-x 5 root root 360 Jul 14 08:52 devdrwxr-xr-x 1 root root 4096 Jul 14 08:52 etcdrwxr-xr-x 2 root root 4096 Nov 3 2020 homelrwxrwxrwx 1 root root 7 Nov 3 2020 lib -&gt; usr/liblrwxrwxrwx 1 root root 9 Nov 3 2020 lib64 -&gt; usr/lib64drwx------ 2 root root 4096 Sep 15 2021 lost+founddrwxr-xr-x 2 root root 4096 Nov 3 2020 mediadrwxr-xr-x 2 root root 4096 Nov 3 2020 mntdrwxr-xr-x 2 root root 4096 Nov 3 2020 optdr-xr-xr-x 191 root root 0 Jul 14 08:52 procdr-xr-x--- 2 root root 4096 Sep 15 2021 rootdrwxr-xr-x 11 root root 4096 Sep 15 2021 runlrwxrwxrwx 1 root root 8 Nov 3 2020 sbin -&gt; usr/sbindrwxr-xr-x 2 root root 4096 Nov 3 2020 srvdr-xr-xr-x 13 root root 0 Jan 29 10:27 sysdrwxrwxrwt 7 root root 4096 Sep 15 2021 tmpdrwxr-xr-x 12 root root 4096 Sep 15 2021 usrdrwxr-xr-x 20 root root 4096 Sep 15 2021 var å¯ä»¥å‘ç°ï¼Œå®¹å™¨æ‰§è¡Œçš„æ˜¯ls -alï¼Œ-læŒ‡ä»¤è¢«è¿½åŠ ç»™äº†ENTRYPOINTå®šä¹‰çš„è¯­å¥","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Docker","slug":"javaEE/Docker","permalink":"https://li-zhi.net.cn/categories/javaEE/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://li-zhi.net.cn/tags/Docker/"}]},{"title":"Docker-å¯¼è¨€","slug":"Docker-å¯¼è¨€","date":"2022-07-13T10:18:48.000Z","updated":"2023-02-25T09:15:18.505Z","comments":true,"path":"javaEE/Docker/2022/07/13/Docker-å¯¼è¨€/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Docker/2022/07/13/Docker-%E5%AF%BC%E8%A8%80/","excerpt":"","text":"Docker-å¯¼è¨€Dockerå‡ºç°çš„åŸå› æ¯ä¸€æ¬¾äº§å“çš„å‡ºç¤ºéƒ½æ˜¯ä¸ºäº†è§£å†³ä¸€äº›ç—›ç‚¹é—®é¢˜ ç›¸ä¿¡æˆ‘ä»¬éƒ½ç»å†è¿‡è¿™ç§åœºæ™¯ æˆ‘ä»¬çš„é¡¹ç›®åœ¨æœ¬åœ°è·‘èµ·æ¥ä¸€ç‚¹æ¯›ç—…éƒ½æ²¡æœ‰ å¼€å¿ƒåœ°å°†jaråŒ…åˆ†äº«ç»™åŒå­¦ è¿‡äº†ä¸€ä¼šï¼ŒåŒå­¦ä¸€è„¸å«Œå¼ƒåœ°æ‰¾ä½ å»çœ‹ä»–åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œåé½åˆ·åˆ·çš„æŠ¥é”™ä¿¡æ¯ï¼Œè§‰å¾—ä½ å†™çš„ä»£ç ä¸è¡Œï¼Œè·‘éƒ½è·‘ä¸èµ·æ¥ çœ‹äº†æŠ¥é”™ï¼Œå‘ç°ä»–æ²¡æœ‰å®‰è£…redisï¼Œæ²¡æœ‰å®‰è£…esï¼Œæ²¡æœ‰å®‰è£…mysqlç­‰ç­‰è½¯ä»¶ è¿™æ—¶å€™å°±å¾ˆæ— å¥ˆäº†ï¼Œåªèƒ½å¸®å…¶ä¸€æ­¥æ­¥è¿›è¡Œå®‰è£…ï¼Œè¿›è¡Œé…ç½® å®‰è£…å®Œæˆåï¼Œå¯èƒ½è¿˜è¦è°ƒä¸€å †çš„bugï¼Œæµªè´¹äº†å¤§é‡çš„æ—¶é—´ æˆ‘ä»¬ç°åœ¨çš„ç»“æ„æ˜¯(Linux + jar + Redisç¯å¢ƒ + ESç¯å¢ƒ + Mysqlç¯å¢ƒâ€¦ ) è¿™å°±ä¼šå¯¼è‡´ä¸Šé¢å‡ºç°çš„é—®é¢˜ï¼Œå°±ç®—ä»–æ—©å°±å®‰è£…äº†è¿™äº›è½¯ä»¶ï¼Œå¦‚æœç‰ˆæœ¬å’Œä½ ä½¿ç”¨çš„ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆä¹Ÿæœ‰å¯èƒ½æŠ¥é”™ è¿™æ—¶å€™ï¼Œå°±å¸Œæœ›æœ‰æ ·ä¸œè¥¿å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿å°±æ˜¯Docker åœ¨ä½¿ç”¨Dockerä¹‹åï¼Œç»“æ„å°±å˜æˆäº†(Linux+ï¼ˆjar + Redisç¯å¢ƒ + ESç¯å¢ƒ + Mysqlç¯å¢ƒâ€¦ ï¼‰) å°†jaråŒ…å’Œç¯å¢ƒä¸€èµ·æ‰“åŒ…ï¼Œå°±ä¸ä¼šå‡ºç°å¼€å¤´å‡ºç°çš„é—®é¢˜å•¦ ä¸‹é¢è®©æˆ‘ä»¬æ¥å­¦ä¹ Dockerå§ è®¤è¯†Dockerä¼ ç»Ÿè¿è¡Œåº”ç”¨ æ‰€æœ‰çš„åº”ç”¨éƒ½æ˜¯è·‘åœ¨åŒä¸€ä¸ªå®¿ä¸»æœºä¸Š ä½¿ç”¨å…±åŒçš„ç±»åº“ï¼ˆLibï¼‰ æ‰€ä»¥è¯·ä½ æƒ³è±¡è¿™ç§åœºæ™¯ï¼š APP1(å°†å…¶æ¯”ä½œæ”¾å°„ç‰©è´¨)+APP2(å°†å…¶æ¯”ä½œé£Ÿç‰©) é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼ŒAPP2ä¼šè¢«APP1ç ´å å¦‚æœæœ‰äº›åº”ç”¨åˆä¾èµ–APP1ï¼Œé‚£ä¹ˆå°±ä¼šç‰µæ‰¯å¾ˆå¤šåº”ç”¨æ— æ•…èººæª å¯¼è‡´Linuxå¤§ç¯å¢ƒç‰µè¿å—æŸï¼Œå¾ˆéš¾å¤„ç† å½“æˆ‘ä»¬ä½¿ç”¨äº†DockeræŠ€æœ¯ä¹‹å æ‰€æœ‰çš„åº”ç”¨éƒ½æ˜¯åœ¨Dockerçš„ç®¡ç†ä¸‹è¿è¡Œçš„ è¿™é‡Œçš„åº”ç”¨å°±è¦æ¢ä¸ªåå­—äº†ï¼Œå«å®¹å™¨ æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰ä¸€å¥—è‡ªå·±çš„ç¯å¢ƒï¼Œå¹¶ä¸”ä¸ä¼šå—åˆ°å…¶ä»–å®¹å™¨ç¯å¢ƒçš„å½±å“ï¼Œå®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’éš”ç»çš„ å°±ç®—æœ‰ä¸¤ä¸ªæ°´ç«ä¸å®¹çš„åº”ç”¨å‡ºç°åœ¨äº†åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–å®¹å™¨çš„ç¯å¢ƒ ä¸‹é¢çœ‹ä¸€ä¸‹Dockerå®˜æ–¹ç»™å‡ºçš„ä¸€å¼ ä½“ç³»æ¶æ„å›¾ ä¼˜åŠ¿ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯ VS Dockerå®¹å™¨æŠ€æœ¯ è™šæ‹Ÿæœºå®ç°èµ„æºéš”ç¦»çš„æ–¹æ³•æ˜¯åˆ©ç”¨ç‹¬ç«‹çš„OSï¼Œå¹¶åˆ©ç”¨Hypervisorè™šæ‹ŸåŒ–CPUã€å†…å­˜ã€IOè®¾å¤‡ç­‰å®ç°çš„ Dockeræ¯”è™šæ‹Ÿæœºæœ‰æ›´å°‘çš„æŠ½è±¡å±‚ï¼Œä¸éœ€è¦Hypervisorå®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–ï¼Œè¿è¡Œåœ¨dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨çš„éƒ½æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æº è€Œè™šæ‹ŸæœºåŠ è½½GuestOsæ˜¯åˆ†é’Ÿçº§å¯åŠ¨çš„ dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€Œä¸éœ€è¦Guest OSã€‚ å› æ­¤ï¼ŒDockeré€šè¿‡é•œåƒæ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªè™šæ‹Ÿæœºå†…æ ¸ æˆ‘ä»¬çŸ¥é“ï¼Œå¼•å¯¼ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸æ˜¯ä¸€ä¸ªæ¯”è¾ƒè´¹æ—¶è´¹èµ„æºçš„è¿‡ç¨‹ï¼Œå½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½Guest OSï¼Œè¿™ä¸ªæ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚ è€Œdockerç”±äºç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œåˆ™çœç•¥äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œå› æ­¤æ–°å»ºä¸€ä¸ªdockerå®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚ å¦å¤–ï¼Œç°ä»£æ“ä½œç³»ç»Ÿæ˜¯å¤æ‚çš„ç³»ç»Ÿï¼Œåœ¨ä¸€å°ç‰©ç†æœºä¸Šæ–°å¢åŠ ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„èµ„æºå¼€é”€æ˜¯æ¯”è¾ƒå¤§çš„ æ‰€ä»¥dockerå¯¹æ¯”è™šæ‹Ÿæœºåœ¨èµ„æºæ¶ˆè€—ä¸Šä¹Ÿå æœ‰æ¯”è¾ƒå¤§çš„ä¼˜åŠ¿ã€‚ åœ¨ä¸€å°ç‰©ç†æœºä¸Šæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å»ºç«‹æˆç™¾ä¸Šåƒçš„å®¹å™¨ï¼Œè€Œåªèƒ½å»ºç«‹å‡ ä¸ªè™šæ‹Ÿæœº å®‰è£…Docker123456789101112131415161718192021222324252627282930313233#å¸è½½ä¹‹å‰çš„Dockersudo yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-engine#ä¸‹è½½éœ€è¦çš„å®‰è£…åŒ…sudo yum install -y yum-utils#è®¾ç½®é•œåƒä»“åº“ sudo yum-config-manager \\ --add-repo \\ https:\\\\download.docker.com\\linux\\centos\\docker-ce.repo#é»˜è®¤æ˜¯å›½å¤–çš„ sudo yum-config-manager \\ --add-repo \\ https:\\\\mirrors.aliyun.com\\docker-ce\\linux\\centos\\docker-ce.repo#é˜¿é‡Œäº‘çš„ # æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•sudo yum makecache fast#å®‰è£…Dockerå¼•æ“ docker-ce docker-ee sudo yum install docker-ce docker-ce-cli containerd.io#å¯åŠ¨docker sudo systemctl start docker #æµ‹è¯•æ˜¯å¦å¯åŠ¨æˆåŠŸdocker version å¦‚æœä½ è´­ä¹°äº†é˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ã€è…¾è®¯äº‘çš„æœåŠ¡å™¨ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªå®¹å™¨é•œåƒåŠ é€Ÿ è¿™ä¸ªé•œåƒåŠ é€Ÿèµ°çš„æ˜¯æœåŠ¡å™¨å†…ç½‘ï¼Œå†™æˆ‘çš„ä¹Ÿæ²¡æœ‰ç”¨å“¦ å¸è½½Docker123456#å¸è½½dockerä¾èµ–sudo yum remove docker-ce docker-ce-cli containerd.io#åˆ é™¤èµ„æºsudo rm -rf /var/lib/dockersudo rm -rf /var/lib/containerd","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Docker","slug":"javaEE/Docker","permalink":"https://li-zhi.net.cn/categories/javaEE/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://li-zhi.net.cn/tags/Docker/"}]},{"title":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","date":"2022-07-09T03:19:07.000Z","updated":"2023-01-27T03:54:43.227Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/07/09/æ­£åˆ™è¡¨è¾¾å¼/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/07/09/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼å‰è¨€ç›¸ä¿¡å¤§å®¶å¯¹æ­£åˆ™çš„æ€åº¦å°±æ˜¯ ä½†æ˜¯å½“æ¯æ¬¡åœ¨éœ€è¦åšæ ¡éªŒæˆ–è€…çš„æ—¶å€™ï¼Œéƒ½ä¼šååˆ†ç‹¼ç‹ˆçš„å»ç™¾åº¦ï¼Œå»CSDN å°†æ‰¾åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥copyè¿‡æ¥ï¼Œä¹Ÿä¸ä¼šå»çœ‹é‡Œé¢å†™çš„å•¥ ç›´æ¥å°±ä¿¡å¿ƒæ»¡æ»¡çš„å»è¿è¡Œ ç„¶åå°±è¦ä¹ˆæŠ¥é”™ï¼Œè¦ä¹ˆå•¥ä¹Ÿæ²¡åŒ¹é…åˆ° çœ‹åˆ«äººå†™çš„javaä»£ç ï¼Œæˆ‘ä»¬æ˜¯ç—›è‹¦çš„ çœ‹åˆ«äººå†™çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬æ„Ÿå—ä¸åˆ°ç—›è‹¦ï¼Œæ˜¯ç»æœ›çš„ï¼Œç›´æ¥æ”¾å¼ƒäº† å®åœ¨å—ä¸äº†è¿™ç§ä»»äººå®°å‰²çš„æ„Ÿè§‰ï¼Œæ‰€ä»¥å°±èŠ±äº†å‡ å¤©å½»å½»åº•åº•åœ°å°†æ­£åˆ™å­¦äº†ä¸€é æœ€çœŸå®åœ°æ„Ÿè§‰å°±æ˜¯ï¼Œæ­£åˆ™ä¸ç®€å•ï¼Œå¾—æŠŠå®ƒå½“ä½œä¸€ç§è¯­è¨€å»å­¦ è¿™æ ·æ‰å¯ä»¥æ‹¿å‡ºæ€åº¦å»æ¥å—å®ƒ ä¸‹é¢æ˜¯å­¦ä¹ ç¬”è®° ä»‹ç»æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”±æ™®é€šå­—ç¬¦ï¼ˆå¦‚è‹±æ–‡å­—æ¯ï¼‰ä»¥åŠç‰¹æ®Šå­—ç¬¦ï¼ˆä¹Ÿç§°ä¸ºå…ƒå­—ç¬¦ï¼‰ç»„æˆçš„æ–‡å­—æ¨¡å¼ è¯¥æ¨¡å¼å¯¹æ–‡æœ¬æŸ¥æ‰¾æ—¶éœ€è¦åŒ¹é…çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²æè¿°ï¼Œç»™å‡ºä¸€ä¸ªåŒ¹é…æ¨¡æ¿ã€‚ å®ƒå¯ä»¥å¤§å¤§ç®€åŒ–æ–‡æœ¬è¯†åˆ«å·¥ä½œï¼Œç°å·²è¶…å‡ºäº†æŸç§è¯­è¨€æˆ–æŸä¸ªç³»ç»Ÿçš„å±€é™ï¼Œæˆä¸ºè¢«äººä»¬å¹¿ä¸ºä½¿ç”¨çš„å·¥å…·ã€‚ å…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªåœ¨çº¿æ£€æµ‹æ­£åˆ™è¡¨è¾¾å¼çš„ç½‘ç«™ï¼Œååˆ†å¥½ç”¨ï¼ é“¾æ¥å¦‚ä¸‹ï¼šhttps://regex101.com å£°æ˜ï¼šä»¥ä¸‹æˆ‘ä½¿ç”¨çš„æŸäº›æ¦‚å¿µåœ¨ä¸åŒç½‘ç«™ä¸Šï¼Œä¸åŒè§†é¢‘ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸åŒçš„å«æ³•ï¼Œæˆ‘ä¼šå°½é‡å°†æ‰€æœ‰çš„è®²æ³•éƒ½æ ‡æ³¨ ä¿®é¥°ç¬¦ä¸‹é¢åœ¨å¼€å§‹æ­£é¢˜ä¹‹å‰ï¼Œæˆ‘è¦å…ˆç»™å¤§å®¶è®²ä¸€ä¸ªä¿®é¥°ç¬¦çš„æ¦‚å¿µã€‚ æˆ‘è‡ªå·±åœ¨å­¦è¿™ä¸ªçš„æ—¶å€™ï¼Œæ²¡æœ‰å“ªä¸€ä¸ªè§†é¢‘æˆ–è€…æ•™ç¨‹ä¼šå°†ä¿®é¥°ç¬¦æ”¾åˆ°æœ€å‰é¢ ä½†æ˜¯åœ¨æˆ‘å­¦ä¸‹æ¥ï¼Œæˆ‘è§‰å¾—å¦‚æœå°†è¿™ä¸ªçŸ¥è¯†ç‚¹æ”¾åœ¨æœ€å‰é¢ï¼Œè€Œä¸”è¿™ä¸ªçŸ¥è¯†ç‚¹ä¹Ÿä¸éš¾ï¼Œåªæ˜¯ä¸€ä¸ªæ¦‚å¿µ è¿™å¯èƒ½ä¼šæœ‰åˆ©äºå¤§å®¶çš„å­¦ä¹ ï¼Œæ‰€ä»¥æˆ‘å°±å°è¯•å°†æ­¤çŸ¥è¯†ç‚¹å‰ç½® åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰å¾ˆå¤šä¿®é¥°ç¬¦ æˆ‘ä»¬åªçœ‹å¸¸ç”¨çš„å››ä¸ª å¤§å®¶æ³¨æ„è¿™ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹æ˜¾ç¤ºçš„å°±æ˜¯å½“å‰å¼€å¯çš„ä¿®é¥°ç¬¦ global å¯ä»¥çœ‹åˆ°è¿™å…¶ä¸­çš„åŒºåˆ«å°±æ˜¯ éå…¨å±€æ¨¡å¼åªåŒ¹é…äº†ç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„ è€Œå…¨å±€æ¨¡å¼åˆ™åŒ¹é…äº†æ‰€æœ‰åŒ¹é…æˆåŠŸçš„ multi lineè¿™é‡Œåªæ¼”ç¤º^çš„æƒ…å†µ è¿™é‡Œè¦æœ‰ä¸ªå‰ç½®çŸ¥è¯†ï¼Œå°±æ˜¯ ^åŒ¹é…æ–‡æœ¬å¼€å¤´ $åŒ¹é…æ–‡æœ¬ç»“å°¾ æˆ‘ä»¬éƒ½çŸ¥é“æ–‡æœ¬åªæœ‰ä¸€ä¸ªå¼€å¤´å’Œä¸€ä¸ªç»“å°¾ ä½†æ˜¯å¼€å¯äº†multi lineä¹‹å ^ä¸ä»…å¯ä»¥åŒ¹é…æ–‡æœ¬å¼€å¤´è€Œä¸”å¯ä»¥åŒ¹é…è¡Œé¦– $ä¸ä»…å¯ä»¥åŒ¹é…æ–‡æœ¬ç»“å°¾è€Œä¸”å¯ä»¥åŒ¹é…è¡Œå°¾ single line è¿™é‡Œä¹Ÿéœ€è¦æœ‰å‰ç½®çŸ¥è¯† .å¯ä»¥åŒ¹é…é™¤äº†\\nä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦ å¼€å¯äº†single lineä¹‹å .å¯ä»¥åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬\\n insensitive è¯¥ä¿®é¥°ç¬¦å°±æ˜¯å…³é—­å¤§å°å†™æ•æ„Ÿ å³aå’ŒAæ˜¯ä¸€æ ·çš„ ç®€å•åŒ¹é…å›ºå®šå­—ç¬¦ä¸²å‡å¦‚æˆ‘è¦åœ¨ä¸‹åˆ—æ–‡æœ¬ä¸­åŒ¹é…exportå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ è¿™å°±æ˜¯å¯¹å›ºå®šå­—ç¬¦ä¸²çš„åŒ¹é…ï¼Œè¿™å¾ˆç®€å• èŒƒå›´å­—ç¬¦ åˆå«å…ƒå­—ç¬¦ åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹è¡¨ç¤ºä¸€å®šèŒƒå›´çš„å­—ç¬¦ ç¬¦å· åç§° . åŒ¹é…é™¤ \\n ä»¥å¤–çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ \\d åŒ¹é…å•ä¸ªæ•°å­—å­—ç¬¦ï¼Œç›¸å½“äº[0-9] \\D åŒ¹é…å•ä¸ªéæ•°å­—å­—ç¬¦ï¼Œç›¸å½“äº[^0-9] \\w åŒ¹é…å•ä¸ªæ•°å­—ã€å¤§å°å†™å­—æ¯ã€ä¸‹åˆ’çº¿å­—ç¬¦ï¼Œç›¸å½“äº[0-9a-zA-Z_] \\W åŒ¹é…å•ä¸ªéæ•°å­—ã€éå¤§å°å†™å­—æ¯å­—ç¬¦ï¼Œéä¸‹åˆ’çº¿ï¼Œç›¸å½“äº[^0-9a-zA-Z_] \\s åŒ¹é…ä»»æ„ä¸€ä¸ª\\nã€ç©ºæ ¼ã€tab \\S ä¸\\såŒ¹é…çš„ç›¸å \\b åŒ¹é…æ¯ä¸€ä¸ªå•è¯çš„å‰å’Œå \\B ä¸\\båŒ¹é…çš„ç›¸å æ³¨æ„ï¼šä¸€ä¸ªèŒƒå›´å­—ç¬¦åªå¯ä»¥åŒ¹é…ä¸€ä¸ªå±äºè¯¥èŒƒå›´çš„å­—ç¬¦ â€‹ ä¸€ä¸ªï¼ä¸€ä¸ªï¼ä¸€ä¸ªï¼ â€‹ è¾“å…¥.å‘ç°é™¤äº†\\nå…¨äº®äº†æ˜¯å› ä¸ºå¼€å¯äº†globalä¿®é¥°ç¬¦ï¼ è¿™é‡Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼ŒèƒŒä¸‹ï¼Œä¸‹é¢ç»™ä¸€å¼ å›¾å¸®åŠ©è®°å¿† è‡ªå®šä¹‰èŒƒå›´å­—ç¬¦å¯¹äºåå…­è¿›åˆ¶çš„é¢œè‰²ï¼Œ#åé¢åªèƒ½å‡ºç°æ•°å­—å’Œa-fçš„å­—ç¬¦ æˆ‘ä»¬å‘ç°å†…ç½®çš„è¿™äº›èŒƒå›´å­—ç¬¦éƒ½ä¸å¤ªå¥½ç”¨ è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰èŒƒå›´å­—ç¬¦ æƒ³è¦å®šä¹‰è‡ªå®šä¹‰èŒƒå›´å­—ç¬¦ï¼Œå°±éœ€è¦ä½¿ç”¨[] ä¸‹é¢æˆ‘ä»¬æ¥å†™åŒ¹é…åå…­è¿›åˆ¶çš„è‡ªå®šä¹‰èŒƒå›´å­—ç¬¦ è‡ªå·±å†™å…¨ [0123456789abcdef] ä½¿ç”¨-è¿æ¥ç¬¦ [0-9a-f] []è¿˜æœ‰å‡ ç§å†™æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¡ˆä¾‹æ¥è¯´æ˜ æ —ä¸€æ•°æ®å¦‚ä¸‹ï¼ŒåŒ¹é…80å¹´ä»£å’Œ90å¹´ä»£ä»¥å¤–çš„ 123456å§“å ç”Ÿæ—¥èŠéº» 2001-05-22ç« ä¸€ 1993-08-09æ²ˆå®¶æ€¡ 1999-05-22é™†åŠ›ä¸¹ 1989-02-19ç‹å­æ€¡ 2002-12-15 åœ¨[]å†…éƒ¨çš„å¼€å¤´å†™^è¡¨ç¤ºåŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œé¢å‡ºç°çš„å­—ç¬¦ æ —äºŒåŒ¹é…ç‰¹æ®Šå­—ç¬¦^æˆ–è€…$æˆ–è€…. ä½†æ˜¯å°ä¼™ä¼´å¯èƒ½å†™çš„é¡ºåºä¸æ˜¯è¿™æ ·çš„ï¼Œä½ å¯èƒ½æ˜¯è¿™æ ·å†™çš„[^$.] è¿™é‡Œå¦‚æœ^æ”¾åœ¨ç¬¬ä¸€ä½ï¼Œä»–å°±ä¼šä½¿ç”¨æ —ä¸€ç§çš„åŠŸèƒ½ å¦‚æœæˆ‘å°±æ˜¯æƒ³è¦ç”¨è¿™ç§é¡ºåºå†™ï¼Œä½†æ˜¯è¿˜æƒ³åŒ¹é…^ç‰¹æ®Šå­—ç¬¦æœ¬èº«ï¼Œå¯ä¸å¯ä»¥å‘¢ï¼Ÿ å½“ç„¶å¯ä»¥å•¦ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦\\ç™»åœºäº† æ —ä¸‰è¿™ä¸ªæ¡ˆä¾‹å°±æœ‰ç‚¹éš¾äº†ï¼Œæˆ‘ä»¬æ¥åŒ¹é…æ­£ç¡®çš„è½¦ç‰Œå·ï¼ŒåŒ¹é…è§„åˆ™å¦‚ä¸‹ æ™®é€šè½¦ç‰Œç‰¹å¾ï¼š ç¬¬1ä½æ˜¯è¡¨ç±è´¯çš„æ±‰å­— ç¬¬2ä½æ˜¯è¡¨åŸå¸‚çš„å¤§å†™å­—æ¯ï¼Œä¸åŒ…æ‹¬Iå’ŒOã€‚å› ä¸ºå®¹æ˜“å’Œæ•°å­—0å’Œ1æ··æ·† å5ä½æ˜¯å­—æ¯åŠ æ•°å­—ï¼Œä¹Ÿä¸åŒ…æ‹¬Iå’ŒO æµ‹è¯•æ•°æ®å¦‚ä¸‹ 1234567891011121314æ¹˜C4ASF7æ¹˜G9AWSEæ¹˜O392LEYé²E2S1EFæ¹˜D219U5æ¹˜AS2BKNçš–91L2IZé²I0H8Fé²R10Y2FAæ¹˜1R9GJ3é²REF02Hé²2319G7é²3RGN90Né²23G90K åŸºæœ¬é€»è¾‘æ§åˆ¶åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­åªæœ‰ä¸”å’Œæˆ–è¿™ä¸¤ç§é€»è¾‘å…³ç³»ï¼Œæˆ‘ä»¬è¿™é‡Œç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¥å¼•å‡ºæˆ– åŒ¹é…è§„åˆ™ï¼šåŒ¹é…æ‰€æœ‰çš„httpçŠ¶æ€ç  401ï¼šæœªæˆæƒ 403ï¼šæ— æƒé™è®¿é—® 404ï¼šæ‰¾ä¸åˆ°èµ„æº 500ï¼šæœåŠ¡å†…éƒ¨é”™è¯¯ æµ‹è¯•æ•°æ®å¦‚ä¸‹ 1234567891011121314404500309403230401400234325401923482340325 é‚£ä¸”å‘¢ï¼Ÿ å…¶å®æˆ‘ä»¬æ—©å°±ä½¿ç”¨è¿‡ä¸”äº† å°±æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ404ä¸å°±æ˜¯ä¸”ä¹ˆï¼Ÿ 4å¹¶ä¸”0å¹¶ä¸”4 è¿™ä¸‰ä¸ªæ•°å­—åŒæ—¶æ»¡è¶³ï¼Œæ‰åŒ¹é…å‡ºæ¥404 æ•°é‡æ§åˆ¶æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„åŒ¹é…åå…­è¿›åˆ¶é¢œè‰²çš„æ¡ˆä¾‹ æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š 12345678910111213.el-header &#123; background-color: #BC0D13 color: #CCCCCC line-height: 60px;&#125;.el-aside &#123; color: #5fe3a1&#125;.active &#123; background-color: #0086b3;&#125; &#123;&#125;å°±æ˜¯æ•°é‡æ§åˆ¶çš„è¯­æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸ä½¿ç”¨æ•°é‡æ§åˆ¶çš„æ—¶å€™åº”è¯¥æ€ä¹ˆå†™ &#123;n&#125; æŒ‡å®šå‡ºç°å›ºå®šæ¬¡æ•° &#123;n,&#125; æŒ‡å®šè‡³å°‘å‡ºç°næ¬¡ &#123;n,m&#125; æŒ‡å®šå‡ºç°nåˆ°mæ¬¡ ç®€å†™å½¢å¼ ç¬¦å· ç­‰ä»· * &#123;0,&#125; + &#123;1,&#125; ? &#123;0,1&#125; æ‡’æƒ°åŒ¹é…å’Œè´ªå©ªåŒ¹é…è¯¥çŸ¥è¯†ç‚¹æˆ‘ä»¬é…åˆæ¡ˆä¾‹æ¥é£Ÿç”¨ åŒ¹é…æ‰€æœ‰çš„spanæ ‡ç­¾ æµ‹è¯•æ•°æ® 1&lt;span&gt;span1&lt;/span&gt;kongge&lt;span&gt;span2&lt;/span&gt; æˆ‘ä»¬å…ˆæ¥å°è¯•ä¸€ä¸‹ æˆ‘ä»¬å‘ç°ï¼Œå®ƒç«Ÿç„¶å…¨åŒ¹é…äº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è§£é‡Š +ä¼šå°½é‡ä¸€ç›´å¾€ååŒ¹é…ï¼Œä¸€ç›´åˆ°æ— æ³•åŒ¹é….ä¸ºæ­¢ æœ¬æ¥åŒ¹é…åˆ°span1åé¢çš„&lt;ç¬¦å·çš„æ—¶å€™ï¼Œå°±å¯ä»¥åœæ­¢åŒ¹é…äº† ä½†æ˜¯å› ä¸ºé»˜è®¤å¼€å¯çš„æ˜¯è´ªå©ªåŒ¹é…ï¼Œå•¥æ„æ€å‘¢ï¼Ÿ å°±æ˜¯&lt;è¿˜æ˜¯ç¬¦åˆ.çš„å§ï¼Œé‚£å°±ç»§ç»­åŒ¹é… ç›´åˆ°åŒ¹é…åˆ°span2åé¢çš„&lt;çš„æ—¶å€™ï¼Œå‘ç°å¦‚æœå†åŒ¹é…span2åé¢çš„&lt;äº† é‚£ä¹ˆæˆ‘ä»¬æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€åçš„&lt;/span&gt;å°±æ²¡æ³•åŒ¹é…äº†ï¼Œæ‰€ä»¥.å°±åŒ¹é…åˆ°span2ä¸­çš„2ä¸ºæ­¢ é‚£è®©æˆ‘ä»¬å¼€å¯æ‡’æƒ°æ¨¡å¼çœ‹çœ‹ç»“æœ è§£é‡Š +ä¼šå°½é‡ä¸€ç›´å¾€ååŒ¹é…ï¼Œä¸€ç›´åˆ°æ— æ³•åŒ¹é…ä¸ºæ­¢ åŒ¹é…åˆ°span1åé¢çš„&lt;ç¬¦å·çš„æ—¶å€™ å‘ç°å…¶å®è¿™ä¸ª&lt;å·²ç»å¯ä»¥åŒ¹é…æ­£åˆ™æœ€åçš„&lt;äº† é‚£å°±ç»“æŸåŒ¹é…å§ï¼Œæ‰€ä»¥å°±åŒ¹é…å‡ºäº†ç¬¬ä¸€ç»„spanæ ‡ç­¾ æ³¨æ„ç‚¹ï¼š å¼€å¯æ‡’æƒ°æ¨¡å¼ä¸­çš„?å’Œæˆ‘ä»¬åœ¨æ•°é‡æ§åˆ¶ä¸­çš„?æ˜¯ä¸ä¸€æ ·çš„ æ‡’æƒ°æ¨¡å¼ä¸­çš„?åªèƒ½å†™åœ¨æ•°é‡æ§åˆ¶&#123;&#125;åé¢ æ•°é‡æ§åˆ¶&#123;&#125;åªå¯ä»¥å†™åœ¨èŒƒå›´å­—ç¬¦åé¢[a-f]æˆ–è€…\\dè¿™ç§ è¿™é‡Œéœ€è¦å¥½å¥½ç†è§£ä¸€ä¸‹ åˆ é™¤æ‰€æœ‰çš„HTMLæ³¨é‡Šæµ‹è¯•æ•°æ®å¦‚ä¸‹ æœ‰ä¸‰ç§æ³¨é‡Šå“¦ 123456789101112131415161718192021222324252627282930313233343536373839&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;app&quot;&gt; &lt;div&gt; &lt;!-- &lt;div&gt;&lt;/div&gt;--&gt; &lt;input type=&quot;text&quot; v-model:value=&quot;test&quot;/&gt; &lt;!-- &#123;&#123;test&#125;&#125; --&gt; &lt;/div&gt;&lt;/div&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;&lt;script&gt; let app = new Vue(&#123; el: &#x27;#app&#x27;, data: &#123; test: &#x27;&#x27; &#125;, /* methods: &#123; &#125;,*/ watch: &#123; test: &#123; handler: function (newData,oldData) &#123; console.log(newData); console.log(oldData); &#125;, // immediate: true &#125; &#125; &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è¿›é˜¶åˆ†ç»„åˆ†ç»„æŒ‡å°†åŒ¹é…çš„å†…å®¹ï¼Œä½¿ç”¨()åˆ’åˆ†æˆå¤šä¸ªç»„å—ï¼Œåˆ†å¥½çš„ç»„å¯ç”¨äºåœ¨åŒ¹é…åæå–ã€åå‘å¼•ç”¨ä»¥åŠæ›¿æ¢æ“ä½œã€‚ ä¸‹é¢ä½¿ç”¨ä¸¤ä¸ªæ¡ˆä¾‹æ¥åšè¯´æ˜ æå–ä¿¡æ¯è½¬sqlä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯å°†æå–å‡ºæ¥çš„æ•°æ®è½¬åŒ–ä¸ºDMLè¯­å¥ æ —ï¼šinsert into user(name,age,sex,birthday) values(&#39;èŠéº»&#39;,&#39;19&#39;,&#39;ç”·&#39;,&#39;2001-05-22&#39;) æµ‹è¯•æ•°æ®å¦‚ä¸‹ 12345èŠéº» 2001/05/22 19å² ç”·ç« ä¸€ 1993-08-09 20å² å¥³æ²ˆå®¶æ€¡ 1999.05.22 21å² å¥³é™†åŠ›ä¸¹ 1989-02-19 19å² ç”·ç‹å­æ€¡ 2002-12-15 19å² ç”· $ç»„å·å¯ä»¥æ‹¿åˆ°æ‹¬å·ä¸­åŒ¹é…çš„å†…å®¹ åŒ¹é…æ­£ç¡®çš„è‡ªé—­å’Œæ ‡ç­¾æµ‹è¯•æ•°æ®å¦‚ä¸‹ 1234567&lt;span&gt;span1&lt;/span&gt;&lt;h2&gt;h22&lt;/h2&gt;&lt;h2&gt;h23&lt;/h3&gt;&lt;h3&gt;h32&lt;/h2&gt;&lt;h1&gt;h11&lt;/h1&gt;&lt;div&gt;d iv1&lt;/div&gt;&lt;span&gt;wrong&lt;/dspan&gt; åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨\\ç»„å·æ¥åå‘å¼•ç”¨å‰é¢åŒ¹é…çš„ç»„ $0è¡¨ç¤ºæ•´ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸² æ³¨æ„åå‘å¼•ç”¨åªç”¨åœ¨è¡¨è¾¾å¼ä¸­å¼•ç”¨ä¹‹å‰çš„åˆ†ç»„ åŒ¹é…æ‰€æœ‰çš„JavaScriptä¸­çš„å­—ç¬¦ä¸²JavaScriptä¸­æœ‰ä¸‰ç§å­—ç¬¦ä¸² 1231ã€&#x27;&#x27;2ã€&quot;&quot;3ã€`` æµ‹è¯•æ–‡æœ¬ 12345678910111213141516171819const http = require(&#x27;http&#x27;);const fs = require(&#x27;fs&#x27;);const path = require(&#x27;path&#x27;);const server = http.createServer();server.on(&quot;request&quot;,(req,resp)=&gt;&#123; let url = req.url; if(url===&#x27;/favicon.ico&#x27;)&#123; resp.end(); return; &#125; resp.setHeader(&#x27;Content-type&#x27;,&#x27;text/html;charset=utf-8&#x27;); console.log(`è®¿é—®çš„ç½‘å€çš„$&#123;url&#125;ï¼Œè®¿é—®æ–¹æ³•æ˜¯$&#123;req.method&#125;`); let data = fs.readFileSync(path.join(__dirname,url)); resp.end(data);&#125;)server.listen(&#x27;80&#x27;,()=&gt;&#123; console.log(&#x27;æœåŠ¡å¯åŠ¨\\&quot;æˆåŠŸ\\&quot;ï¼Œ80ç«¯å£&#x27;);&#125;) ä¸‹é¢åšä¸ªæ‹“å±•åˆ†ç»„è¿˜æœ‰ä»¥ä¸‹å››ç§æƒ…å†µ ?&lt;åç§°&gt;å‘½ååˆ†ç»„ (?:)ç§»é™¤åˆ†ç»„ (())åµŒå¥—åˆ†ç»„ (\\d)+åˆ†ç»„ä¸­ä½¿ç”¨é‡è¯ å‘½ååˆ†ç»„é»˜è®¤æƒ…å†µä¸‹é€šè¿‡ç»„å·æ¥å–å€¼ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‘½åç»„ï¼Œè¯­æ³•æ˜¯(?&lt;åç§°&gt; ) ç„¶ååœ¨ç¨‹åºä¸­å°±å¯ä»¥é€šè¿‡&lt;&gt;ä¸­çš„åç§°æ¥å–å€¼ã€‚ å¦‚ï¼š&lt;(?&lt;title&gt;(\\S+?))&gt;.*&lt;\\/\\1&gt; è¯¥è¡¨è¾¾å¼å°±å‘½åäº†ä¸€ä¸ªtitleçš„ç»„ï¼Œåœ¨jsçš„ç»“æœä¸­å°±å¯é€šè¿‡titleå±æ€§å–å€¼ã€‚ æ³¨æ„ï¼š è¿™ç§å‘½åç»„åªèƒ½ç”¨äºåœ¨ç¨‹åºä¸­æå–æ“ä½œï¼Œä¸èƒ½è¿›è¡Œåå‘å¼•ç”¨ï¼Œä¹Ÿä¸èƒ½ç”¨åœ¨æ›¿æ¢æ“ä½œä¸­ã€‚ ä¹Ÿæ­£å› ä¸ºè¿™ç§å±€é™æ€§æ‰€ä»¥å‘½åç»„ä½¿ç”¨çš„å¾ˆå°‘ã€‚ ç§»é™¤åˆ†ç»„()å³ç”¨äºå­è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†ç»„ã€‚ å¦‚æœåªæƒ³ç”¨ä½œå­è¡¨è¾¾å¼ï¼Œè€Œä¸æƒ³ç”¨äºåˆ†ç»„å°±å¯ä»¥ä½¿ç”¨(?: )ä»åˆ†ç»„åˆ—è¡¨ä¸­ç§»é™¤ã€‚ æ¯”å¦‚(?:\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;) è¯¥è¡¨è¾¾å¼å°±åªå­˜åœ¨ä¸¤ä¸ªç»„ï¼Œæœˆ$1å’Œæ—¥$2ã€‚ åµŒå¥—åˆ†ç»„æ¯”å¦‚ï¼š((\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)) å…¶ç»„å·çš„å‘½åé¡ºåºæ˜¯ä»¥å¼€æ‹¬å·å‡ºç°é¡ºåºä¸ºå‡†ã€‚ $1æŒ‡çš„æ˜¯ä¸€ä¸ªæ•´ä½“ $2æŒ‡çš„æ˜¯å¹´ $3æŒ‡çš„æ˜¯æœˆ $4æŒ‡çš„æ˜¯æ—¥ æŒ‰ç…§(çš„é¡ºåºè¿›è¡Œç¼–ç»„ å¤§å°å†™è½¬æ¢åœ¨Ideaã€VS Codeã€Sublimeã€Notepad++ç­‰å·¥å…·è¿›è¡Œæ›¿æ¢æ“ä½œæ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹è¡¨ä¸­æ“ä½œç¬¦è¿›è¡Œå¤§å°å†™è½¬æ¢ æ“ä½œç¬¦ æè¿° \\u å•ä¸ªè½¬å¤§å†™ è½¬æ¢ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ºå¤§å†™ \\U å…¨éƒ¨è½¬å¤§å†™ è½¬æ¢\\Uåæ‰€æœ‰å­—ç¬¦è½¬å¤§å†™ \\Uâ€¦\\E åŒºé—´è½¬å¤§å†™ \\Uä¸\\EåŒºé—´çš„å†…å®¹è½¬å¤§å†™ \\l å•ä¸ªè½¬å°å†™ è½¬æ¢ä¸€ä¸‹ä¸ªå­—ç¬¦ä¸ºå°å†™ \\L å…¨éƒ¨è½¬å°å†™ è½¬æ¢\\Låæ‰€æœ‰å­—ç¬¦è½¬å°å†™ \\Lâ€¦\\E åŒºé—´è½¬å°å†™ \\Lä¸\\UåŒºé—´çš„å†…å®¹è½¬å°å†™ è¾¹ç•Œæ–­è¨€ä»‹ç»æ˜¯è¾¹ç•Œæ–­è¨€è®©æ­£åˆ™è¡¨è¾¾å¼æœ‰äº†æ¡ä»¶åˆ¤æ–­çš„èƒ½åŠ› å…ˆæ¥çœ‹ä¸ªæ —å­æ„Ÿå—ä¸€ä¸‹ åŒ¹é…æ‰€ä»¥å§“åï¼Œä¸èƒ½å¸¦ç€è¡¨å¤´ä¸­çš„å§“å æµ‹è¯•æ•°æ® 123456å§“å ç”Ÿæ—¥ å¹´é¾„ æ€§åˆ«èŠéº» 2001/05/22 19å² ç”·ç« ä¸€ 1993-08-09 20å² å¥³æ²ˆå®¶æ€¡ 1999.05.22 21å² å¥³é™†åŠ›ä¸¹ 1989-02-19 19å² ç”·ç‹å­æ€¡ 2002-12-15 19å² ç”· è¿™é‡Œé¢çš„(?!)å°±æ˜¯å‰ç½®å¦å®šæ–­è¨€ åœ¨æ–­è¨€è¿™é‡Œï¼Œç½‘ä¸Šçš„ï¼Œè§†é¢‘çš„æ•™ç¨‹å¯¹å…¶çš„ç§°å‘¼çœŸçš„æ˜¯å±‚å‡ºä¸ç©·ï¼Œ è¡¨è¾¾å¼ ç¯è§† é¢„æŸ¥ è¾¹ç•Œæ–­è¨€ é›¶å®½æ–­è¨€ (?= ) å‘å‰è‚¯å®šç¯è§† æ­£å‘è‚¯å®šé¢„æŸ¥ è¾¹ç•Œå‰ç½®è‚¯å®šæ–­è¨€ é›¶å®½åº¦æ­£é¢„æµ‹å…ˆè¡Œæ–­è¨€ (?! ) å‘å‰å¦å®šç¯è§† æ­£å‘å¦å®šé¢„æŸ¥ è¾¹ç•Œå‰ç½®å¦å®šæ–­è¨€ é›¶å®½åº¦è´Ÿé¢„æµ‹å…ˆè¡Œæ–­è¨€ (?&lt;= ) å‘åè‚¯å®šç¯è§† åå‘è‚¯å®šé¢„æŸ¥ è¾¹ç•Œåç½®è‚¯å®šæ–­è¨€ é›¶å®½åº¦æ­£å›é¡¾åå‘æ–­è¨€ (?&lt;! ) å‘åå¦å®šç¯è§† åå‘å¦å®šé¢„æŸ¥ è¾¹ç•Œåç½®å¦å®šæ–­è¨€ é›¶å®½åº¦è´Ÿå›é¡¾åå‘æ–­è¨€ ç®¡ä»–å«ä»€ä¹ˆå‘¢ï¼Œåæ­£æˆ‘ä»¬åªè¦çŸ¥é“å®ƒæ˜¯æ–­è¨€ï¼Œç„¶åæ€ä¹ˆä½¿ç”¨å°±è¡Œäº† è¿™é‡Œåªéœ€è¦å››ç»„å›¾å°±å¯ä»¥è®°ä½è¿™å››ä¸ªæ–­è¨€çš„ä½œç”¨äº† (?=èŠ)å°±æ˜¯èŠå‰é¢çš„é‚£ä¸ªåœ°æ–¹ (?!èŠ)å°±æ˜¯é™¤äº†èŠå‰é¢åœ°æ–¹çš„å…¶ä»–æ‰€æœ‰åœ°æ–¹ (?=èŠ)å°±æ˜¯èŠåé¢çš„é‚£ä¸ªåœ°æ–¹ (?!èŠ)å°±æ˜¯é™¤äº†èŠåé¢åœ°æ–¹çš„å…¶ä»–æ‰€æœ‰åœ°æ–¹ è™½ç„¶æ¡ˆä¾‹å¾ˆç®€é™‹ï¼Œä½†æ˜¯åªè¦ç†è§£äº†è¿™å››å¥è¯ï¼Œè¾¹ç•Œæ–­è¨€å°±è½»è½»æ¾æ¾æ‹¿ä¸‹ åŒ¹é…é”™è¯¯çš„åå…­è¿›åˆ¶é¢œè‰²æµ‹è¯•æ•°æ®å¦‚ä¸‹ æ­£ç¡®çš„16è¿›åˆ¶é¢œè‰²è§„åˆ™ 1ã€#å¼€å¤´ 2ã€6ä¸ª16è¿›åˆ¶æ•°å­—æˆ–è€…3ä¸ª 12345678#BC0D13#a3e32d#a656e3#e00#91e376#assdas##14e3ce å®ç°è¿™ç§é¢˜ç›®çš„æ­¥éª¤å°±æ˜¯ å…ˆæ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„16è¿›åˆ¶é¢œè‰² ç„¶åä½¿ç”¨å‘å‰å¦å®šç¯è§† å³å¯æ‰¾åˆ°ä¸ç¬¦åˆè¦æ±‚çš„16è¿›åˆ¶é¢œè‰² æ‰¾å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å¯†ç  å¯†ç é•¿åº¦æ˜¯8-20ä½ å¤§å°å†™å­—æ¯ä»¥åŠæ•°å­—å¿…é¡»éƒ½æœ‰ä¸€ä¸ªã€‚ æµ‹è¯•æ•°æ® 12345678e3c3d2D322386e374W2e3a34fDas213498h94DIOJ239830239ur23u90asdasasd5fe362IKds2ab93Fbf45bbaSd9 æå–JavaScriptä¸­çš„åˆæ³•å˜é‡åæµ‹è¯•æ•°æ® 12345678910111213141516171819const http = require(&#x27;http&#x27;);const fs = require(&#x27;fs&#x27;);const path = require(&#x27;path&#x27;);const 1server = http.createServer();server.on(&#x27;request&#x27;,(req,resp)=&gt;&#123; var url = req.url; if(url===&#x27;/favicon.ico&#x27;)&#123; resp.end(); return; &#125; resp.setHeader(&#x27;Content-type&#x27;,&#x27;text/html;charset=utf-8&#x27;); console.log(`è®¿é—®çš„ç½‘å€çš„$&#123;url&#125;ï¼Œè®¿é—®æ–¹æ³•æ˜¯$&#123;req.method&#125;`); let _data = fs.readFileSync(path.join(__dirname,url)); resp.end(data);&#125;)server.listen(&#x27;80&#x27;,()=&gt;&#123; console.log(&#x27;æœåŠ¡å¯åŠ¨æˆåŠŸï¼Œ80ç«¯å£&#x27;);&#125;) æ·»åŠ åƒåˆ†å·æ¯ä¸‰ä½åŠ å…¥ä¸€ä¸ª,åšåˆ†å‰² æµ‹è¯•æ•°æ® 12345671234997813241230981240941270491277124091247014387413129932908723451972 JAVAä¸­çš„æ­£åˆ™java.util.regex æ˜¯ä¸€ä¸ªç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰€å®šåˆ¶çš„æ¨¡å¼æ¥å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…å·¥ä½œçš„ç±»åº“åŒ… å®ƒä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªç±»ï¼šPattern å’Œ Matcher ã€‚ Patternï¼š ä¸€ä¸ª Pattern æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç»ç¼–è¯‘åçš„è¡¨ç°æ¨¡å¼ã€‚ Matcherï¼šä¸€ä¸ª Matcher å¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ® Pattern å¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ã€‚ é¦–å…ˆä¸€ä¸ª Pattern å®ä¾‹å®šåˆ¶äº†ä¸€ä¸ªæ‰€ç”¨è¯­æ³•ä¸ PERL ç±»ä¼¼çš„æ­£åˆ™è¡¨è¾¾å¼ç»ç¼–è¯‘åçš„æ¨¡å¼ ç„¶åä¸€ä¸ª Matcher å®ä¾‹åœ¨è¿™ä¸ªç»™å®šçš„ Pattern å®ä¾‹çš„æ¨¡å¼æ§åˆ¶ä¸‹è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…åçš„åç»­å·¥ä½œï¼Œæ¯”å¦‚æ›¿æ¢å•Š PatternPattern çš„ä¸»è¦æ–¹æ³•å¦‚ä¸‹ æ–¹æ³•åç§° è§£é‡Š static Pattern compile(String regex) å°†ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘å¹¶èµ‹äºˆç»™ Pattern ç±» static Pattern compile(String regex, int flags) å¯¹æŒ‡å®šå­—ç¬¦ä¸²çš„æˆªå–ï¼Œå‚æ•°é…ç½®å¦‚ä¸‹ int flags() è¿”å›å½“å‰ Pattern çš„åŒ¹é… flag å‚æ•° Matcher matcher(CharSequence input) ç”Ÿæˆä¸€ä¸ªç»™å®šå‘½åçš„ Matcher å¯¹è±¡ static boolean matches(String regex, CharSequence input) ç¼–è¯‘ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼å¹¶å¯¹è¾“å…¥çš„å­—ä¸²ä»¥è¯¥æ­£åˆ™è¡¨è¾¾å¼ä¸ºæ¨¡å¼€å±•åŒ¹é… String pattern() è¿”å›è¯¥Patterå¯¹è±¡æ‰€ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼ ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸²æœ‰ç‰¹å®šæ„ä¹‰çš„å­—ç¬¦ å¯ä»¥é¦–å…ˆè¦ç¼–è¯‘æˆä¸ºä¸€ä¸ª Pattern ç±»çš„å®ä¾‹ è¿™ä¸ª Pattern å¯¹è±¡å¯ä»¥ä½¿ç”¨ matcher(String str) æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ª Matcher å®ä¾‹ æ¥ç€ä¾¿å¯ä»¥ä½¿ç”¨è¯¥ Matcher å®ä¾‹å¯¹ç›®æ ‡å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…åçš„åç»­å·¥ä½œ ç°åœ¨æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ 123456789101112// ç”Ÿæˆä¸€ä¸ª Patternï¼ŒåŒæ—¶ç¼–è¯‘ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼Pattern p = Pattern.compile(&quot;[/\\\\]+&quot;);//ç”¨ Pattern çš„ split() æ–¹æ³•æŠŠå­—ç¬¦ä¸²æŒ‰ &quot;/&quot; å’Œ &quot;\\&quot;åˆ†å‰²String[] result = p.split( &quot;Kevin has seenã€ŠLEONã€‹seveal times,because it is a good film.&quot; +&quot;/ å‡¯æ–‡å·²ç»çœ‹è¿‡ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹å‡ æ¬¡äº†\\å› ä¸ºå®ƒæ˜¯ä¸€éƒ¨&quot; +&quot;å¥½ç”µå½±ã€‚/åè¯:å‡¯æ–‡ã€‚&quot;);for (int i = 0; i &lt; result.length; i++)&#123; System.out.println(result[i]);&#125; ä¸Šè¿°ä»£ç çš„è¿è¡Œç»“æœä¸ºï¼š Kevin has seenã€ŠLEONã€‹seveal times,because it is a good film.å‡¯æ–‡å·²ç»çœ‹è¿‡ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹å‡ æ¬¡äº†ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€éƒ¨å¥½ç”µå½±ã€‚åè¯:å‡¯æ–‡ã€‚ MatcherMatcher å¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ® Pattern å¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ã€‚ ä¾‹ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹å•è¯ dog å‡ºç°åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­å‡ºç°æ¬¡æ•°è¿›è¡Œè®¡æ•°çš„ä¾‹å­ï¼š 123456789101112String regex = &quot;\\\\bdog\\\\b&quot;;String input = &quot;dog dog dogtie&quot;;Pattern p = Pattern.compile(regex);Matcher m = p.matcher(input); // è·å– matcher å¯¹è±¡int count = 0;while (m.find()) &#123; count++; System.out.println(&quot;Match number &quot; + count); System.out.println(&quot;start(): &quot; + m.start()); System.out.println(&quot;end(): &quot; + m.end());&#125; ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š Match number 1 &#x2F;&#x2F; ç¬¬ä¸€æ¬¡å‡ºç° ï¼ˆä¸‹æ ‡ 0-2ï¼‰start(): 0 &#x2F;&#x2F; å¼€å§‹ä¸‹æ ‡ 0end(): 3 &#x2F;&#x2F; ç»“æŸä¸‹æ ‡ 3Match number 2 &#x2F;&#x2F; ç¬¬äºŒæ¬¡å‡ºç°ï¼ˆä¸‹æ ‡ 4-6ï¼‰start(): 4 &#x2F;&#x2F; å¼€å§‹ä¸‹æ ‡ 4end(): 7 &#x2F;&#x2F; ç»“æŸä¸‹æ ‡ 7 dogtieä¸­çš„dogæ²¡æœ‰è¢«åŒ¹é…æ˜¯å› ä¸ºæˆ‘ä»¬è¦çš„æ˜¯å•ç‹¬çš„å•è¯dogè€Œä¸æ˜¯åœ¨å…¶ä»–å•è¯ä¸­çš„dog matches å’Œ lookingAt è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ç”¨æ¥å°è¯•åŒ¹é…ä¸€ä¸ªè¾“å…¥åºåˆ—æ¨¡å¼ã€‚ å®ƒä»¬çš„ä¸åŒæ˜¯ matches è¦æ±‚æ•´ä¸ªåºåˆ—éƒ½åŒ¹é… è€ŒlookingAt æ–¹æ³•è™½ç„¶ä¸éœ€è¦æ•´å¥éƒ½åŒ¹é…ï¼Œä½†æ˜¯éœ€è¦ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…ã€‚ 1234567891011String regex = &quot;foo&quot;;String input = &quot;fooooooooooooooooo&quot;;String input2 = &quot;ooooofoooooooooooo&quot;;Pattern pattern = Pattern.compile(regex);Matcher matcher = pattern.matcher(input);Matcher matcher2 = pattern.matcher(input2);System.out.println(&quot;lookingAt(): &quot; + matcher.lookingAt());System.out.println(&quot;matches(): &quot; + matcher.matches());System.out.println(&quot;lookingAt(): &quot; + matcher2.lookingAt()); ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š lookingAt(): truematches(): falselookingAt(): false replaceFirst å’Œ replaceAll è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨æ¥æ›¿æ¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬ã€‚ ä¸åŒçš„æ˜¯ï¼ŒreplaceFirst åªä¼šæ›¿æ¢ç¬¬ä¸€æ¬¡åŒ¹é… replaceAll æ›¿æ¢æ‰€æœ‰åŒ¹é…ã€‚ ä¸‹é¢çš„ä¾‹å­æ¥è§£é‡Šè¿™ä¸ªåŠŸèƒ½ï¼š 123456789101112131415String regex = &quot;dog&quot;;String input1 = &quot;The dog says meow. All dogs say meow.&quot;;String input2 = &quot;The dog says meow. All dogs say meow.&quot;;String replace = &quot;cat&quot;;Pattern p = Pattern.compile(regex);Matcher m1 = p.matcher(input1);Matcher m2 = p.matcher(input2);input1 = m1.replaceAll(replace);input2 = m2.replaceFirst(replace);System.out.println(input1);System.out.println(input2); ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š The cat says meow. All cats say meow.The cat says meow. All dogs say meow. ä»ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒreplaceFirst æ–¹æ³•åªå°†ç¬¬ä¸€ä¸ª dog æ›¿æ¢æˆäº† catã€‚è€Œ replaceAll æ–¹æ³•å´å°†ä¸¤ä¸ª dog éƒ½æ›¿æ¢æˆäº† catã€‚ å¥½å•¦ï¼Œç»“æŸäº† æ­£åˆ™å·®ä¸å¤šå°±è¿™äº›å†…å®¹äº† å¦‚æœä½ å‘ç°äº†é”™è¯¯ æœ›ç•™è¨€æ‰¹è¯„æŒ‡æ­£ï¼","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Vue2-åŸºç¡€5","slug":"Vue2-åŸºç¡€5","date":"2022-06-30T23:45:18.000Z","updated":"2022-09-27T13:58:04.332Z","comments":true,"path":"å‰ç«¯/Vue2/2022/07/01/Vue2-åŸºç¡€5/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/07/01/Vue2-%E5%9F%BA%E7%A1%805/","excerpt":"","text":"Vue2-åŸºç¡€5åŠ¨ç”»æ•ˆæœåœ¨éšè—å…ƒç´ ä¹‹å‰æ‰§è¡Œä¸€æ®µåŠ¨ç”» åœ¨æ˜¾ç¤ºå…ƒç´ ä¹‹å‰æ˜¾ç¤ºä¸€æ®µåŠ¨ç”» 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;template&gt; &lt;div&gt; &lt;button @click=&quot;show=!show&quot;&gt;æ˜¾ç¤º/éšè—&lt;/button&gt; &lt;transition name=&quot;come&quot; appear&gt; &lt;h2 v-show=&quot;show&quot;&gt;Helloï¼ŒWorldï¼&lt;/h2&gt; &lt;/transition&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Test&quot;, data()&#123; return &#123; show: true &#125; &#125;,&#125;&lt;/script&gt;&lt;style scoped&gt;.come-enter-active &#123; animation: move 1s linear;&#125;.come-leave-active &#123; animation: move 1s linear reverse;&#125;@keyframes move &#123; from &#123; transform: translateX(-100%); &#125; to &#123; transform: translateX(0px); &#125;&#125;h2 &#123; background: greenyellow; width: 300px&#125;&lt;/style&gt; è¿‡æ¸¡æ•ˆæœ1234567891011121314151617181920212223242526272829303132333435363738&lt;template&gt; &lt;div&gt; &lt;button @click=&quot;show = !isShow&quot;&gt;æ˜¾ç¤º/éšè—&lt;/button&gt; &lt;transition-group name=&quot;hello&quot; appear&gt; &lt;h1 v-show=&quot;!show&quot; key=&quot;1&quot;&gt;Helloï¼&lt;/h1&gt; &lt;h1 v-show=&quot;show&quot; key=&quot;2&quot;&gt;World!&lt;/h1&gt; &lt;/transition-group&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;Test&#x27;, data() &#123; return &#123; show:true &#125; &#125;, &#125;&lt;/script&gt;&lt;style scoped&gt; h1&#123; background-color: orange; &#125; /* è¿›å…¥çš„èµ·ç‚¹ã€ç¦»å¼€çš„ç»ˆç‚¹ */ .hello-enter,.hello-leave-to&#123; transform: translateX(-100%); &#125; .hello-enter-active,.hello-leave-active&#123; transition: 0.5s linear; &#125; /* è¿›å…¥çš„ç»ˆç‚¹ã€ç¦»å¼€çš„èµ·ç‚¹ */ .hello-enter-to,.hello-leave&#123; transform: translateX(0); &#125;&lt;/style&gt; é…ç½®ä»£ç†å‘èµ·ç½‘ç»œè¯·æ±‚æˆ‘ä»¬æœ‰ä»¥ä¸‹å››ç§æ–¹å¼ 12341.xhr windowä¸Šçš„å¯¹è±¡ï¼ŒåŸç”Ÿ2.jQuery å†…ç½®äº†ajaxè¯·æ±‚ï¼Œä½†æ˜¯æœ¬èº«æ³¨é‡çš„æ˜¯DOMèŠ‚ç‚¹æ“ä½œ3.axios å°è£…äº†chrï¼Œååˆ†è½»é‡ï¼Œpromiseé£æ ¼4.fetch windowä¸Šçš„å¯¹è±¡ï¼ŒåŸç”Ÿï¼ŒåŒ…è£…äº†ä¸¤å±‚promise è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨axiosæ¥åšç½‘ç»œè¯·æ±‚ 1npm i axios CORS(Cross-Origin Resource Sharing ) å‰ç«¯ä¸­å‘å‡ºajaxè¯·æ±‚çš„æ—¶å€™ç»å¸¸ä¼šå‡ºç°çš„ä¸€ç§é”™è¯¯ï¼Œå«åšè·¨åŸŸè¯·æ±‚ è¿™æ˜¯å› ä¸ºè¿èƒŒäº†åŒæºç­–ç•¥ 1ã€åŒåè®® 2ã€ä¸»æœºå 3ã€ç«¯å£å· è§£å†³æ–¹æ¡ˆ 1ã€åç«¯è¿”å›æ•°æ®çš„æ—¶å€™ï¼ŒåŠ ä¸Šä¸€äº›ç‰¹æ®Šçš„å“åº”å¤´å³å¯ 2ã€é…ç½®ä»£ç†æœåŠ¡å™¨ æœåŠ¡å™¨ä¹‹é—´äº’ç›¸è®¿é—®æ˜¯ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶çš„ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªå’Œæˆ‘ä»¬è‡ªå·±çš„ç«¯å£å·ä¸€è‡´çš„ä»£ç†æœåŠ¡å™¨ å°†è¯·æ±‚è½¬å‘ç»™å®ƒ è®©å®ƒå»è¯·æ±‚å…¶ä»–ç«¯å£ä¸Šçš„æœåŠ¡å™¨å¾—åˆ°æ•°æ®åå†å°†å…¶è¿”å› æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nginxæˆ–è€…å€ŸåŠ©vue-cliæ¥é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ è¿™é‡Œæˆ‘ä»¬å€ŸåŠ©vue-cli å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼ä¸€ï¼‰ 12345module.exports = &#123; devServer: &#123; proxy: &#x27;http://localhost:5000&#x27; &#125;, &#125; ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚ ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚ å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰ å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼äºŒï¼‰ 12345678910111213141516module.exports = &#123; devServer: &#123; proxy: &#123; &#x27;/hello&#x27;: &#123; target: &#x27;http://localhost:5000&#x27;, // ws: true, //ç”¨äºæ”¯æŒwebsocket // changeOrigin: true //ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼ &#125;, &#x27;/demo&#x27;: &#123; target: &#x27;http://localhost:5001&#x27;, // ws: true, //ç”¨äºæ”¯æŒwebsocket // changeOrigin: true //ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼ &#125; &#125; &#125;&#125; ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚ ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€ã€‚ æ’æ§½è®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº çˆ¶ç»„ä»¶ &#x3D;&#x3D;&#x3D;&gt; å­ç»„ä»¶ ã€‚ é»˜è®¤æ’æ§½çˆ¶ç»„ä»¶ï¼š 123&lt;Category&gt; &lt;div&gt;htmlç»“æ„1&lt;/div&gt;&lt;/Category&gt; å­ç»„ä»¶ï¼š 123456&lt;template&gt; &lt;div&gt; &lt;!-- å®šä¹‰æ’æ§½ --&gt; &lt;slot&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt; å…·åæ’æ§½çˆ¶ç»„ä»¶ï¼š 123456789&lt;Category&gt; &lt;template slot=&quot;center&quot;&gt; &lt;div&gt;htmlç»“æ„1&lt;/div&gt; &lt;/template&gt; &lt;template v-slot:footer&gt; &lt;div&gt;htmlç»“æ„2&lt;/div&gt; &lt;/template&gt;&lt;/Category&gt; å­ç»„ä»¶ï¼š 1234567&lt;template&gt; &lt;div&gt; &lt;!-- å®šä¹‰æ’æ§½ --&gt; &lt;slot name=&quot;center&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;slot name=&quot;footer&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt; ä½œç”¨åŸŸæ’æ§½ä½œç”¨ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚ çˆ¶ç»„ä»¶ï¼š 123456789101112131415&lt;Category&gt; &lt;template scope=&quot;scopeData&quot;&gt; &lt;!-- ç”Ÿæˆçš„æ˜¯ulåˆ—è¡¨ --&gt; &lt;ul&gt; &lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/template&gt;&lt;/Category&gt;&lt;Category&gt; &lt;template slot-scope=&quot;scopeData&quot;&gt; &lt;!-- ç”Ÿæˆçš„æ˜¯h4æ ‡é¢˜ --&gt; &lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt; &lt;/template&gt;&lt;/Category&gt; å­ç»„ä»¶ï¼š 123456789101112131415161718&lt;template&gt; &lt;div&gt; &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;Category&#x27;, props:[&#x27;title&#x27;], //æ•°æ®åœ¨å­ç»„ä»¶è‡ªèº« data() &#123; return &#123; games:[&#x27;çº¢è‰²è­¦æˆ’&#x27;,&#x27;ç©¿è¶Šç«çº¿&#x27;,&#x27;åŠ²èˆå›¢&#x27;,&#x27;è¶…çº§ç›ä¸½&#x27;] &#125; &#125;, &#125;&lt;/script&gt; è·¯ç”±æ¯ä¸€ä¸ªVueçš„å¤§å‹é¡¹ç›®éƒ½ä¼šç”¨åˆ°è·¯ç”±ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†ååˆ†é‡è¦ æ— è·¯ç”±ï¼Œæ— SPAåº”ç”¨ æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä»¥å‰å†™çš„webåº”ç”¨çš„ç»“æ„ 1234- index.html- user.html- pay.html- category.html ç„¶åæ¯ä¸ªé¡µé¢ä¸­åˆæœ‰é“¾æ¥å¯ä»¥å®ç°äº’ç›¸è·³è½¬ï¼Œè¿™å°±æ˜¯å…¸å‹çš„å¤šé¡µé¢åº”ç”¨ SPAåº”ç”¨ï¼ˆSingle page web applicationï¼‰ï¼šå•é¡µé¢åº”ç”¨ åªè¦ç‚¹å‡»ä¾§è¾¹æ çš„ç›®å½•ï¼ŒåŠŸèƒ½åŒºå°±ä¼šåˆ‡æ¢åˆ°ç‰¹å®šçš„é¡µé¢ï¼Œä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œå®ç°å±€éƒ¨åˆ·æ–°ï¼Œè¿™å°±æ˜¯å•é¡µé¢åº”ç”¨ è·¯ç”±å°±æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªåˆ‡æ¢ï¼Œè·¯ç”±å™¨å°±æ˜¯ç”¨æ¥ç®¡ç†è¿™äº›è·¯ç”±çš„ æ¦‚å¿µè·¯ç”±å°±æ˜¯ä¸€ç»„key-valueçš„å¯¹åº”å…³ç³» å¤šä¸ªè·¯ç”±ï¼Œç”±ä¸€ä¸ªè·¯ç”±å™¨ç»Ÿä¸€ç®¡ç† è·¯ç”±åˆ†ç±» åç«¯è·¯ç”± keyå°±æ˜¯è·¯å¾„ valueå°±æ˜¯å‡½æ•°ï¼Œå‡½æ•°è¿”å›å¯¹è¿™æ¬¡è¯·æ±‚å“åº”çš„æ•°æ® å‰ç«¯è·¯ç”± keyå°±æ˜¯ç†è§£ valueå°±æ˜¯ç»„ä»¶ï¼Œä»€ä¹ˆæ ·çš„è·¯å¾„ï¼Œå±•ç¤ºä»€ä¹ˆæ ·çš„ç»„ä»¶ åŸºæœ¬è·¯ç”±å®ç°ä»¥ä¸‹åŠŸèƒ½ é»˜è®¤æ˜¾ç¤ºpageAç»„ä»¶ ç‚¹å‡»pageAæŒ‰é’®ï¼Œåˆ‡æ¢pageAç»„ä»¶ ç‚¹å‡»pageBæŒ‰é’®åˆ‡æ¢pageBç»„ä»¶ å®‰è£…Vue-router 1npm i vue-router å®‰è£…æ’ä»¶ 1234567891011import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import VueRouter from &#x27;vue-router&#x27;import router from &#x27;./router&#x27;Vue.config.productionTip = falseVue.use(VueRouter)new Vue(&#123; render: h =&gt; h(App), router&#125;).$mount(&quot;#app&quot;) åˆ›å»ºpageAå’ŒpageBç»„ä»¶ 123456789101112131415&lt;template&gt; &lt;div&gt; æˆ‘æ˜¯pageAçš„å†…å®¹ &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageA&quot;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 123456789101112131415&lt;template&gt; &lt;div&gt; æˆ‘æ˜¯pageBçš„å†…å®¹ &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageB&quot;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; åˆ›å»º/routeræ–‡ä»¶å¤¹å¹¶åˆ›å»ºindex.js 1234567891011121314151617181920212223// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨import VueRouter from &#x27;vue-router&#x27;//å¼•å…¥ç»„ä»¶import PageA from &quot;@/components/PageA&quot;;import PageB from &quot;@/components/PageB&quot;;//åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨export default new VueRouter(&#123; routes:[ &#123; path: &quot;/&quot;, component: PageA &#125;, &#123; path:&#x27;/pageA&#x27;, component:PageA &#125;, &#123; path:&#x27;/pageB&#x27;, component:PageB &#125; ]&#125;) æˆ‘ä»¬å…ˆå†™å£°æ˜å¼è·¯ç”± 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;h3&gt;ç‚¹ä»¥ä¸‹æŒ‰é’®åˆ‡æ¢é¡µé¢&lt;/h3&gt; &lt;div style=&quot;margin-bottom: 30px;display: flex;width: 120px;justify-content: space-between&quot;&gt; &lt;router-link class=&quot;item&quot; active-class=&quot;active&quot; to=&quot;/pageA&quot;&gt;PageA&lt;/router-link&gt; &lt;router-link class=&quot;item&quot; active-class=&quot;active&quot; to=&quot;/pageB&quot;&gt;PageB&lt;/router-link&gt; &lt;/div&gt; &lt;router-view/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;App&#x27;&#125;&lt;/script&gt;&lt;style scoped&gt;.container &#123; padding: 30px;&#125;.active &#123; color: red; text-decoration: none;&#125;.item &#123; text-decoration: none;&#125;&lt;/style&gt; æ€»ç»“ï¼š 12345678910111. è¢«åˆ‡æ¢èµ°çš„ç»„ä»¶å®é™…ä¸Šæ˜¯è¢«é”€æ¯äº†2. router-linkç»è¿‡ç¼–è¯‘åï¼Œå®é™…ä¸Šç”Ÿæˆçš„æ˜¯aæ ‡ç­¾ï¼Œè¿™æ˜¯å£°æ˜å¼è·¯ç”±çš„ä¸€ä¸ªå°å¼Šç«¯ æˆ‘ä»¬åé¢ä¼šä½¿ç”¨ç¼–ç¨‹å¼è·¯ç”±æ¥å®ç°è·³è½¬åŠŸèƒ½ï¼Œä¼šæ›´åŠ çµæ´»3. pageAå’ŒpageBçš„å®ä¾‹ä¸Šéƒ½å¤šäº†ä¸¤ä¸ªå±æ€§$routeå’Œ$router $routeæŒ‡çš„æ˜¯è‡ªèº«çš„è·¯ç”±è§„åˆ™å’ŒçŠ¶å†µ $routeræ˜¯å…¨å±€çš„è·¯ç”±å™¨ 4. è·¯ç”±ç»„ä»¶ï¼ˆpageAå’ŒpageBè¿™ç§éœ€è¦è·¯ç”±è§„åˆ™æ‰ä¼šæ˜¾ç¤ºçš„ç»„ä»¶ï¼‰ä¸€èˆ¬æ”¾åœ¨pagesæ–‡ä»¶å¤¹ä¸‹ ä¸€èˆ¬ç»„ä»¶æ”¾åœ¨componentsæ–‡ä»¶å¤¹ä¸‹ åµŒå¥—è·¯ç”± 1234567891011121314151617181920212223242526272829303132333435// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨import VueRouter from &#x27;vue-router&#x27;//å¼•å…¥ç»„ä»¶import PageA from &quot;@/components/PageA&quot;;import PageB from &quot;@/components/PageB&quot;;import PageAA from &quot;@/components/PageAA&quot;;import PageAB from &quot;@/components/PageAB&quot;;//åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨export default new VueRouter(&#123; routes:[ &#123; path: &quot;/&quot;, component: PageA &#125;, &#123; path:&#x27;/pageA&#x27;, component:PageA, children: [ &#123; path: &quot;pageAA&quot;,//è¿™é‡Œåƒä¸‡ä¸è¦åŠ ä¸Š/ component: PageAA &#125;, &#123; path: &quot;pageAB&quot;, component: PageAB &#125;, ] &#125;, &#123; path:&#x27;/pageB&#x27;, component:PageB &#125; ]&#125;) PageA.vue 123456789101112131415161718192021&lt;template&gt; &lt;div&gt; æˆ‘æ˜¯pageAçš„å†…å®¹ &lt;ul&gt; &lt;!--è¿™é‡Œè¦å†™å®Œæ•´çš„è·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰å¯èƒ½ä¼šè·³è½¬åˆ°å…¶ä»–é¡µé¢å»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å¾—å†™å®Œæ•´çš„è·¯å¾„--&gt; &lt;li&gt;&lt;router-link to=&quot;/pageA/pageAA&quot;&gt;pageAA&lt;/router-link&gt;&lt;/li&gt; &lt;li&gt;&lt;router-link to=&quot;/pageA/pageAB&quot;&gt;pageAB&lt;/router-link&gt;&lt;/li&gt; &lt;/ul&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageA&quot;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; å‘½åè·¯ç”±åœ¨åˆ›å»ºè·¯ç”±å™¨çš„æ—¶å€™ï¼Œä¸ºè·¯ç”±èµ·åå­— 123456789101112131415161718192021222324252627282930313233343536373839404142434445// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨import VueRouter from &#x27;vue-router&#x27;//å¼•å…¥ç»„ä»¶import PageA from &quot;@/components/PageA&quot;;import PageB from &quot;@/components/PageB&quot;;import PageAA from &quot;@/components/PageAA&quot;;import PageAB from &quot;@/components/PageAB&quot;;import PageContent from &quot;@/components/PageContent&quot;;//åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨export default new VueRouter(&#123; routes:[ &#123; path: &quot;/&quot;, component: PageA &#125;, &#123; path:&#x27;/pageA&#x27;, component:PageA, children: [ &#123; path: &quot;pageAA&quot;, component: PageAA, &#125;, &#123; path: &quot;pageAB&quot;, component: PageAB, children: [ &#123; //èµ·å name: &quot;detailRoute&quot;, path: &quot;pageContent&quot;, component: PageContent &#125; ] &#125;, ] &#125;, &#123; path:&#x27;/pageB&#x27;, component:PageB &#125; ]&#125;) é‚£ä¹ˆåœ¨åˆ‡æ¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨åå­—æ¥é€‰æ‹©è·¯ç”±äº† 12345678&lt;router-link :to=&quot;&#123; name: &#x27;detailRoute&#x27;, query: &#123; pageDetail: p &#125;&#125;&quot;&gt;&#123;&#123;p.title&#125;&#125;&lt;/router-link&gt; queryå‚æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;template&gt; &lt;div&gt; æˆ‘æ˜¯pageABçš„å†…å®¹ &lt;ul&gt; &lt;li v-for=&quot;p in pageList&quot; :key=&quot;p.id&quot;&gt; &lt;router-link :to=&quot;&#123; path: &#x27;/pageA/pageAB/pageContent&#x27;, query: &#123; pageDetail: p &#125; &#125;&quot;&gt; &#123;&#123;p.title&#125;&#125; &lt;/router-link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageAB&quot;, data()&#123; return &#123; pageList: [ &#123; id: &#x27;001&#x27;, content: &#x27;æˆ‘æ˜¯pageABAçš„å†…å®¹&#x27;, title: &#x27;pageABA&#x27;, &#125;, &#123; id: &#x27;002&#x27;, content: &#x27;æˆ‘æ˜¯pageABBçš„å†…å®¹&#x27;, title: &#x27;pageABB&#x27;, &#125;, &#123; id: &#x27;003&#x27;, content: &#x27;æˆ‘æ˜¯pageABCçš„å†…å®¹&#x27;, title: &#x27;pageABC&#x27;, &#125; ] &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 12345678910111213141516171819&lt;template&gt; &lt;div&gt; &lt;ul&gt; &lt;li&gt;&#123;&#123;$route.query.pageDetail.id&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;$route.query.pageDetail.title&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;$route.query.pageDetail.content&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageContent&quot;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; paramså‚æ•°123456789101112131415161718192021&lt;li v-for=&quot;p in pageList&quot; :key=&quot;p.id&quot;&gt; &lt;router-link exact-active-class=&quot;active&quot; :to=&quot;`/pageA/pageAB/pageContent/$&#123;p.id&#125;/$&#123;p.title&#125;/$&#123;p.content&#125;`&quot;&gt; &#123;&#123;p.title&#125;&#125; &lt;/router-link&gt;&lt;/li&gt;&lt;!--æˆ–è€…è¿™æ ·å†™--&gt;&lt;li v-for=&quot;p in pageList&quot; :key=&quot;p.id&quot;&gt; &lt;!--è¿™é‡Œå¿…é¡»ä½¿ç”¨nameå‚æ•°æ¥æŒ‡å®šè·¯ç”±ï¼Œä¸ç„¶ä¼šå¤±æ•ˆ--&gt; &lt;router-link :to=&quot;&#123; name: &#x27;detailRoute&#x27;, params: &#123; id: p.id, title: p.title, content: p.title &#125; &#125;&quot;&gt; &#123;&#123;p.title&#125;&#125; &lt;/router-link&gt;&lt;/li&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨import VueRouter from &#x27;vue-router&#x27;//å¼•å…¥ç»„ä»¶import PageA from &quot;@/components/PageA&quot;;import PageB from &quot;@/components/PageB&quot;;import PageAA from &quot;@/components/PageAA&quot;;import PageAB from &quot;@/components/PageAB&quot;;import PageContent from &quot;@/components/PageContent&quot;;//åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨export default new VueRouter(&#123; routes:[ &#123; path: &quot;/&quot;, component: PageA &#125;, &#123; path:&#x27;/pageA&#x27;, component:PageA, children: [ &#123; path: &quot;pageAA&quot;, component: PageAA, &#125;, &#123; path: &quot;pageAB&quot;, component: PageAB, children: [ &#123; name: &quot;detailRoute&quot;, path: &quot;pageContent/:id/:title/:content&quot;, component: PageContent, &#125; ] &#125;, ] &#125;, &#123; path:&#x27;/pageB&#x27;, component:PageB &#125; ]&#125;) 123456789101112131415&lt;template&gt; &lt;div&gt; &lt;ul&gt; &lt;li&gt;&#123;&#123;$route.params.id&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;$route.params.title&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;$route.params.content&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageContent&quot;&#125;&lt;/script&gt; queryå’Œparamsçš„åŒºåˆ« 12341. queryçš„å¯¹è±¡å†™æ³•ä¸­ï¼Œpathå¯ä»¥æ˜¯è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯è·¯ç”±å ä½†æ˜¯paramså¿…é¡»æ˜¯è·¯ç”±å2. paramséœ€è¦åœ¨è·¯ç”±å™¨çš„é…ç½®æ–‡ä»¶ä¸­æå‰å£°æ˜ propsé…ç½®æˆ‘ä»¬å‘ç°è¯»å–queryå’Œparamsä¼ è¿‡æ¥çš„å‚æ•°çš„æ—¶å€™ éœ€è¦ä¸æ–­ä½¿ç”¨$route.query.xxxæˆ–è€…$route.params.xxxï¼Œååˆ†ç¹ç å¦‚æœéœ€è¦ç®€åŒ–ï¼Œåˆ™éœ€è¦ä½¿ç”¨propsé…ç½®é¡¹ 12345678910111213141516171819202122232425262728&#123; path: &quot;pageAB&quot;, component: PageAB, children: [ &#123; name: &quot;detailRoute&quot;, path: &quot;pageContent/:id/:title/:content&quot;, component: PageContent, //ç¬¬ä¸€ç§å†™æ³•ï¼Œè¯¥å¯¹è±¡çš„æ‰€æœ‰kvéƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™è¯¥ç»„ä»¶ // props: &#123; // a: &#x27;a&#x27;, // b: &#x27;b&#x27;, // &#125; //propsçš„ç¬¬äºŒç§å†™æ³•ï¼Œå€¼ä¸ºå¸ƒå°”å€¼ï¼Œè‹¥å¸ƒå°”å€¼ä¸ºçœŸï¼Œå°±ä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°ï¼Œä»¥propsçš„å½¢å¼ä¼ ç»™è¯¥ç»„ä»¶ã€‚ //props: true, //propsçš„ç¬¬ä¸‰ç§å†™æ³•ï¼Œå€¼ä¸ºå‡½æ•°,æ¨è props($route)&#123; return &#123; id:$route.query.id, title:$route.query.title, content:$route.query.content &#125; &#125; &#125; ]&#125; replaceå±æ€§ä½¿ç”¨router-linkæ ‡ç­¾å®ç°è·³è½¬ï¼Œæµè§ˆå™¨å¯¹äºå†å²è®°å½•çš„å­˜å‚¨æ˜¯è¿™æ ·çš„ è¿™ç§æ¨¡å¼å«pushæ¨¡å¼ å®ƒå°†ä¸€æ¡æ¡è®°å½•å‹å…¥æ ˆä¸­ å¦‚æœæˆ‘ä»¬æƒ³å®ç°ä»¥ä¸‹è¿™ç§æ¨¡å¼ è¿™ç§æ¨¡å¼å«replaceæ¨¡å¼ å®ƒå°†ä¸Šä¸€æ¡è®°å½•è¦†ç›–ä¸‹ä¸€æ¡è®°å½• router-linké»˜è®¤æ˜¯pushæ¨¡å¼ å¢åŠ replaceå±æ€§ä»¥ä½¿ç”¨replaceæ¨¡å¼ 1&lt;router-link class=&quot;item&quot; replace active-class=&quot;active&quot; to=&quot;/pageA&quot;&gt;PageA&lt;/router-link&gt; ç¼–ç¨‹å¼è·¯ç”±ä¿®æ”¹ä»¥ä¸Šæ¡ˆä¾‹ 1ã€åˆ‡æ¢pageAã€pageBçš„aæ”¹ä¸ºbutton 2ã€ä»¥pushæ¨¡å¼åˆ‡æ¢pageA 3ã€ä»¥replaceæ¨¡å¼åˆ‡æ¢pageB 4ã€å‰è¿›ã€åé€€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;h3&gt;ç‚¹ä»¥ä¸‹æŒ‰é’®åˆ‡æ¢é¡µé¢&lt;/h3&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button @click=&quot;goBack&quot;&gt;åé€€&lt;/button&gt; &lt;button @click=&quot;goForward&quot;&gt;å‰è¿›&lt;/button&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button @click=&quot;gotoPageA&quot;&gt;PageA&lt;/button&gt; &lt;button @click=&quot;gotoPageB&quot;&gt;PageB&lt;/button&gt;&lt;!-- &lt;router-link class=&quot;item&quot; replace active-class=&quot;active&quot; to=&quot;/pageA&quot;&gt;PageA&lt;/router-link&gt;--&gt;&lt;!-- &lt;router-link class=&quot;item&quot; active-class=&quot;active&quot; to=&quot;/pageB&quot;&gt;PageB&lt;/router-link&gt;--&gt; &lt;/div&gt; &lt;router-view/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;App&#x27;, methods:&#123; gotoPageA()&#123; this.$router.push(&quot;/pageA&quot;) &#125;, gotoPageB()&#123; this.$router.replace(&quot;/pageB&quot;) &#125;, goBack()&#123; this.$router.back(); &#125;, goForward()&#123; this.$router.forward(); &#125;, &#125;&#125;&lt;/script&gt;&lt;style&gt;.container &#123; padding: 30px;&#125;.active &#123; color: red; text-decoration: none;&#125;.item &#123; text-decoration: none;&#125;.buttons &#123; margin-bottom: 30px; display: flex; width: 120px; justify-content: space-between;&#125;&lt;/style&gt; ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆªå°±æ˜¯ä¸é€šè¿‡router-linkå®ç° è€Œæ˜¯æ‰‹åŠ¨ä½¿ç”¨routeræ§åˆ¶çš„è·¯ç”±è·³è½¬ 123456789101112131. å¦‚æœè¦ä¼ å…¥å‚æ•°ï¼Œå°±ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯è¦ä½¿ç”¨å¯¹è±¡å†™æ³•gotoDetail(p)&#123; this.$router.push(&#123; name: &#x27;detailRoute&#x27;, params: &#123; id: p.id, title: p.title, content: p.title &#125; &#125;);&#125;2. ç¼–ç¨‹å¼è·¯ç”±ä¼šæ›´åŠ çµæ´»ï¼Œä¸æ˜¯è¯´router-linkä¸å¥½ ç¼“å­˜è·¯ç”±ç»„ä»¶ç°åœ¨å†åŠ ä¸€ä¸ªéœ€æ±‚åœ¨ä¸‹å›¾å‡ºåŠ å…¥ä¸€ä¸ªinputç»„ä»¶ï¼Œç„¶åå†pageAAå’ŒpageABä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œinputä¸­çš„æ•°æ®ä¸ä¼šä¸¢å¤± ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œç»„ä»¶è¢«åˆ‡æ¢èµ°åï¼Œä¼šè¢«é”€æ¯ é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é˜»æ­¢è¿™æ¬¡çš„é”€æ¯å‘¢ åªè¦åœ¨pageAçš„ç»„ä»¶ä¸­å°†router-viewç”¨keep-aliveåŒ…è£¹å³å¯ 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;div&gt; æˆ‘æ˜¯pageAçš„å†…å®¹ &lt;ul&gt; &lt;li&gt;&lt;router-link to=&quot;/pageA/pageAA&quot; active-class=&quot;active&quot;&gt;pageAA&lt;/router-link&gt;&lt;/li&gt; &lt;li&gt;&lt;router-link to=&quot;/pageA/pageAB&quot; active-class=&quot;active&quot;&gt;pageAB&lt;/router-link&gt;&lt;/li&gt; &lt;/ul&gt; &lt;keep-alive include=&quot;PageAB&quot;&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/keep-alive&gt; &lt;!-- è¿™é‡Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼Œç¼“å­˜è¿™ä¸ªè·¯ç”±è§†å›¾ä¸­çš„PageABç»„ä»¶ &lt;keep-alive :include=&quot;[&#x27;PageAB&#x27;]&quot;&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/keep-alive&gt; --&gt; &lt;!-- è¿™é‡Œä¸å†™inclueå±æ€§çš„è¯ï¼Œè¿™ä¸ªè§†å›¾ä¸­æ‰€æœ‰çš„ç»„ä»¶éƒ½ä¼šè¢«ç¼“å­˜ &lt;keep-alive&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/keep-alive&gt; --&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &quot;PageA&quot; &#125;&lt;/script&gt; æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­åœ¨è¿™ä¸ªåœ°æ–¹å±•ç¤ºä¸€ä¸ªé€æ˜åº¦ä¸€ç›´å‘ç”Ÿæ”¹å˜çš„æ–‡å­— 123&lt;li :style=&quot;&#123;opacity&#125;&quot;&gt; åŠ æ²¹ï¼ï¼ï¼&lt;/li&gt; ç„¶åå¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¯¹opacityçš„å€¼è¿›è¡Œæ“ä½œ 123456789mounted() &#123; this.timer = setInterval(()=&gt;&#123; this.opacity-=0.01; if(this.opacity&lt;=0) this.opacity=1 &#125;,16);&#125;,beforeDestroy() &#123; clearInterval(this.timer);&#125; è¿™é‡Œå…¶å®å°±å‡ºç°äº†é—®é¢˜ æˆ‘ä»¬å·²ç»å°†å…¶è®¾ç½®ä¸ºäº†ç¼“å­˜è·¯ç”± é‚£ä¹ˆå½“æˆ‘ä»¬åˆ‡æ¢åˆ°å…¶ä»–ç»„ä»¶çš„æ—¶å€™ è¯¥å®šæ—¶å™¨è¿˜åœ¨å‘¨è€Œå¤å§‹çš„è·‘ï¼Œè¿™æ˜¯ä¸å¯¹çš„ è¿™æ—¶å€™å°±éœ€è¦ä¸¤ä¸ªæ–°çš„è·¯ç”±é’©å­ è¿™æ˜¯è·¯ç”±ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ 1234567891011activated() &#123; // å½“åˆ‡æ¢åˆ°è¯¥ç»„ä»¶ï¼Œåˆ™è¯¥å›è°ƒè¢«è°ƒç”¨ this.timer = setInterval(()=&gt;&#123; this.opacity-=0.01; if(this.opacity&lt;=0) this.opacity=1 &#125;,16);&#125;,deactivated() &#123; // å½“è¯¥ç»„ä»¶è¢«åˆ‡æ¢èµ°ï¼Œåˆ™è°ƒç”¨è¯¥å›è°ƒ clearInterval(this.timer);&#125; è·¯ç”±å®ˆå«å…¨å±€è·¯ç”±å®ˆå«12345678910//å…¨å±€å‰ç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨ï¼Œä½¿ç”¨next()æ”¾è¡Œ// toå’Œfroméƒ½æ˜¯routeä¿¡æ¯router.beforeEach((to,from,next)=&gt;&#123; console.log(&#x27;å‰ç½®è·¯ç”±å®ˆå«&#x27;,to,from,next)&#125;)//å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨router.afterEach((to,from)=&gt;&#123; console.log(&#x27;åç½®è·¯ç”±å®ˆå«&#x27;,to,from)&#125;) ç‹¬äº«è·¯ç”±å®ˆå«åœ¨è·¯ç”±å™¨çš„è·¯ç”±è§„åˆ™ä¸­é…ç½®ä»¥ä¸‹é€»è¾‘ ç‹¬äº«è·¯ç”±å®ˆå«æ²¡æœ‰åç½®çš„å®ˆå« 12345678&#123; name:&#x27;detailRoute&#x27;, path:&#x27;pageContent&#x27;, component:News, beforeEnter: (to, from, next) =&gt; &#123; console.log(&#x27;ç‹¬äº«å‰ç½®è·¯ç”±å®ˆå«&#x27;,to,from) &#125;&#125;, ç»„ä»¶è·¯ç”±å®ˆå«åœ¨ç»„ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é€»è¾‘ 123456789//é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨beforeRouteEnter (to, from, next) &#123; console.log(&#x27;beforeRouteEnter&#x27;,to,from)&#125;,//é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨beforeRouteLeave (to, from, next) &#123; console.log(&#x27;beforeRouteLeave&#x27;,to,from)&#125; ä¸‰ä¸ªè·¯ç”±å®ˆå«å¯ä»¥é…åˆä½¿ç”¨å“¦ historyæ¨¡å¼å’Œhashæ¨¡å¼æˆ‘ä»¬çœ‹åˆ°åœ°å€æ ä¸­å§‹ç»ˆæœ‰#å· #åé¢çš„è·¯å¾„éƒ½ä¸ä¼šå‘é€ç»™æœåŠ¡å™¨ è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚ é‚£ä¹ˆå¦‚ä½•åˆ‡æ¢æ¨¡å¼å‘¢ï¼Ÿ vue-routeré»˜è®¤å¼€å¯çš„æ˜¯hashæ¨¡å¼ï¼Œå¦‚æœæƒ³è¦åˆ‡æ¢æ¨¡å¼ï¼Œåªéœ€è¦åœ¨åˆ›å»ºè·¯ç”±å™¨çš„æ—¶å€™ï¼Œä¼ å…¥ä¸€ä¸ªé…ç½®é¡¹mode: &#39;history&#39; è¿™æ—¶å€™ä½ ä¼šå‘ç°åœ°å€æ çš„#éƒ½ä¸è§äº† è®²åˆ°è¿™é‡Œï¼Œæœ‰çš„å°ä¼™ä¼´è‚¯å®šè¦è¯´äº†ï¼Œé‚£æˆ‘è‚¯å®šè¦ä½¿ç”¨historyæ¨¡å¼ï¼Œè¿™æ ·çš„è·¯å¾„çœ‹ç€æ‰èˆ’æœ historyæ¨¡å¼ä¸‹ï¼Œè·¯å¾„ç¡®å®èˆ’æœï¼Œä½†æ˜¯hashæ¨¡å¼çš„å…¼å®¹æ€§æ¯”è¾ƒå¥½ï¼Œhistoryæ¶‰åŠåˆ°ä¸€ä¸ªé¡¹ç›®ä¸Šçº¿çš„é—®é¢˜ æˆ‘ä»¬ä½¿ç”¨npm run buildæ‰“åŒ… ç„¶åä½ å°±å‘ç°äº†å‡ºç°äº†ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ historyæ¨¡å¼éƒ¨ç½²ä¸Šçº¿æˆ‘ä»¬ä½¿ç”¨expressæ­å»ºä¸€ä¸ªå¾®å‹çš„æœåŠ¡å™¨æ¥éƒ¨ç½²æˆ‘ä»¬çš„å‰ç«¯é¡¹ç›® 1ã€æ–°å»ºæ–‡ä»¶å¤¹ mkdir server 2ã€åˆå§‹åŒ–é¡¹ç›® npm init 3ã€å®‰è£…express npm i express 4ã€åˆ›å»ºstaticæ–‡ä»¶å¤¹å°†distç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ”¾åˆ°å…¶ä¸­ 5ã€åˆ›å»ºserver.jså¹¶ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç  1234567891011const express = require(&#x27;express&#x27;);const app = express();app.use(express.static(__dirname+&#x27;/static&#x27;));app.listen(5005,(err)=&gt;&#123; if(!err)&#123; console.log(&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;); &#125;&#125;) 6ã€å¯åŠ¨æœåŠ¡å™¨ node server.js 7ã€è®¿é—®localhost:5005å¹¶ç‚¹å‡» å‡ºç°é—®é¢˜è¿™æ—¶å€™è¿™ä¸ªå¤§é—®é¢˜å°±å‡ºç°äº†ï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ æˆ‘ä»¬å‘ç°äº†404é”™è¯¯ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæœåŠ¡å™¨å¹¶æ²¡æœ‰è¯¥èµ„æº hashæ¨¡å¼éƒ¨ç½²ä¸Šçº¿é‚£æˆ‘ä»¬ä½¿ç”¨hashæ¨¡å¼å†æ¬¡buildï¼Œè®¿é—®å°è¯• å†æ¬¡åˆ·æ–°ï¼Œå‘ç°å¹¶æ²¡æœ‰å‡ºç°404 è§£å†³historyæ¨¡å¼çš„é—®é¢˜æˆ‘ä»¬å†æ¬¡å›åˆ°historyæ¨¡å¼ï¼Œæ¥è§£å†³è¯¥é—®é¢˜ è¿™ä¸ªé—®é¢˜éœ€è¦åç«¯æ¥é…åˆ æˆ‘ä»¬è¿™é‡Œä½¿ç”¨nodejsåšåç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨nodejsçš„æŠ€æœ¯æ¥è§£å†³é—®é¢˜ å®‰è£…ä¸€ä¸ªåº“npm install --save connect-history-api-fallback 123456789101112const express = require(&#x27;express&#x27;);const history = require(&#x27;connect-history-api-fallback&#x27;);const app = express();app.use(history())app.use(express.static(__dirname+&#x27;/static&#x27;));app.listen(5005,(err)=&gt;&#123; if(!err)&#123; console.log(&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;); &#125;&#125;) ç»„ä»¶åº“æˆ‘ä»¬çœŸæ­£å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä¼šæ‰€æœ‰çš„é¡µé¢ç»“æ„éƒ½æ˜¯è‡ªå·±å†™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ç»„ä»¶åº“ï¼Œæ¥ä¸‹æ¥æˆ‘æ¥ä»‹ç»å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ç»„ä»¶åº“ ç§»åŠ¨ç«¯ Vant https://2x.antdv.com/components/overview-cn CubeUI https://didi.github.io/cube-ui/#/zh-CN MintUI http://mint-ui.github.io/#!/zh-cn nutUI https://nutui.jd.com/#/zh-CN/component/button äº¬ä¸œæ‰“é€  PCç«¯ Ant Design https://2x.antdv.com/components/overview-cn èš‚èšé‡‘æœæ‰“é€  ElementUI https://element.eleme.cn/#/zh-CN é¥¿äº†ä¹ˆæ‰“é€  å¦‚æœæƒ³ä½¿ç”¨è¿™äº›ç»„ä»¶åº“ï¼Œæˆ‘ä»¬åªéœ€è¦å»è¿™äº›å®˜ç½‘æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å³å¯","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-åŸºç¡€4","slug":"Vue2-åŸºç¡€4","date":"2022-06-28T06:51:46.000Z","updated":"2022-07-09T10:08:53.929Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/28/Vue2-åŸºç¡€4/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/28/Vue2-%E5%9F%BA%E7%A1%804/","excerpt":"","text":"Vue2åŸºç¡€4ä¿®æ”¹é»˜è®¤é…ç½®é€šè¿‡vue inspect &gt; output.jså¯ä»¥æŸ¥çœ‹Vueè„šæ‰‹æ¶çš„é»˜è®¤é…ç½® åˆ›å»ºvue.config.js å¯é€‰é…ç½®é¡¹å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹ 123456789module.exports = &#123; pages: &#123; index: &#123; // page çš„å…¥å£ entry: &#x27;src/main.js&#x27; &#125; &#125;, lintOnSave: false&#125; refå±æ€§123456789101112131415161718192021&lt;template&gt; &lt;div&gt; &lt;button ref=&quot;btn&quot; @click=&quot;showDOM&quot;&gt;ç‚¹æˆ‘è¾“å‡ºæŒ‰é’®çš„DOMå…ƒç´ å’ŒSchoolçš„Vcå¯¹è±¡&lt;/button&gt; &lt;School ref=&quot;sch&quot;/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import School from &#x27;./components/School&#x27; export default &#123; name:&#x27;App&#x27;, components:&#123;School&#125;, methods: &#123; showDOM()&#123; console.log(this.$refs.btn) //çœŸå®DOMå…ƒç´  console.log(this.$refs.sch) //Schoolç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰ &#125; &#125; &#125;&lt;/script&gt; è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆidçš„æ›¿ä»£è€…ï¼‰ åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´  åº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šæ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰ propsé…ç½®é¡¹çˆ¶ç»„ä»¶æƒ³ç»™å­ç»„ä»¶ä¼ æ•°æ®ï¼Œå³å¯é€šè¿‡propsé…ç½®é¡¹æ¥å®ç° Student.vue 123456789101112131415&lt;template&gt; &lt;div&gt; &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123;sex&#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦ç”Ÿå¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;Student&#x27;, //ç®€å•å£°æ˜æ¥æ”¶ props:[&#x27;name&#x27;,&#x27;age&#x27;,&#x27;sex&#x27;] &#125;&lt;/script&gt; ä½¿ç”¨è¯¥ç»„ä»¶ 1&lt;School name=&#x27;zs&#x27; age=18 sex=&#x27;ç”·&#x27;/&gt; æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹propsæ¥æ”¶åˆ°çš„æ•°æ®æ”¾åœ¨äº†å“ªé‡Œ å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨propsæ¥æ”¶åˆ°çš„æ•°æ®éƒ½è¢«æ”¾åœ¨äº†vcå¯¹è±¡ä¸Š æˆ‘ä»¬è¿˜å‘ç°_dataä¸­å¹¶æ²¡æœ‰è¿™äº›æ•°æ® propsæ¥æ”¶çš„æ•°æ®ä¸å¯ä¿®æ”¹ 1&lt;button @click=&quot;updateAge&quot;&gt;å°è¯•ä¿®æ”¹æ”¶åˆ°çš„å¹´é¾„&lt;/button&gt; 12345methods: &#123; updateAge()&#123; this.age++ &#125;&#125; å¦‚æœä¸€å®šæƒ³ä¿®æ”¹ï¼Œåˆ™éœ€è¦ä½¿ç”¨dataé…ç½®ä¸€ä¸‹æ•°æ®åšä¸ªä¸­è½¬ å¹¶ä¸”å±•ç¤ºçš„æ—¶å€™ä¹Ÿä½¿ç”¨dataä¸­ä¸­è½¬çš„é‚£ä¸ªå˜é‡ 1&lt;h2&gt;å­¦ç”Ÿå¹´é¾„ï¼š&#123;&#123;myAge&#125;&#125;&lt;/h2&gt; 12345data()&#123; return &#123; myAge: this.age &#125;&#125; æ¥æ”¶çš„åŒæ—¶å¯¹æ•°æ®è¿›è¡Œç±»å‹é™åˆ¶ å¦‚æœè¦å¯¹ç±»å‹åšé™åˆ¶ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹å†™æ³• 12345props:&#123; name:String, age:Number, sex:String&#125; ä¼ å…¥æ•°æ® 1&lt;Student name=&quot;èŠéº»&quot; :age=&quot;19&quot; sex=&quot;ç”·&quot;/&gt; å¦‚æœæ˜¯è¿™æ ·ä¼ å…¥çš„ 1&lt;Student name=&quot;èŠéº»&quot; age=&quot;19&quot; sex=&quot;ç”·&quot;/&gt; æ¥æ”¶çš„åŒæ—¶å¯¹æ•°æ®ï¼šè¿›è¡Œç±»å‹é™åˆ¶+é»˜è®¤å€¼çš„æŒ‡å®š+å¿…è¦æ€§çš„é™åˆ¶ 1234567891011121314props:&#123; name:&#123; type:String, //nameçš„ç±»å‹æ˜¯å­—ç¬¦ä¸² required:true, //å¿…è¦çš„ï¼Œçˆ¶äº²ç»„ä»¶ä¸€å®šè¦ä¼ è¯¥æ•°æ® &#125;, age:&#123; type:Number, default:99 //é»˜è®¤å€¼ &#125;, sex:&#123; type:String, required:true &#125;&#125; mixinæ··å…¥å°±æ˜¯å­ç»„ä»¶å¯ä»¥å…±äº«mixinä¸­é…ç½®çš„é…ç½®é¡¹ è¾¾åˆ°å…¨å±€å…±äº«çš„æ•ˆæœï¼Œè¾¾åˆ°å¤ç”¨çš„ç›®çš„ï¼Œå‡å°‘ä»£ç é‡å¤æ€§ æ··åˆæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åœ¨æ„é€ vcçš„æ—¶å€™ä¼ å…¥çš„é…ç½®é¡¹ åªä¸è¿‡å•ç‹¬å°†å…¶æ‹¿äº†å‡ºæ¥ 1234567891011121314151617export const hooks = &#123; created()&#123; console.log(&#x27;æ•°æ®ä»£ç†ã€æ•°æ®åŠ«æŒå·²å®Œæˆ&#x27;) &#125;, mounted() &#123; console.log(&#x27;æŒ‚è½½å®Œæˆï¼&#x27;) &#125;&#125;export const getData = &#123; data() &#123; return &#123; x:100, y:200 &#125; &#125;,&#125; å…¨å±€æ··å…¥ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼šVue.mixin(xxx) å±€éƒ¨æ··å…¥ï¼ˆé…ç½®é¡¹ï¼‰ï¼šmixin: [&#39;aaa&#39;] æ³¨æ„ç‚¹ï¼š 123451ã€é’©å­ä»¥å¤–çš„é…ç½®é¡¹ å¦‚æœæ··åˆä¸­æœ‰ï¼Œåˆ™ä»¥é…ç½®é¡¹ä¸­ä¼˜å…ˆçº§é«˜ å¦‚æœæ··åˆä¸­æ²¡æœ‰ï¼Œåˆ™æ•´åˆè¿›é…ç½®é¡¹ä¸­2ã€å°†ä¸¤è€…çš„ç”Ÿå‘½å‘¨æœŸç»„åˆåœ¨ä¸€èµ· å…ˆæ‰§è¡Œè‡ªå·±çš„é’©å­ï¼Œç„¶åæ‰§è¡Œmixinä¸­çš„é’©å­ æ’ä»¶æˆ‘ä»¬åœ¨å¹³æ—¶ç”Ÿæ´»å·¥ä½œä¸­ï¼Œä¸€æ¬¾å¥½ç”¨çš„æ’ä»¶å¯ä»¥æå¤§åœ°æé«˜æˆ‘ä»¬çš„ç”Ÿäº§æ•ˆç‡ï¼Œåœ¨Vueä¸­ä¹Ÿæœ‰è¿™æ ·çš„æ’ä»¶ æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªæ’ä»¶è¯•ä¸€è¯• 123456789101112131415161718192021222324252627282930313233export default &#123; //...ä»£è¡¨ä½¿ç”¨æ’ä»¶çš„æ—¶å€™ä¼ å…¥çš„å‚æ•° install(Vue,...)&#123; //å…¨å±€è¿‡æ»¤å™¨ Vue.filter(&#x27;filterName&#x27;,function(value)&#123; return ... &#125;) //å®šä¹‰å…¨å±€æŒ‡ä»¤ Vue.directive(&#x27;directiveName&#x27;,&#123; //æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ bind(element,binding)&#123; //... &#125;, //æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶ inserted(element,binding)&#123; //... &#125;, //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ update(element,binding)&#123; //... &#125; &#125;) //å®šä¹‰æ··å…¥ Vue.mixin(&#123; //... &#125;) //ç»™VueåŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ˆvmå’Œvcå°±éƒ½èƒ½ç”¨äº†ï¼‰ Vue.prototype.hello = ()=&gt;&#123;alert(&#x27;ä½ å¥½å•Š&#x27;)&#125; &#125;&#125; åœ¨main.jsä¸­ä½¿ç”¨ 123import plugins from &#x27;./plugins&#x27;Vue.use(plugins) styleæ ‡ç­¾scopedå±æ€§1234&lt;style scoped&gt;åœ¨è¿™ä¸ªé‡Œé¢å†™çš„cssæ ·å¼åªä¼šä½œç”¨äºè¯¥æ–‡ä»¶çš„ç»“æ„ å¦‚æœä¸åŠ scopedåˆ™ä¼šä½œç”¨äºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„htmlç»“æ„&lt;/style&gt; langå±æ€§12345&lt;style scoped lang=&quot;scss&quot;&gt; å¦‚æœä½ æƒ³ä½¿ç”¨Lessæˆ–è€…Scssæ¥å†™cssåˆ™éœ€è¦ä¸‹è½½ç¼–è¯‘å·¥å…· npm i less-loader npm i scss-loader&lt;/style&gt; Todosæ¡ˆä¾‹ æå‰å£°æ˜ï¼šæ­¤æ¡ˆä¾‹ä¼šå¾ªåºæ¸è¿›åœ°è®²åˆ°å¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œè¯·åŠ¡å¿…ä¸è¦è·³è¿‡ é™æ€é¡µé¢ä»£ç App.vue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;div&gt; &lt;h2 style=&quot;text-align: center&quot;&gt;Todos&lt;/h2&gt; &lt;input class=&quot;task&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å¾…åŠäº‹é¡¹ï¼Œå›è½¦ç¡®è®¤æ·»åŠ &quot; v-model=&quot;task&quot;&gt; &lt;/div&gt; &lt;ul class=&quot;todos&quot;&gt; &lt;li class=&quot;todo&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot;&gt; &lt;span&gt;æ•²ä»£ç &lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button class=&quot;delete&quot; @click=&quot;deleteSelf(todo.id)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button class=&quot;update&quot; @click=&quot;updateSelf(todo.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;li class=&quot;todo&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot;&gt; &lt;span&gt;ç¡è§‰&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button class=&quot;delete&quot; @click=&quot;deleteSelf(todo.id)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button class=&quot;update&quot; @click=&quot;updateSelf(todo.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;li class=&quot;todo&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot;&gt; &lt;span&gt;åƒé¥­&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button class=&quot;delete&quot; @click=&quot;deleteSelf(todo.id)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button class=&quot;update&quot; @click=&quot;updateSelf(todo.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;footer&quot;&gt; &lt;input type=&quot;checkbox&quot; style=&quot;margin-right: 10px&quot;&gt;&lt;span&gt;å·²ç»å®Œæˆ0/å…¨éƒ¨3&lt;/span&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;App&#x27;, data()&#123; return &#123; &#125; &#125;,&#125;&lt;/script&gt;&lt;style scoped&gt;.todos &#123; list-style: none; padding: 0; border: 1px solid #ccc;&#125;.todo &#123; height: 50px; padding: 0 0 0 20px; border-bottom: 1px solid #ccc; display: flex; align-items: center; justify-content: space-between;&#125;.task &#123; width: 100%; height: 40px; padding-left: 20px; box-sizing: border-box&#125;.container &#123; border: 1px solid black; padding: 10px; width: 30%; margin: 40px auto&#125;.buttons &#123; margin-right: 20px; width: 20%; display: none; justify-content: space-between;&#125;.todo:hover .buttons &#123; display: flex;&#125;.todo:hover &#123; background: #4dd9d5;&#125;.delete &#123; background: red; color: #CCCCCC; font-size: 10px; cursor: pointer;&#125;.update &#123; background: #2e6da4; color: #CCCCCC; font-size: 10px; cursor: pointer;&#125;&lt;/style&gt; åŠ¨æ€æ•°æ®ç°åœ¨å°†æ•°æ®æ”¾åˆ°dataä¸­ï¼Œå†è¡¥å……ä¸€ç‚¹é€»è¾‘å§ æ¥ä¸‹æ¥å°±ä¸å†™styleæ ‡ç­¾å•¦ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;div&gt; &lt;h2 style=&quot;text-align: center&quot;&gt;Todos&lt;/h2&gt; &lt;input class=&quot;task&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å¾…åŠäº‹é¡¹ï¼Œå›è½¦ç¡®è®¤æ·»åŠ &quot; v-model=&quot;task&quot; @keydown.enter=&quot;insertNewTask&quot;&gt; &lt;/div&gt; &lt;ul class=&quot;todos&quot;&gt; &lt;li class=&quot;todo&quot; v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt; &lt;span&gt;&#123;&#123; todo.content &#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button class=&quot;delete&quot; @click=&quot;deleteSelf(todo.id)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button class=&quot;update&quot; @click=&quot;updateSelf(todo.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;footer&quot;&gt; &lt;input type=&quot;checkbox&quot; style=&quot;margin-right: 10px&quot;&gt;&lt;span&gt;å·²ç»å®Œæˆ&#123;&#123;hasDone&#125;&#125;/å…¨éƒ¨&#123;&#123;totalSum&#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;App&#x27;, data()&#123; return &#123; task: &#x27;&#x27;, todos: [ &#123;id: &#x27;002&#x27;,content: &#x27;ç¡è§‰&#x27;,done: true&#125;, &#123;id: &#x27;001&#x27;,content: &#x27;æ‰“ä»£ç &#x27;,done: true&#125;, &#123;id: &#x27;003&#x27;,content: &#x27;åƒé¥­&#x27;,done: false&#125;, &#123;id: &#x27;004&#x27;,content: &#x27;åˆ·æŠ–éŸ³&#x27;,done: true&#125;, ], hasDone: 0, &#125; &#125;, mounted() &#123; this.hasDone = this.todos.filter(t=&gt;t.done).length; &#125;, methods:&#123; deleteSelf(id)&#123; &#125;, updateSelf(id)&#123; &#125;, insertNewTask()&#123; &#125; &#125;, computed: &#123; totalSum()&#123; return this.todos.length; &#125; &#125;&#125;&lt;/script&gt; æŠ½ç¦»ç»„ä»¶Appä½œä¸ºç‹è€…å±…ç„¶å†™äº†è¿™ä¹ˆå¤šç»“æ„ä»£ç ï¼Œå“ªé‡Œæœ‰ä»€ä¹ˆç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠ½ç¦»å‡ºä¸€ä¸ªä¸ªç»„ä»¶ Top.vue 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;div&gt; &lt;h2 style=&quot;text-align: center&quot;&gt;Todos&lt;/h2&gt; &lt;input class=&quot;task&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å¾…åŠäº‹é¡¹ï¼Œå›è½¦ç¡®è®¤æ·»åŠ &quot; v-model=&quot;task&quot; @keydown.enter=&quot;insertNewTask&quot;&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Top&quot;, data()&#123; return &#123; task: &#x27;&#x27;, &#125; &#125;, methods:&#123; insertNewTask()&#123; &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.task &#123; width: 100%; height: 40px; padding-left: 20px; box-sizing: border-box&#125;&lt;/style&gt; ShowTodosContainer.vue 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;template&gt; &lt;ul class=&quot;todos&quot;&gt; &lt;li class=&quot;todo&quot; v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot; @click=&quot;choose(todo.id)&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt; &lt;span&gt;&#123;&#123; todo.content &#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;buttons&quot;&gt; &lt;button class=&quot;delete&quot; @click=&quot;deleteSelf(todo.id)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button class=&quot;update&quot; @click=&quot;updateSelf(todo.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;ShowTodosContainer&quot;, props: [&#x27;todos&#x27;], data()&#123; return &#123; todos: this.todos &#125; &#125;, methods:&#123; deleteSelf(id)&#123; &#125;, updateSelf(id)&#123; &#125;, choose(id)&#123; this.todos.forEach(t=&gt;&#123; if(t.id===id)&#123; t.done=!t.done; &#125; &#125;) &#125;, &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.todos &#123; list-style: none; padding: 0; border: 1px solid #ccc;&#125;.todo &#123; height: 50px; padding: 0 0 0 20px; border-bottom: 1px solid #ccc; display: flex; align-items: center; justify-content: space-between;&#125;.buttons &#123; margin-right: 20px; width: 20%; display: none; justify-content: space-between;&#125;.todo:hover .buttons &#123; display: flex;&#125;.todo:hover &#123; background: #4dd9d5;&#125;.delete &#123; background: red; color: #CCCCCC; font-size: 10px; cursor: pointer;&#125;.update &#123; background: #2e6da4; color: #CCCCCC; font-size: 10px; cursor: pointer;&#125;&lt;/style&gt; è¿™é‡Œè¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ 123456å¯¹äº&lt;input type=&quot;checkbox&quot;&gt;1.æ²¡æœ‰é…ç½®inputçš„valueå±æ€§ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯checkedï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰2.é…ç½®inputçš„valueå±æ€§: (1)v-modelçš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯checkedï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰ (2)v-modelçš„åˆå§‹å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„çš„å°±æ˜¯valueç»„æˆçš„æ•°ç»„ PageFooter.vue 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;template&gt; &lt;div class=&quot;footer&quot;&gt; &lt;div&gt; &lt;input type=&quot;checkbox&quot; style=&quot;margin-right: 10px&quot; v-model=&quot;allHasDone&quot;&gt; &lt;span&gt;å·²ç»å®Œæˆ&#123;&#123;hasDone&#125;&#125;/å…¨éƒ¨&#123;&#123;totalSum&#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;button class=&quot;deleteAll&quot; @click=&quot;deleteAllTodos&quot;&gt; åˆ é™¤æ‰€æœ‰ä»£åŠ &lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;PageFooter&quot;, props: [&#x27;todos&#x27;], data()&#123; return &#123; allHasDone: false &#125; &#125;, computed: &#123; totalSum()&#123; return this.todos.length; &#125;, hasDone()&#123; let length = this.todos.filter(t=&gt;t.done).length; this.allHasDone = length === this.todos.length; return length; &#125;, &#125;, methods: &#123; deleteAllTodos()&#123; &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.footer &#123; display: flex; justify-content: space-between;&#125;.deleteAll &#123; background: red; height: 30px; width: 200px; cursor:pointer; color: #4dd9d5&#125;&lt;/style&gt; å®ç°æ‰€æœ‰åŠŸèƒ½æ’å…¥æ–°ä»£åŠ1234567891011insertNewTask()&#123; if(this.task === &#x27;&#x27;)&#123; return alert(&#x27;è¯·ä¸è¦è¾“å…¥ç©ºçš„ä»£åŠï¼&#x27;) &#125; this.todos.push(&#123; id:nanoid(), content: this.task, hasDone: false &#125;) this.task=&#x27;&#x27;&#125; åˆ é™¤å•ä¸ªä»£åŠ123deleteSelf(id)&#123; this.todoList.splice(0,this.todoList.length,...this.todoList.filter(t=&gt;t.id!==id));&#125;, åˆ é™¤æ‰€æœ‰ä»£åŠ123deleteAllTodos()&#123; this.todoList.splice(0,this.totalSum,...this.todoList.filter(t=&gt;!t.done))&#125; å‹¾é€‰1&lt;input type=&quot;checkbox&quot; style=&quot;margin-right: 10px&quot; v-model=&quot;allHasDone&quot; @click=&quot;chooseAll&quot;&gt; 123chooseAll()&#123; this.todoList.forEach(t=&gt;t.done=!this.allHasDone);&#125; æ³¨æ„ç‚¹ï¼šå…ˆå¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œç„¶åæ•°æ®æ‰æ›´æ–°ï¼Œæ‰€ä»¥è¦å–å æ›´æ–°ä»£åŠè¿™ä¸ªæœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦å†æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œä½¿ç”¨åŠ¨æ€æ ·å¼æ¥æ§åˆ¶å…¶æ˜¾ç¤º UpdateDialog.vue 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;template&gt; &lt;div class=&quot;dialog&quot;:class=&quot;&#123;&#x27;clear&#x27;:showDialog&#125;&quot; @click.self=&quot;close&quot;&gt; &lt;div class=&quot;form&quot;&gt; &lt;h2&gt;è¯·ä¿®æ”¹ä»£åŠ&lt;/h2&gt; &lt;span class=&quot;close&quot; @click=&quot;close&quot;&gt;X&lt;/span&gt; &lt;input type=&quot;text&quot; v-model=&quot;updatedTaskContent&quot;&gt; &lt;button style=&quot;margin-right: 20px&quot; @click=&quot;updateTask&quot;&gt; ä¿®æ”¹ &lt;/button&gt; &lt;button @click=&quot;close&quot;&gt; å–æ¶ˆ &lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;UpdateDialog&quot;, props: [&#x27;task&#x27;,&#x27;showDialog&#x27;], data()&#123; return &#123; updatedTaskContent: this.task.content, propTask: this.task &#125; &#125;, methods:&#123; close()&#123; this.$emit(&#x27;closeDialog&#x27;) &#125;, updateTask()&#123; this.propTask.content=this.updatedTaskContent &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.dialog &#123; position: absolute; display: none; top: 0px; bottom: 0; left: 0px; right: 0px; background: rgba(0,0,0,0.2);&#125;input &#123; width: 400px; margin-bottom: 20px;&#125;.form &#123; position: relative; width: 30%; height: 300px; margin: 40px auto; background: beige; padding: 20px;&#125;.close &#123; display: block; position: absolute; top: -10px; right: 0px; cursor: pointer;&#125;.clear &#123; display: block;&#125;&lt;/style&gt; è¿™é‡Œä½¿ç”¨çš„è‡ªå®šä¹‰äº‹ä»¶ æˆ‘åœ¨ä½¿ç”¨è¯¥ç»„ä»¶çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç»„ä»¶å†…éƒ¨å°±å¯ä»¥ä½¿ç”¨this.$emit(&#39;è‡ªå®šä¹‰äº‹ä»¶å&#39;)æ¥è°ƒç”¨è¯¥äº‹ä»¶ 1&lt;UpdateDialog :showDialog=&quot;showUpdateDialog&quot; :task=&quot;choosedTask&quot; @closeDialog=&quot;closeDialog&quot;/&gt; è¿™ä¸ªå¦‚æœè¿™æ ·å†™ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘çš„taskç¡®å®æ˜¯åŠ¨æ€ä¼ çš„ï¼Œä½†æ˜¯å› ä¸ºæˆ‘å¯èƒ½ä¼šå–æ¶ˆæœ¬æ¬¡æ›´æ–°æ“ä½œ æ‰€ä»¥æˆ‘ä¸å¯ä»¥è¿™æ ·å†™ï¼Œè¿™æ ·å†™çš„è¯ï¼Œå–æ¶ˆæŒ‰é’®å°±æ˜¯ä¸€ä¸ªå°ä¸‘ 1&lt;input type=&quot;text&quot; v-model=&quot;task.content&quot;&gt; æ‰€ä»¥å°±å¿…é¡»å¾—å…ˆå­˜ä¸€ä»½ä¼ å…¥çš„å€¼æ˜¯å§ï¼Œæ‰€ä»¥å°±åº”è¯¥åƒæˆ‘åˆšåˆšé‚£ä¹ˆå†™ ä½†æ˜¯ä½ ä¼šå‘ç°è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ä¹‹åå‘ç°æ˜¯æˆ‘å­˜å‚¨çš„æ•°æ®æ˜¯å›ºå®šåœ¨ç¬¬ä¸€æ¬¡ä¼ å…¥çš„æ•°æ®ï¼Œå¯æ˜¯æˆ‘ä»€ä¹ˆæ—¶å€™æ”¹å˜dataä¸­çš„æ•°æ®å‘¢ï¼Ÿ ç›‘è§†å±æ€§æˆ‘ä»¬ç›‘è§†ä¸€ä¸‹taskï¼Œå½“å…¶å‘ç”Ÿäº†æ”¹å˜ï¼Œå°†å…¶è¦†ç›–dataä¸­çš„æ•°æ® 123456watch:&#123; task()&#123; this.updatedTaskContent=this.task.content; this.propTask = this.task; &#125;&#125; ä½¿ç”¨v-ifé…åˆä½¿ç”¨1234&lt;UpdateDialog v-if=&quot;JSON.stringify(choosedTask)!==&#x27;&#123;&#125;&#x27;&quot; :showDialog=&quot;showUpdateDialog&quot; :task=&quot;choosedTask&quot; @closeDialog=&quot;closeDialog&quot;/&gt; å¦‚æœä½¿ç”¨è¿™ç§æ–¹æ³•çš„è¯ï¼Œæˆ‘åœ¨closeDialogä¸­éœ€è¦å°†choosedTaskèµ‹å€¼ä¸ºç©ºå¯¹è±¡ è‡ªåŠ¨è·å–ç„¦ç‚¹1&lt;input ref=&quot;input&quot; type=&quot;text&quot; v-model=&quot;updatedTaskContent&quot; @keyup.enter=&quot;updateTask&quot;&gt; å¦‚æœæ˜¯ç›‘è§†å±æ€§å®ç°çš„è¯ éœ€è¦åœ¨ç›‘è§†æ–¹æ³•ä¸­åŠ å…¥ä»¥ä¸‹é€»è¾‘ 12345678task()&#123; this.updatedTaskContent=this.task.content; this.propTask = this.task; //å½“é¡µé¢è§£æå®Œæˆä¹‹åå†æ‰§è¡Œå›è°ƒå‡½æ•° this.$nextTick(function ()&#123; this.$refs.input.focus(); &#125;)&#125; å¦‚æœæ˜¯v-ifå®ç°çš„è¯ éœ€è¦å†æŒ‚è½½çš„æ—¶å€™åŠ å…¥ä»¥ä¸‹é€»è¾‘ 123456mounted() &#123; this.$nextTick(function ()&#123; console.log(this); this.$refs.input.focus(); &#125;)&#125;, å­˜å‚¨åœ¨Appä¸­å°è£…ä¸€ä¸ªsaveå‡½æ•°ï¼Œå°†å…¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œåœ¨æ‰€æœ‰å¯¹æ•°ç»„é€ æˆæ›´æ–°çš„åœ°æ–¹éƒ½ä½¿ç”¨this.$emit(&#39;save&#39;)è°ƒç”¨è¯¥å‡½æ•° 123save()&#123; sessionStorage.setItem(&quot;todos&quot;,JSON.stringify(this.todos))&#125; è‡ªå®šä¹‰äº‹ä»¶ è¿™ä¸ªæ˜¯ç›¸å¯¹äºjsä¸­å†…ç½®äº‹ä»¶ï¼ˆkeyupã€clickç­‰ç­‰ï¼‰çš„å­˜åœ¨ jså†…ç½®äº‹ä»¶æ˜¯ç»™HTMLå…ƒç´ ä½¿ç”¨çš„ è‡ªå®šä¹‰äº‹ä»¶æ˜¯ç»™ç»„ä»¶ç”¨çš„ ä¸»è¦ä½œç”¨å°±æ˜¯å®ç°çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ ç»‘å®šäº‹ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt;&lt;div class=&quot;app&quot;&gt; &lt;h1&gt;å­¦ç”Ÿå§“åæ˜¯:&#123;&#123;studentName&#125;&#125;&lt;/h1&gt; &lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°ç±»å‹çš„propså®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ® --&gt; &lt;Teacher :getSchoolName=&quot;getSchoolName&quot;/&gt; &lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ® --&gt; &lt;Student @getStudentName=&quot;getStudentName&quot;/&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt; import Student from &#x27;./components/Student&#x27; import School from &#x27;./components/School&#x27; export default &#123; name:&#x27;App&#x27;, components:&#123;School,Student&#125;, data() &#123; return &#123; studentName:&#x27;&#x27; &#125; &#125;, methods: &#123; getTeacherName(name)&#123; console.log(&#x27;Appæ”¶åˆ°äº†å­¦æ ¡åï¼š&#x27;,name) &#125;, getStudentName(name)&#123; console.log(&#x27;Appæ”¶åˆ°äº†å­¦ç”Ÿåï¼š&#x27;,name) this.studentName = name &#125; &#125;, &#125;&lt;/script&gt;&lt;style scoped&gt; .app&#123; background-color: gray; padding: 5px; &#125;&lt;/style&gt; ç»‘å®šäº‹ä»¶çš„å¦ä¸€ç§æ–¹å¼ 123mount()&#123; this.$refs.student.$on(&#x27;getStudentName&#x27;,this.getStudentName) //ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ &#125; è§¦å‘äº‹ä»¶School.vue 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div class=&quot;school&quot;&gt; &lt;h2&gt;å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦æ ¡åœ°å€ï¼š&#123;&#123;address&#125;&#125;&lt;/h2&gt; &lt;button @click=&quot;sendSchoolName&quot;&gt;æŠŠå­¦æ ¡åç»™App&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;School&#x27;, props:[&#x27;getSchoolName&#x27;], data() &#123; return &#123; name:&#x27;å°šç¡…è°·&#x27;, address:&#x27;åŒ—äº¬&#x27;, &#125; &#125;, methods: &#123; sendSchoolName()&#123; this.getSchoolName(this.name) &#125; &#125;, &#125;&lt;/script&gt;&lt;style scoped&gt; .school&#123; background-color: skyblue; padding: 5px; &#125;&lt;/style&gt; Student.vue 123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;div class=&quot;student&quot;&gt; &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123;sex&#125;&#125;&lt;/h2&gt; &lt;button @click=&quot;sendStudentlName&quot;&gt;æŠŠå­¦ç”Ÿåç»™App&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;Student&#x27;, data() &#123; return &#123; name:&#x27;å¼ ä¸‰&#x27;, sex:&#x27;ç”·&#x27;, &#125; &#125;, methods: &#123; sendStudentlName()&#123; //è§¦å‘Studentç»„ä»¶å®ä¾‹èº«ä¸Šçš„getStudentNameäº‹ä»¶ this.$emit(&#x27;getStudentName&#x27;,this.name) &#125; &#125;, &#125;&lt;/script&gt;&lt;style lang=&quot;less&quot; scoped&gt; .student&#123; background-color: pink; padding: 5px; margin-top: 30px; &#125;&lt;/style&gt; è‡ªå®šä¹‰äº‹ä»¶çš„è§¦å‘æœ¬è´¨è¿˜æ˜¯ç”±htmlçš„åŸç”Ÿäº‹ä»¶è§¦å‘åï¼Œæˆ‘ä»¬è‡ªå·±å†³å®šè§¦å‘å“ªä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„ propså®ç°å’Œè‡ªå®šä¹‰äº‹ä»¶å®ç°çš„åŒºåˆ«ï¼špropséœ€è¦æ‰‹åŠ¨æ¥æ”¶ è§£ç»‘äº‹ä»¶1this.$off(&#x27;getStudentName&#x27;) //è§£ç»‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ ç»„ä»¶ä½¿ç”¨jsåŸç”Ÿäº‹ä»¶1&lt;Student ref=&quot;student&quot; @click.native=&quot;show&quot;/&gt; ç»„ä»¶é—´é€šä¿¡æˆ‘ä»¬å‘ç°ï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡ååˆ†åœ°é‡è¦ï¼Œæˆ‘ä»¬æ¥ç†ä¸€ç†åˆ°ç°åœ¨æˆ‘ä»¬å­¦ä¼šäº†é‚£äº›ç»„ä»¶ä¹‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œ 1231.props ===ã€‹é€‚ç”¨äºçˆ¶ç»™å­ä¼ é€’æ•°æ®å’Œå‡½æ•° ===ã€‹ç‰¹ç‚¹ï¼šéœ€è¦æ‰‹åŠ¨æ¥æ”¶ï¼Œå¹¶ä¸”ä¼ é€’åœ°å¦‚æœæ˜¯æ•°æ®åˆ™ä¸èƒ½ä¿®æ”¹2.è‡ªå®šä¹‰äº‹ä»¶ ===ã€‹é€‚ç”¨äºå­ç»™çˆ¶ä¼ é€’æ•°æ® ===ã€‹ç‰¹ç‚¹ï¼šä½¿ç”¨$emitè°ƒç”¨ æˆ‘ä»¬å‘ç°å¦‚æœä¸¤ä¸ªå…„å¼Ÿä¹‹é—´æƒ³è¦é€šä¿¡ åˆ™åªèƒ½å°†æ•°æ®çŠ¶æ€æå‡ å°†æ•°æ®æ”¾åˆ°ä¸¤è€…å…±åŒåœ°çˆ¶ç»„ä»¶ä¸Šé¢å» ç„¶åçˆ¶ç»„ä»¶ä½¿ç”¨ä¸Šè¿°æ–¹æ³•å‘ä¸¤è€…ä¼ é€’ä¿¡æ¯ å¦‚æœåµŒå¥—å±‚çº§æ¯”è¾ƒå¤šï¼Œåˆ™éœ€è¦å¤šæ¬¡å¤šå±‚ä¼ é€’æ•°æ®ï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ éš¾é“å°±åªèƒ½è¿™æ ·äº†å—ï¼ŸNOï¼æ¥ä¸‹æ¥æˆ‘ä¼šè®²è§£ä¸‰ç§å¼ºå¤§çš„æ–¹æ³•å®ç°ä»»æ„ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ å…¨å±€äº‹ä»¶æ€»çº¿å…¨å±€äº‹ä»¶æ€»çº¿å…¶å®ååˆ†ç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶æ¥å®ç°çš„ åªä¸è¿‡æˆ‘ä»¬äº‹ä»¶å…¨éƒ¨ç»‘å®šåœ¨vmå¯¹è±¡ä¸Š å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿12345678//åˆ›å»ºvmnew Vue(&#123; el:&#x27;#app&#x27;, render: h =&gt; h(App), beforeCreate() &#123; Vue.prototype.$bus = this //å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ &#125;,&#125;) ä¸æ˜¯ä¸€å®šè¦å«$bus ç»‘å®šäº‹ä»¶123this.$bus.$on(&#x27;hello&#x27;,(data)=&gt;&#123; console.log(&#x27;æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®&#x27;,data)&#125;) è§¦å‘äº‹ä»¶1this.$bus.$emit(&#x27;hello&#x27;,this.name) è§£ç»‘äº‹ä»¶åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨$offå»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶ã€‚ 123beforeDestroy() &#123; this.$bus.$off(&#x27;hello&#x27;)&#125; åŸç†ï¼š1ã€è‡ªå®šä¹‰äº‹ä»¶ 2ã€VueComponent.prototype.__proto__ === Vue.prototype æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒæ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æ˜¯ä¸€ç§æ€æƒ³ï¼Œå…·ä½“å®ç°æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰ç”¨pubsub-jsåº“ 1npm i pubsub-js è®¢é˜…å’Œå–æ¶ˆè®¢é˜…æ¶ˆæ¯å³è®¾ç½®äº‹ä»¶å’Œå›è°ƒ å³éœ€è¦æ•°æ®çš„ç»„ä»¶ 123456789mounted() &#123; this.pubId = pubsub.subscribe(&#x27;hello&#x27;,(msgName,data)=&gt;&#123; console.log(this) // console.log(&#x27;æœ‰äººå‘å¸ƒäº†helloæ¶ˆæ¯ï¼Œhelloæ¶ˆæ¯çš„å›è°ƒæ‰§è¡Œäº†&#x27;,msgName,data) &#125;)&#125;,beforeDestroy() &#123; pubsub.unsubscribe(this.pubId)&#125;, å‘å¸ƒæ¶ˆæ¯å³å‘é€æ•°æ®çš„ç»„ä»¶ 1pubsub.publish(&#x27;hello&#x27;,666) Vuexå®ƒæ˜¯ä¸“é—¨åœ¨Vueä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ç®¡ç†çš„ä¸€ä¸ªæ’ä»¶ï¼Œå¯¹Vueåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼Œä¹Ÿæ˜¯ä¸€ç§ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ çŠ¶æ€å…¶å®æŒ‡çš„å°±æ˜¯æ•°æ® xæ˜¯æ‰€æœ‰ç»„ä»¶éƒ½éœ€è¦ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†xå­˜å…¥Vuexä¸­ VuexåŸç†å›¾ æ­¤å›¾æ‘˜è‡ªå®˜ç½‘ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥å›¾è¢«è™šçº¿åŒ…èµ·æ¥çš„éƒ¨åˆ†å³Vuexçš„ä¸‰å¤§é‡è¦çš„å·¥å…·ï¼ŒActionsï¼ŒMutationsï¼ŒState Stateè¯‘ä¸ºçŠ¶æ€ï¼Œæˆ‘ä»¬å°†éœ€è¦å…±äº«çš„æ•°æ®æ”¾å…¥å…¶ä¸­ Actionsè¯‘ä¸ºè¡Œä¸ºï¼Œæˆ‘ä»¬ä¼šå°†å¯¹äºæ•°æ®çš„å‰ç½®æ“ä½œæ”¾å…¥å…¶ä¸­ï¼Œæ¯”å¦‚æ¡ä»¶åˆ¤æ–­ï¼Œå‘å‡ºAjaxè¯·æ±‚ç­‰ Mutationsè¯‘ä¸ºåŠ å·¥ï¼Œæˆ‘ä»¬çœŸæ­£å¯¹äºæ•°æ®çš„ä¿®æ”¹å°±æ˜¯åœ¨è¿™é‡Œè¿›è¡Œçš„ Vueç»„ä»¶å’ŒVuexå·¥å…·ä¹‹é—´çš„é€šä¿¡ï¼Œæœ‰ä»¥ä¸‹APIï¼Œdispatchï¼Œcommitï¼Œmutateï¼Œrender åªæœ‰dispatchå’Œcommitæ˜¯æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨çš„ï¼Œå…¶ä»–ä¸¤ä¸ªéƒ½æ˜¯ç”±Vuexå¸®æˆ‘ä»¬è°ƒç”¨çš„ï¼Œæ— éœ€æˆ‘ä»¬æ“å¿ƒ dispatchæ˜¯æˆ‘ä»¬åœ¨ç»„ä»¶å†…è°ƒç”¨çš„ï¼Œå‘å‡ºå¯¹æ•°æ®æ“ä½œçš„è¯·æ±‚ commitæ˜¯æˆ‘ä»¬åœ¨actionsæˆ–è€…Vueç»„ä»¶ä¸­è°ƒç”¨çš„ï¼Œè®©å…¶å¯¹æ•°æ®åšå‡ºçœŸæ­£çš„æ”¹å˜ æ¥ä¸‹æ¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ¡ˆä¾‹æ¥é©±åŠ¨ æ±‚å’Œæ¡ˆä¾‹æ•ˆæœå›¾ æˆ‘ä»¬å…ˆå°†è¿™ä¸ªåŠŸèƒ½å®ç° å› ä¸ºè¿˜æ²¡æœ‰åˆ°ç»„ä»¶å…±äº«çš„æ—¶å€™ï¼Œæ‰€ä»¥ç°åœ¨å…ˆä¸ä½¿ç”¨Vuex 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;template&gt;&lt;div style=&quot;padding: 20px&quot;&gt; &lt;h2&gt;å½“å‰æ±‚å’Œä¸º&#123;&#123;sum&#125;&#125;&lt;/h2&gt; &lt;div&gt; &lt;select name=&quot;step&quot; id=&quot;stepSelect&quot; v-model=&quot;step&quot;&gt; &lt;option :value=&quot;1&quot;&gt;1&lt;/option&gt; &lt;option :value=&quot;2&quot;&gt;2&lt;/option&gt; &lt;option :value=&quot;3&quot;&gt;3&lt;/option&gt; &lt;/select&gt; &lt;button @click=&quot;add&quot;&gt;+&lt;/button&gt; &lt;button @click=&quot;sub&quot;&gt;-&lt;/button&gt; &lt;button @click=&quot;addOnCondition&quot;&gt;å½“å‰ä¸ºå¥‡æ•°å†åŠ &lt;/button&gt; &lt;button @click=&quot;addAfter&quot;&gt;è¿‡ä¸€ç§’å†åŠ &lt;/button&gt; &lt;/div&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Count&quot;, data()&#123; return &#123; sum: 0, step: 1 &#125; &#125;, methods:&#123; add()&#123; this.sum+=this.step; &#125;, sub()&#123; this.sum-=this.step; &#125;, addOnCondition()&#123; if(this.sum % 2)&#123; this.add(); &#125; &#125;, addAfter()&#123; setTimeout(()=&gt;&#123; this.add(); &#125;,1000); &#125;, &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;button &#123; margin-left: 10px;&#125;&lt;/style&gt; å‡†å¤‡æ¥ä¸‹æ¥æˆ‘ä»¬åšäº›ä½¿ç”¨Vuexå‰çš„å‡†å¤‡ åˆ›å»ºstore/index.jsæ–‡ä»¶ 123456789101112131415import Vuex from &#x27;vuex&#x27;import Vue from &#x27;vue&#x27;Vue.use(Vuex)export default new Vuex.Store(&#123; actions: &#123; &#125;, mutations:&#123; &#125;, state:&#123; &#125;,&#125;) åœ¨main.jsä¸­å¼•å…¥è¯¥æ–‡ä»¶å¹¶å¹¶åœ¨åˆ›å»ºvmçš„æ—¶å€™ä¼ å…¥ 123456789import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import store from &quot;./store&quot;;Vue.config.productionTip = falsenew Vue(&#123; render: h =&gt; h(App), store&#125;).$mount(&#x27;#app&#x27;) ä½¿ç”¨æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç»„ä»¶ShowSumç»„ä»¶ï¼Œè¯¥ç»„ä»¶çš„åŠŸèƒ½å°±æ˜¯ç”¨æ¥å±•ç¤ºCountç»„ä»¶ä¸­çš„sumï¼Œç°åœ¨æˆ‘ä»¬å°±ä½¿ç”¨Vuexæ¥å®ç°æ­¤åŠŸèƒ½ å…ˆå°†æ•°æ®éƒ½äº¤ç»™Vuexç®¡ç† Count.vue 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;template&gt;&lt;div style=&quot;padding: 20px&quot;&gt; &lt;h2&gt;å½“å‰æ±‚å’Œä¸º&#123;&#123;$store.state.sum&#125;&#125;&lt;/h2&gt; &lt;div&gt; &lt;select name=&quot;step&quot; id=&quot;stepSelect&quot; v-model=&quot;step&quot;&gt; &lt;option :value=&quot;1&quot;&gt;1&lt;/option&gt; &lt;option :value=&quot;2&quot;&gt;2&lt;/option&gt; &lt;option :value=&quot;3&quot;&gt;3&lt;/option&gt; &lt;/select&gt; &lt;button @click=&quot;add&quot;&gt;+&lt;/button&gt; &lt;button @click=&quot;sub&quot;&gt;-&lt;/button&gt; &lt;button @click=&quot;addOnCondition&quot;&gt;å½“å‰ä¸ºå¥‡æ•°å†åŠ &lt;/button&gt; &lt;button @click=&quot;addAfter&quot;&gt;è¿‡ä¸€ç§’å†åŠ &lt;/button&gt; &lt;/div&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Count&quot;, data()&#123; return &#123; step: 1 &#125; &#125;, methods:&#123; add()&#123; this.$store.dispatch(&#x27;add&#x27;,this.step); &#125;, sub()&#123; this.$store.dispatch(&#x27;sub&#x27;,this.step) &#125;, addOnCondition()&#123; this.$store.dispatch(&#x27;addOnCondition&#x27;,this.step) &#125;, addAfter()&#123; this.$store.dispatch(&#x27;addAfter&#x27;,this.step) &#125;, &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;button &#123; margin-left: 10px;&#125;&lt;/style&gt; store/index.js 1234567891011121314151617181920212223242526272829303132333435import Vuex from &#x27;vuex&#x27;import Vue from &#x27;vue&#x27;Vue.use(Vuex)export default new Vuex.Store(&#123; actions: &#123; add(context,value)&#123; context.commit(&#x27;INCREASE&#x27;,value); &#125;, sub(context,value)&#123; context.commit(&#x27;DECREASE&#x27;,value) &#125;, addOnCondition(context,value)&#123; if(value%2!==0)&#123; context.commit(&#x27;INCREASE&#x27;,value) &#125; &#125;, addAfter(context,value)&#123; setTimeout(()=&gt;&#123; context.commit(&#x27;INCREASE&#x27;,value) &#125;,1000); &#125;, &#125;, mutations:&#123; INCREASE(state,value)&#123; state.sum+=value; &#125;, DECREASE(state,value)&#123; state.sum-=value; &#125; &#125;, state:&#123; sum: 0, &#125;,&#125;) ShowSum.vue 1234567891011&lt;template&gt;&lt;div style=&quot;padding: 20px&quot;&gt; Countç»„ä»¶çš„sumå€¼æ˜¯ï¼š&#123;&#123;$store.state.sum&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;ShowSum&quot;&#125;&lt;/script&gt; å½“æˆ‘ä»¬æƒ³è¦æ‹¿åˆ°stateä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨$store.state.xxxï¼Œååˆ†éº»çƒ¦ï¼Œæ‰€ä»¥Vuexå°±ä¸ºæˆ‘ä»¬æä¾›äº†å·¥å…·mapState 1234567891011121314151617&lt;template&gt;&lt;div style=&quot;padding: 20px&quot;&gt; Countç»„ä»¶çš„sumå€¼æ˜¯ï¼š&#123;&#123;sum&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123;mapState&#125; from &quot;vuex&quot;;export default &#123; name: &quot;ShowSum&quot;, computed:&#123; ...mapState([&#x27;sum&#x27;]) &#125;&#125;&lt;/script&gt; æ‹“å±•1ã€gettersçš„ä½¿ç”¨ gettersæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè®¡ç®—å±æ€§ï¼Œå°±æ˜¯å°†stateä¸­çš„æ•°æ®åŠ å·¥åè¿”å›ç»™ç”¨æˆ· 1234567891011121314151617181920import Vuex from &#x27;vuex&#x27;import Vue from &#x27;vue&#x27;Vue.use(Vuex)export default new Vuex.Store(&#123; actions: &#123; &#125;, mutations:&#123; &#125;, getters:&#123; bigSum(state)&#123; return state.sum*10 &#125; &#125;, state:&#123; &#125;,&#125;) 2ã€mapGettersï¼ŒmapActionsï¼ŒmapMutationså·¥å…· æˆ‘ä»¬å¯¹äºstateä¸­çš„æ•°æ®å¯ä»¥ä½¿ç”¨mapStateæ¥å°†å…¶æ–¹ä¾¿åœ°ä»Vuexä¸­æ‹¿å‡ºæ¥ å¯¹äºgettersã€actionsã€mutationsä¸­çš„æ–¹æ³•å’Œæ•°æ®æˆ‘ä»¬ä¹Ÿæœ‰å¯¹åº”çš„å·¥å…·å°†å…¶ä»Vuexä¸­æ‹¿å‡º 3ã€æ¨¡å—åŒ–å¼€å‘ å¦‚æœæ•°æ®è¿˜æœ‰åˆ†ç±»ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘ store/index.js 1234567891011121314151617181920212223import Vue from &#x27;vue&#x27;import Vuex from &#x27;vuex&#x27;Vue.use(Vuex)import teacher from &quot;@/store/roles/teacher&quot;;import student from &quot;@/store/roles/student&quot;;import enterprise from &quot;@/store/roles/enterprise&quot;;import log from &#x27;@/store/log&#x27;import constant from &quot;@/store/constant&quot;;import common from &quot;@/store/common&quot;;const store = new Vuex.Store(&#123; modules: &#123; log, constant, common, teacher, student, enterprise &#125;&#125;)export default store; ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘è¦æ³¨æ„ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯åœ¨å„ä¸ªæ–‡ä»¶ä¸­éœ€è¦å¼€å¯å‘½åç©ºé—´ é‡‡ç”¨æ¨¡å—åŒ–å¼€å‘ä½¿ç”¨åï¼ŒmapXXXå·¥å…·çš„ä½¿ç”¨æ–¹æ³•å°±å‘ç”Ÿäº†æ”¹å˜ï¼Œæ”¹å˜å¦‚ä¸‹ 1234...mapState(&#x27;æ¨¡å—å&#x27;,[&#x27;stateå‚æ•°å&#x27;]),...mapGetters(&#x27;æ¨¡å—å&#x27;,[&#x27;getterså‚æ•°å&#x27;]),...mapActions(&#x27;æ¨¡å—å&#x27;,[&#x27;actionså‡½æ•°å&#x27;]),...mapMutations(&#x27;æ¨¡å—å&#x27;,[&#x27;mutationså‡½æ•°å&#x27;]),","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-åŸºç¡€3","slug":"Vue2-åŸºç¡€3","date":"2022-06-22T07:53:57.000Z","updated":"2022-07-09T10:08:49.344Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/22/Vue2-åŸºç¡€3/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/22/Vue2-%E5%9F%BA%E7%A1%803/","excerpt":"","text":"Vue2åŸºç¡€3æ¡ä»¶æ¸²æŸ“ æ¡ˆä¾‹ï¼šå¦‚å›¾ ä½¿ç”¨v-if12345678910111213141516171819&lt;div id=&quot;app&quot;&gt; &lt;span&gt;ç°åœ¨çš„nå€¼æ˜¯&#123;&#123;n&#125;&#125;&lt;/span&gt;&lt;br&gt; &lt;button @click=&quot;n++&quot;&gt;ç‚¹æˆ‘nè‡ªå¢1&lt;/button&gt;&lt;br&gt; &lt;button @click=&quot;n--&quot;&gt;ç‚¹æˆ‘nè‡ªå‡1&lt;/button&gt;&lt;br&gt; &lt;div v-if=&quot;n&lt;3&quot;&gt;æˆ‘åœ¨nå°äº3çš„æ—¶å€™å‡ºç°&lt;/div&gt; &lt;div v-else-if=&quot;n&lt;7&quot;&gt;æˆ‘åœ¨nå¤§äº3å°äº7çš„æ—¶å€™å‡ºç°&lt;/div&gt; &lt;div v-else&gt;æˆ‘åœ¨n&gt;7çš„æ—¶å€™æ˜¾ç¤º&lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; n: 0 &#125; &#125; &#125;)&lt;/script&gt; ä½¿ç”¨v-show123456789101112131415161718&lt;div id=&quot;app&quot;&gt; &lt;span&gt;ç°åœ¨çš„nå€¼æ˜¯&#123;&#123;n&#125;&#125;&lt;/span&gt;&lt;br&gt; &lt;button @click=&quot;n++&quot;&gt;ç‚¹æˆ‘nè‡ªå¢1&lt;/button&gt;&lt;br&gt; &lt;button @click=&quot;n--&quot;&gt;ç‚¹æˆ‘nè‡ªå‡1&lt;/button&gt;&lt;br&gt; &lt;div v-show=&quot;n&lt;3&quot;&gt;æˆ‘åœ¨nå°äº3çš„æ—¶å€™å‡ºç°&lt;/div&gt; &lt;div v-show=&quot;n&gt;=3&quot;&gt;æˆ‘åœ¨nå¤§äº3çš„æ—¶å€™å‡ºç°&lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; n: 0 &#125; &#125; &#125;)&lt;/script&gt; åŒºåˆ«12341. v-showçš„åŸç†æ˜¯å°†è¢«æ­¤æŒ‡ä»¤æ ‡è®°çš„DOMå…ƒç´ çš„displayå±æ€§è®¾ç½®ä¸ºnoneï¼Œä»è€Œå®ç°éšè—çš„æ•ˆæœ v-ifçš„åŸç†æ˜¯ç›´æ¥å°†æ­¤DOMå…ƒç´ ç›´æ¥ä»DOMæ ‘ä¸­åˆ é™¤2. å¦‚æœè¿™ä¸ªå…ƒç´ ä¼šé¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºéšè—ï¼Œåˆ™ä½¿ç”¨v-showï¼Œä¸éœ€è¦é¢‘ç¹åˆ›å»ºèŠ‚ç‚¹ å¦‚æœè¿™ä¸ªå…ƒç´ ä¸ä¼šé¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºéšè—ï¼Œåªæ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œåˆ¤æ–­æ˜¾ç¤ºéšè—ï¼Œåˆ™ä½¿ç”¨v-if åˆ—è¡¨æ¸²æŸ“ æ¡ˆä¾‹ï¼šå°†æ•°ç»„æ•°æ®å±•ç¤ºåœ¨é¡µé¢ä¸Š 123456789data()&#123; return &#123; people: [ &#123;id: &#x27;001&#x27;,name: &#x27;å¼ ä¸‰&#x27;,age: 18,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;002&#x27;,name: &#x27;èŠéº»&#x27;,age: 20,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;003&#x27;,name: &#x27;æå››&#x27;,age: 17,sex: &#x27;å¥³&#x27;&#125; ] &#125;&#125; ä½¿ç”¨v-foræŒ‡ä»¤ 12345&lt;ul&gt; &lt;li v-for=&quot;item in people&quot;&gt; &#123;&#123;item.name&#125;&#125;-&#123;&#123;item.age&#125;&#125;-&#123;&#123;item.sex&#125;&#125; &lt;/li&gt;&lt;/ul&gt; è¿™æ ·å°±å®Œæˆäº†æœ€åŸºæœ¬çš„éå†ï¼Œå¦‚æœæˆ‘éœ€è¦å¾—åˆ°æ¯ä¸€æ¬¡éå†çš„ç´¢å¼•ï¼Œåªéœ€è¦åŠ å…¥ä¸€ä¸ªå½¢å‚å³å¯ 12345&lt;ul&gt; &lt;li v-for=&quot;(item,index) in people&quot;&gt; &#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;-&#123;&#123;item.age&#125;&#125;-&#123;&#123;item.sex&#125;&#125; &lt;/li&gt;&lt;/ul&gt; OKï¼Œè¿™é‡Œå…¶å®é—æ¼äº†ä¸€ä¸ªå¾ˆé‡è¦å¾ˆé‡è¦çš„ä¸€ä¸ªå±æ€§keyï¼Œè¿™ä¸ªkeyå°±æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ ‡è¯†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨æ•°ç»„æ¯ä¸€ä¸ªå¯¹è±¡çš„idå±æ€§ï¼Œæˆ–è€…æ˜¯index 123456&lt;ul&gt; &lt;!--&lt;li v-for=&quot;(item,index) in people&quot; :key=&quot;index&quot;&gt;--&gt; &lt;li v-for=&quot;(item,index) in people&quot; :key=&quot;item.id&quot;&gt; &#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;-&#123;&#123;item.age&#125;&#125;-&#123;&#123;item.sex&#125;&#125; &lt;/li&gt;&lt;/ul&gt; è¿™ä¸ªkeyæ˜¯å¹²å˜›çš„å‘¢ï¼Ÿè¿™å°±è¦å¥½å¥½æ‰’ä¸€æ‰’äº†ï¼Œæ¥å§ï¼Œæ•´æ´»ï¼ è™šæ‹ŸDOMçš„DIFFç®—æ³•å•¥å•Šè¿™æ˜¯ï¼Œæ€ä¹ˆä»keyç›´æ¥è·³åˆ°äº†ä»€ä¹ˆè™šæ‹ŸDOMçš„DIFFç®—æ³•äº†ï¼Ÿèµ°é”™ç‰‡åœºäº†ï¼Ÿ æ²¡æœ‰æ²¡æœ‰ï¼Œè¦è§£é‡Škeyå°±è¦å…ˆçŸ¥é“è¿™ä¸ªçŸ¥è¯† ç°åœ¨çš„ä»£ç ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯æ¯”åˆšåˆšå¤šäº†ä¸€ä¸ªæ·»åŠ ä¸€ä¸ªäººçš„æŒ‰é’®å’Œä¸€ä¸ªinputæ¡† 123456789101112131415161718192021222324252627&lt;div id=&quot;app&quot;&gt; &lt;button @click.once=&quot;addPerson&quot;&gt;æ·»åŠ ä¸€ä¸ªäºº&lt;/button&gt; &lt;ul&gt; &lt;li v-for=&quot;(item,index) in people&quot; :key=&quot;index&quot;&gt; &#123;&#123;item.name&#125;&#125;-&#123;&#123;item.age&#125;&#125;-&#123;&#123;item.sex&#125;&#125;&lt;input type=&quot;text&quot; v-model=&quot;item.name&quot;&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; people: [ &#123;id: &#x27;001&#x27;,name: &#x27;å¼ ä¸‰&#x27;,age: 18,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;002&#x27;,name: &#x27;èŠéº»&#x27;,age: 20,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;003&#x27;,name: &#x27;æå››&#x27;,age: 17,sex: &#x27;å¥³&#x27;&#125; ] &#125; &#125;, methods: &#123; addPerson()&#123; this.people.unshift(&#123;id: &#x27;002&#x27;,name: &#x27;å°é©¬&#x27;,age: 21,sex: &#x27;ç”·&#x27;&#125;) &#125; &#125; &#125;)&lt;/script&gt; è¯´æ˜é—®é¢˜ ç„¶åç‚¹å‡»æ·»åŠ ä¸€ä¸ªäººï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªå¾ˆä¸¥é‡çš„é”™è¯¯ï¼Œè¾“å…¥å¡Œé™· åŠ å…¥:key=&quot;index&quot;ä¹‹åï¼Œä¸€æ ·å‡ºç°è¿™ä¸ªé”™è¯¯ åŠ å…¥:key=&quot;item.id&quot;ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªé”™è¯¯å°±æ¶ˆå¤±äº† æ—¢ç„¶æ„è¯†åˆ°äº†é”™è¯¯å’Œè§£å†³é”™è¯¯çš„æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±æ¥å¥½å¥½æ‹ä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Œä¸‹é¢çœ‹å›¾ï¼Œå›¾æœ‰ç‚¹ä¹±ï¼Œè¯·ä»”ç»†è§‚çœ‹ keyä¸ºindexçš„æƒ…å†µ è§£é‡Šå‡ ä¸ªç‚¹å§ï¼š 1ã€ç²‰è‰²çš„Ã—è¡¨ç¤ºåŒ¹é…å¤±è´¥ï¼Œä¸å¯ä»¥å¤ç”¨ï¼Œè“è‰²çš„âˆšè¡¨ç¤ºåŒ¹é…æˆåŠŸï¼Œå¯ä»¥å¤ç”¨ 2ã€å·¦ä¸‹è§’çš„æ©™è‰²çš„åˆ é™¤å·è¡¨ç¤ºè¯¥å…ƒç´ ç›´æ¥åˆ é™¤ 3ã€ä¸‹åŠéƒ¨åˆ†çš„æ©™è‰²ç®­å¤´è¡¨ç¤ºç›´æ¥å¤ç”¨ä¹‹å‰ç”Ÿæˆçš„çœŸå®DOMèŠ‚ç‚¹ 4ã€å·¦åŠéƒ¨åˆ†çš„ç»¿è‰²ç®­å¤´è¡¨ç¤ºéœ€è¦ä»è™šæ‹ŸèŠ‚ç‚¹é‡æ–°ç”ŸæˆçœŸå®DOMèŠ‚ç‚¹ keyä¸ºidçš„æƒ…å†µ keyä¸å†™çš„æƒ…å†µå¦‚æœä¸å†™keyçš„è¯ï¼ŒVueé»˜è®¤å°†indexä½œä¸ºkeyï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µå’Œkeyä¸ºindexçš„æƒ…å†µæ˜¯ä¸€æ ·çš„ æ€»ç»“123456789101112131ã€keyçš„ä½œç”¨ ä½œä¸ºæ¯ä¸€ä¸ªDOMè™šæ‹ŸèŠ‚ç‚¹çš„å”¯ä¸€æ€§æ ‡è¯†ï¼Œå½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶ åœ¨Diffç®—æ³•æ—¶ï¼Œæ–°è™šæ‹ŸDOMèŠ‚ç‚¹æ‰¾åˆ°ä¸è‡ªèº«keyç›¸åŒçš„æ—§è™šæ‹ŸDOMèŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒ å¦‚æœç›¸åŒï¼Œåˆ™ç›´æ¥å°†æ—§è™šæ‹ŸDOMèŠ‚ç‚¹ç”Ÿæˆçš„çœŸå®DOMèŠ‚ç‚¹ç›´æ¥æ‹¿æ¥å¤ç”¨ å¦‚æœä¸åŒï¼Œåˆ™å°†æ–°è™šæ‹ŸDOMèŠ‚ç‚¹ç”Ÿæˆæ–°çœŸå®DOMèŠ‚ç‚¹2ã€ç”¨indexåškeyä¼šå‡ºç°çš„é—®é¢˜ (1)å¦‚æœå‡ºç°äº†å¯¹é¡ºåºæ”¹å˜çš„æ“ä½œï¼Œåˆ™ä¼šå¯¼è‡´æ—§çœŸå®DOMæ— æ³•å¤ç”¨ï¼Œæ•ˆç‡é™ä½ (2)å¦‚æœæœ‰è¾“å…¥ç±»æ§ä»¶ï¼Œåˆ™ä¼šå‡ºç°è¾“å…¥å¡Œé™·çš„é—®é¢˜3ã€å¦‚ä½•è®¾ç½®key (1)å¦‚æœåªæ˜¯å±•ç¤ºï¼Œä¸ä¼šäº§ç”Ÿé€†åºæ’å…¥ï¼Œé€†åºåˆ é™¤ç­‰ä¼šå½±å“é¡ºåºçš„æƒ…å†µï¼Œåˆ™ä½¿ç”¨indexå³å¯ (2)å¦‚æœä¼šå¯¹é¡ºåºé€ æˆå½±å“ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨indexä½œä¸ºkeyï¼Œè€Œæ˜¯éœ€è¦ä½¿ç”¨å”¯ä¸€æ€§æ ‡è¯† åˆ—è¡¨è¿‡æ»¤ éœ€æ±‚ï¼šè¾“å…¥å§“å…³é”®è¯ï¼Œå›è½¦å‡ºç°åå­—ä¸­å¸¦æœ‰è¯¥å…³é”®è¯çš„ 1234567891011121314151617181920212223242526272829&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-model=&quot;keyword&quot; placeholder=&quot;è¯·è¾“å…¥å§“å…³é”®è¯&quot; @keyup.enter=&quot;filterData&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;(item,index) in people&quot; :key=&quot;index&quot;&gt; &#123;&#123;item.name&#125;&#125;-&#123;&#123;item.age&#125;&#125;-&#123;&#123;item.sex&#125;&#125;&lt;input type=&quot;text&quot;&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; keyword: &#x27;&#x27;, people: [ &#123;id: &#x27;001&#x27;,name: &#x27;å¼ ä¸‰&#x27;,age: 18,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;002&#x27;,name: &#x27;èŠéº»&#x27;,age: 20,sex: &#x27;ç”·&#x27;&#125;, &#123;id: &#x27;003&#x27;,name: &#x27;æå››&#x27;,age: 17,sex: &#x27;å¥³&#x27;&#125;, ], showData: people &#125; &#125;, methods: &#123; filterData()&#123; this.showData = this.people.filter(p=&gt;p.name.indexOf(this.keyword)!==-1); &#125; &#125; &#125;)&lt;/script&gt; åˆ—è¡¨æ’åº1234567&lt;button @click=&quot;sortByAge&quot;&gt;æŒ‰å¹´é¾„æ’åº&lt;/button&gt;methods: &#123; sortByAge()&#123; this.showData = this.people.sort((p1,p2)=&gt;p2.age-p1.age); &#125;&#125; ä¿®æ”¹åˆ—è¡¨ç¬¬ä¸€ä¸ªäººçš„ä¿¡æ¯(å¥æ•ˆ)12345678&lt;button @click=&quot;updatePerson&quot;&gt;ä¿®æ”¹ç¬¬ä¸€ä¸ªäººçš„å¹´é¾„ä¸º20&lt;/button&gt;methods: &#123; updatePerson()&#123; this.people[0].age = 20; this.showData = this.people; &#125;&#125; å½»åº•ä¿®æ”¹åˆ—è¡¨ä¸€ä¸ªäººçš„ä¿¡æ¯(å¤±æ•ˆ)123456&lt;button @click=&quot;updatePersonComplete&quot;&gt;å½»åº•ä¿®æ”¹ä¸€ä¸ªäººçš„ä¿¡æ¯&lt;/button&gt;updatePersonComplete()&#123; this.people[0] = &#123;id: &#x27;004&#x27;,name: &#x27;è€é©¬&#x27;,age: 18,sex: &#x27;å¥³&#x27;&#125;; this.showData = this.people;&#125; ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼ä¿®æ”¹æ•°æ®ï¼ŒVueæ²¡æœ‰æ£€æµ‹åˆ°å‘¢ï¼Ÿ è¿™å°±è¦è®²åˆ°Vueç›‘æµ‹æ•°æ®å˜åŒ–(å“åº”å¼)çš„åŸç†äº† å“åº”å¼åŸç†ä¹‹å‰æˆ‘åœ¨è®²æ•°æ®ä»£ç†çš„æ—¶å€™ï¼Œå…¶å®å·²ç»è®²åˆ°äº†Vueå“åº”å¼çš„åŸç†ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ­£å¼ç»™å°ä¼™ä¼´è®²ä¸€è®² Vueç›‘æµ‹æ•°æ®åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ•°ç»„ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯å¯¹è±¡ã€‚æˆ‘ä»¬å…ˆä»ç›‘æµ‹å¯¹è±¡å¼€å§‹ï¼Œç„¶åå†è®²ç›‘æµ‹æ•°ç»„ã€‚ ç›‘æµ‹å¯¹è±¡å‰æœŸå‡†å¤‡ 12345678910111213141516171819202122&lt;div id=&quot;app&quot;&gt; &lt;div&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/div&gt; &lt;div&gt;æ€§åˆ«ï¼š&#123;&#123;sex&#125;&#125;&lt;/div&gt; &lt;div&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/div&gt; &lt;div&gt;å­¦æ ¡ï¼š&#123;&#123;school&#125;&#125;&lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; let data = &#123; name: &#x27;zhima&#x27;, sex: &#x27;ç”·&#x27;, age: 19, hobbies: [&#x27;ç‹è€…&#x27;,&#x27;åŸç¥&#x27;,&#x27;ç¡è§‰&#x27;,&#x27;å¹²é¥­&#x27;], school: &#123; name: &#x27;å—äº¬æŸé«˜æ ¡&#x27;, address: &#x27;å—äº¬&#x27; &#125; &#125; let vm = new Vue(&#123; el: &#x27;#app&#x27;, data &#125;);&lt;/script&gt; æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹æ•°æ®ä»£ç†æ˜¯ä»€ä¹ˆ å…ˆè¾“å‡ºä¸€ä¸‹vmå¯¹è±¡ æˆ‘ä»¬åœ¨dataä¸­é…ç½®çš„å¯¹è±¡å…ˆç»è¿‡VueåŠ å·¥å˜æˆObserverå¯¹è±¡ ç„¶åå°†å…¶æ”¾åˆ°vmå¯¹è±¡ä¸Šçš„_dataå±æ€§ä¸­ ç„¶åå°†_dataä¸­çš„æ•°æ®å…¨éƒ¨ä»£ç†åˆ°vmå¯¹è±¡ä¸Š è®©æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨&#123;&#123;&#125;&#125;è¯»å–vmèº«ä¸Šçš„å±æ€§ è¿™å°±æ˜¯æ•°æ®ä»£ç† æˆ‘ä»¬ä¿®æ”¹äº†vmèº«ä¸Šçš„å±æ€§å®é™…ä¸Šä¿®æ”¹çš„æ˜¯_dataä¸­çš„æ•°æ® , ç„¶åé¡µé¢å°±æ›´æ–°æˆäº†ä¿®æ”¹åçš„æ–°çš„æ•°æ® æˆ–è€…ç›´æ¥ä¿®æ”¹_dataä¸­çš„æ•°æ®,é¡µé¢ä¹Ÿä¼šæ›´æ–°ä¸ºä¿®æ”¹åçš„æ•°æ® è¿™æ ·çœ‹æ¥,å“åº”å¼æ•°æ®çš„åŸç†æ˜¯åœ¨_dataä¸­.è¿˜è®°å¾—æˆ‘ä¹‹å‰æåˆ°çš„æ•°æ®åŠ«æŒå—? Vueçš„å“åº”å¼å°±æ˜¯é€šè¿‡æ•°æ®åŠ«æŒæ¥å®ç°çš„,è€Œæ•°æ®åŠ«æŒåˆæ˜¯é€šè¿‡Object.definePropertyå®ç°çš„,_dataçš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªsetterå‡½æ•°,å½“_dataä¸­ä»»ä½•ä¸€ä¸ªæ•°æ® å‘ç”Ÿäº†æ”¹å˜,éƒ½ä¼šèµ°è¿™ä¸ªsetteræ–¹æ³•,é‚£ä¹ˆåœ¨è¿™ä¸ªæ—¶å€™,æˆ‘å°±å¯ä»¥æ‰§è¡Œä¸€éé‡æ–°æ¸²æŸ“é¡µé¢çš„æ–¹æ³•,ä»è€Œä½¿å¾—é¡µé¢æ•°æ®æ›´æ–° ç›‘æµ‹æ•°ç»„æˆ‘ä»¬å…ˆæ¥è§‚å¯Ÿä¸€ä¸‹_dataä¸­çš„hobbiesæ•°ç»„çš„æ ·å­,æˆ‘ä»¬å‘ç°å®ƒæ²¡æœ‰ç»™æ¯ä¸€ä¸ªå…ƒç´ è®¾ç½®ä¸€ä¸ªgetter&#x2F;setter,é‚£å®ƒæ˜¯æ€ä¹ˆå®ç°å“åº”å¼çš„å‘¢ è¿™é‡Œå°±ä¸ç»•å¼¯äº† Vueé‡Œé¢å¯¹äºæ•°ç»„çš„ç›‘æµ‹æ˜¯ é€šè¿‡åŒ…è£…æ•°ç»„æ–¹æ³•,å…ˆå¯¹é¡µé¢è¿›è¡Œæ›´æ–°,ç„¶åå†è°ƒç”¨åŸç”Ÿçš„æ•°ç»„ä¸Šçš„æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œæ›´æ”¹ æœ‰ä»¥ä¸‹è¿™å‡ ç§ push() pop() shift() unshift() splice() sort() reverse() Vueä¸­çš„pushä¸æ˜¯åŸç”Ÿçš„push æ‰€ä»¥åªæœ‰å½“ä½ ä½¿ç”¨ä»¥ä¸Šè¿™äº›æ–¹æ³•çš„æ—¶å€™,Vueæ‰ä¼šç›‘æµ‹åˆ°,ç„¶åå¯¹é¡µé¢è¿›è¡Œæ›´æ–°,è¿™å°±è§£é‡Šäº†å…ˆå‰çš„é‚£ä¸ªæ¡ˆä¾‹,ç›´æ¥å°†æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ æ›¿æ¢çš„æ—¶å€™,Vueå¹¶æ²¡æœ‰ç›‘æµ‹åˆ°. ä½†å¦‚æœæ•°ç»„å…ƒç´ æ˜¯å¯¹è±¡,å®ƒä¸€æ ·è¿˜æ˜¯ä¼šæœ‰getter&#x2F;setter è¿‡æ»¤å™¨åŠŸèƒ½ï¼šå…ˆå°†æ•°æ®ä½œå‡ºå¤„ç†å†å°†æ•°æ®è¿›è¡Œæ˜¾ç¤º æ¡ˆä¾‹ï¼šæ˜¾ç¤ºæ ¼å¼åŒ–åçš„æ—¶é—´ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;div id=&quot;app&quot;&gt; &lt;div&gt; æ—¶é—´æˆ³ï¼š&#123;&#123;nowTime&#125;&#125; &lt;/div&gt; &lt;div&gt; è®¡ç®—å±æ€§æ ¼å¼åŒ–åçš„æ—¶é—´æ˜¯ï¼š&#123;&#123;fmtTime&#125;&#125; &lt;/div&gt; &lt;div&gt; æ–¹æ³•æ ¼å¼åŒ–åçš„æ—¶é—´æ˜¯:&#123;&#123;getFmtTime()&#125;&#125; &lt;/div&gt; &lt;div&gt; è¿‡æ»¤å™¨æ ¼å¼åŒ–åçš„æ—¶é—´ï¼š&#123;&#123;nowTime | timeFormatter&#125;&#125; &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; nowTime: Date.now() &#125; &#125;, computed:&#123; fmtTime() &#123; return dayjs(this.nowTime).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;); &#125; &#125;, methods: &#123; getFmtTime(value) &#123; return dayjs(value).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;); &#125; &#125;, filters:&#123; timeFormatter(value)&#123; return dayjs(value).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;) &#125; &#125; &#125;)&lt;/script&gt; ä»¥ä¸Šè¿™ä¸ªè¿‡æ»¤å™¨å«å±€éƒ¨è¿‡æ»¤å™¨ï¼Œè¿˜æœ‰ä¸€ç§è¿‡æ»¤å™¨ï¼Œå«å…¨å±€è¿‡æ»¤å™¨ 123456789101112&lt;div id=&quot;app&quot;&gt; &lt;div&gt; &lt;!--è¿™é‡Œçš„è¿‡æ»¤å™¨ç¬¬ä¸€ä¸ªä¼ å…¥çš„å‚æ•°æ°¸è¿œæ˜¯å¾…å¤„ç†çš„æ•°æ®ï¼Œè¿™é‡Œä¼ å…¥çš„å°±ç›´æ¥æ˜¯ç¬¬äºŒä¸ªå‚æ•°ç¬¬ä¸‰ä¸ªç¬¬å››ä¸ªå‚æ•°--&gt; è¿‡æ»¤å™¨æ ¼å¼åŒ–åçš„æ—¶é—´ï¼š&#123;&#123;nowTime | globalTimeFormatter(&#x27;YYYY-MM-DD&#x27;)&#125;&#125; &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; //å…¨å±€è¿‡æ»¤å™¨ Vue.filter(&#x27;globalTimeFormatter&#x27;,(value,formatStr=&#x27;YYYY-MM-DD HH:mm:ss&#x27;)=&gt;&#123; return dayjs(value).format(formatStr); &#125;)&lt;/script&gt; æ³¨æ„ç‚¹ï¼šè¿‡æ»¤å™¨ä¸æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨è®¡ç®—å±æ€§æˆ–è€…æ–¹æ³•éƒ½å¯ä»¥å®ç°ï¼Œè¿™åªæ˜¯ä¸€ç§æ–¹å¼ è‡ªå®šä¹‰æŒ‡ä»¤ æŒ‡ä»¤æ˜¯ä»€ä¹ˆï¼Ÿ æŒ‡ä»¤å°±æ˜¯v-onå¼€å¤´çš„ä¸€äº›è¯­æ³•ï¼Œå°±æ˜¯è‡ªå·±å°è£…ä¸€äº›é€»è¾‘ éœ€æ±‚1ï¼šå®šä¹‰ä¸€ä¸ªv-bigæŒ‡ä»¤ï¼Œä¼šæŠŠç»‘å®šçš„æ•°å€¼æ”¾å¤§10å€ã€‚ 123456789101112131415161718192021222324&lt;div id=&quot;app&quot;&gt; &lt;h2&gt;å½“å‰çš„nå€¼æ˜¯ï¼š&lt;span v-text=&quot;n&quot;&gt;&lt;/span&gt; &lt;/h2&gt; &lt;h2&gt;æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š&lt;span v-big=&quot;n&quot;&gt;&lt;/span&gt; &lt;/h2&gt; &lt;button @click=&quot;n++&quot;&gt;ç‚¹æˆ‘n+1&lt;/button&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el:&#x27;#app&#x27;, data() &#123; return &#123; n: 1 &#125; &#125;, directives:&#123; // bigå‡½æ•°ä½•æ—¶ä¼šè¢«è°ƒç”¨ï¼Ÿ // 1.æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ã€‚ // 2.æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ã€‚ big(element,binding)&#123; console.log(&#x27;big&#x27;,this) //æ³¨æ„æ­¤å¤„çš„thisæ˜¯window element.innerText = binding.value * 10 &#125; &#125; &#125;&lt;/script&gt; éœ€æ±‚2ï¼šå®šä¹‰ä¸€ä¸ªv-fbindæŒ‡ä»¤ï¼Œå’Œv-bindåŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¯ä»¥è®©å…¶æ‰€ç»‘å®šçš„inputå…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹ã€‚ 12345678910111213141516171819202122232425262728293031&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-fbind:value=&quot;n&quot;&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el:&#x27;#root&#x27;, data() &#123; return &#123; n: 1 &#125; &#125;, directives:&#123; fbind:&#123; //æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰ bind(element,binding)&#123; element.value = binding.value &#125;, //æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶ inserted(element,binding)&#123; element.focus() &#125;, //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ update(element,binding)&#123; element.value = binding.value &#125; &#125; &#125; &#125;&lt;/script&gt; è¿™ä¸¤ä¸ªéƒ½æ˜¯å±€éƒ¨æŒ‡ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¨å±€æŒ‡ä»¤ 123456789101112 Vue.directive(&#x27;fbind&#x27;,&#123; bind(element,binding)&#123; element.value = binding.value &#125;, inserted(element,binding)&#123; element.focus() &#125;, //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ update(element,binding)&#123; element.value = binding.value &#125;&#125;) æ³¨æ„ç‚¹ï¼š 123æŒ‡ä»¤å®šä¹‰æ—¶ä¸åŠ v-ï¼Œä½†ä½¿ç”¨æ—¶è¦åŠ v-ï¼›æŒ‡ä»¤åå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œè¦ä½¿ç”¨kebab-caseå‘½åæ–¹å¼ï¼Œä¸è¦ç”¨camelCaseå‘½åã€‚ ç”Ÿå‘½å‘¨æœŸå®šä¹‰ï¼šVueä¸­æ¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å¯¹åº”ç€ä¸€ä¸ªé’©å­ï¼ˆå‡½æ•°ï¼‰ï¼Œå½“Vueèµ°åˆ°è¯¥ç”Ÿå‘½å‘¨æœŸé˜¶æ®µçš„æ—¶å€™ï¼Œå°±ä¼šè‡ªå·±è°ƒç”¨è¯¥é’©å­ã€‚ é»„è‰²çš„æ ‡ç­¾æ˜¯æˆ‘åŠ çš„æ³¨é‡Šï¼Œå…¶ä»–çš„æµç¨‹éƒ½æ˜¯ä»Vueå®˜ç½‘æŸ¥çœ‹çš„ æœ€å¸¸ç”¨çš„å°±æ˜¯mountedå’Œdestoryed ä¸€èˆ¬åœ¨mountedé’©å­ä¸­åˆå§‹åŒ–æ•°æ®ï¼ˆAjaxè¯·æ±‚ï¼‰ï¼Œåœ¨destoryedé’©å­ä¸­åˆ é™¤å®šæ—¶å™¨ï¼Œè§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ç­‰æ”¶å°¾å·¥ä½œ ç»„ä»¶ æ¨¡å—åŒ–çš„æ¦‚å¿µ å¦‚æœæ‰€æœ‰çš„jsä»£ç éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆåæœŸç»´æŠ¤å’Œæ›´æ–°ä¼šéå¸¸åƒåŠ›ã€‚æ‰€ä»¥å°±æœ‰äº†æ¨¡å—åŒ–çš„æ¦‚å¿µäº†ï¼Œè¿™é‡Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„JavaScriptçš„æ¨¡å—åŒ–è§„èŒƒ ç»„ä»¶çš„å®šä¹‰ ç”¨æ¥å®ç°å±€éƒ¨åŠŸèƒ½æ•ˆæœçš„æ‰€æœ‰ä»£ç å’Œèµ„æºçš„é›†åˆï¼ˆHTMLã€CSSã€JavaScriptï¼‰ ä¼ ç»Ÿå¼€å‘æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¼ ç»Ÿå¼€å‘çš„ç»“æ„ å…¶å­˜åœ¨çš„é—®é¢˜æ˜¯ 1ã€ä»£ç å¤ç”¨ç‡ä¸é«˜ 2ã€ä¾èµ–å…³ç³»æ··ä¹±ï¼ŒåæœŸéš¾ä»¥ç»´æŠ¤ ç»„ä»¶å¼€å‘ æˆ‘ä»¬æ¥çœ‹çœ‹å®˜ç½‘ç»™æˆ‘ä»¬çš„å›¾ æœ€ä¸Šå±‚çš„å°±æ˜¯vmå¯¹è±¡ï¼Œå®ƒç®¡ç†æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡ åœ¨Vueä¸­æœ‰ä¸¤ç§ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘çš„æ€è·¯ 1ã€éå•æ–‡ä»¶ç»„ä»¶ 2ã€å•æ–‡ä»¶ç»„ä»¶ éå•æ–‡ä»¶ç»„ä»¶å®šä¹‰ç»„ä»¶123456789101112const hello = Vue.extend(&#123; template:` &lt;div&gt; &lt;h2&gt;ä½ å¥½å•Šï¼&#123;&#123;name&#125;&#125;&lt;/h2&gt; &lt;/div&gt; `, data()&#123; return &#123; name:&#x27;Tom&#x27; &#125; &#125;&#125;) è¿™é‡Œçš„dataé…ç½®é¡¹æˆ‘ä»¬è¯´è¿‡å¯ä»¥å†™æˆä¸¤ç§å½¢å¼ 1ã€å‡½æ•°å¼ 2ã€å¯¹è±¡å¼ åˆ°äº†ç»„ä»¶å¼€å‘ï¼Œè¿™ä¸ªdataé…ç½®é¡¹å°±å¿…é¡»æ˜¯å‡½æ•°å¼ é¿å…ç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»ã€‚ æ³¨å†Œç»„ä»¶ å±€éƒ¨æ³¨å†Œ 1234567new Vue(&#123; el:&#x27;#app&#x27;, //ç¬¬äºŒæ­¥ï¼šæ³¨å†Œç»„ä»¶ï¼ˆå±€éƒ¨æ³¨å†Œï¼‰ components:&#123; hello &#125;&#125;) å…¨å±€æ³¨å†Œ 1Vue.component(&#x27;hello&#x27;,hello) ä½¿ç”¨ç»„ä»¶123&lt;div id=&quot;app&quot;&gt; &lt;hello&gt;&lt;/hello&gt;&lt;/div&gt; æ³¨æ„ç‚¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839401.å…³äºç»„ä»¶å: ä¸€ä¸ªå•è¯ç»„æˆï¼š ç¬¬ä¸€ç§å†™æ³•(é¦–å­—æ¯å°å†™)ï¼šschool ç¬¬äºŒç§å†™æ³•(é¦–å­—æ¯å¤§å†™)ï¼šSchool å¤šä¸ªå•è¯ç»„æˆï¼š ç¬¬ä¸€ç§å†™æ³•(kebab-caseå‘½å)ï¼šmy-school ç¬¬äºŒç§å†™æ³•(CamelCaseå‘½å)ï¼šMySchool (éœ€è¦Vueè„šæ‰‹æ¶æ”¯æŒ) å¤‡æ³¨ï¼š (1)ç»„ä»¶åå°½å¯èƒ½å›é¿HTMLä¸­å·²æœ‰çš„å…ƒç´ åç§° (2)å¯ä»¥ä½¿ç”¨nameé…ç½®é¡¹æŒ‡å®šç»„ä»¶åœ¨å¼€å‘è€…å·¥å…·ä¸­å‘ˆç°çš„åå­—2.å…³äºç»„ä»¶æ ‡ç­¾: ç¬¬ä¸€ç§å†™æ³•ï¼š&lt;school&gt;&lt;/school&gt; ç¬¬äºŒç§å†™æ³•ï¼š&lt;school/&gt;ä¸ç”¨ä½¿ç”¨è„šæ‰‹æ¶æ—¶ï¼Œ&lt;school/&gt;ä¼šå¯¼è‡´åç»­ç»„ä»¶ä¸èƒ½æ¸²æŸ“ã€‚3.å…³äºVueComponentï¼š schoolç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªåä¸ºVueComponentçš„æ„é€ å‡½æ•°ï¼Œä¸”ä¸æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„ï¼Œæ˜¯Vue.extendç”Ÿæˆçš„ã€‚ æˆ‘ä»¬åªéœ€è¦å†™&lt;school/&gt;æˆ–&lt;school&gt;&lt;/school&gt;ï¼ŒVueè§£ææ—¶ä¼šå¸®æˆ‘ä»¬åˆ›å»ºschoolç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œå³Vueå¸®æˆ‘ä»¬æ‰§è¡Œçš„ï¼šnew VueComponent(options)ã€‚4.å…³äºthisæŒ‡å‘ï¼š (1).ç»„ä»¶é…ç½®ä¸­ï¼š dataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€VueComponentå®ä¾‹å¯¹è±¡ã€‘ã€‚ (2).new Vue(options)é…ç½®ä¸­ï¼š dataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€Vueå®ä¾‹å¯¹è±¡ã€‘ã€‚5.VueComponentçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vcï¼ˆä¹Ÿå¯ç§°ä¹‹ä¸ºï¼šç»„ä»¶å®ä¾‹å¯¹è±¡ï¼‰ã€‚Vueçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vmã€‚6.Vcå’ŒVmçš„åŒºåˆ« ä¸¤è€…æœ€å¤§çš„å·®åˆ«å°±æ˜¯vcæ²¡æœ‰elé…ç½®é¡¹ï¼Œvcåªèƒ½ä¾é™„vm å…¶ä»–çš„é…ç½®é¡¹å¯ä»¥è¯´æ˜¯ä¸€æ ·çš„ 7.é‡è¦çš„å†…ç½®å…³ç³» å‡½æ•°ä¸Šçš„prototypeå±æ€§å«æ˜¾ç¤ºåŸå‹å±æ€§ å¯¹è±¡ä¸Šçš„__proto__å±æ€§å«éšå¼åŸå‹å±æ€§ ä¸¤è€…æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡ å®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹å±æ€§æŒ‡å‘è‡ªå·±ç¼”é€ è€…çš„åŸå‹å¯¹è±¡ VueComponent.prototype.__proto__ === Vue.prototype è®©ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰å¯ä»¥è®¿é—®åˆ° VueåŸå‹ä¸Šçš„å±æ€§ã€æ–¹æ³•ã€‚ å•æ–‡ä»¶ç»„ä»¶ï¼ˆè„šæ‰‹æ¶ï¼‰è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è„šæ‰‹æ¶ï¼ˆVue CLIï¼‰å•¦ï¼ CLIï¼ˆCommand Line Interfaceï¼‰å‘½ä»¤è¡Œæ¥å£ï¼Œæˆ‘ä»¬å°±å«å®ƒè„šæ‰‹æ¶ é¦–å…ˆï¼Œä½ å¿…é¡»è¦æœ‰nodeå’Œgitbashçš„ç¯å¢ƒ åœ¨gitbashçš„å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ 12345678# ä¸‹è½½è„šæ‰‹æ¶npm i @vue/cli -g# åˆ›å»ºVueé¡¹ç›®vue create é¡¹ç›®å# å¯åŠ¨Vueé¡¹ç›®npm run serve æ³¨æ„ å¦‚æœä½ æ˜¯åœ¨ideaä¸­çš„ç»ˆç«¯è¿è¡Œçš„vue create é¡¹ç›®åæŠ¥äº†ä»¥ä¸‹é”™è¯¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆ 1ã€ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€idea 2ã€ä½¿ç”¨å‘½ä»¤è¡Œåˆ°å½“å‰ç›®å½•ä¸‹ä½¿ç”¨è¯¥å‘½ä»¤ è¿™æ˜¯æ­£å¸¸å¯åŠ¨æˆåŠŸçš„ç•Œé¢ è„šæ‰‹æ¶çš„HelloWorldæ¡ˆä¾‹ç•Œé¢ è§‚å¯Ÿé¡¹ç›®ç»“æ„ main.js12345678910// å¼•å…¥Vueimport Vue from &#x27;vue&#x27;// å¼•å…¥Appæ ¹ç»„ä»¶import App from &#x27;./App.vue&#x27;// å…³é—­ç”Ÿäº§æç¤ºVue.config.productionTip = false// åˆ›å»ºvmå¯¹è±¡new Vue(&#123; render: h =&gt; h(App),&#125;).$mount(&#x27;#app&#x27;) æˆ‘ä»¬ä¹‹å‰æ˜¯è¿™ä¹ˆå†™çš„ 1234567import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; template: `&lt;App&gt;&lt;/App&gt;`, components: &#123;App&#125;&#125;).$mount(&#x27;#app&#x27;) æˆ‘ä»¬è¿è¡Œï¼Œå‘ç°æŠ¥é”™äº†ï¼ŒæŠ¥é”™å¦‚ä¸‹ å¤§æ¦‚æ„æ€æ˜¯è„šæ‰‹æ¶ä½¿ç”¨çš„è¿è¡Œæ—¶ç‰ˆæœ¬çš„Vueï¼Œå®ƒæ²¡æœ‰æ¨¡æ¿è§£æå™¨ ä½ å¯ä»¥å°†æ¨¡æ¿æ”¾å…¥renderå‡½æ•°ä¸­ï¼Œæˆ–è€…ä½¿ç”¨å®Œæ•´ç‰ˆçš„Vue æ¥è§£å†³é—®é¢˜ ä½¿ç”¨å®Œæ•´ç‰ˆVue1import Vue from &#x27;vue/dist/vue&#x27; å‘ç°ä¸æŠ¥é”™äº†ï¼Œé¡µé¢ä¹Ÿæ­£å¸¸æ˜¾ç¤ºäº† ä½¿ç”¨renderå‡½æ•°12345678910import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; render(createElement)&#123; return createElement(App) &#125;&#125;).$mount(&#x27;#app&#x27;) ä¸€ä¸ªå‚æ•°çœç•¥å°æ‹¬å· 12345678910import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; render: createElement=&gt;&#123; return createElement(App) &#125;&#125;).$mount(&#x27;#app&#x27;) ç›´æ¥å†™è¿”å›è¯­å¥çœç•¥èŠ±æ‹¬å·å’Œreturn 12345678import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; render: createElement =&gt; createElement(App)&#125;).$mount(&#x27;#app&#x27;) æ¢ä¸ªå‚æ•°å 12345678import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;) ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ®‹ç¼ºç‰ˆçš„Vueå‘¢ï¼Ÿ æ¨¡æ¿è§£æå™¨å äº†Vuejsæºç çš„1&#x2F;3çš„ä½“ç§¯ï¼Œä¸ºäº†å‡å°‘æ‰“åŒ…åçš„ä½“ç§¯ï¼Œæ‰€ä»¥å°±å°†æ¨¡æ¿è§£æå™¨åˆ å»ï¼Œç”¨æ›´å°çš„renderå‡½æ•°æ¥å®Œæˆè¯¥ä»»åŠ¡ App.vue12345678910111213141516171819202122232425262728&lt;template&gt;&lt;div id=&quot;app&quot;&gt; &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot;&gt; &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import HelloWorld from &#x27;./components/HelloWorld.vue&#x27; export default &#123; name: &#x27;App&#x27;, components: &#123; HelloWorld &#125; &#125;&lt;/script&gt;&lt;style&gt; #app &#123; font-family: Avenir, Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-align: center; color: #2c3e50; margin-top: 60px; &#125;&lt;/style&gt; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªvueæ–‡ä»¶å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ† ç¬¬ä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥å†™HTMLç»“æ„çš„ ç¬¬äºŒéƒ¨åˆ†æ˜¯ç”¨æ¥å†™JavaScriptçš„ ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç”¨æ¥å†™æ ·å¼çš„ index.html12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;!--é’ˆå¯¹IEï¼Œè®©IEæµè§ˆå™¨æœ€é«˜çº§åˆ«æ¸²æŸ“é¡µé¢--&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt; &lt;!--å¼•å…¥é¡µé¢å›¾æ ‡&lt;%= BASE_URL %&gt;å¯ä»¥æ‹¿åˆ°é¡¹ç›®æ ¹è·¯å¾„ï¼Œå°±æ˜¯publicæ–‡ä»¶å¤¹--&gt; &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt; &lt;!--è®¾ç½®ç½‘ç«™åå­—ï¼Œæ‹¿ç€package.jsonä¸­é…ç½®çš„nameä½œä¸ºç½‘ç«™å--&gt; &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;!--å½“ç½‘ç«™ä¸æ”¯æŒJavaScriptçš„æ—¶å€™ï¼Œæ˜¾ç¤ºnoscriptä¸­çš„å†…å®¹--&gt; &lt;noscript&gt; &lt;strong&gt;We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt; &lt;/noscript&gt; &lt;!--å®¹å™¨--&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-åŸºç¡€2","slug":"Vue2-åŸºç¡€2","date":"2022-06-21T03:33:37.000Z","updated":"2022-07-09T10:08:43.822Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/21/Vue2-åŸºç¡€2/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/21/Vue2-%E5%9F%BA%E7%A1%802/","excerpt":"","text":"Vue2åŸºç¡€2äº‹ä»¶å¤„ç†v-onè¿™é‡Œæˆ‘ä»¬è¦æ¥è§¦ä¸€ä¸ªå…¨æ–°çš„é…ç½®é¡¹methodså’Œä¸€ä¸ªæ–°çš„æŒ‡ä»¤è¯­æ³•v-onï¼Œæˆ‘ä»¬ä»¥éœ€æ±‚ä¸ºå¯¼å‘æ¥å­¦ä¹ è¿™ä¸€èŠ‚ éœ€æ±‚ä¸€ï¼šç‚¹å‡»æŒ‰é’®ï¼Œæ§åˆ¶å°æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ HTML 123456&lt;div id=&quot;app&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt; &lt;!--æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå›è°ƒå‡½æ•°æ˜¯welcome--&gt; &lt;button v-on:click=&quot;welcome&quot;&gt;æ¬¢è¿&lt;/button&gt;&lt;/div&gt; JavaScript 1234567891011121314new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; name: &#x27;kerwin&#x27;, msg: &#x27;åšæŒå¾ˆéš¾ï¼Œä½†å¾ˆé…·&#x27; &#125; &#125;, methods:&#123; welcome()&#123; console.log(`Hello,$&#123;this.name&#125;`) &#125; &#125;&#125;) è¿™é‡Œæœ‰å‡ ä¸ªçŸ¥è¯†ç‚¹ 1ã€æ¨¡æ¿å­—ç¬¦ä¸² 1è¢«``åŒ…è£¹çš„å­—ç¬¦ä¸²è¢«å«åšæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œåœ¨å…¶ä¸­å¯ä»¥ä½¿ç”¨$&#123;&#125;è¯­æ³•è¯»å–å˜é‡ 2ã€methodsä¸­é…ç½®çš„å‡½æ•°ï¼ŒthisæŒ‡çš„åº”è¯¥æ˜¯vmå¯¹è±¡ï¼Œè¿™å°±å¯¹åº”ç€å‰é¢æˆ‘è¯´çš„ä¸€å¥è¯ æ‰€æœ‰è¢«Vueç®¡ç†çš„å‡½æ•°(ä¸èƒ½æ˜¯ç®­å¤´å‡½æ•°)ï¼Œå…¶å†…éƒ¨çš„thiséƒ½æ˜¯vmå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨this.xxxç›´æ¥è·å–å±æ€§çš„å€¼ 3ã€è§‚å¯Ÿvmå¯¹è±¡ï¼Œå‘ç°åœ¨methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œéƒ½å‡ºç°åœ¨äº†vmèº«ä¸Š 4ã€ç®€å†™å½¢å¼ï¼Œå¸¸ç”¨ 1&lt;button @click=&quot;welcome&quot;&gt;æ¬¢è¿&lt;/button&gt; éœ€æ±‚äºŒï¼šç‚¹å‡»æŒ‰é’®ï¼Œæç¤ºå½“å‰é¼ æ ‡ä½ç½® è¿™å°±éœ€è¦ä½¿ç”¨äº‹ä»¶å‚æ•°ï¼Œå…¶å®åœ¨welcomeæ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­ï¼ŒVueé»˜è®¤ä¸ºå’±ä»¬ä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼Œåªä¸è¿‡åˆšåˆšæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨è€Œå·²ï¼Œæˆ‘ä»¬æ¥æ”¶æ‰“å°ä¸€ä¸‹çœ‹çœ‹ 123welcome($event)&#123; console.log($event)&#125; æ—¢ç„¶æœ‰äº†è¿™ä¸ªå¯¹è±¡($event)ï¼Œé‚£æˆ‘è·å–å½“å‰é¼ æ ‡ä½ç½®ï¼Œåªéœ€è¦è¯»å–è¯¥å¯¹è±¡çš„pageXå±æ€§å’ŒpageYå±æ€§å³å¯ è¿™é‡Œä¹Ÿå¯ä»¥ä¸å«$eventï¼Œå«å®ƒaå•Šbå•Šéƒ½å¯ä»¥ï¼Œä½†æ˜¯ä¹ æƒ¯èµ·è§ï¼Œæˆ‘å°±ä»¥$eventæ¥æ¥æ”¶å®ƒäº† éœ€æ±‚3ï¼šæˆ‘æƒ³å°†nameä¼ å‚è¿›å»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨thiså»è¯»å– HTML 1&lt;button @click=&quot;welcome($event,name)&quot;&gt;æ¬¢è¿&lt;/button&gt; JavaScript 123welcome($event,name)&#123; console.log(`Hello,$&#123;name&#125;`)&#125; è¿™é‡Œæœ‰ä¸ªæ³¨æ„ç‚¹ï¼Œå¦‚æœæˆ‘åœ¨è¿™é‡Œæ˜¯è¿™æ ·å†™çš„&lt;button v-on:click=&quot;welcome(name)&quot;&gt;æ¬¢è¿&lt;/button&gt; é‚£ä¹ˆwelcomeå‡½æ•°åªæœ‰ä¸€ä¸ªå…¥å‚ï¼Œé‚£å°±æ˜¯nameï¼Œç‚¹å‡»äº‹ä»¶å¯¹è±¡å°±æ²¡äº† äº‹ä»¶ä¿®é¥°ç¬¦ éœ€æ±‚1ï¼šç‚¹å‡»ä¸€ä¸ªaæ ‡ç­¾ï¼Œç„¶åæç¤ºå¼¹çª—ï¼Œä½†æ˜¯ä¸è·³è½¬é¡µé¢ HTML 123&lt;div id=&quot;app&quot;&gt; &lt;a href=&quot;https://baidu.com&quot; @click.prevent=&quot;showInfo&quot;&gt;ç‚¹æˆ‘è·³è½¬ç™¾åº¦&lt;/a&gt;&lt;/div&gt; JavaScript 12345678let vm = new Vue(&#123; el: &#x27;#app&#x27;, methods:&#123; showInfo()&#123; alert(&#x27;Hello&#x27;) &#125; &#125;&#125;); è¿™é‡Œé¢çš„preventå°±æ˜¯äº‹ä»¶ä¿®é¥°ç¬¦ã€‚ Vueä¸ºæˆ‘ä»¬æä¾›äº†6ç§äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œç”¨çš„éƒ½ä¸æ˜¯å¾ˆå¤šï¼Œå¤§å®¶è¿‡ä¸ªçœ¼å°±è¡Œ äº‹ä»¶ä¿®é¥°ç¬¦ ä½œç”¨ prevent é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå¸¸ç”¨ï¼‰ stop é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆå¸¸ç”¨ï¼‰ once äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼ˆå¸¸ç”¨ï¼‰ capture ä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼ self åªæœ‰event.targetæ˜¯å½“å‰æ“ä½œçš„å…ƒç´ æ—¶æ‰è§¦å‘äº‹ä»¶ passive äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯• è¿™é‡Œè®²ä¸€ä¸‹passiveçš„ä½œç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;style&gt; .list&#123; width: 200px; height: 200px; background-color: peru; overflow: auto; &#125; li&#123; height: 100px; &#125;&lt;/style&gt;&lt;div id=&quot;app&quot;&gt; &lt;ul @wheel.passive=&quot;bigWork&quot; class=&quot;list&quot;&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;/ul&gt; &lt;!-- wheeläº‹ä»¶ å½“é¼ æ ‡æ»šè½®æ»šåŠ¨ï¼Œåˆ™è§¦å‘è¯¥äº‹ä»¶ï¼Œå¹¶ä¸”å½“æ»šåŠ¨æ¡åˆ°è¾¾è¾¹ç•Œåï¼Œæ»šåŠ¨ä¹Ÿä¼šè§¦å‘è¯¥äº‹ä»¶ scrolläº‹ä»¶ å½“æ»šåŠ¨æ¡æ»šåŠ¨åˆ™è§¦å‘è¯¥äº‹ä»¶ï¼Œæ»šåŠ¨æ¡åˆ°äº†è¾¹ç•Œåï¼Œå†æ»šåŠ¨å°±ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶äº† --&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚ new Vue(&#123; el:&#x27;#app&#x27;, methods:&#123; bigWork()&#123; for (let i = 0; i &lt; 100000; i++) &#123; console.log(&#x27;===&#x27;) &#125; console.log(&#x27;æ´»ç»ˆäºå¹²å®Œäº†&#x27;) &#125; &#125; &#125;)&lt;/script&gt; ç°åœ¨æ»šåŠ¨é¼ æ ‡æ»šè½®çš„æ—¶å€™ï¼Œæ»šåŠ¨æ¡å°±ä¼šå¡ä½ä¸åŠ¨ï¼Œå½“æˆ‘åŠ ä¸Špassiveåï¼Œå³å˜æ­£å¸¸ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å½“è§¦å‘æ»šè½®äº‹ä»¶åï¼Œå…ˆæ‰§è¡Œäº‹ä»¶å›è°ƒï¼Œç„¶åå†æ‰§è¡Œé»˜è®¤äº‹ä»¶ï¼Œå¦‚æœä»»åŠ¡é‡å¾ˆå¤§ï¼Œåˆ™é»˜è®¤äº‹ä»¶å°±ä¼šå †ç§¯ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ ä½†æ˜¯å½“æˆ‘æ¢æˆscrollçš„æ—¶å€™ï¼Œå°±ç®—æˆ‘ä¸åŠ passiveä¿®é¥°ç¬¦ï¼Œæ»šåŠ¨æ¡ä¾æ—§æ­£å¸¸ã€‚ passiveåœ¨pcç«¯ç”¨çš„å¾ˆå°‘ï¼Œåœ¨ç§»åŠ¨ç«¯ç”¨çš„è¾ƒå¤šä¸€ç‚¹ é”®ç›˜äº‹ä»¶é”®ç›˜äº‹ä»¶æœ€å¸¸ç”¨çš„å°±ä¸¤ä¸ªäº‹ä»¶keydownå’Œkeyup å‰è€…æ˜¯å½“æŒ‰é”®æŒ‰ä¸‹åè§¦å‘ï¼Œåè€…æ˜¯å½“æŒ‰é”®å›å¼¹èµ·æ¥åè§¦å‘ æ¡ˆä¾‹1ï¼šè¾“å…¥æ–‡å­—ï¼Œå½“æŒ‰ä¸‹å›è½¦æ§åˆ¶å°æ‰“å° 1234567891011121314151617181920212223&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-model=&quot;msg&quot; v-on:keyup.enter=&quot;showInfo&quot;&gt; &lt;!-- ç®€å†™æ¨¡å¼ &lt;input type=&quot;text&quot; v-model=&quot;msg&quot; @keyup.enter=&quot;showInfo&quot;&gt; --&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; let vm = new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; msg: &#x27;&#x27; &#125; &#125;, methods:&#123; showInfo()&#123; console.log(`è¾“å…¥æ¡†ä¸­çš„å¥å­æ˜¯$&#123;this.msg&#125;`) &#125; &#125; &#125;);&lt;/script&gt; æ€»ç»“ï¼š 12345678910111213141516171.Vueä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«åï¼š å›è½¦ =&gt; enter åˆ é™¤ =&gt; deleteã€backspace (åŒ…æ‹¬â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®) é€€å‡º =&gt; esc ç©ºæ ¼ =&gt; space æ¢è¡Œ =&gt; tab (ç‰¹æ®Šï¼Œå¿…é¡»é…åˆkeydownå»ä½¿ç”¨) ä¸Š =&gt; up ä¸‹ =&gt; down å·¦ =&gt; left å³ =&gt; right2.ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ï¼šctrlã€altã€shiftã€meta(win) (1).é…åˆkeyupä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰è¢«è§¦å‘ã€‚ (2).é…åˆkeydownä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶ã€‚3.å½“æŒ‰ä¸‹Ctrl+yçš„æ—¶å€™ï¼Œå†è§¦å‘äº‹ä»¶&lt;input type=&quot;text&quot; v-model=&quot;msg&quot; @keyup.ctrl.y=&quot;showInfo&quot;&gt; è®¡ç®—å±æ€§ä¸ç›‘è§† æ¡ˆä¾‹ï¼šæ ¹æ®è¾“å…¥çš„å§“å’Œåå±•ç¤ºå§“å æ’å€¼è¯­æ³•å®ç°123456789101112131415161718&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;firstName&#125;&#125;-&#123;&#123;secondName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;&#x27;, secondName: &#x27;&#x27; &#125; &#125; &#125;)&lt;/script&gt; methodså®ç°123456789101112131415161718192021222324&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;!--è¿™é‡Œçš„æ–¹æ³•å¿…é¡»åŠ ä¸Šå°æ‹¬å·ï¼Œä¸ç„¶è¯»å–çš„å°±æ˜¯æ–¹æ³•çš„æºç --&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;fullName()&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;&#x27;, secondName: &#x27;&#x27; &#125; &#125;, methods:&#123; fullName()&#123; return `$&#123;this.firstName&#125;-$&#123;this.secondName&#125;` &#125; &#125; &#125;)&lt;/script&gt; è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªç‚¹ï¼šå½“dataä¸­çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±ä¼šé‡æ–°è§£ææ¨¡æ¿ï¼Œæ‰€ä»¥æ‰€æœ‰åœ¨æ’å€¼è¯­æ³•ä¸­çš„å‡½æ•°éƒ½ä¼šå†æ‰§è¡Œä¸€é è®¡ç®—å±æ€§å®ç°å…¨å†™1234567891011121314151617181920212223242526272829&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;&#x27;, secondName: &#x27;&#x27; &#125; &#125;, computed:&#123; fullName: &#123; get()&#123; return `$&#123;this.firstName&#125;-$&#123;this.secondName&#125;` &#125;, set(value)&#123; const arr = value.split(&#x27;-&#x27;) this.firstName = arr[0] this.lastName = arr[1] &#125; &#125; &#125; &#125;) æ€»ç»“ï¼š 1234561ã€getä½•æ—¶è¢«è°ƒç”¨ï¼Ÿ (1)é¡µé¢åŠ è½½å¥½åï¼Œå¯¹æ­¤å˜é‡åˆæ¬¡è¯»å– (2)getä¸­ä½¿ç”¨åˆ°çš„ä»»ä½•å˜é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™2ã€setä½•æ—¶è¢«è°ƒç”¨ (1)å½“fullNameè¢«ä¿®æ”¹æ—¶ 3ã€è®¡ç®—å±æ€§ä¼šè¢«æ”¾åˆ°vmä¸Š ç®€å†™åœ¨åªè¯»ä¸å†™çš„æƒ…å†µä¸‹æ‰å¯ä»¥ä½¿ç”¨ç®€å†™æ¨¡å¼ 1234567891011121314151617181920212223&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;&#x27;, secondName: &#x27;&#x27; &#125; &#125;, computed:&#123; fullName()&#123; return `$&#123;this.firstName&#125;-$&#123;this.secondName&#125;` &#125; &#125; &#125;)&lt;/script&gt; è®¡ç®—å±æ€§æ˜¯ä¸€ä¸ªåè¯ï¼Œä¸æ˜¯åŠ¨è¯ è¿™ä¸€ç‚¹ææ˜ç™½ä¹‹åï¼Œå°±å¯ä»¥ç†è§£è®¡ç®—å±æ€§çš„ä½œç”¨å…¶å®å°±æ˜¯æ‹¿ç€æˆ‘ç°æœ‰çš„ä¸œè¥¿åŠ å·¥åå†å±•ç¤ºåœ¨é¡µé¢ä¸Š æ—¢ç„¶æ’å€¼è¯­æ³•å’Œmethodséƒ½å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­¦ä¸€ä¸ªè®¡ç®—å±æ€§å‘¢ï¼Ÿè¿™ä¸æ˜¯ç»å…¸ç™½å­¦å—ï¼Ÿ NOï¼å¤§NOç‰¹NO è®¡ç®—å±æ€§çš„ä¼˜åŠ¿æœ‰ä¸¤ç‚¹ 1ã€èŒè´£åˆ†æ˜ 2ã€ä¸methodså®ç°ç›¸æ¯”ï¼Œå†…éƒ¨æœ‰ç¼“å­˜æœºåˆ¶ï¼ˆå¤ç”¨ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ï¼Œè°ƒè¯•æ–¹ä¾¿ã€‚ è¯æ˜ï¼šè®¡ç®—å±æ€§æœ‰ç¼“å­˜ 123456computed:&#123; fullName()&#123; console.log(&#x27;æˆ‘è¢«è¯»å–äº†&#x27;) return `$&#123;this.firstName&#125;-$&#123;this.secondName&#125;` &#125;&#125; é¡µé¢ä¸Šå¤šæ¬¡ä½¿ç”¨fullName ä¿®æ”¹å§“ ç”±æ­¤å¯ä»¥è¯æ˜è®¡ç®—å±æ€§å…·æœ‰ç¼“å­˜ ç¼“å­˜ä»€ä¹ˆæ—¶å€™åˆ·æ–°å‘¢ï¼Ÿå½“getä¸­ä½¿ç”¨åˆ°çš„ä»»ä½•å˜é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ ç›‘è§†å®ç°ç›‘è§†æ˜¯ä¸€ä¸ªå…¨æ–°çš„é…ç½®é¡¹ï¼Œä½œç”¨æ˜¯ç›‘è§†ä¸€ä¸ªå±æ€§çš„å˜åŒ– 12345678910111213141516171819202122232425262728293031&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;æ&#x27;, secondName: &#x27;å››&#x27;, fullName: &#x27;&#x27; &#125; &#125;, watch:&#123; firstName:&#123; handler(newValue,oldValue)&#123; this.fullName = newValue + &#x27;-&#x27; + this.secondName &#125; &#125;, secondName: &#123; handler(newValue,oldValue)&#123; this.fullName = this.firstName + &#x27;-&#x27; + newValue &#125; &#125; &#125; &#125;)&lt;/script&gt; è¿™æ ·å†™å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“firstNameå’ŒsecondNameæœ‰åˆå§‹å€¼çš„æƒ…å†µä¸‹ï¼Œé¡µé¢åŠ è½½åï¼ŒfullNameæ˜¯æ²¡æœ‰å€¼çš„ è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ä¸€ä¸ªé…ç½®é¡¹immediateï¼Œä½¿å¾—é¡µé¢åŠ è½½åç«‹å³æ‰§è¡Œä¸€æ¬¡ç›‘è§†çš„å›è°ƒå‡½æ•° 1234567891011121314watch:&#123; firstName:&#123; immediate: true, handler(newValue,oldValue)&#123; this.fullName = newValue + &#x27;-&#x27; + this.secondName &#125; &#125;, secondName: &#123; immediate: true, handler(newValue,oldValue)&#123; this.fullName = this.firstName + &#x27;-&#x27; + newValue &#125; &#125;&#125; è¿™æ—¶å€™å°é©¬è§‰å¾—æ‰€æœ‰çš„æ•°æ®ç›´æ¥å†™åœ¨dataä¸­ä¸å¤ªå¥½ï¼Œä»–æƒ³ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ¥æ”¾è¿™äº›æ•°æ®ï¼Œæ‰€ä»¥ä»–æŠŠdataæ”¹æˆäº†è¿™æ ·ï¼Œç„¶åä»–æƒ³ç›‘è§†personçš„å˜åŒ– 12345678910111213data()&#123; return &#123; person: &#123; firstName:&#x27;æ&#x27;, secondName: &#x27;å››&#x27;, fullName: &#x27;&#x27;, school: &#123; name: &#x27;å—äº¬æŸå¤§å­¦&#x27;, age: 18 &#125; &#125; &#125;&#125;, äºæ˜¯ä¹é¡µé¢å°±æˆäº†è¿™æ · 123456789101112131415161718192021222324252627282930313233&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;person.firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;person.secondName&quot;&gt; &lt;/br&gt; å­¦æ ¡åï¼š&lt;input type=&quot;text&quot; v-model=&quot;person.school.name&quot;&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; person: &#123; firstName:&#x27;æ&#x27;, secondName: &#x27;å››&#x27;, fullName: &#x27;&#x27;, school: &#123; name: &#x27;å—äº¬æŸå¤§å­¦&#x27;, age: 18 &#125; &#125; &#125; &#125;, watch:&#123; person:&#123; handler(newValue,oldValue)&#123; console.log(&#x27;æˆ‘è¢«ä¿®æ”¹äº†&#x27;); console.log(newValue); &#125; &#125; &#125; &#125;)&lt;/script&gt; å°é©¬å¼€å¿ƒçš„ä¿®æ”¹äº†å­¦æ ¡åï¼Œå‘ç°æ§åˆ¶å°å•¥ä¹Ÿæ²¡æœ‰ï¼Œåˆä¿®æ”¹äº†å§“å’Œåï¼Œå‘ç°æ§åˆ¶å°éƒ½æ²¡æœ‰è¾“å‡ºï¼Œ å…¶å®è¿™ä¸æ˜¯å°é©¬çš„é”™ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¦ä¸€ä¸ªé…ç½®é¡¹äº†deepï¼Œå¼€å¯å¯¹å¯¹è±¡çš„æ·±åº¦ç›‘è§† 123456789watch:&#123; person:&#123; deep: true, handler(newValue,oldValue)&#123; console.log(&#x27;æˆ‘è¢«ä¿®æ”¹äº†&#x27;); console.log(newValue); &#125; &#125;&#125; å°é©¬å‘ç°è¿™æ ·å†™å®Œä¹‹åï¼Œå°±åˆå¯ä»¥ç›‘è§†è¿™ä¸ªpersonå¯¹è±¡äº† ç®€å†™æ¨¡å¼123456789101112131415161718192021222324252627&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; &lt;span&gt;å…¨åï¼š&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;&#x27;, secondName: &#x27;&#x27;, fullName: &#x27;&#x27; &#125; &#125;, watch: &#123; firstName(newValue,oldValue)&#123; this.fullName = newValue + &#x27;-&#x27; + this.secondName &#125;, secondName(newValue,oldValue)&#123; this.fullName = this.firstName + &#x27;-&#x27; + newValue &#125; &#125; &#125;)&lt;/script&gt; å¦ä¸€ç§å†™æ³•123456789101112 vm.$watch(&#x27;firstName&#x27;,&#123; immediate:true, deep:true, handler(newValue,oldValue)&#123; console.log(&#x27;firstNameè¢«ä¿®æ”¹äº†&#x27;,newValue,oldValue) &#125;&#125;) //ç®€å†™å½¢å¼ï¼Œæ‰€æœ‰è¢«vmæ‰€ç®¡ç†çš„å‡½æ•°ï¼Œéƒ½ä¸è¦å†™æˆç®­å¤´å‡½æ•° vm.$watch(&#x27;secondName&#x27;,function (newValue,oldValue)&#123; console.log(&#x27;secondNameè¢«ä¿®æ”¹äº†&#x27;,newValue,oldValue,this)&#125;) åŒºåˆ«è®¡ç®—å±æ€§å’Œç›‘è§†çš„åŒºåˆ« å°±æŒ‰ç…§è¿™ä¸ªæ¡ˆä¾‹çœ‹çš„è¯ï¼Œå¥½åƒè®¡ç®—å±æ€§æ¯”ç›‘è§†å¥½å¤šäº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘å†åŠ ä¸€ä¸ªéœ€æ±‚ï¼šå§“åè¾“å…¥é˜²æŠ–åŠ¨ é˜²æŠ–åŠ¨ï¼šå°±æ˜¯ä¸€æ®µæ—¶é—´å†…ä¸å±•ç¤ºç»“æœï¼Œç­‰åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•åï¼Œå†å°†ç»“æœæ”¾åˆ°é¡µé¢ä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;æ&#x27;, secondName: &#x27;å››&#x27;, fullName: &#x27;&#x27;, timer: &#x27;&#x27;, &#125; &#125;, watch:&#123; firstName:&#123; immediate: true, handler(newValue,oldValue)&#123; clearTimeout(this.timer); this.timer = setTimeout(()=&gt;&#123; this.fullName = newValue + &#x27;-&#x27; + this.secondName; &#125;,2000); &#125; &#125;, secondName:&#123; immediate: true, handler(newValue,oldValue)&#123; clearTimeout(this.timer); this.timer = setTimeout(()=&gt;&#123; this.fullName = this.firstName + &#x27;-&#x27; + newValue; &#125;,2000); &#125; &#125; &#125; &#125;)&lt;/script&gt; è¿™é‡Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸ªç–‘æƒ‘ è¿™é‡Œå¦‚æœä¸å†™æˆç®­å¤´å‡½æ•°çš„è¯ï¼Œå‡½æ•°é‡Œé¢çš„thiså°±æ˜¯window ä½†æ˜¯å†™æˆç®­å¤´å‡½æ•°çš„è¯ï¼Œåœ¨2sè¿‡åï¼Œvså¼•æ“æ‰§è¡Œæ­¤å›è°ƒçš„æ—¶å€™ï¼Œå°±ä¼šåœ¨å‡½æ•°ä¸­æ‰¾thisï¼Œæ²¡æœ‰æ‰¾åˆ° ç„¶åå‘å¤–æ‰¾ï¼Œå°±æ‰¾åˆ°äº†handlerå‡½æ•°ï¼Œè¿™é‡Œé¢çš„thiså°±æ˜¯vmï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰¾åˆ°dataä¸­çš„å±æ€§äº† è¿™æ—¶å€™å°±æœ‰äººè¯´äº†ï¼Œé‚£æˆ‘ä¹Ÿå¯ä»¥ç”¨è®¡ç®—å±æ€§å•Š 12345678910111213141516171819202122232425&lt;div id=&quot;app&quot;&gt; å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;/br&gt; åï¼š&lt;input type=&quot;text&quot; v-model=&quot;secondName&quot;&gt; &lt;/br&gt; å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; el: &#x27;#app&#x27;, data()&#123; return &#123; firstName:&#x27;æ&#x27;, secondName: &#x27;å››&#x27; &#125; &#125;, computed: &#123; fullName()&#123; setTimeout(()=&gt;&#123; return this.firstName + &#x27;-&#x27; + this.secondName; &#125;,2000); &#125; &#125; &#125;)&lt;/script&gt; å½“ä½ å†™ä¸‹è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œä½ å¾—åæ€ä¸€ä¸‹åŸºæœ¬åŠŸäº† è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¼šè¿”å›åˆ°å“ªé‡Œå»ï¼Ÿ æ‰€ä»¥ï¼Œå½“éœ€è¦ä½¿ç”¨å¼‚æ­¥è®¡ç®—çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨å±æ€§ç›‘è§† å°æ€»ç»“ 1234567computedå’Œwatchä¹‹é—´çš„åŒºåˆ«ï¼š 1.computedèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œwatchéƒ½å¯ä»¥å®Œæˆã€‚ 2.watchèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œcomputedä¸ä¸€å®šèƒ½å®Œæˆï¼Œä¾‹å¦‚ï¼šwatchå¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¼‚æ­¥çš„æ“ä½œã€‚ä¸¤ä¸ªé‡è¦çš„å°åŸåˆ™ï¼š 1.æ‰€è¢«Vueç®¡ç†çš„å‡½æ•°ï¼Œæœ€å¥½å†™æˆæ™®é€šå‡½æ•°çš„å½¢å¼ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vmæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚ 2.æ‰€æœ‰ä¸è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼ˆå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ã€ajaxçš„å›è°ƒå‡½æ•°ç­‰ã€Promiseçš„å›è°ƒå‡½æ•°ï¼‰ æœ€å¥½å†™æˆç®­å¤´å‡½æ•°ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚ ç»‘å®šstyleä¸classè¿™é‡Œå°±ä¸å†™æ¡ˆä¾‹äº† 1234567891. classæ ·å¼ å†™æ³•:class=&quot;xxx&quot; xxxå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ã€‚ :class=&quot;&quot; å­—ç¬¦ä¸²å†™æ³•é€‚ç”¨äºï¼šç±»åä¸ç¡®å®šï¼Œè¦åŠ¨æ€è·å–ã€‚ :class=&quot;&#123;classA:xxx,classB:xxx&#125;&quot; å¯¹è±¡å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ç¡®å®šï¼Œåå­—ä¹Ÿç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨ï¼Œxxxæ˜¯å¸ƒå°”å€¼ :class=&quot;[&#x27;classA&#x27;]&quot;æ•°ç»„å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š2. styleæ ·å¼ :style=&quot;&#123;fontSize: xxx&#125;&quot;å…¶ä¸­xxxæ˜¯åŠ¨æ€å€¼ã€‚ :style=&quot;[a,b]&quot;å…¶ä¸­aã€bæ˜¯æ ·å¼å¯¹è±¡ã€‚ :style=&quot;obj&quot;å…¶ä¸­objæ˜¯æ ·å¼å¯¹è±¡æˆ–è€…æ•°ç»„","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-åŸºç¡€1","slug":"Vue2-åŸºç¡€1","date":"2022-06-20T13:54:45.000Z","updated":"2022-07-09T10:08:38.295Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/20/Vue2-åŸºç¡€1/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/20/Vue2-%E5%9F%BA%E7%A1%801/","excerpt":"","text":"Vue2åŸºç¡€1å®˜ç½‘åœ°å€ï¼šhttps://cn.vuejs.org/ ç›¸ä¿¡å¤§å®¶å­¦ä¹ ä»€ä¹ˆéƒ½æ˜¯ä»¥HelloWorldå¼€å¤´çš„ï¼Œé‚£æˆ‘ä»¬å°±ä»¥ä¸€ä¸ªHelloWorldçš„æ —å­å¼€å¯æˆ‘ä»¬çš„Vueå­¦ä¹ å§ HelloWorldæ¡ˆä¾‹å®‰è£…Vue è¿™é‡Œå¤§å®¶è¦æ³¨æ„ï¼Œä¸è¦ä½¿ç”¨CLIåˆ›å»ºVueé¡¹ç›® æ–°æ‰‹é˜¶æ®µæœ€å¥½ä½¿ç”¨æ ‡ç­¾é™æ€å¼•å…¥CDNçš„æ–¹å¼æ¥å®‰è£…Vue è¿™é‡Œè¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š scriptæ ‡ç­¾çš„srcå±æ€§å¯ä»¥å†™æˆ./???.jsçš„å½¢å¼ ä¹Ÿå¯ä»¥å†™æˆä¸€ä¸ªç½‘å€ï¼Œä¸ºäº†ä½¿ç”¨è¿™ç§æ–¹å¼å¼•å…¥çš„åŠ è½½é€Ÿåº¦æ›´å¿«ä¸€ç‚¹ï¼Œæ‰€ä»¥ä½¿ç”¨äº†CDNåŠ é€Ÿ è¿™æ˜¯å®˜ç½‘æä¾›çš„ä¸¤ç§Vue.jsï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å¼€å‘ç‰ˆæœ¬çš„ä½“ç§¯æ¯”ç”Ÿäº§ç‰ˆæœ¬çš„ä½“ç§¯å¤§ï¼Œå…¶ä¸­åŒ…å«äº†å®Œæ•´çš„è­¦å‘Šå’Œè°ƒè¯•æ¨¡å¼ï¼Œåœ¨å­¦ä¹ é˜¶æ®µï¼Œæˆ‘ä»¬ä½¿ç”¨å¼€å‘ç‰ˆæœ¬çš„å³å¯ å¼•å…¥Vue.js 1&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;&gt;&lt;/script&gt; å®‰è£…å¼€å‘è€…å·¥å…·å®ƒæ˜¯ä¸€ä¸ªè°·æ­Œæ’ä»¶ï¼Œå¦‚æœä½ å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œå¯ä»¥ç›´æ¥åœ¨è°·æ­Œæ’ä»¶å•†åœºç›´æ¥æœç´¢ä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œæˆ‘ä¹Ÿåœ¨è¿™é‡Œæä¾›æ’ä»¶çš„æ–‡ä»¶ï¼Œ 12é“¾æ¥ï¼šhttps://pan.baidu.com/s/18AFI8MpW397L6obmKnAZCw æå–ç ï¼šiupu ç‚¹å‡»å¼€å‘è€…æ¨¡å¼ å¦‚æœä½¿ç”¨çš„æ˜¯æˆ‘æä¾›çš„æ–‡ä»¶çš„è¯ï¼Œç›´æ¥å°†crxæ–‡ä»¶æ‹–å…¥è¯¥é¡µé¢å³å¯å®‰è£…å¼€å‘è€…å·¥å…· ä½¿ç”¨Vue123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªVueé¡µé¢&lt;/title&gt; &lt;!-- å¼•å…¥Vue --&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --&gt; &lt;div id=&quot;app&quot;&gt; &lt;!--è¿™é‡Œçš„&#123;&#123;&#125;&#125;æ˜¯Vueä¸­çš„æ’å€¼è¯­æ³•ï¼Œå¯ä»¥è¯»å–dataé…ç½®é¡¹ä¸­é…ç½®çš„æ•°æ®--&gt; &#123;&#123;msg&#125;&#125; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot; &gt; Vue.config.productionTip = false //å…³é—­vueçš„ç”Ÿäº§æç¤ºã€‚ //åˆ›å»ºVueå®ä¾‹ new Vue(&#123; el:&#x27;#app&#x27;, //elç”¨äºæŒ‡å®šå½“å‰åˆ›å»ºçš„Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼ä¸ºcssé€‰æ‹©å™¨ã€‚ data:&#123; //dataä¸­ç”¨äºå­˜å‚¨æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ•°æ®ï¼Œæ•°æ®ä¾›elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨ï¼Œå€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ msg:&#x27;Hello World&#x27; &#125; &#125;) &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; è§£é‡Šï¼š 1234567891011121314151617181920212223242526272829303132333435361ã€&#123;&#123;xxx&#125;&#125;ä¸­çš„xxxè¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”xxxå¯ä»¥è‡ªåŠ¨è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ jsè¡¨è¾¾å¼ VS jsè¯­å¥ (1)jsè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå€¼ (2)jsè¯­å¥æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œæ§åˆ¶ä»£ç èµ°å‘ if()&#123;&#125; for()&#123;&#125; switch()&#123;&#125;2ã€å®¹å™¨å’ŒVueå®ä¾‹çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„3ã€idä¸ºappçš„å®¹å™¨å†…éƒ¨çš„ä»£ç å°±æ˜¯æ¨¡æ¿4ã€ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé¡µé¢ä¸­ä½¿ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹éƒ½ä¼šè‡ªåŠ¨æ›´æ–°5ã€elçš„ä¸¤ç§å†™æ³•ï¼Œè¯¥é…ç½®çš„ä½œç”¨å«æŒ‚è½½ï¼Œå°±æ˜¯å°†åˆ›å»ºçš„Vueå®ä¾‹ä¸HTMLå…ƒç´ ç»‘å®šåœ¨ä¸€èµ· (1) el:&#x27;#app&#x27; (2) new Vue(&#123; data:&#123; msg:&#x27;Hello World&#x27; &#125; &#125;).$mount(&#x27;#app&#x27;) è¿™ä¸ª$mountæ˜¯VueåŸå‹å¯¹è±¡ä¸Šæä¾›çš„6ã€dataçš„ä¸¤ç§å†™æ³• (1) å¯¹è±¡å¼ï¼Œdataæ˜¯ä¸€ä¸ªå¯¹è±¡ data:&#123; msg:&#x27;Hello World&#x27; &#125; (2) å‡½æ•°å¼ï¼Œdataæ˜¯ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ data()&#123; return &#123; msg: &#x27;Hello World&#x27; &#125; &#125; (3) åªè¦æ˜¯Vueç®¡ç†çš„å‡½æ•°ï¼Œå…¶ä¸­çš„thiså¯¹è±¡éƒ½æ˜¯è‡ªå·±åˆ›å»ºçš„Vueå®ä¾‹å¯¹è±¡ï¼Œ**å‰ææ˜¯ä¸èƒ½æ˜¯ç®­å¤´å‡½æ•°** (4) æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ˜¯å‡½æ•°å¼çš„ï¼Œå¤§å®¶è¦å¤šå†™è¿™ç§å½¢å¼çš„ï¼Œå…·ä½“åŸå› çš„è¯ï¼Œè¿™é‡ŒåŸ‹ä¸ªä¼ç¬”ï¼Œä»¥ååœ¨è®²ç»„ä»¶çš„æ—¶å€™è§£é‡Š å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨newå…³é”®è¯åˆ›å»ºVueå¯¹è±¡çš„è¯ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ æ§åˆ¶å°å°±ä¼šå‡ºç°æŠ¥é”™ å¼€å‘ç‰ˆ ç”Ÿäº§ç‰ˆ è¿™é‡Œå¯ä»¥ä½“ç°ç”Ÿäº§ç‰ˆæœ¬å’Œå¼€å‘ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ« æˆ‘ä»¬æ¥çœ‹ä¸‹Vueçš„æ„é€ å‡½æ•° 1234567function Vue (options) &#123; //å…ˆåˆ¤æ–­å½“å‰è°ƒç”¨å‡½æ•°çš„æ˜¯å¦æ˜¯Vueçš„å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™åœ¨æ§åˆ¶å°æŠ¥é”™ if (!(this instanceof Vue)) &#123; warn(&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;); &#125; this._init(options);&#125; æ¨¡æ¿è¯­æ³•åˆšåˆšæˆ‘ä»¬åœ¨å†™HelloWorldæ¡ˆä¾‹çš„æ—¶å€™ä½¿ç”¨çš„&#123;&#123;&#125;&#125;å«æ’å€¼è¯­æ³• æ¨¡æ¿è¯­æ³•ä¸€å…±ä¸¤ç§ï¼Œæ’å€¼è¯­æ³•å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œå¦ä¸€ç§æ¨¡æ¿è¯­æ³•å«æŒ‡ä»¤è¯­æ³• 1234567æ’å€¼è¯­æ³•ï¼š ä½œç”¨ï¼šè§£ææ ‡ç­¾ä½“å†…çš„å†…å®¹ å†™æ³•ï¼š&#123;&#123;xxx&#125;&#125;åŒæ‹¬å·å†…æ˜¯jsè¡¨è¾¾å¼ï¼Œå¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚ æŒ‡ä»¤è¯­æ³•ï¼š åŠŸèƒ½ï¼šè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶.....ï¼‰ã€‚ å†™æ³•ï¼šv-xxx(xxxä¸ºå…·ä½“æŒ‡ä»¤) æˆ‘ä»¬æ¥çœ‹çœ‹æŒ‡ä»¤è¯­æ³•æ˜¯ä¸ªä»€ä¹ˆä¸œä¸œ ä¸ºäº†èŠ‚çœä»£ç é‡ï¼Œè¿™é‡Œåªå†™æ ¸å¿ƒä»£ç  v-textè¿™ä¸ªæœ€ç®€å•ï¼Œå…¶ä½œç”¨å°±æ˜¯æ’å€¼è¯­æ³•ï¼Œå°†å…¶æŒ‡å®šçš„å†…å®¹æ›¿æ¢æ ‡ç­¾ä½“å†…çš„æ‰€æœ‰å†…å®¹ï¼Œä¸è§£æHTML ä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæŒ‡ä»¤v-htmlï¼Œé‚£è¿™ä¸ªæŒ‡ä»¤å°±æ˜¯å°†å†…å®¹æ”¾å…¥æ ‡ç­¾ä½“å†…åï¼Œå¦‚æœå†…å®¹æœ‰HTMLå…ƒç´ ï¼Œå®ƒä¹Ÿä¼šè§£æ v-bindä¸»è¦ä½¿ç”¨åœ¨ç»™HTMLå…ƒç´ å±æ€§åŠ¨æ€èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨ HTML 12345&lt;div id=&quot;app&quot;&gt; &lt;a v-bind:href=&quot;url&quot;&gt;ç‚¹æˆ‘å»&#123;&#123;name&#125;&#125;å­¦ä¹ 1&lt;/a&gt; &lt;!--è¿™æ˜¯v-bindçš„ç®€å†™æ¨¡å¼--&gt; &lt;a :href=&quot;url&quot;&gt;ç‚¹æˆ‘å»&#123;&#123;name&#125;&#125;å­¦ä¹ 2&lt;/a&gt;&lt;/div&gt; JavaScript 1234567new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; name:&#x27;ç™¾åº¦&#x27;, url:&#x27;http://www.baidu.com&#x27;, &#125;&#125;) bindçš„è‹±æ–‡æ„æ€æ˜¯ç»‘å®šï¼Œè¿™é‡Œå…ˆç†è§£ä¸€ä¸‹è¿™ä¸ªåè¯çš„æ„æ€ï¼Œè¿™é‡Œçš„v-bindæ˜¯å•å‘ç»‘å®š ä»€ä¹ˆå«å•å‘ç»‘å®šï¼Ÿ å°±æ˜¯æˆ‘åœ¨Vueå®ä¾‹ä¸­çš„dataä¸­çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œé¡µé¢ä¸­çš„æ•°æ®å°±ä¼šè·Ÿç€æ›´æ–°ï¼Œ ä½†æ˜¯é¡µé¢ä¸­çš„æ•°æ®å‘é€äº†æ”¹å˜ï¼Œdataä¸­çš„æ•°æ®ä¸ä¼šå‘ç”Ÿæ”¹å˜ è¯æ˜ï¼š å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å­¦å…¶ä»–å¯ä»¥ä¿®æ”¹dataä¸­çš„æ•°æ®çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨å¼€å‘è€…å·¥å…·å¼€å¸®æˆ‘ä»¬å®Œæˆè¯¥ä»»åŠ¡ ä¿®æ”¹dataä¸­æ•°æ®ï¼Œé¡µé¢æ›´æ–° ä¿®æ”¹é¡µé¢æ•°æ®ï¼Œdataä¸æ›´æ–° 1document.getElementById(&#x27;app&#x27;).children[0].href=&#x27;https://juejin.cn/&#x27; è¿™å°±æ˜¯å•å‘ç»‘å®šäº† æ—¢ç„¶æœ‰å•å‘ç»‘å®šï¼Œé‚£è‚¯å®šä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªåŒå‘ç»‘å®šå•¦ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹åŒå‘ç»‘å®š v-modelåªä½¿ç”¨åœ¨ä¸€äº›è¡¨å•ç±»çš„HTMLæ ‡ç­¾ è¿™ä¸ªæŒ‡ä»¤ååˆ†ååˆ†ååˆ†çš„é‡è¦ï¼Œè¯·ä¸€å®šè¦ç†è§£è¿™ä¸ªæŒ‡ä»¤åŒå‘ç»‘å®šçš„ä½œç”¨ HTML 1234&lt;div id=&quot;app&quot;&gt; &lt;!--å°†inputçš„valueå±æ€§å’Œdataä¸­çš„nameå±æ€§åŒå‘ç»‘å®šèµ·æ¥--&gt; åŒå‘æ•°æ®ç»‘å®šï¼š&lt;input type=&quot;text&quot; v-model:value=&quot;name&quot;&gt;&lt;/div&gt; JavaScript 123456new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; name:&#x27;èŠéº»èŠéº»&#x27; &#125;&#125;) å•å‘ç»‘å®šï¼Œæ˜¯é¡µé¢ä¸­çš„æ•°æ®ä¿®æ”¹åï¼Œdataä¸­çš„æ•°æ®ä¸ä¼šæ›´æ–° é‚£åŒå‘ç»‘å®šçš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸æ˜¯å°±ä¼šæ›´æ–°äº†ï¼Ÿæ˜¯çš„ æˆ‘ä»¬æ¥è¯æ˜ä¸€ä¸‹è¿™ä¸€ç‚¹ è¯´æ˜ï¼š 12341ã€ç®€å†™æ¨¡å¼ &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;2ã€ä½œç”¨èŒƒå›´ åªå¯ä»¥ä½œç”¨åœ¨è¡¨å•å…ƒç´ ä¸Š MVVMæ¨¡å‹123M: æ¨¡å‹(Model)å¯¹åº”dataä¸­çš„æ•°æ®V: è§†å›¾/æ¨¡æ¿(View)HTMLå…ƒç´ VM: è§†å›¾æ¨¡å‹(ViewModel)æ‰˜ç®¡æ•°æ®çš„Vueå®ä¾‹ï¼Œæ‰€ä»¥ä»¥åæˆ‘ä»¬å«Vueçš„å®ä¾‹å¯¹è±¡å°±å«vmå¯¹è±¡ æˆ‘ä»¬æ¥è¾“å‡ºä¸€ä¸‹vmæ¥çœ‹çœ‹å®ƒé•¿å•¥æ · æˆ‘ä»¬å‘ç°ï¼Œæ©™è‰²æ¡†ä¸­å°±æ˜¯æˆ‘ä»¬dataä¸­é…ç½®çš„æ•°æ®ï¼Œå¥‡æ€ªçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸‰ä¸ªç‚¹ï¼Œä½†æ˜¯ç‚¹å¼€çœ‹ç¡®å®æ˜¯æˆ‘ä»¬åˆšåˆšé…ç½®çš„æ•°æ® Vueç»è¿‡ä¸€äº›æ“ä½œï¼ˆæˆ‘å¯ä¸ä¼šå‘Šè¯‰ä½ è¿™å«æ•°æ®ä»£ç†ï¼‰ï¼Œå°†å’±ä»¬åœ¨dataä¸­é…ç½®çš„æ•°æ®ç›´æ¥æ”¾åˆ°äº†vmå®ä¾‹å¯¹è±¡ä¸Š å…¶å®æ’å€¼è¯­æ³•ä¸­å¯ä»¥çœ‹åˆ°vmèº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å†™æˆ‘ä»¬åœ¨dataä¸­é…ç½®çš„å±æ€§ æ•°æ®ä»£ç†å›é¡¾Object.defineProperty()åœ¨è¯´è¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹Objectä¸Šçš„ä¸€ä¸ªæ–¹æ³•defineProperty 123let person=&#123; name: &#x27;lisi&#x27;&#125; ç°åœ¨æˆ‘è¦ç»™personå¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§age ç¬¬ä¸€ç§å†™æ³• 1person.age=18 ç¬¬äºŒç§å†™æ³• 123Object.defineProperty(person,&#x27;age&#x27;,&#123; value: 18&#125;) é‚£æœ‰äººå°±è¦è¯´äº†ï¼Œè°é€‰ç¬¬äºŒç§æ–¹å¼å•Šï¼Œç¬¬ä¸€ç§æ–¹å¼é‚£ä¹ˆç®€å•ï¼Œæ­¤è¨€å·®çŸ£ ç¬¬äºŒç§å†™çš„æ–¹å¼å®šä¹‰çš„ageå±æ€§æœ‰ä¸¤ä¸ªç‰¹æ€§ ç¬¬ä¸€ä¸ªï¼Œä»–æ— æ³•è¢«éå†ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ æ— æ³•è¢«éå†ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ 1234567891011121314151617// éå†personä¸­çš„æ‰€æœ‰å±æ€§for(p in person)&#123; console.log(p)&#125;// æ‹¿åˆ°personä¸­çš„å±æ€§æ•°ç»„console.log(Object.keys(person))// é™¤äº†ageå±æ€§ï¼Œå…¶ä»–çš„å±æ€§éƒ½å¯ä»¥è¢«éå†åˆ°//ç”¨Object.definePropertyå®šä¹‰çš„æ•°æ®æœ‰å¾ˆå¤šé™åˆ¶ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›é…ç½®é¡¹æ¥ä½¿å…¶è§£é™¤é™åˆ¶Object.defineProperty(person,&#x27;age&#x27;,&#123; value: 18, enumerable: true,//å¯è¢«éå†ï¼Œé»˜è®¤å€¼æ˜¯false writable:true, //å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤å€¼æ˜¯false configurable:true //å¯ä»¥è¢«åˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯false &#125;&#125;) ç¬¬äºŒä¸ªï¼Œå®ƒå¯ä»¥åšæ•°æ®åŠ«æŒ è¿™å°±éœ€è¦ä¸€äº›å…¶ä»–çš„é…ç½®é¡¹äº†ï¼Œå³getå’Œset 1234567891011121314let number = 18;Object.defineProperty(person,&#x27;age&#x27;,&#123; // å½“æœ‰äººè¯»å–personçš„ageçš„æ—¶å€™ï¼Œå³ç‚¹äº†é‚£ä¸‰ä¸ªç‚¹çš„æ—¶å€™ // å°±ä¼šå°†è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºperson.ageçš„å€¼å±•ç¤ºå‡ºæ¥ get()&#123; console.log(&#x27;å˜¿å˜¿ï¼Œæ—§æ•°æ®è¢«æˆ‘åŠ«æŒäº†ï¼ï¼&#x27;) return number &#125;, // å½“æœ‰äººä¿®æ”¹personçš„ageçš„æ—¶å€™ set(newValue)&#123; console.log(&#x27;å˜¿å˜¿ï¼Œæ–°æ•°æ®è¢«æˆ‘åŠ«æŒäº†ï¼ï¼æˆ‘è¦åšåäº‹äº†&#x27;) number = newValue; &#125;&#125;) å®šä¹‰ç»™æ•°æ®ä»£ç†ä¸‹ä¸ªå®šä¹‰ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆR&#x2F;Wï¼‰ æˆ‘ä»¬çœ‹ä¸€ä¸‹Vueä¸­çš„æ•°æ®ä»£ç† vmå®ä¾‹å¯¹è±¡ä»£ç†äº†dataä¸­é…ç½®çš„å±æ€§ æˆ‘ä»¬å…ˆæ¥è¯æ˜ä¸€ä¸ªäº‹æƒ…ï¼šæˆ‘ä»¬ä¼ å…¥çš„dataé…ç½®é¡¹å’Œvmèº«ä¸Šçš„_dataæ˜¯åŒä¸€ä¸ªå¯¹è±¡ 1234567let data = &#123; name:&#x27;èŠéº»èŠéº»&#x27;&#125;let vm = new Vue(&#123; el:&#x27;#app&#x27;, data&#125;) è¿™é‡Œæˆ‘ä»¬è§‚å¯Ÿåˆ°dataå·²ç»ä¸æ˜¯åŸæ¥çš„é‚£ä¸ªå¯¹è±¡äº†ï¼Œå®ƒå·²ç»è¢«VueåŠ å·¥è¿‡äº† é‚£ä¹ˆVueä¸­çš„æ•°æ®ä»£ç†å°±æ˜¯vmä»£ç†äº†_dataä¸­çš„æ•°æ®ä¿®æ”¹ å½“_dataä¸­çš„æ•°æ®å‘ç”Ÿäº†ä¿®æ”¹ï¼Œ_dataå°±ä¼šæ£€æµ‹åˆ°è¿™æ¬¡çš„ä¿®æ”¹ï¼ˆæ•°æ®åŠ«æŒï¼‰ï¼Œé¡µé¢ä¸­ä½¿ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹éƒ½ä¼šå‘ç”Ÿæ›´æ–° æ¨¡æ‹ŸVueä¸­çš„æ•°æ®ä»£ç†å’Œæ•°æ®åŠ«æŒ123456789101112131415161718192021222324252627282930313233343536373839404142&lt;script type=&quot;text/javascript&quot;&gt; // æˆ‘çš„Vueçš„æ„é€ å‡½æ•° function MyVue(options)&#123; // æ‹¿åˆ°é…ç½®é¡¹ä¼ å…¥çš„data let data = options[&#x27;data&#x27;]; // æ•°æ®ä»£ç†ï¼Œå°†dataä¸­å‡ºç°çš„å±æ€§ä»£ç†ç»™å®ä¾‹å¯¹è±¡ Object.keys(data).forEach((p)=&gt;&#123; Object.defineProperty(this,p,&#123; get()&#123; return data[p]; &#125;, set(newValue)&#123; data[p] = newValue; &#125; &#125;) &#125;) // æ•°æ®åŠ«æŒ // å°†dataè¿›è¡Œä¸€äº›åŠ å·¥ï¼Œä½¿å…¶å¯ä»¥æ£€æµ‹å±æ€§çš„å˜åŒ–ï¼Œå½“å±æ€§å˜åŒ–çš„æ—¶å€™ï¼Œå¯¹é¡µé¢åšå‡ºæ›´æ–° function Observer(data)&#123; Object.keys(data).forEach((p)=&gt;&#123; Object.defineProperty(this,p,&#123; get()&#123; console.log(&#x27;æœ‰äººè¯»å–é…ç½®é¡¹ä¸­çš„æ•°æ®&#x27;); return data[p]; &#125;, set(newValue)&#123; console.log(&#x27;æœ‰äººä¿®æ”¹é…ç½®é¡¹ä¸­çš„æ•°æ®ï¼Œæˆ‘è¦æ›´æ–°é¡µé¢äº†&#x27;); data[p]=newValue; &#125; &#125;) &#125;) &#125; // å¯¹ä¼ å…¥çš„dataæ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™_data this._data=new Observer(data); options.data=this._data &#125; const vm = new MyVue(&#123; data: &#123; name: &#x27;zhima&#x27; &#125; &#125;)&lt;/script&gt; è¯æ˜ï¼š 123456789101112131415// é—®é¢˜ä¸€// å¯¹äºåµŒå¥—ç±»å‹çš„å¯¹è±¡,æ˜¯æ— æ•ˆçš„,å› ä¸ºæˆ‘æ²¡æœ‰å†™é€’å½’è¯­å¥,æºç æ˜¯å†™äº†é€’å½’è¯­å¥,å°†å¯¹è±¡çš„æ¯ä¸€å±‚éƒ½åŠ äº†getter/setter// é—®é¢˜äºŒ// è¿™é‡Œçš„_dataå¯¹è±¡å’Œä¼ å…¥çš„dataå¯¹è±¡æ˜¯ä¸ä¸€è‡´çš„// è¿™é‡Œæˆ‘ä¸çŸ¥é“æ€ä¹ˆå®ç°è¿™ä¸€ç‚¹ï¼Œæœ‰ä¼šçš„å¤§ä½¬å¯ä»¥å‘ä¸€ä¸‹è¯„è®ºåŒº let data = &#123; name: &#x27;zhima&#x27;&#125;const vm = new MyVue(&#123; data&#125;)//consolevm._data===datafalse è¿™é‡Œçš„ä»£ç çœ‹ä¸æ‡‚ä¸è¦ç´§å“¦ï¼Œæˆ‘æ¥ä¸‹æ¥è¿˜ä¼šå†æä¸€éçš„ï¼Œæ…¢æ…¢åœ°ä¼šæ‡‚çš„ åŠ æ²¹åŠ æ²¹ğŸ’ª","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-å¯¼è¨€","slug":"Vue2-å¯¼è¨€","date":"2022-06-18T13:17:13.000Z","updated":"2022-07-15T09:33:20.774Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/18/Vue2-å¯¼è¨€/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/18/Vue2-%E5%AF%BC%E8%A8%80/","excerpt":"","text":"Vueå­¦ä¹ Vueä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‰ä¸ªé—®é¢˜ å¯¼è¨€ä»€ä¹ˆæ˜¯Vueè¿™æ˜¯å®˜ç½‘çš„ä»‹ç» æ„å»ºç”¨æˆ·ç•Œé¢ å³å°†æ•°æ®å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼Œç»™ç”¨æˆ·çœ‹ æ¸è¿›å¼æ¡†æ¶ æ¸è¿›å³é€æ¸é€’è¿›ï¼Œç®€å•æ¥è¯´å°±æ˜¯ åœ¨ç®€å•åº”ç”¨ä¸­ï¼Œå¯ä»¥åªéœ€è¦ä¸€ä¸ªå°å·§çš„åº“ åœ¨å¤æ‚åº”ç”¨ä¸­ï¼Œå¯ä»¥å¼•å…¥å„ç§å„æ ·å¤æ‚çš„ç»„ä»¶ å°±æ˜¯ä¸€ç§å¯ä»¥ä»æ˜“åˆ°éš¾å¼€å‘çš„ä¸€ç§æ¡†æ¶ è°å¼€å‘çš„ å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹Angular.jsçš„ç‰¹ç‚¹æ˜¯æ¨¡å—åŒ–å¼€å‘ React.jsçš„ç‰¹ç‚¹æ˜¯è™šæ‹ŸDOM Vueåˆ™æ˜¯é›†ä¸¤å®¶ä¹‹é•¿ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ ç»„ä»¶åŒ–å¼€å‘æé«˜ä»£ç å¤ç”¨ç‡å’Œç»´æŠ¤æ€§ æ¯ä¸€ä¸ªæ¡†å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ å½“æˆ‘éœ€è¦ä¿®æ”¹å“ªä¸€å—çš„ç•Œé¢ï¼Œæˆ‘åªéœ€è¦åˆ°å“ªä¸ªæ–‡ä»¶å»ä¿®æ”¹å³å¯ å£°æ˜å¼ç¼–ç¨‹è®©ç¼–ç äººå‘˜æ— éœ€ç›´æ¥æ“ä½œDOMï¼Œæé«˜å¼€å‘æ•ˆç‡ éœ€æ±‚ï¼šå°†ä¸‹åˆ—æ•°æ®æ˜¾ç¤ºåœ¨ä¸€ä¸ªåˆ—è¡¨(&lt;ul id=&quot;container&quot;&gt;&lt;/ul&gt;)ä¸­ 123456789101112131415let persons = [ &#123; id: &#x27;1&#x27;, name: &#x27;zhima&#x27; &#125;, &#123; id: &#x27;2&#x27;, name: &#x27;lizhi&#x27; &#125;, &#123; id: &#x27;3&#x27;, name: &#x27;kerwin&#x27; &#125;] å‘½ä»¤å¼ç¼–ç¨‹ 123456let list = document.getElementById(&#x27;container&#x27;)persons.forEach(p=&gt;&#123; let li=document.createElement(&#x27;li&#x27;); li.innerHtml=`id:$&#123;p.id&#125;-name:$&#123;name&#125;` list.append(li);&#125;) å£°æ˜å¼ç¼–ç¨‹ 12345&lt;ul id=&quot;container&quot;&gt; &lt;li v-for=&quot;p in persons&quot;&gt; id:&#123;&#123;p.id&#125;&#125;-name:&#123;&#123;p.name&#125;&#125; &lt;/li&gt;&lt;/ul&gt; è™šæ‹ŸDOMä¼˜ç§€çš„DIFFç®—æ³•ï¼Œæé«˜DOMçš„å¤ç”¨ç‡ è¿™å°±æœ‰ç‚¹è®©äººæ‘¸ä¸ç€å¤´è„‘äº†ï¼ŒDOMè¿˜æœ‰å¤ç”¨ç‡ï¼Ÿ è¿˜æ˜¯åˆšæ‰é‚£ä¸ªæ¡ˆä¾‹ï¼Œå¦‚æœæˆ‘çš„æ•°æ®å˜æˆäº†è¿™æ · 123456789101112131415let persons = [ &#123; id: &#x27;1&#x27;, name: &#x27;zhima&#x27; &#125;, &#123; id: &#x27;2&#x27;, name: &#x27;lizhi&#x27; &#125;, &#123; id: &#x27;4&#x27;, name: &#x27;txy&#x27; &#125;] ä¼ ç»Ÿçš„ä½¿ç”¨JavaScriptè¿›è¡Œå‘½ä»¤å¼æ“ä½œçš„è¯ï¼Œç›´æ¥å°†æ•°æ®è½¬åŒ–ä¸ºé¡µé¢çœŸå®DOMï¼ˆReal-DOMï¼‰ï¼Œç¡®å®å’ŒDOMçš„å¤ç”¨ç‡æ²¡æœ‰å•¥å…³ç³» ä½†æ˜¯åœ¨Vueé‡Œé¢ï¼Œåœ¨æ•°æ®å˜æˆé¡µé¢ä¸Šçš„DOMèŠ‚ç‚¹çš„ä¹‹å‰ï¼Œå®ƒä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆè™šæ‹ŸDOMï¼ˆVirtual-DOMï¼‰ ç„¶åä½¿ç”¨DIFFç®—æ³•ï¼Œæ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOMï¼Œå¦‚æœæœ‰ä¸€æ ·çš„ï¼Œåˆ™ç›´æ¥å¤ç”¨ä¹‹å‰å·²ç»ç”Ÿæˆå¥½çš„è™šæ‹ŸDOMï¼Œä»è€Œæé«˜äº†DOMçš„å¤ç”¨ç‡ã€‚ é‚£ä¹ˆé€šè¿‡ä»€ä¹ˆæ¥åˆ¤æ–­ä¸¤ä¸ªè™šæ‹ŸDOMæ˜¯å¦ç›¸åŒå‘¢ï¼Ÿ è¿™å°±è¦è¯´è¯´åˆšåˆšå†™çš„ä»£ç çš„ä¸€å¤„é”™è¯¯äº†ï¼Œä¸‹é¢çœ‹æ­£ç¡®çš„ä»£ç  12345&lt;ul id=&quot;container&quot;&gt; &lt;li v-for=&quot;p in persons&quot; :key=&quot;p.id&quot;&gt; id:&#123;&#123;p.id&#125;&#125;-name:&#123;&#123;p.name&#125;&#125; &lt;/li&gt;&lt;/ul&gt; æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç å°±æ˜¯åŠ äº†ä¸€å¤„åœ°æ–¹ï¼Œå°±æ˜¯:key=&quot;p.id&quot;ï¼Œå°±æ˜¯ç»™æ¯ä¸€ä¸ªéå†çš„å…ƒç´ åŠ ä¸Šäº†å”¯ä¸€æ€§æ ‡è¯† å…·ä½“çš„DIFFç®—æ³•ï¼Œæˆ‘ä»¬åé¢è®²åˆ°è™šæ‹ŸDOM çš„æ—¶å€™å†è¯´ å­¦ä¹‹å‰è¦æŒæ¡ä»€ä¹ˆçŸ¥è¯† ES6æ¨¡å—åŒ–å¼€å‘è§„èŒƒ åŒ…ç®¡ç†å™¨NPM æ•°ç»„å¸¸ç”¨æ–¹æ³• axios promise","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"}]},{"title":"ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","slug":"ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","date":"2022-05-01T05:16:28.000Z","updated":"2023-03-06T06:45:44.853Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/05/01/ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/05/01/%E3%80%9019-Medium%E3%80%91%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9/","excerpt":"","text":"åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2è¾“å‡ºï¼š[1,2,3,5] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šhead = [1], n = 1è¾“å‡ºï¼š[] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šhead = [1,2], n = 1è¾“å‡ºï¼š[1] æç¤ºï¼š é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º sz 1 &lt;= sz &lt;= 30 0 &lt;= Node.val &lt;= 100 1 &lt;= n &lt;= sz è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ åŒæŒ‡é’ˆè¿™é“é¢˜å…¸å‹çš„ç”¨å¿«æ…¢æŒ‡é’ˆæ³•æ¥è§£å†³ å°†slowå’ŒfastæŒ‡å‘å¤´éƒ¨ï¼Œå°†fastæŒ‡é’ˆå…ˆå¾€åèµ°næ­¥ ç„¶åä¸¤è€…é½å¤´å¹¶è¿›ï¼Œå½“fast.nextä¸ºnullçš„æ—¶å€™ï¼Œslowå·²ç»åœ¨å€’æ•°ç¬¬n-1ä¸ªèŠ‚ç‚¹çš„ä½ç½®äº†ï¼Œæ­¤æ—¶è¿›è¡Œåˆ é™¤æ“ä½œ è¯¥æ–¹æ³•çš„åŸç†æ˜¯åˆ©ç”¨æ­¥é•¿ï¼Œfastå…ˆèµ°çš„é‚£å‡ æ­¥ï¼Œåœ¨faståˆ°äº†é“¾è¡¨æœ«å°¾çš„nullçš„æ—¶å€™ï¼Œslowåˆ™è¡¨ç¤ºçš„æ˜¯å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œ å› ä¸ºè¿™é‡Œéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæ‰€ä»¥éœ€è¦å°†fastèµ°åˆ°é“¾è¡¨æœ«å°¾å³å¯ ç¤ºä¾‹ä»£ç  123456789101112131415161718class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode slow = head; ListNode fast = head; for (int i = 0; i &lt; n; i++) &#123; fast = fast.next; &#125; if(fast == null)&#123; return head.next; &#125; while(fast.next != null)&#123; slow = slow.next; fast = fast.next; &#125; slow.next = slow.next.next; return head; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"JVM-å†…å­˜åˆ†åŒº","slug":"JVM-å†…å­˜åˆ†åŒº","date":"2022-03-18T09:27:35.000Z","updated":"2022-11-08T06:51:50.009Z","comments":true,"path":"javaEE/JVM/2022/03/18/JVM-å†…å­˜åˆ†åŒº/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JVM/2022/03/18/JVM-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/","excerpt":"","text":"JVMå†…å­˜åˆ†åŒºå†…å­˜åˆ†åŒºå’Œå†…å­˜æ¨¡å‹æ˜¯ä¸¤ä¸ªæ¦‚å¿µ æ“ä½œç³»ç»Ÿå†…å­˜åˆ†åŒº æ ˆï¼ˆStackï¼‰ å †ï¼ˆHeapï¼‰ æœªåˆå§‹åŒ–æ•°æ®æ®µï¼ˆBSSï¼‰ æ•°æ®æ®µï¼ˆData Segmentï¼‰ æ–‡æœ¬æ®µï¼ˆLiteral Segmentï¼‰ ä»£ç æ®µï¼ˆCode Segmentï¼‰ JVMå†…å­˜åˆ†åŒº ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stackï¼‰ æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ å †ï¼ˆHeapï¼‰ æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ æ©™è‰²è™šçº¿åŒ…è£¹çš„å°±æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œè¢«çº¢è‰²å®ç°åŒ…è£¹çš„æ˜¯çº¿ç¨‹éš”ç¦»çš„ ç¨‹åºè®¡æ•°å™¨åœ¨ç¡¬ä»¶å±‚é¢ï¼Œç¨‹åºè®¡æ•°å™¨æ˜¯å¯„å­˜å™¨ï¼Œæ˜¯ç”¨æ¥å­˜å‚¨æŒ‡ä»¤åœ°å€ç»™å¤„ç†å™¨æ‰§è¡Œï¼Œ åœ¨JVMä¸­ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨æ¥å­˜å‚¨å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼Œæä¾›ç»™æ‰§è¡Œå¼•æ“å»æ‰§è¡Œ è¿™é‡Œæˆ‘ä»¬ä»ä¾§é¢å»æŸ¥çœ‹è¯¥ç‰¹æ–° 1234567public class Demo &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.println(i); &#125; &#125;&#125; ç„¶åå…ˆç¼–è¯‘javac Demo.javaåç¼–è¯‘javap -l -c Demo.class å¾—åˆ°ä»¥ä¸‹å­—èŠ‚ç  123456789101112131415161718192021222324252627282930313233Compiled from &quot;Demo.java&quot;public class com.lizhi.Demo &#123; public com.lizhi.Demo(); descriptor: ()V Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 3: 0 public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V Code: // è¿™é‡Œçš„æ•°å­—å°±æ˜¯å­—èŠ‚ç æŒ‡ä»¤çš„åç§»é‡ 0: iconst_0 1: istore_1 2: iload_1 3: bipush 10 5: if_icmpge 21 8: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 11: iload_1 12: invokevirtual #3 // Method java/io/PrintStream.println:(I)V 15: iinc 1, 1 18: goto 2 21: return // è¿™é‡Œå¯ä»¥è§£é‡Šæ–­ç‚¹çš„åŸç†ï¼Œå°†æºç è¡Œæ•°å’Œå­—èŠ‚ç è¡Œæ•°è¿›è¡Œæ˜ å°„ LineNumberTable: line 5: 0 line 6: 8 line 5: 15 line 8: 21&#125; è™šæ‹Ÿæœºæ ˆä¹Ÿå«javaæ–¹æ³•æ ˆï¼Œjavaæ–¹æ³•çš„è°ƒç”¨å¯¹åº”ç€æ ˆå¸§çš„å…¥æ ˆä¸å‡ºæ ˆã€‚ 3ä¸ªé‡ç‚¹ï¼š æ ˆå¸§ æ ˆå¸§å‡ºç°æ—¶æœº æ ˆå¸§çš„æ„æˆ æ ˆå¸§æ ˆå¸§ä¸»è¦æœ‰å››éƒ¨åˆ†ç»„æˆï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€è¿”å›åœ°å€ å±€éƒ¨å˜é‡è¡¨ ä¸»è¦å­˜å‚¨æ–¹æ³•çš„å‚æ•°ã€å®šä¹‰åœ¨æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ8å¤§ï¼‰å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿”å›å€¼åœ°å€ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­å­˜å‚¨çš„åŸºæœ¬å•å…ƒä¸ºå˜é‡æ§½ï¼ˆSlotï¼‰ï¼Œ32ä½ï¼ˆ4å­—èŠ‚ï¼‰ä»¥å†…çš„æ•°æ®ç±»å‹å ä¸€ä¸ªslotï¼Œ64ä½ï¼ˆlongï¼Œdoubleï¼‰çš„å ä¸¤ä¸ªslotã€‚ å±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œbyteã€shortã€charéƒ½ä¼šè¢«è½¬åŒ–ä¸ºint,booleanç±»å‹ä¹Ÿä¼šè¢«è½¬åŒ–ä¸ºintï¼ŒOä»£è¡¨falseã€é0ä»£è¡¨trueã€‚å±€éƒ¨å˜é‡è¡¨çš„å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸé—´å†³å®šä¸‹æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶å®ƒçš„å¤§å°æ˜¯ä¸ä¼šå˜çš„ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­å«æœ‰ç›´æ¥æˆ–è€…é—´æ¥æŒ‡å‘çš„å¼•ç”¨ç±»å‹å˜é‡æ—¶ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶å¤„ç†ã€‚ æ“ä½œæ•°æ ˆ å°±æ˜¯ç”¨æ¥å­˜å‚¨æ“ä½œæ•°çš„æ ˆï¼Œè¿™é‡Œçš„æ“ä½œæ•°å¤§éƒ¨åˆ†å°±æ˜¯æ–¹æ³•å†…çš„å˜é‡ ä½œç”¨ï¼š å­˜å‚¨æ“ä½œæ•° æ“ä½œæ•°æ ˆå¯ä»¥æ–¹ä¾¿æŒ‡ä»¤é¡ºåºè¯»å–æ“ä½œæ•° æŒ‡ä»¤ å«ä¹‰ iload intå‹å˜é‡å…¥æ ˆ istore æ ˆé¡¶æ•°å€¼å­˜å…¥å±€éƒ¨å˜é‡ iadd å¼¹å‡ºæ ˆé¡¶ä¸¤ä¸ªæ“ä½œæ•°ï¼Œå¹¶å°†æ±‚å’Œçš„intå€¼å‹å…¥æ ˆä¸­ åŠ¨æ€è¿æ¥ javaä¸­çš„å¤šæ€å°±æ˜¯é€šè¿‡åŠ¨æ€è¿æ¥å®ç°çš„ æ¯ä¸ªæ ˆå¸§éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨ï¼ŒæŒæœ‰è¿™ä¸ªå¼•ç”¨éƒ½æ˜¯ä¸ºäº†æ”¯æŒæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­çš„åŠ¨æ€è¿æ¥ è¿æ¥æ˜¯å°†éƒ¨åˆ†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œå¯¹äºæœ‰äº›æ–¹æ³•ï¼ŒJVMå¹¶ä¸èƒ½åˆ¤æ–­å®ƒä»¬çš„å…·ä½“å®ç°ï¼Œåªæœ‰åœ¨çœŸæ­£è¿è¡Œçš„æ—¶å€™ï¼Œæ‰å¯ä»¥æ ¹æ®å®é™…ç±»å‹è¿›è¡Œè¿æ¥ï¼Œè¿™å°±æ˜¯åŠ¨æ€è¿æ¥ æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ˜¯ç”±éjavaè¯­è¨€å®ç°çš„å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›å’Œæ“ä½œç³»ç»Ÿåº•å±‚ç›¸å…³çš„å‡½æ•°","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"https://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://li-zhi.net.cn/tags/JVM/"}]},{"title":"JavaScript-æ¨¡å—åŒ–å¼€å‘","slug":"JavaScript-æ¨¡å—åŒ–å¼€å‘","date":"2022-03-16T12:34:07.000Z","updated":"2022-10-04T13:53:00.487Z","comments":true,"path":"å‰ç«¯/JavaScript/2022/03/16/JavaScript-æ¨¡å—åŒ–å¼€å‘/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/JavaScript/2022/03/16/JavaScript-%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91/","excerpt":"","text":"javaScriptæ¨¡å—åŒ– ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Ÿ å³å°†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºä¾æ®ä¸€å®šçš„è§„åˆ™(è§„èŒƒ)å°è£…æˆå‡ ä¸ªå—(æ–‡ä»¶)ï¼Œå¹¶ç”¨è§„å®šè¯­æ³•å°†å…¶ç»„åˆåœ¨ä¸€èµ·ï¼Œå—çš„å†…éƒ¨æ•°æ®&#x2F;å®ç°æ˜¯ç§æœ‰çš„,åªæ˜¯å‘å¤–éƒ¨æš´éœ²ä¸€äº›æ¥å£(æ–¹æ³•)ä¸å¤–éƒ¨å…¶ä»–æ¨¡å—é€šä¿¡ ä»¥å‰çš„ä»£ç  å…¨å±€æ¨¡å¼ 123456function foo()&#123; &#125;function abc()&#123; &#125; é—®é¢˜ï¼šæ‰€æœ‰çš„å‡½æ•°éƒ½è¢«ç»‘å®šåœ¨äº†windowä¸Šï¼Œå®¹æ˜“äº§ç”Ÿå‘½åå†²çªå’Œäº§ç”Ÿå¯¹windowçš„æ±¡æŸ“ namespaceæ¨¡å¼ å°†å‡½æ•°æˆ–è€…æ•°æ®ç»‘å®šåœ¨å¯¹è±¡ä¸Š 123456789let obj = &#123; k: &#x27;asd&#x27;, foo()&#123; console.log(this.k) &#125;, abc()&#123; &#125;&#125; é—®é¢˜ï¼šå¯¹è±¡ä¸­çš„æ•°æ®å¯ä»¥éšæ„è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°æ®ä¸å®‰å…¨ IIFE(Immedicately-invoked-function-expression) è¯¥æ–¹æ³•å°±æ˜¯åˆ©ç”¨å‡½æ•°çš„ä½œç”¨åŸŸå’Œå³ä½¿å‡½æ•°çš„ç‰¹æ€§ 12345678(function(window)&#123; function foo()&#123; console.log(&#x27;ooo&#x27;) &#125; window.module=&#123;foo&#125;&#125;)(window);-----------------------------module.foo(); æˆ–è€… 12345678(function(window)&#123; function foo()&#123; console.log(&#x27;ooo&#x27;) &#125; window.module=foo&#125;)(window);-----------------------------module(); IIFEå°±æ˜¯ç°ä»£åŒ–æ¨¡å—åŒ–çš„åŸºçŸ³ æ¨¡å—åŒ–çš„å¥½å¤„ é¿å…å‘½åå†²çª æ ¹æ®åŠŸèƒ½ç‚¹è¿›è¡Œæ›´å¥½çš„åˆ†ç¦» æ›´é«˜çš„å¤ç”¨æ€§ é«˜å¯ç»´æŠ¤æ€§ ä½†æ˜¯ä»¥æ­¤åŒæ—¶å°±å‡ºç°äº†é—®é¢˜ ä¸€ä¸ªé¡µé¢éœ€è¦å¼•å…¥å¤šä¸ªjsæ–‡ä»¶ï¼Œå¦‚æœå¤šä¸ªæ–‡ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œå…ˆåé¡ºåºçš„é”™è¯¯å°±ä¼šå¯¼è‡´æŠ¥é”™ è¯·æ±‚è¿‡å¤š ä¾èµ–æ¨¡ç³Š éš¾ä»¥ç»´æŠ¤ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä¸€ç§æ¨¡å—åŒ–çš„è§„èŒƒæ¥é¿å…è¿™ç§é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ¨¡å—åŒ–è§„èŒƒ æ¨¡å—åŒ–çš„è§„èŒƒ CommonJSï¼ˆnodejså°±æ˜¯åŸºäºè¿™ç§è§„èŒƒï¼‰ AMD ï¼ˆç”¨çš„å°‘ï¼‰ CMDï¼ˆé˜¿é‡Œçš„äººå†™çš„ã€‚ç”¨çš„å°‘ï¼‰ ES6 CommonJSè¯´æ˜ï¼š æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å— æœåŠ¡å™¨ç«¯ï¼šæ¨¡å—çš„åŠ è½½æ˜¯è¿è¡Œæ—¶åŒæ­¥åŠ è½½çš„ æµè§ˆå™¨ç«¯ï¼šéœ€è¦è‡ªå·±ç¼–è¯‘æ‰“åŒ…å°†æ‰€æœ‰çš„æ¨¡å—jsåˆå¹¶åˆ°ä¸€ä¸ªjsä¸­ å®šä¹‰æ¨¡å—ï¼š 123456module.exports=&#123;&#125;---expoets.foo = function()&#123; &#125;exports.n = 2 å¼•å…¥æ¨¡å—ï¼š 1234let module1 = require(..)// è¿™é‡Œçš„..// å¼•å…¥ç¬¬ä¸‰æ–¹çš„åŒ… ç›´æ¥å†™åŒ…å// å¼•å…¥è‡ªå·±å†™çš„js å†™è·¯å¾„ æœåŠ¡å™¨ç«¯ä¾‹å­ï¼š å…ˆåˆ›å»ºé¡¹ç›®ç»“æ„ 123456-modules --module1.js --module2.js --module3.js-app.js-package.json module1.js 12345module.exports = &#123; foo()&#123; console.log(`&#x27;module1&#x27;s foo()`) &#125;&#125; module2.js 123456exports.foo = function()&#123; console.log(`&#x27;module2&#x27;s foo()`)&#125;exports.abc = function()&#123; console.log(`&#x27;module2&#x27;s abc()`)&#125; module3.js 123module.exports = function()&#123; console.log(`&#x27;module3&#x27;s foo()`)&#125; app.js 12345678let module1 = require(&#x27;./modules/module1.js&#x27;)let module2 = require(&#x27;./modules/module2.js&#x27;)let module3 = require(&#x27;./modules/module3.js&#x27;)module1.foo()module2.foo()module2.abc()module3() package.json 1234&#123; name: &#x27;applicationname&#x27;,// è¿™é‡Œå†™é¡¹ç›®åå­—ï¼Œä¸èƒ½æœ‰å¤§å†™å­—æ¯ï¼Œä¸èƒ½æœ‰ä¸­æ–‡ version: &#x27;1.0.0&#x27;&#125; å¯ä»¥ä½¿ç”¨npm initç”Ÿæˆè¯¥æ–‡ä»¶ å®¢æˆ·ç«¯ä¾‹å­ï¼š ç»“æ„æ ‘å¦‚ä¸‹ 123456789-test --dist --src ---module1.js ---module2.js ---module3.js ---app.js --index.html --package.json jsä»£ç å¦‚ä¸Š ä¸‹è½½ç¼–è¯‘å·¥å…· 12npm install browserify -g # å…¨å±€å®‰è£…npm install browserify --save-dev # å¼€å‘ä¾èµ–ï¼Œåœ¨ä¸Šçº¿é˜¶æ®µä¸éœ€è¦æ­¤å·¥å…·äº† ä½¿ç”¨è¯¥å·¥å…· 1browserify src/app.js -o dist/budle.js index.html 1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script src=&#x27;./dist/budle.js&#x27;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; AMDè¯´æ˜ï¼šAMD(ï¼ˆAsynchronous Module Definitionï¼‰)ä¸“é—¨ç”¨æˆ·æµè§ˆå™¨ç«¯ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯å¼‚æ­¥çš„ æ­¤è§„èŒƒä¾èµ–äºä¸€ä¸ªRequire.js åŸºæœ¬è¯­æ³•ï¼š å®šä¹‰æ¨¡å—ï¼š 12345678// æ²¡æœ‰ä¾èµ–å…¶ä»–æ¨¡å—define(function()&#123; return æ¨¡å—&#125;)// å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—define([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; return æ¨¡å—&#125;) å¼•å…¥æ¨¡å— 123456require([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; ä½¿ç”¨m1/m2&#125;)requirejs([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; ä½¿ç”¨m1/m2&#125;) ä¾‹å­ï¼š ç›®å½•ç»“æ„ 12345678910-test --js ---libs ----require.js//è¿™æ˜¯å¼•å…¥çš„ç¬¬ä¸‰æ–¹js ---modules ----module1.js ----module2.js ----modlue3.js ---main.js --index.html mudule1.js 1234567define(function()&#123; lett msg = &#x27;module1&#x27;; function foo()&#123; console.log(msg) &#125; return &#123;foo&#125;&#125;) module2.js 1234567define([&#x27;module1&#x27;],function(m1)&#123; let msg = &#x27;module2.js&#x27; function foo()&#123; console.lopg(msg,m1.foo()) &#125; return &#123;foo&#125;&#125;) main.js 12345678910111213(function()&#123; require.config(&#123; baseUrl: &#x27;js/&#x27;, path: &#123; module1: &#x27;./modules/module1.js&#x27;, module2: &#x27;./modules/module2.js&#x27; jquery: &#x27;./libs/jquery.js&#x27;//å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œä¸æ˜¯æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“éƒ½æ”¯æŒAMDè¯­æ³• &#125; &#125;) requirejs([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; m1.foo(); &#125;)&#125;)() é¡µé¢ä¸­åªè¦å¼•å…¥è¯¥æ ‡ç­¾å³å¯ 1&lt;script data-main=&quot;js/main.js&quot; src=js/libs/require.js&gt;&lt;/script&gt; ES6è§„èŒƒè¯´æ˜ï¼šè¯¥è§„èŒƒä¹Ÿéœ€è¦ç¼–è¯‘æ‰“åŒ…å¤„ç†ï¼Œå…ˆä½¿ç”¨babelå°†ES6è½¬åŒ–ä¸ºES5ï¼Œç„¶åä½¿ç”¨browserifyå°†å…¶å¹¶ä¸ºä¸€ä¸ªjsæ–‡ä»¶ åŸºæœ¬è¯­æ³•ï¼š å¯¼å‡ºæ¨¡æ¿ï¼š 1234567891011121314151617181920212223export function foo()&#123; &#125;export function abc()&#123; &#125;------------------------------------------------------------------------------------------------------function foo()&#123; &#125;function abc()&#123; &#125;export &#123;foo,abc&#125;------------------------------------------------------------------------------------------------------export default &#123; function foo()&#123; &#125; function abc()&#123; &#125;&#125; å¼•å…¥æ¨¡å—ï¼š 12345// å¸¸è§„å¯¼å‡ºï¼Œè¿™è¾¹ç”¨å¯¹è±¡æ¥import &#123;&#125; from &#x27;è·¯å¾„&#x27; //è‡ªå·±çš„js// é»˜è®¤å¯¼å‡ºï¼Œè¿™è¾¹ç”¨å˜é‡æ¥æ¥impoet module from &#x27;è·¯å¾„&#x27; ä¾‹å­ï¼š é¡¹ç›®ç»“æ„ 123456789101112-test --js ---dist ---build ---src ----module1.js ----module2.js ----module3.js ----main.js --index.html --.babelrc --package.json å®‰è£…ä¾èµ– 12345npm install browserify --save-devnpm install babel-cli -gnpm install babel-preset-es2015 --save-dev åˆ›å»º.babelrc rcå°±æ˜¯run controlè¿è¡Œæ—¶æ§åˆ¶æ–‡ä»¶ 123&#123; &quot;presets&quot;:[&quot;es2015&quot;]&#125; module1.js 123456export function foo()&#123; &#125;export function abc()&#123; &#125; module2.js 1234567function f1()&#123; &#125;function f2()&#123; &#125;export &#123;f1,f2&#125; module3.js 12345678export default &#123; function d1()&#123; &#125; function d2()&#123; &#125;&#125; main.js 123456789import &#123;foo,abc&#125; from &#x27;./module1.js&#x27;import &#123;f1,f2&#125; from &#x27;./module2.js&#x27;import module3 from &#x27;./module3.js&#x27;foo();abc();f1();module3.d1();module3.d2(); es6è½¬es5 1babel js/src -d js/build è¿™é‡Œå¦‚æœå‡ºç°è¿™ä¸ªé”™è¯¯ï¼š 1babel : æ— æ³•åŠ è½½æ–‡ä»¶ C:\\Users\\win\\AppData\\Roaming\\npm\\babel.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… https:/ go.micros é‚£ä¹ˆä½ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä¸€å®šæ˜¯è¿™æ ·çš„ 12get-ExecutionPolicy# restricted è¿™æ—¶å€™ï¼Œå…ˆä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€Windows Powershellç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ 12set-ExecutionPolicy RemoteSignedç„¶åè¾“å…¥yå›è½¦ åˆå¹¶æ–‡ä»¶ 1browserify js/build/main.js -o js/dist/bundle.js index.htmlå¯¼å…¥js 1&lt;script src=&quot;js/src/dist/bundle.js&quot;&gt;&lt;/script&gt;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å‰ç«¯/JavaScript","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://li-zhi.net.cn/tags/JavaScript/"}]},{"title":"JVM-å†…å­˜æ¨¡å‹","slug":"JVM-å†…å­˜æ¨¡å‹","date":"2022-03-12T02:41:34.000Z","updated":"2022-10-04T13:53:24.374Z","comments":true,"path":"javaEE/JVM/2022/03/12/JVM-å†…å­˜æ¨¡å‹/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JVM/2022/03/12/JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/","excerpt":"","text":"å†…å­˜æ¨¡å‹ç¡¬ä»¶çš„å†…å­˜æ¨¡å‹åœ¨è®²javaå†…å­˜æ¨¡å‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ç¡¬ä»¶çš„å†…å­˜æ¨¡å‹ CPUçš„å¤„ç†é€Ÿåº¦å’Œå†…å­˜çš„è¯»å†™ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§çš„ï¼Œæ‰€ä»¥åœ¨CPUå’Œä¸»å­˜ä¹‹é—´åŠ ä¸Šäº†ä¸€å±‚ç¼“å­˜ è¿™ç§ç»“æ„åœ¨å•CPUçš„æ—¶å€™ï¼Œå¤„ç†çš„å¾ˆå¥½ ä½†æ˜¯å½“å¤šCPUçš„æ—¶å€™ï¼Œ è¿™æ—¶å€™å°±ä¼šå‡ºç°ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ å½“CPUAè¯»å–ä¸»å­˜ä¸­çš„æ•°æ®ä¹‹åï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œåœ¨å°†å…¶åˆ·æ–°å›ä¸»å­˜çš„ä¹‹å‰ï¼ŒCPUBè¯»å–ä¸»å­˜ä¸­çš„æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå°†å…¶åˆ·æ–°å›ä¸»å­˜ï¼Œè¿™æ—¶å€™CPUAä¹ŸåŒæ—¶å°†å…¶ä¿®æ”¹åçš„æ•°æ®åˆ·æ–°å›ä¸»å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®åˆ°åº•ä»¥å“ªä¸€ä¸ªä¸ºå‡†ï¼Œè¿™ä¸ªå°±æ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå°±å‡ºç°äº†ç¼“å­˜ä¸€è‡´æ€§åè®® 1ã€çª¥æ¢æ€§ 2ã€ç›®å½•å‹ æœ‰äº†è¿™ä¸€å±‚åè®®ï¼Œåœ¨ç¡¬ä»¶å±‚é¢ï¼Œå°±è§£å†³äº†ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå³æ±‡ç¼–è¯­è¨€èƒ½å¤Ÿè¿è¡Œåœ¨ä¸€ä¸ªå…·æœ‰ç¼“å­˜ä¸€è‡´æ€§çš„å†…å­˜è§†å›¾ä¸­ Javaçš„å†…å­˜æ¨¡å‹è®¾è®¡ç¼–ç¨‹è¯­è¨€çš„å†…å­˜æ¨¡å‹æ˜¯ä¸ºäº†èƒ½å¤Ÿè¯¥è¯­è¨€ä¹Ÿå¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå†…å­˜ä¸€è‡´æ€§çš„è§†å›¾ï¼Œäºæ˜¯åœ¨ç¡¬ä»¶å†…å­˜æ¨¡å‹ä¹‹ä¸Šï¼Œå°±æœ‰äº†é«˜çº§è¯­è¨€çš„å†…å­˜æ¨¡å‹ Javaå†…å­˜æ¨¡å‹å°±å±è”½äº†å„ç§ç¡¬ä»¶çš„æ“ä½œç³»ç»Ÿçš„å†…å­˜å·®å¼‚ï¼Œä½¿å¾—javaå¯ä»¥æ­£å¸¸çš„è¿è¡Œåœ¨å„å¤§æ“ä½œç³»ç»Ÿä¸Š è™šæ‹Ÿæœºæ ˆä¹Ÿå¯ä»¥å«åšjavaæ–¹æ³•æ ˆï¼Œè¯¥æ ˆä¸­å­˜æ”¾8å¤§åŸºç¡€ç±»å‹çš„æ•°æ®å’Œå¯¹è±¡çš„å¼•ç”¨ å †ä¸­å­˜æ”¾ç€æ‰€æœ‰çš„javaå¯¹è±¡ å†…å­˜è¯»å†™æŒ‡ä»¤ ä½œç”¨äºä¸»å­˜ ä½œç”¨äºå·¥ä½œå†…å­˜ lockï¼šé”å®š loadï¼šåŠ è½½æ•°æ® unlockï¼šè§£é” storeï¼šå­˜å‚¨æ•°æ® readï¼šè¯»å– useï¼šä½¿ç”¨æ•°æ® writeï¼šå†™å…¥ assignï¼šèµ‹å€¼ ä¸Šé¢çš„å›¾åªæ˜¯ä¸€ç§ç†æƒ³çŠ¶æ€ï¼Œä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§é—®é¢˜ 1ã€å¯è§æ€§ å½“çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜ä¸­çš„æ•°æ®ä¿®æ”¹åï¼Œåˆ·æ–°å›ä¸»å­˜åï¼Œçº¿ç¨‹Bç›´æ¥ä½¿ç”¨æœ¬åœ°å†…å­˜ä¸­çš„æ•°æ®ï¼Œæ²¡æœ‰ä½¿ç”¨åˆ·æ–°åçš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ 2ã€åŸå­æ€§ å½“çº¿ç¨‹Aä¿®æ”¹äº†æ•°æ®ï¼Œè¿˜æ²¡åˆ·æ–°å›ä¸»å­˜ï¼Œçº¿ç¨‹Bä¹Ÿä¿®æ”¹äº†æ•°æ®ï¼Œä¹Ÿè¦åˆ·æ–°å›ä¸»å­˜ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä¸»å­˜ä¸­åº”è¯¥åˆ·æ–°æˆå“ªä¸ªçº¿ç¨‹ä¿®æ”¹åçš„å€¼å‘¢ çº¿ç¨‹é€šä¿¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨å¹¶å‘æ“ä½œåŒä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œä¼šå¼•å‘å¾ˆå¤šçš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜è¢«æ€»ç»“ä¸ºå¹¶å‘ä¸‰è¦ç´  1ã€å¯è§æ€§ 2ã€åŸå­æ€§ 3ã€æœ‰åºæ€§ å¯è§æ€§å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ä¹‹åï¼Œå…¶ä»–æ‰€æœ‰ä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹éƒ½åº”è¯¥ç«‹åˆ»å¾—çŸ¥æ­¤ä¿®æ”¹ ä¸¤å±‚å«ä¹‰ ç¬¬ä¸€ç§å«ä¹‰ çº¿ç¨‹Aä¿®æ”¹äº†æ•°æ®Xï¼Œçº¿ç¨‹Béœ€è¦ä½¿ç”¨åˆ°æœ€æ–°çš„æ•°æ®Xï¼ˆè¿™æ˜¯çº¿ç¨‹Bæ²¡æœ‰é‡æ–°è¯»å–ä¸»å­˜å¯¼è‡´çš„ï¼‰ 12345678910111213141516public class Demo &#123; static int a =1; public static void main(String[] args) throws InterruptedException &#123; Thread thread1 = new Thread(() -&gt; &#123; while (a == 1) &#123; &#125; &#125;); Thread thread2 = new Thread(() -&gt; &#123; a = 0; &#125;); thread1.start(); TimeUnit.SECONDS.sleep(1); thread2.start(); &#125;&#125; æ§åˆ¶å°ä¸ä¼šè¿”å›å“åº”ç ï¼Œè€Œæ˜¯ä¸€ç›´æ­»å¾ªç¯ã€‚ å½“thread1å¼€å§‹å¾ªç¯çš„æ—¶å€™ï¼Œæœ¬åœ°å†…å­˜ä¸­a=1ï¼Œå½“thread2ä¿®æ”¹äº†aä¸º0çš„æ—¶å€™ï¼Œthread1å¹¶ä¸çŸ¥é“ï¼Œè€Œæ˜¯ä¸€ç›´ä½¿ç”¨ç€a=1ï¼Œæ‰€ä»¥ä¼šä¸€ç›´å¾ªç¯ ä¸¤ç§è§£å†³æ–¹æ³• 1ã€å°†aå˜é‡åŠ ä¸€ä¸ªä¿®é¥°è¯volatile å¦‚æœä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥å…±äº«å˜é‡è¢«ä¿®æ”¹åï¼Œå°†ä¼šç›´æ¥å†™å…¥ä¸»å­˜ï¼Œå½“å…¶ä»–çº¿ç¨‹è¯»å–è¯¥å…±äº«å˜é‡çš„æ—¶å€™ï¼Œä¹Ÿä¼šç›´æ¥ä»ä¸»å­˜ä¸­è¯»å– 2ã€ä½¿ç”¨synchronizedåŒ…è£¹ï¼Œå¹¶ä½¿ç”¨è¯¥æ•°æ® synchronizedå—ä¸­è¯»å†™å˜é‡ä¼šéšå¼è°ƒç”¨lockå’ŒunlockæŒ‡ä»¤ 123456789101112131415161718public class Demo &#123; static int a =1; public static void main(String[] args) throws InterruptedException &#123; Thread thread1 = new Thread(() -&gt; &#123; while (a == 1) &#123; synchronized(this)&#123; int b = a + 1; &#125; &#125; &#125;); Thread thread2 = new Thread(() -&gt; &#123; a = 0; &#125;); thread1.start(); TimeUnit.SECONDS.sleep(1); thread2.start(); &#125;&#125; ç¬¬äºŒå±‚å«ä¹‰ çº¿ç¨‹Béœ€è¦è¯»å–åˆ°çº¿ç¨‹Aä¿®æ”¹åçš„æ•°æ®xï¼Œä½†æ˜¯å› ä¸ºæŒ‡ä»¤é‡æ’ï¼Œåœ¨çº¿ç¨‹Aæœªä¿®æ”¹æ•°æ®xä¹‹å‰ï¼Œçº¿ç¨‹Bè¯»åˆ°äº†æ•°æ®x 123456789101112131415161718public class Demo2 &#123; static int a =0; static boolean b =false; public static void main(String[] args) &#123; Thread thread1 = new Thread(() -&gt; &#123; a = 1;//1 b = true;//2 &#125;); Thread thread2 = new Thread(() -&gt; &#123; if (b) &#123;//3 int x = a;// 4 // è¿™ä¸ªxä¸€å®šæ˜¯1å—? System.out.println(x); // 5 &#125; &#125;); thread1.start(); thread2.start(); &#125;&#125; åœ¨ç¡¬ä»¶å†…å­˜æ¨¡å‹çš„æ—¶å€™å°±è¯´è¿‡ï¼Œåœ¨åº•å±‚ä¼šå­˜åœ¨æŒ‡ä»¤é‡æ’çš„æƒ…å†µï¼Œ æˆ‘ä»¬è§‰å¾—çš„é¡ºåºåº”è¯¥æ˜¯ 1-&gt;2-&gt;3-&gt;4 ä½†æ˜¯åœ¨ç¼–è¯‘åé¡ºåºæœ‰å¯èƒ½å°±å˜æˆäº† 2-&gt;3-&gt;4-&gt;1 è¿™ä¹Ÿæ˜¯ä¸€ç§å¯è§æ€§çš„é—®é¢˜ åŒæ ·çš„è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šè¿°ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ç§é—®é¢˜ volatileæ˜¯ç¦æ­¢äº†å½“å‰å˜é‡ä¸ä¹‹å‰çš„ä»£ç è¯­å¥è¿›è¡ŒæŒ‡ä»¤é‡æ’ synchronizedå°±æ˜¯å°†ä¸¤æ®µä»£ç åˆ†åˆ«æ†ç»‘åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆæ— è®ºåœ¨thread1ä¸­æ€ä¹ˆæŒ‡ä»¤é‡æ’ï¼Œéƒ½ä¸ä¼šå½±å“thread2å¯¹äºå˜é‡çš„è¯»å– Happens-BeforeåŸåˆ™æˆ‘ä»¬å¹³æ—¶å¾ˆå°‘é‡åˆ°å¯è§æ€§é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ç«™åœ¨äº†å‰äººçš„è‚©è†€ä¸Šï¼Œè®¾è®¡å†…å­˜æ¨¡å‹çš„å‰è¾ˆå·²ç»å¸®æˆ‘ä»¬è§£å†³äº†æ­¤é—®é¢˜ï¼Œè¿™å°±æ˜¯Happens-BeforeåŸåˆ™ å®šä¹‰ï¼šå¯¹äºä¸¤ä¸ªæ“ä½œAå’Œæ“ä½œBï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æœA Happens-Before Bï¼ˆå³Aå…ˆäºBæ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä¿è¯å½“Aæ“ä½œæ‰§è¡Œå®Œåï¼ŒAæ“ä½œçš„æ‰§è¡Œç»“æœå¯¹Bæ“ä½œæ˜¯å¯è§çš„ ç¨‹åºé¡ºåºåŸåˆ™ é”å®šåŸåˆ™ volatileåŸåˆ™ çº¿ç¨‹å¯åŠ¨åŸåˆ™ çº¿ç¨‹ç»“æŸåŸåˆ™ ä¸­æ–­è§„åˆ™ ç»ˆç»“å™¨è§„åˆ™ ä¼ é€’æ€§åŸåˆ™ åŸå­æ€§ä¸€ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ 1ã€å•æŒ‡ä»¤åŸå­æ“ä½œ 2ã€åˆ©ç”¨é”çš„ç»„åˆæŒ‡ä»¤åŸå­æ“ä½œ æœ‰åºæ€§æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½å¯¼è‡´æœ‰çš„ä»£ç æ‰§è¡Œé¡ºåºä¿®æ”¹åå¯èƒ½ä¼šå¯¼è‡´ä¸é¡ºåºæ‰§è¡Œçš„ç»“æœä¸åŒ è¿™é‡Œå¯ä»¥ä½¿ç”¨Happens-BeforeåŸåˆ™æ¥è§£å†³é—®é¢˜","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"https://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://li-zhi.net.cn/tags/JVM/"}]},{"title":"JVM-ç±»åŠ è½½å™¨","slug":"JVM-ç±»åŠ è½½å™¨","date":"2022-03-11T14:47:01.000Z","updated":"2022-10-04T13:53:16.497Z","comments":true,"path":"javaEE/JVM/2022/03/11/JVM-ç±»åŠ è½½å™¨/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JVM/2022/03/11/JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/","excerpt":"","text":"ç±»çš„åŠ è½½è¿‡ç¨‹ç±»çš„åŠ è½½è¿‡ç¨‹åˆ†ä¸‰ä¸ªé˜¶æ®µ ç±»çš„åŠ è½½ &#x3D;&#x3D;ã€‹ç±»çš„é“¾æ¥ &#x3D;&#x3D;ã€‹ç±»çš„åˆå§‹åŒ– ç±»çš„åŠ è½½ï¼šå°†Classæ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨å †ä¸­ï¼ˆæ–¹æ³•åŒºï¼‰ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–è¯¥ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ ç±»çš„é“¾æ¥ï¼šå°†Javaç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JVMä¸­ éªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ç¬¦åˆJVMè§„èŒƒ å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®æˆå‘˜å˜é‡çš„é»˜è®¤å€¼ è§£æï¼šJVMå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ ç±»çš„åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»æ„é€ å™¨&lt; clinit &gt;()æ–¹æ³•çš„è¿‡ç¨‹ ç±»æ„é€ å™¨æ–¹æ³•æ˜¯ç”±ç¼–è¯‘æœŸæŒ‰é¡ºåºæ”¶é›†ç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæˆçš„ï¼ˆç±»æ„é€ å™¨æ˜¯æ„é€ ç±»ä¿¡æ¯çš„ï¼Œä¸æ˜¯å¯¹è±¡æ„é€ å™¨ï¼‰ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå…¶çˆ¶ç±»ä¸ºåˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» JVMä¼šä¿è¯ç±»æ„é€ å™¨åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¢«æ­£ç¡®åŠ é” ç±»çš„é“¾æ¥ä¸ºé»‘ç›’å®ç° ç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼ˆä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ å½“JVMå¯åŠ¨çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–mainæ–¹æ³•æ‰€åœ¨çš„ç±» new ä¸€ä¸ªç±»çš„å¯¹è±¡ è°ƒç”¨è¯¥ç±»çš„é™æ€æˆå‘˜ï¼ˆé™¤äº†finalï¼‰å’Œé™æ€æ–¹æ³• ä½¿ç”¨åå°„å¯¹å…¶ç±»è¿›è¡Œåå°„è°ƒç”¨ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå…¶çˆ¶ç±»è‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» ç±»çš„è¢«åŠ¨å¼•ç”¨ï¼ˆä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ å½“è®¿é—®ä¸€ä¸ªé™æ€åŸŸçš„æ—¶å€™ï¼Œåªæœ‰çœŸæ­£å£°æ˜è¯¥åŸŸçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–ã€‚ä¸¾ä¸ªæ —å­ï¼šå½“é€šè¿‡å­ç±»è°ƒç”¨çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œè¯¥å­ç±»æ˜¯ä¸ä¼šè¢«åˆå§‹åŒ–çš„ é€šè¿‡æ•°ç»„å®šä¹‰ç±»å¼•ç”¨ï¼Œä¸ä¼šå¯¼è‡´åˆå§‹åŒ– å¼•ç”¨å¸¸é‡ä¸ä¼šå¯¼è‡´åˆå§‹åŒ– ç±»åŠ è½½å™¨å¸‚é¢ä¸Šæœ‰ä¸‰ç§JVMï¼Œä¸åŒçš„JVMå¯¹ç±»åŠ è½½å™¨çš„å®ç°æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„å¹¶ä¸”ä½¿ç”¨çš„æ˜¯Sunå…¬å¸çš„HotSpot ç±»åŠ è½½å™¨çš„ä½œç”¨å°±æ˜¯å°†ç±»ï¼ˆclassï¼‰è£…è¿›å†…å­˜çš„ JVMè§„å®šäº†ä»¥ä¸‹ç±»å‹çš„åŠ è½½å™¨ å¼•å¯¼ç±»åŠ è½½å™¨ï¼šç”¨C++ç¼–å†™çš„ï¼Œæ˜¯JVMè‡ªå¸¦çš„ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£javaå¹³å°çš„æ ¸å¿ƒåº“ï¼Œç”¨æ¥è£…è½½æ ¸å¿ƒç±»åº“ï¼Œè¯¥åŠ è½½å™¨æ— æ³•ç›´æ¥è·å–ï¼ˆè·å–çš„æ—¶å€™ä¼šæ˜¯nullï¼‰ æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtClassLoaderï¼‰ï¼šè´Ÿè´£**&#x2F;lib&#x2F;etc**ç›®å½•ä¸‹çš„jaråŒ…æˆ·æˆ–è€… -d java.ext.dirsæŒ‡å®šç›®å½•ä¸‹çš„jaråŒ…è£…å…¥å·¥ä½œåº“ ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ï¼šè´Ÿè´£java -classpathæˆ–è€…java.class.pathæŒ‡å®šç›®å½•ä¸‹çš„ç±»ä¸jaråŒ… ç”¨æˆ·åŠ è½½å™¨ï¼ˆUser ClassLoaderï¼‰ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„åŠ è½½å™¨ æ‰©å±•ç±»åŠ è½½å™¨ã€ç³»ç»Ÿç±»åŠ è½½å™¨ã€ç”¨æˆ·åŠ è½½å™¨éƒ½æ˜¯ç»§æ‰¿è‡ªjava.lang.ClassLoader JVMè§„èŒƒï¼šæ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰å±äºè‡ªå·±çš„å‘½åç©ºé—´ åŒäº²å§”æ´¾æœºåˆ¶æ£€æŸ¥é¡ºåºä»ä¸‹è‡³ä¸Šï¼ŒåŠ è½½é¡ºåºä»é¡¶è‡³ä¸‹ ä¸¾ä¸ªæ —å­ï¼šæˆ‘å†™äº†ä¸€ä¸ªStudentç±»ï¼Œæˆ‘è¦åŠ è½½å®ƒéœ€è¦ç»è¿‡ä»¥ä¸‹è¿‡ç¨‹ å…ˆå°†è¯¥ä»»åŠ¡å§”æ‰˜ç»™AppClassLoader AppClassLoaderå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œå°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™ExtClassLoader ExtClassLoaderä¹Ÿå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œç»§ç»­å°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™BootStrapClassLoader BootStrapClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½è‡ªå·±åŠ è½½ï¼Œä½†æ˜¯åœ¨è‡ªå·±ç®¡ç†çš„libç›®å½•ä¸‹å¹¶æ²¡æœ‰æ‰¾åˆ°è¯¥ç±»ï¼Œåªèƒ½å°†ä»»åŠ¡å†æ¬¡äº¤ç»™ExtClassLoaderå»åŠ è½½ é‚£ExtClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½åœ¨è‡ªå·±ç®¡ç†çš„extç›®å½•ä¸‹æ‰¾è¯¥ç±»ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œåªèƒ½å°†ä»»åŠ¡ç»§ç»­å‘ä¸‹è½¬äº¤ç»™AppClassLoader AppClassLoaderä¸å¾—ä¸è‡ªå·±å»å°è¯•åŠ è½½è¯¥ç±»ï¼Œäºæ˜¯åŠ è½½æˆåŠŸ æ—¢ç„¶æœ€åè¿˜æ˜¯AppClassLoaderå»åŠ è½½Studentç±»ä½•å¿…ç»•ä¸€ä¸ªå¤§åœˆå­å‘¢ï¼Ÿ è¿™æ˜¯ä¸ºäº†é˜²æ­¢åŸå§‹ç±»è¢«ç”¨æˆ·å†™çš„ç±»æ‰€è¦†ç›–ã€‚ å†ä¸¾ä¸ªæ —å­ï¼šæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªStringç±»ï¼Œæˆ‘è¦åŠ è½½å®ƒä¼šç»å†ä»¥ä¸‹è¿‡ç¨‹ å…ˆå°†è¯¥ä»»åŠ¡å§”æ‰˜ç»™AppClassLoader ExtClassLoaderä¹Ÿå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œç»§ç»­å°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™BootStrapClassLoader BootStrapClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½è‡ªå·±åŠ è½½ï¼Œäºæ˜¯åœ¨è‡ªå·±ç®¡ç†çš„libç›®å½•ä¸‹æ‰¾åˆ°è¯¥ç±»å¹¶åŠ è½½ï¼Œå°†åŠ è½½ç»“æœå‘ä¸‹ä¸€ç›´ä¼ é€’åˆ°ç”¨æˆ· å¯¹åŒäº²å§”æ´¾æ¨¡å‹çš„ç ´å1ã€è‡ªå®šä¹‰ç±»åŠ è½½å™¨ æˆ‘ä»¬å†™ä¸€ä¸ªç±»ç»§æ‰¿java.lang.ClassLoaderï¼Œé‡å†™loadClassæ–¹æ³•ï¼ŒåŒäº²å§”æ´¾çš„é€»è¾‘å°±åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½†æ˜¯æˆ‘è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨å¯ä»¥ä¸è¿™ä¹ˆå†™ï¼Œä¹Ÿå°±ç ´åäº†åŒäº²å§”æ´¾ã€‚åœ¨jdk1.2ä¹‹åï¼Œjdkå¢åŠ äº†ä¸€ä¸ªfindClassæ–¹æ³•æä¾›ç»™ä¸Šå±‚é‡å†™ï¼Œä¹Ÿå°±æœ‰æ•ˆåœ°é˜²æ­¢äº†åŒäº²å§”æ´¾è¢«ç ´å 1234567891011121314151617181920212223public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException &#123; ClassLoader myClassLoader = new ClassLoader()&#123; @Override public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123; try&#123; String fileName = name.substring(name.lastIndexOf(&quot;.&quot;)+1)+&quot;.class&quot;; InputStream is = getClass().getResourceAsStream(fileName); if(is==null)&#123; return super.loadClass(name); &#125; byte[] buffer = new byte[is.available()]; is.read(buffer); return defineClass(name,buffer,0, buffer.length); &#125;catch (Exception e)&#123; e.printStackTrace(); throw new ClassNotFoundException(name); &#125; &#125; &#125;; Object o = myClassLoader.loadClass(&quot;com.test.A&quot;).newInstance(); System.out.println(o.getClass()); System.out.println(o instanceof com.test.A);&#125; æ§åˆ¶å°è¾“å‡º 12class com.test.Afalse è¿™ä¸ä»…ç ´åäº†åŒäº²å§”æ´¾ï¼Œå¹¶ä¸”è¯æ˜äº†æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ 2ã€SPIï¼ˆService Provider Interfaceï¼‰æœåŠ¡å‘ç°æœºåˆ¶ JDKä¸­å®šä¹‰äº†JDBCçš„æ¥å£ï¼Œè§„èŒƒå„å¤§å‚å®¶ã€‚å¯¹äºJDKä¸­çš„æ¥å£ï¼Œä½¿ç”¨çš„æ˜¯BootstrapClassLoaderä½†æ˜¯å¯¹äºå„å¤§å‚å®¶çš„å®ç°ç±»ï¼Œä½¿ç”¨çš„æ˜¯ApplClassLoader 1234567891011121314151617181920212223242526272829303132333435@CallerSensitivepublic static Driver getDriver(String url) throws SQLException &#123; println(&quot;DriverManager.getDriver(\\&quot;&quot; + url + &quot;\\&quot;)&quot;); ensureDriversInitialized(); Class&lt;?&gt; callerClass = Reflection.getCallerClass(); // Walk through the loaded registeredDrivers attempting to locate someone // who understands the given URL. for (DriverInfo aDriver : registeredDrivers) &#123; // If the caller does not have permission to load the driver then // skip it. if (isDriverAllowed(aDriver.driver, callerClass)) &#123; try &#123; if (aDriver.driver.acceptsURL(url)) &#123; // Success! println(&quot;getDriver returning &quot; + aDriver.driver.getClass().getName()); return (aDriver.driver); &#125; &#125; catch(SQLException sqe) &#123; // Drop through and try the next driver. &#125; &#125; else &#123; println(&quot; skipping: &quot; + aDriver.driver.getClass().getName()); &#125; &#125; println(&quot;getDriver: no suitable driver&quot;); throw new SQLException(&quot;No suitable driver&quot;, &quot;08001&quot;);&#125; 123456@CallerSensitivepublic static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service) &#123; // å½“å‰çº¿ç¨‹çš„ClassLoaderé»˜è®¤ä¸ºAppClassLoader ClassLoader cl = Thread.currentThread().getContextClassLoader(); return new ServiceLoader&lt;&gt;(Reflection.getCallerClass(), service, cl);&#125; 3ã€çƒ­éƒ¨ç½²","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"https://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://li-zhi.net.cn/tags/JVM/"}]},{"title":"ã€25-Hardã€‘ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨","slug":"ã€25-Hardã€‘ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨","date":"2022-03-08T07:00:11.000Z","updated":"2023-03-06T06:45:54.545Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/03/08/ã€25-Hardã€‘ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/03/08/%E3%80%9025-Hard%E3%80%91%E4%BB%A5k%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%BA%E4%B8%80%E7%BB%84%E9%80%86%E8%BD%AC%E5%8D%95%E9%93%BE%E8%A1%A8/","excerpt":"","text":"ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ç¿»è½¬åçš„é“¾è¡¨ã€‚ k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚ å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚ è¿›é˜¶ï¼š ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªåªä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2è¾“å‡ºï¼š[2,1,4,3,5] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 3è¾“å‡ºï¼š[3,2,1,4,5] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 1è¾“å‡ºï¼š[1,2,3,4,5] ç¤ºä¾‹ 4ï¼š 12è¾“å…¥ï¼šhead = [1], k = 1è¾“å‡ºï¼š[1] æç¤ºï¼š åˆ—è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡åœ¨èŒƒå›´ sz å†… 1 &lt;= sz &lt;= 5000 0 &lt;= Node.val &lt;= 1000 1 &lt;= k &lt;= sz Related Topics é€’å½’ é“¾è¡¨ é€’å½’é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é“é¢˜ç›®ï¼Œé¢˜ç›®ä¸éš¾ç†è§£ï¼Œå°±æ˜¯ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨é€’å½’çš„æ€æƒ³æ¥æ€è€ƒä¸€ä¸‹è¿™é“é¢˜ é¦–å…ˆéœ€è¦ä¸€ä¸ªé€†è½¬å‰nä¸ªèŠ‚ç‚¹çš„æ–¹æ³• æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,int k) 123456789101112ListNode processor;// è¿™é‡Œçš„kè¦ä¿è¯ä¸è¶…è¿‡é“¾è¡¨é•¿åº¦public ListNode reverseKNode(ListNode head,int k)&#123; if(k == 1)&#123; processor = head.next; return head; &#125; ListNode node = reverseKNode1(head.next, k-1); head.next.next = head; head.next = processor; return node;&#125; åœ¨æ­¤åŸºç¡€ä¸Šå†™å‡ºé€†è½¬headåˆ°endä¹‹é—´çš„èŠ‚ç‚¹ æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,ListNode end) 123456789101112ListNode processor;// [head,end)public ListNode reverseKNode(ListNode head,ListNode end)&#123; if(head.next == end)&#123; processor = head.next; return head; &#125; ListNode node = reverseKNode(head.next, end); head.next.next = head; head.next = processor; return node;&#125; æœ€åå°±æ˜¯æˆç»„é€†è½¬å•é“¾è¡¨ æ–¹æ³•ç­¾åï¼špublic ListNode reverseKGroup(ListNode head, int k) 12345678910111213141516171819202122public ListNode reverseKGroup(ListNode head, int k)&#123; ListNode node = head; for (int i = 0; i &lt; k; i++) &#123; if(node==null)&#123; return head; &#125; node=node.next; &#125; ListNode newHead = reverseKNode(head,k,node); head.next=reverseKGroup(node,k); return newHead;&#125;private ListNode reverseKNode(ListNode head,int k,ListNode tail)&#123; if(k==1)&#123; return head; &#125; ListNode newHead=reverseKNode(head.next,k-1,tail); head.next.next=head; head.next=tail; return newHead;&#125; è¿­ä»£é¦–å…ˆéœ€è¦ä¸€ä¸ªé€†è½¬å‰nä¸ªèŠ‚ç‚¹çš„æ–¹æ³• æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,int k) 123456789101112public ListNode reverseKNode(ListNode head,int k)&#123; ListNode prev = null; ListNode cur = head; ListNode suffix; while(cur!=null &amp;&amp; k--!=0)&#123; suffix = cur.next; cur.next = prev; prev = cur; cur = suffix; &#125; return prev;&#125; åœ¨æ­¤åŸºç¡€ä¸Šå†™å‡ºè¿­ä»£é€†è½¬headåˆ°endä¹‹é—´çš„èŠ‚ç‚¹ æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,ListNode end) 12345678910111213public ListNode reverseKNode(ListNode head,ListNode end)&#123; ListNode prev = null; ListNode cur = head; ListNode suffix; while(cur != end)&#123; suffix = cur.next; cur.next = prev; prev = cur; cur = suffix; &#125; return prev;&#125; æœ€åå°±æ˜¯æˆç»„é€†è½¬å•é“¾è¡¨ æ–¹æ³•ç­¾åï¼špublic ListNode reverseKGroup(ListNode head, int k) 12345678910111213141516171819202122232425public ListNode reverseKGroup(ListNode head, int k) &#123; ListNode end = head; for (int i = 0; i &lt; k; i++) &#123; // å¦‚æœé•¿åº¦ä¸è¶³kï¼Œåˆ™ç›´æ¥è¿”å›å¤´éƒ¨ï¼Œä¸ç”¨é€†è½¬ if(end==null)&#123; return head; &#125; end = end.next; &#125; ListNode newHead = reverseKNode(head, k); head.next = reverseKGroup(end, k); return newHead;&#125;public ListNode reverseKNode(ListNode head, int k)&#123; ListNode prev=null; ListNode cur=head; ListNode suffix; while(cur!=null&amp;&amp;k--!=0)&#123; suffix=cur.next; cur.next=prev; prev=cur; cur=suffix; &#125; return prev;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"JavaScript-åŸå‹å’ŒåŸå‹é“¾","slug":"JavaScript-åŸå‹å’ŒåŸå‹é“¾","date":"2022-03-05T12:18:26.000Z","updated":"2022-09-27T14:15:19.311Z","comments":true,"path":"å‰ç«¯/JavaScript/2022/03/05/JavaScript-åŸå‹å’ŒåŸå‹é“¾/","link":"","permalink":"https://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/JavaScript/2022/03/05/JavaScript-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"","text":"åŸå‹å’ŒåŸå‹é“¾prototypeåœ¨JavaScriptä¸­ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å‡½æ•°çš„åŸå‹å¯¹è±¡ 12345678function Person(name)&#123; this.name = name;&#125;Person.prototype.name = &#x27;kerwin&#x27;;let p1 = new Person();let p2 = new Person();console.log(p1.name);// kerwinconsole.log(p2.name);// kerwin å‡½æ•°çš„prototypeæŒ‡å‘çš„å°±æ˜¯å¯¹è±¡åŸå‹ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯è°ƒç”¨æ„é€ å‡½æ•°æ—¶åˆ›å»ºå®ä¾‹çš„åŸå‹å¯¹è±¡ï¼Œå°±æ˜¯è¯´p1å’Œp2çš„åŸå‹å¯¹è±¡æ˜¯åŒä¸€ä¸ª _proto_æ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åš_proto_ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„åŸå‹å±æ€§æŒ‡å‘çš„å¯¹è±¡ constructoræ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•° 12345678910function Person()&#123; &#125;let person = new Person();console.log(Person.prototype._proto_ ==== Person);// trueconsole.log(person._proto_ === Person.prototype);// true// åœ¨personä¸­æ‰¾ä¸åˆ°constructorå±æ€§ï¼Œæ‰€ä»¥å‘ä¸Šåœ¨åŸå‹ä¸­æ‰¾åˆ°è¯¥å±æ€§console.log(person.constructor === Person);// trueconsole.log(person.constructor === Person.prototype.constructor);console.log(person.constructor === person._proto_.constructor) å®ä¾‹ä¸åŸå‹å½“è¯»å–å®ä¾‹ä¸­çš„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥å±æ€§ï¼Œåˆ™ä¼šå»æŸ¥æ‰¾è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶éƒ¨ä¸ºæ­¢ 12345678910function Person(age)&#123; this.age = age;&#125;Person.prototype.name = &#x27;zhima&#x27;;let p1 = new Person();person.name = &#x27;kerwin&#x27;console.log(p1.name);// kerwin// åˆ é™¤personå¯¹è±¡ä¸­çš„nameå±æ€§delete person.nameconsole.log(p1.name);// zhima å¯ä»¥çœ‹åˆ°p1çš„nameå±æ€§ æ˜¾ç¤ºè¾“å‡ºäº†è‡ªèº«çš„å±æ€§å€¼kerwin å½“åˆ é™¤äº†å¯¹è±¡ä¸­nameå±æ€§ä¹‹åï¼Œè¾“å‡ºçš„æ˜¯åŸå‹ä¸­çš„æ•°æ® åŸå› æ˜¯å½“å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¯¥å±æ€§çš„æ—¶å€™ï¼Œä¼šå‘ä¸Šåœ¨åŸå‹ä¸­æ‰¾å±æ€§ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºkerwin åŸå‹çš„åŸå‹åŸå‹æ˜¯éšç€ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œç”Ÿæˆçš„ä¸€ä¸ªå¯¹è±¡ã€‚ é‚£ä¹ˆåŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸€å®šä¹Ÿæœ‰åŸå‹ å®ƒçš„åŸå‹å…¶å®æ˜¯é€šè¿‡Objectå¯¹è±¡çš„æ„é€ å‡½æ•°åˆ›å»ºçš„ åŸå‹é“¾ç®€å•å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„çŸ¥è¯†ç‚¹ï¼Œ prototypeæ˜¯æ¯ä¸ªå‡½æ•°çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ _proto_æ˜¯æ¯ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ constructoræ˜¯æ¯ä¸€ä¸ªåŸå‹å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘å…¶ç»‘å®šçš„æ„é€ å‡½æ•° 1æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆã€‚é‚£ä¹ˆå‡å¦‚æˆ‘ä»¬è®©åŸå‹å¯¹è±¡ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œç»“æœä¼šæ€ä¹ˆæ ·ï¼Ÿæ˜¾ç„¶ï¼Œæ­¤æ—¶çš„åŸå‹å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªåŸå‹çš„æŒ‡é’ˆï¼Œç›¸åº”çš„ï¼Œå¦ä¸€ä¸ªåŸå‹ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„æŒ‡é’ˆã€‚å‡å¦‚å¦ä¸€ä¸ªåŸå‹åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ã€‚å¦‚æ­¤å±‚æ¬¡é€’è¿›ï¼Œå°±æ„æˆäº†åŸå‹å’Œå®ä¾‹çš„é“¾æ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŸå‹é“¾çš„æ¦‚å¿µ ----------ã€Šæ‘˜è‡ªJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ é‚£Object.prototypeçš„åŸå‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯null å›¾ä¸­è“è‰²çš„çº¿å°±æ˜¯åŸå‹é“¾","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å‰ç«¯/JavaScript","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://li-zhi.net.cn/tags/JavaScript/"}]},{"title":"è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼","date":"2022-03-02T10:06:48.000Z","updated":"2022-03-02T10:41:36.988Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…ç›‘å¬åŒä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºï¼Œå½“è¯¥è¡Œä¸ºå‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ™åšå‡ºä¸€å®šçš„åŠ¨ä½œ å¤©æ°”å˜åŒ–äº†ï¼Œå‘å‡ºæç¤º å¤©æ°”æ¨¡å‹ 1234567891011121314151617181920@Data@NoArgsConstructor@AllArgsConstructorpublic class Weather &#123; private String address; private Integer temperature; private List&lt;Observer&gt; observers; public void addObserver(Observer observer)&#123; observers.add(observer); &#125; public void removeObserver(Observer observer)&#123; observers.remove(observer); &#125; public void changeTemperature(int temperature)&#123; this.temperature=temperature; for (Observer observer : observers) &#123; observer.update(temperature); &#125; &#125;&#125; è§‚å¯Ÿè€…çš„æ¥å£ 123public interface Observer &#123; void update(Integer temperature);&#125; é‚®ä»¶çš„è§‚å¯Ÿè€… 1234567public class EmailObserver implements Observer &#123; @Override public void update(Integer temperature) &#123; System.out.println(&quot;å‘é‚®ä»¶å‘Šè¯‰ç”¨æˆ·å¤©æ°”æ”¹å˜äº†ï¼Œå˜ä¸ºäº†&quot;+temperature); &#125;&#125; çŸ­ä¿¡è§‚å¯Ÿè€… 123456public class MsgObserver implements Observer&#123; @Override public void update(Integer temperature) &#123; System.out.println(&quot;å‘çŸ­ä¿¡å‘Šè¯‰ç”¨æˆ·æ°”æ¸©æ”¹å˜äº†ï¼Œå˜ä¸ºäº†&quot;+temperature); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼","date":"2022-03-02T09:24:31.000Z","updated":"2022-03-02T10:06:27.982Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œçš„ç®—æ³•éª¨æ¶ï¼Œå°†ä¸€äº›æ“ä½œå»¶è¿Ÿåˆ°å­ç±»å®ç°ã€‚Template Methodä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„åŸºç¡€ä¸Šå³å¯é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ å…¶å®è¯¥æ¨¡å¼å¾ˆç®€å•ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ç»™å­ç±»å»å®ç°ã€‚ å¤„ç†å™¨ 12345678910public abstract class Handler &#123; public void operation()&#123; System.out.println(&quot;åšå‰æœŸå‡†å¤‡&quot;); System.out.println(&quot;å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹å¤„ç†&quot;); doHandler(); System.out.println(&quot;å¤„ç†å®Œæ¯•&quot;); &#125; abstract void doHandler();&#125; å­—ç¬¦å¤„ç†å™¨ 123456public class CharHandler extends Handler&#123; @Override void doHandler() &#123; System.out.println(&quot;å°†å­—ç¬¦ä¸²è½¬åŒ–&quot;); &#125;&#125; å­—ç¬¦ä¸²å¤„ç†å™¨ 123456public class StringHandler extends Handler&#123; @Override void doHandler() &#123; System.out.println(&quot;å­—ç¬¦ä¸²è½¬åŒ–&quot;); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼","date":"2022-03-02T04:11:02.000Z","updated":"2022-03-02T10:19:04.792Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç­–ç•¥æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼çš„å˜åŒ–ç‹¬ç«‹äºç®—æ³•çš„ä½¿ç”¨è€… æœ‰ä¸€ä¸ªç”µå•†å¹³å°ï¼Œå½“ç”¨æˆ·æ¶ˆè´¹æ»¡1000å…ƒï¼Œæ ¹æ®vipç­‰çº§å¯äº«å—ä¼˜æƒ  æ™®é€šä¼šå‘˜ ä¸æ‰“æŠ˜ ç™½é“¶ä¼šå‘˜ ä¼˜æƒ 50å…ƒ é»„é‡‘ä¼šå‘˜ æ‰“8æŠ˜ ç™½é‡‘ä¼šå‘˜ ä¼˜æƒ 50å…ƒï¼Œå†æ‰“ä¸ƒæŠ˜ Version 1.0ä¼šå‘˜ç±»å‹æšä¸¾ 1234567891011121314151617181920public enum UserType &#123; /** * ORDINARY_VIP: æ™®é€šä¼šå‘˜ * SILVER_VIP: ç™½é“¶ä¼šå‘˜ * GOLD_VIPï¼š é»„é‡‘ä¼šå‘˜ * PLATINUM_VIPï¼šç™½é‡‘ä¼šå‘˜ */ ORDINARY_VIP(1), SILVER_VIP(2), GOLD_VIP(3), PLATINUM_VIP(4); private int code; UserType(int code) &#123; this.code = code; &#125; public int getCode() &#123; return code; &#125;&#125; 12345678910111213private static double getResult(long money, int type)&#123; double result = money; if(money &gt;= 1000)&#123; if(type == UserType.SILVER_VIP.getCode())&#123; result = money - 50; &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = money * 0.8; &#125;else if(type == UserType.PLATNUM_VIP.getCode())&#123; result = (money - 50)*0.7; &#125; &#125; return result;&#125; ä¸‹é¢ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ä¼˜åŒ– Version 1.2ç­–ç•¥æ¥å£ 123public interface Strategy &#123; double compute(long money);&#125; æ™®é€šä¼šå‘˜ 123456public class OrdinaryStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money; &#125;&#125; é»„é‡‘ä¼šå‘˜ 123456public class GoldStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money*0.8; &#125;&#125; ç™½é‡‘ä¼šå‘˜ 123456public class PlatinumStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125;&#125; ç™½é“¶ä¼šå‘˜ 123456public class SilverStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money-50; &#125;&#125; 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.112345678910111213public class StrategyFactory &#123; public static Map&lt;Integer,Strategy&gt; map; private StrategyFactory()&#123; map = new HashMap&lt;&gt;(); init(); &#125; private void init()&#123; map.put(UserType.ORDINARY_VIP.getCode(), new OrdinaryStrategy()); map.put(UserType.SILVER_VIP.getCode(), new SilverStrategy()); map.put(UserType.GOLD_VIP.getCode(),new GoldStrategy()); map.put(UserType.PLATINUM_VIP.getCode(),new PlatinumStrategy()); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125; è¿™é‡Œçš„å·¥å‚è¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç° Version 2.2ç­–ç•¥æ¥å£ 1234public interface Strategy &#123; double compute(long money); int getType();&#125; é»„é‡‘ä¼šå‘˜ 123456789101112public class GoldStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money*0.8; &#125; @Override public int getType() &#123; return UserType.GOLD_VIP.getCode(); &#125;&#125; æ™®é€šä¼šå‘˜ 1234567891011public class OrdinaryStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money; &#125; @Override public int getType() &#123; return UserType.ORDINARY_VIP.getCode(); &#125;&#125; ç™½é‡‘ä¼šå‘˜ 1234567891011public class PlatinumStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125; @Override public int getType() &#123; return UserType.PLATINUM_VIP.getCode(); &#125;&#125; ç™½é“¶ä¼šå‘˜ 1234567891011public class SilverStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money-50; &#125; @Override public int getType() &#123; return UserType.SILVER_VIP.getCode(); &#125;&#125; ç­–ç•¥å·¥å‚ 12345678910111213141516public class StrategyFactory &#123; private static Map&lt;Integer, Strategy&gt; map; public StrategyFactory() &#123; map=new HashMap&lt;&gt;(); init(); &#125; private void init() &#123; List&lt;Strategy&gt; strategies=new ArrayList&lt;&gt;(); strategies.add(new GoldStrategy()); strategies.add(new OrdinaryStrategy()); strategies.add(new PlatinumStrategy()); strategies.add(new SilverStrategy()); map=strategies.stream().collect(Collectors.toMap(Strategy::getType,strategy -&gt; strategy)); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®","slug":"ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®","date":"2022-03-01T08:49:22.000Z","updated":"2023-03-06T06:46:28.764Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/03/01/ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/03/01/%E3%80%9034-Medium%E3%80%91%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE/","excerpt":"","text":"åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚ è¿›é˜¶ï¼š ä½ å¯ä»¥è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8è¾“å‡ºï¼š[3,4] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6è¾“å‡ºï¼š[-1,-1] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [], target = 0è¾“å‡ºï¼š[-1,-1] æç¤ºï¼š 0 &lt;= nums.length &lt;= 105 -109 &lt;= nums[i] &lt;= 109 nums æ˜¯ä¸€ä¸ªéé€’å‡æ•°ç»„ -109 &lt;= target &lt;= 109 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ äºŒåˆ†æŸ¥æ‰¾1234567891011121314151617181920212223242526class Solution &#123; public int[] searchRange(int[] nums, int target) &#123; int first = binarySearch(nums, target); if (first == -1) &#123; return new int[]&#123;-1, -1&#125;; &#125; return new int[]&#123;first, binarySearch(nums, target + 1) - 1&#125;; &#125; private int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; int mid; while (left &lt;= right) &#123; mid = (left + right) &gt;&gt; 1; if (nums[mid] == target) &#123; right = mid - 1; &#125; else if (target &lt; nums[mid]) &#123; right = mid - 1; &#125; else &#123; left = mid + 1; &#125; &#125; return left; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼","date":"2022-03-01T03:31:14.000Z","updated":"2022-09-27T13:57:13.096Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/01/è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è£…é¥°è€…æ¨¡å¼å®šä¹‰ï¼šåœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œå°†åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Š è¿™ä¸ªå…¶å®å¤§å®¶åœ¨å¹³æ—¶å†™ä»£ç çš„æ—¶å€™å°±å·²ç»ç”¨è¿‡äº†ï¼Œåªæ˜¯ä¸çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæ¨¡å¼ ä¸‹é¢çœ‹ä¸€ä¸ªæ¡ˆä¾‹ æœ‰ä¸€ä¸ªç»„ä»¶çš„æ¥å£ï¼Œç„¶åæˆ‘æœ‰ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œç°åœ¨æˆ‘éœ€è¦åœ¨è¿™ä¸ªå…·ä½“å®ç°ç±»çš„åŸºç¡€ä¸Šè¿›è¡ŒåŠŸèƒ½æ‹“å±• ç»„ä»¶æ¥å£ 123public interface Component &#123; void operation();&#125; å…·ä½“æ¥å£å®ç° 123456public class ConcreteComponent implements Component&#123; @Override public void operation() &#123; System.out.println(&quot;å®ç°ç»„ä»¶åŠŸèƒ½&quot;); &#125;&#125; æ‹“å±•åŠŸèƒ½æŠ½è±¡ç±» 12345678public abstract class EnhanceComponent implements Component&#123; protected Component component; public EnhanceComponent(Component component) &#123; this.component = component; &#125;&#125; å…·ä½“å¢å¼ºç±» 1234567891011public class ConcreteEnhanceComponent extends EnhanceComponent&#123; public ConcreteEnhanceComponent(Component component) &#123; super(component); &#125; @Override public void operation() &#123; component.operation(); System.out.println(&quot;æ‹“å±•åŠŸèƒ½ä¸€&quot;); &#125;&#125; ä¼˜ç‚¹ï¼š ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹åŸæ¥çš„ç±»è¿›è¡Œå¢å¼º ä½¿ç”¨ä¸åŒçš„ç»„åˆå¯ä»¥å®ç°ä¸åŒçš„äººæ•ˆæœ ç¬¦åˆå¼€é—­åŸåˆ™","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼","date":"2022-03-01T03:10:43.000Z","updated":"2022-03-01T03:30:45.584Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/01/è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é€‚é…å™¨æ¨¡å¼å®šä¹‰ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºç”¨æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚è¿™ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å°±å¯ä»¥ä¸€èµ·å·¥ä½œäº† æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¨¡æ‹ŸUSBè½¬æ¥ç½‘çº¿å£ï¼Œä»è€Œä½¿ç”µè„‘ä¸Šç½‘çš„æ¡ˆä¾‹ ç½‘çº¿æ¥å£ 123public interface NetWorkThread &#123; void connectNetWork();&#125; åä¸ºçš„ç½‘çº¿ 123456public class HuaWeiNetWorkThread implements NetWorkThread&#123; @Override public void connectNetWork() &#123; System.out.println(&quot;åä¸ºç½‘çº¿è¿æ¥ç½‘ç»œï¼Œå¯ä»¥ä¸Šç½‘äº†&quot;); &#125;&#125; è‡ªåˆ¶çš„ç½‘çº¿ 123456public class CustomerNetWorkThread implements NetWorkThread&#123; @Override public void connectNetWork() &#123; System.out.println(&quot;è‡ªåˆ¶ç½‘çº¿ï¼Œå¯ä»¥ä¸Šç½‘äº†&quot;); &#125;&#125; é€‚é…å™¨ï¼ˆç½‘çº¿å£å˜ä¸ºUSBå£ï¼‰ 123public interface Adapter &#123; void netWorkToUSB();&#125; åä¸ºçš„é€‚é…å™¨ï¼ˆè½¬æ¥å£ï¼‰ 1234567891011121314151617public class HuaWeiAdapter implements Adapter&#123; private NetWorkThread netWorkThread; public void setNetWorkThread(NetWorkThread netWorkThread) &#123; this.netWorkThread = netWorkThread; &#125; @Override public void netWorkToUSB() &#123; if(netWorkThread==null)&#123; System.out.println(&quot;é€‚é…å™¨æ²¡æœ‰ç½‘çº¿æ’å…¥ï¼&quot;); return; &#125; System.out.println(&quot;åä¸ºé€‚é…å™¨é€‚é…äº†ç½‘çº¿&quot;); netWorkThread.connectNetWork(); &#125;&#125; ç”µè„‘ 123456789101112131415public class Computer &#123; private Adapter adapter; public void setAdapter(Adapter adapter) &#123; this.adapter = adapter; &#125; public void connectToNetWork()&#123; if(adapter!=null)&#123; adapter.netWorkToUSB(); &#125;else &#123; System.out.println(&quot;æ²¡æœ‰æ’ç½‘çº¿ï¼&quot;); &#125; &#125;&#125; å®¢æˆ·ç«¯ 12345678910111213public class Client &#123; public static void main(String[] args) &#123; Computer computer = new Computer(); computer.connectToNetWork(); System.out.println(&quot;===================&quot;); HuaWeiAdapter huaWeiAdapter = new HuaWeiAdapter(); computer.setAdapter(huaWeiAdapter); computer.connectToNetWork(); System.out.println(&quot;===================&quot;); huaWeiAdapter.setNetWorkThread(new HuaWeiNetWorkThread()); computer.connectToNetWork(); &#125;&#125; æ§åˆ¶å°è¾“å‡º 123456æ²¡æœ‰æ’ç½‘çº¿ï¼===================é€‚é…å™¨æ²¡æœ‰ç½‘çº¿æ’å…¥ï¼===================åä¸ºé€‚é…å™¨é€‚é…äº†ç½‘çº¿åä¸ºç½‘çº¿è¿æ¥ç½‘ç»œï¼Œå¯ä»¥ä¸Šç½‘äº†","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°","slug":"ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°","date":"2022-02-28T13:24:51.000Z","updated":"2023-03-06T06:45:38.796Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/02/28/ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/02/28/%E3%80%905-Medium%E3%80%91%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E6%95%B0/","excerpt":"","text":"æœ€é•¿å›æ–‡æ•°ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šs = &quot;babad&quot;è¾“å‡ºï¼š&quot;bab&quot;è§£é‡Šï¼š&quot;aba&quot; åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šs = &quot;cbbd&quot;è¾“å‡ºï¼š&quot;bb&quot; æç¤ºï¼š 1 &lt;= s.length &lt;= 1000 s ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ç»„æˆ Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ æ³•ä¸€ï¼šæš´åŠ›æšä¸¾123456789101112131415161718192021222324252627282930class Solution &#123; public String longestPalindrome(String s) &#123; if(s.length() &lt; 2)&#123; return s; &#125; char[] chars = s.toCharArray(); int begin = 0; int end = 0; for (int i = 0; i &lt; s.length() - 1; i++) &#123; for (int j = i+1 ; j &lt; s.length(); j++) &#123; if((j - i + 1) &gt; (end - begin + 1) &amp;&amp; isValid(chars,i,j))&#123; begin = i; end = j; &#125; &#125; &#125; return s.substring(begin, end+1); &#125; private boolean isValid(char[] chars, int left, int right) &#123; while(left &lt; right)&#123; if(chars[left] != chars[right])&#123; return false; &#125; left++; right--; &#125; return true; &#125;&#125; æ³•äºŒï¼šä¸­å¿ƒæ‰©æ•£å°†æ¯â€ä¸€ä½â€ä½œä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ’’ï¼Œ æ¯æ¬¡æ‰©æ•£åˆ†ä¸¤ç§æƒ…å†µï¼Œ ç¬¬ä¸€ç§æƒ…å†µæ˜¯ä»¥å½“å‰é‚£ä¸€ä½ä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ•£ ç¬¬äºŒç§æƒ…å†µæ˜¯ä»¥å½“å‰é‚£ä¸€ä½å’Œä¸‹ä¸€ä½ä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ•£ å–è¿™ä¸¤ç§æƒ…å†µçš„æœ€å€¼max å¦‚æœmaxæ¯”maxLenå¤§çš„è¯ï¼Œè®¡ç®—å¾—å‡ºbeginâ€˜ æœ€åç›´æ¥è¿”å›æˆªå–çš„å­—ç¬¦ä¸² è¿™æ˜¯æˆ‘çš„è§£æ³• 12345678910111213141516171819202122232425class Solution &#123; public String longestPalindrome(String s)&#123; if (s.length() &lt; 2) &#123; return s; &#125; int begin = 0; int maxLen = 1; for (int i = 0; i &lt; s.length(); i++) &#123; int max = Math.max(expand(s,i,i),expand(s,i,i+1)); if(max &gt; maxLen)&#123; maxLen = max; begin = i - (max - 1)/2; &#125; &#125; return s.substring(begin, maxLen+begin); &#125; public int expand(String s, int left, int right) &#123; while(left&gt;=0 &amp;&amp; right&lt;s.length() &amp;&amp; s.charAt(left) == s.charAt(right))&#123; left--; right++; &#125; return right - left - 1; &#125;&#125; è¿™æ˜¯å®˜æ–¹çš„è§£æ³• 1234567891011121314151617181920212223242526class Solution &#123; public String longestPalindrome(String s) &#123; if (s == null || s.length() &lt; 1) &#123; return &quot;&quot;; &#125; int start = 0, end = 0; for (int i = 0; i &lt; s.length(); i++) &#123; int len1 = expandAroundCenter(s, i, i); int len2 = expandAroundCenter(s, i, i + 1); int len = Math.max(len1, len2); if (len &gt; end - start) &#123; start = i - (len - 1) / 2; end = i + len / 2; &#125; &#125; return s.substring(start, end + 1); &#125; public int expandAroundCenter(String s, int left, int right) &#123; while (left &gt;= 0 &amp;&amp; right &lt; s.length() &amp;&amp; s.charAt(left) == s.charAt(right)) &#123; --left; ++right; &#125; return right - left - 1; &#125;&#125; æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’å¯¹äºä¸€ä¸ªå­ä¸²è€Œè¨€ï¼Œå¦‚æœå®ƒæ˜¯å›æ–‡ä¸²ï¼Œå¹¶ä¸”é•¿åº¦å¤§äº 2ï¼Œé‚£ä¹ˆå°†å®ƒé¦–å°¾çš„ä¸¤ä¸ªå­—æ¯å»é™¤ä¹‹åï¼Œå®ƒä»ç„¶æ˜¯ä¸ªå›æ–‡ä¸²ã€‚ ä¾‹å¦‚å¯¹äºå­—ç¬¦ä¸² â€œababaâ€™â€ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“ â€œbabâ€ æ˜¯å›æ–‡ä¸²è¿™å±‚å…³ç³»ï¼Œé‚£ä¹ˆ â€œababaâ€ ä¸€å®šæ˜¯å›æ–‡ä¸²ï¼Œè¿™æ˜¯å› ä¸ºå®ƒçš„é¦–å°¾ä¸¤ä¸ªå­—æ¯éƒ½æ˜¯a ä½¿ç”¨dp[][]äºŒä½æ•°ç»„æ¥å­˜å‚¨è¿™å±‚å…³ç³» å³ä½¿ç”¨dp[i][j]æ¥è¡¨ç¤ºså­—ç¬¦ä¸²çš„iåˆ°jæ˜¯å¦æ˜¯å›æ–‡æ•° å¦‚æœå½“å‰è¦åˆ¤æ–­çš„èŒƒå›´æ˜¯dp[left][right]ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸ºx ç¬¬ä¸€æ­¥å…ˆçœ‹é¦–å°¾æ˜¯å¦ä¸€è‡´ï¼Œ å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™dp[left][right]ç›´æ¥ä¸ºfalseï¼Œ å¦‚æœä¸€è‡´ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥åˆ¤æ–­ å¦‚æœå½“å‰åˆ¤æ–­çš„å­—ç¬¦ä¸²é•¿åº¦å°äº3 ä¸ºä»€ä¹ˆæ˜¯3å‘¢ï¼Ÿ å¦‚æœé•¿åº¦ä¸º1ï¼Œåˆ™æœ¬èº«å°±æ˜¯å­—ç¬¦ä¸²ï¼Œå½¢æˆè‡ªå›æ–‡ å¦‚æœé•¿åº¦ä¸º2ï¼Œåˆ™é¦–å°¾ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­ä¸ºå›æ–‡ å¦‚æœé•¿åº¦ä¸º3ï¼Œåˆ™é¦–å°¾ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ¤æ–­å›æ–‡ è¿™ä¸‰ç»„æ•°æ®æ˜¯åé¢åšåˆ¤æ–­çš„æ”¯æ’‘ åˆ™ç›´æ¥å°†dp[left][right]èµ‹å€¼ä¸ºtrue åä¹‹å°†dp[left+1][right-1]ï¼ˆå³å»æ‰é¦–å°¾çš„æ—¶å€™æ˜¯å¦ä¸ºå›æ–‡æ•°ï¼‰çš„å›æ–‡ç»“æ„èµ‹å€¼ç»™dp[i][j] è¿™äº›ç»“æŸåï¼Œå½“dp[left][right]æ˜¯trueæ—¶ï¼Œ åˆ™å°†å½“å‰å¾ªç¯é•¿åº¦å’Œå­˜å‚¨çš„maxLenè¿›è¡Œæ¯”è¾ƒï¼Œ å¦‚æœå½“å‰å¾ªç¯é•¿åº¦è¾ƒå¤§ï¼Œåˆ™å°†å…¶èµ‹å€¼ç»™maxLenï¼Œå°†leftèµ‹å€¼ç»™begin åä¹‹ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ å®˜æ–¹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class Solution &#123; public String longestPalindrome(String s) &#123; int len = s.length(); if (len &lt; 2) &#123; return s; &#125; int maxLen = 1; int begin = 0; // dp[i][j] è¡¨ç¤º s[i..j] æ˜¯å¦æ˜¯å›æ–‡ä¸² boolean[][] dp = new boolean[len][len]; // åˆå§‹åŒ–ï¼šæ‰€æœ‰é•¿åº¦ä¸º 1 çš„å­ä¸²éƒ½æ˜¯å›æ–‡ä¸² for (int i = 0; i &lt; len; i++) &#123; dp[i][i] = true; &#125; char[] charArray = s.toCharArray(); // é€’æ¨å¼€å§‹ // å…ˆæšä¸¾å­ä¸²é•¿åº¦ for (int L = 2; L &lt;= len; L++) &#123; // æšä¸¾å·¦è¾¹ç•Œï¼Œå·¦è¾¹ç•Œçš„ä¸Šé™è®¾ç½®å¯ä»¥å®½æ¾ä¸€äº› for (int i = 0; i &lt; len; i++) &#123; // ç”± L å’Œ i å¯ä»¥ç¡®å®šå³è¾¹ç•Œï¼Œå³ j - i + 1 = L å¾— int j = L + i - 1; // å¦‚æœå³è¾¹ç•Œè¶Šç•Œï¼Œå°±å¯ä»¥é€€å‡ºå½“å‰å¾ªç¯ if (j &gt;= len) &#123; break; &#125; if (charArray[i] != charArray[j]) &#123; dp[i][j] = false; &#125; else &#123; if (j - i &lt; 3) &#123; dp[i][j] = true; &#125; else &#123; dp[i][j] = dp[i + 1][j - 1]; &#125; &#125; // åªè¦ dp[i][L] == true æˆç«‹ï¼Œå°±è¡¨ç¤ºå­ä¸² s[i..L] æ˜¯å›æ–‡ï¼Œæ­¤æ—¶è®°å½•å›æ–‡é•¿åº¦å’Œèµ·å§‹ä½ç½® if (dp[i][j] &amp;&amp; j - i + 1 &gt; maxLen) &#123; maxLen = j - i + 1; begin = i; &#125; &#125; &#125; return s.substring(begin, begin + maxLen); &#125;&#125; ä¸‹é¢æ˜¯æˆ‘ç†è§£æ€è·¯åå†™çš„ å¯¹äºå˜é‡çš„å‘½åæ›´è´´è¿‘å…¶æœ¬èº«çš„å«ä¹‰ å¯èƒ½ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ 1234567891011121314151617181920212223242526272829303132333435363738public String longestPalindrome1(String s) &#123; int len = s.length(); if(len &lt; 2)&#123; return s; &#125; int begin = 0; int maxLen = 1; char[] chars = s.toCharArray(); boolean[][] dp = new boolean[len][len]; // dp[i][j]å³è¡¨ç¤ºs[i..j]æ˜¯å¦ä¸ºå›æ–‡æ•° // å¯¹è§’çº¿å³ä¸ºæ¯ä¸ªå­—ç¬¦æœ¬èº«é‚£å°±å¯ä»¥ç›´æ¥åˆå§‹åŒ–ä¸ºtrue // ä¹Ÿå¯ä»¥ä¸åˆå§‹åŒ–è¿™ä¸ªï¼Œä½†æ˜¯ä¸ºäº†è¯­ä¹‰å®Œæ•´ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Š for (int i = 0; i &lt; len; i++) &#123; dp[i][i] = true; &#125; //xè¡¨ç¤ºé•¿åº¦ï¼Œä»é•¿åº¦ä¸º2å¼€å§‹ï¼Œå› ä¸ºé•¿åº¦ä¸º1çš„æƒ…å†µå¯ä»¥ç›´æ¥åˆ¤æ–­ for (int x = 2 ; x &lt;= len; x++) &#123; //å¾ªç¯æ¬¡æ•°ä¸ºæ€»é•¿åº¦å‡å½“å‰å¾ªç¯çš„é•¿åº¦å†åŠ ä¸€ for (int left = 0; left &lt; len - x + 1; left++) &#123; //x=right-left+1 int right = x + left - 1; if(chars[left] != chars[right])&#123; dp[left][right] = false; &#125;else &#123; if(x &lt; 4)&#123; dp[left][right] = true; &#125;else &#123; dp[left][right] = dp[left+1][right-1]; &#125; &#125; if(dp[left][right] &amp;&amp; x &gt; maxLen)&#123; begin = left; maxLen = x; &#125; &#125; &#125; return s.substring(begin, maxLen+begin);&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å…³äºæƒé™ä¿®é¥°ç¬¦protected","slug":"å…³äºæƒé™ä¿®é¥°ç¬¦protected","date":"2022-02-28T10:05:05.000Z","updated":"2022-10-04T13:56:03.490Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/28/å…³äºæƒé™ä¿®é¥°ç¬¦protected/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/28/%E5%85%B3%E4%BA%8E%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6protected/","excerpt":"","text":"æƒé™ä¿®é¥°ç¬¦æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹javaä¸­çš„æƒé™ä¿®é¥°ç¬¦ æƒé™ä¿®é¥°ç¬¦ åŒç±» åŒåŒ… å­ç±» å…¶ä»–åŒ… public âˆš âˆš âˆš âˆš protected âˆš âˆš âˆš Ã— default âˆš âˆš Ã— Ã— private âˆš Ã— Ã— Ã— å¯¹äºpublicå’Œprivateå¤§å®¶éƒ½å¾ˆäº†è§£äº†ï¼Œä½†æ˜¯å¯¹äºprotectedï¼Œå¤§å®¶å¯èƒ½å¯¹å®ƒçš„æ¦‚å¿µå¯èƒ½å°±ä¸€å¥è¯ï¼šè¢«protectedä¿®é¥°çš„æˆå‘˜å¯¹äºæœ¬åŒ…å’Œå…¶å­ç±»å¯è§ã€‚ è¯¥æƒé™ä¿®é¥°ç¬¦çš„å…³é”®æ˜¯ åŸºç±»çš„protectedæˆå‘˜å±æ€§æ˜¯åŒ…å†…å¯è§çš„ï¼Œå¹¶ä¸”å¯¹æ‰€æœ‰å­ç±»å¯è§ è‹¥å­ç±»ä¸åŸºç±»ä¸åœ¨åŒä¸€åŒ…ä¸‹ï¼Œåˆ™åœ¨å­ç±»ä¸­ï¼Œå­ç±»å®ä¾‹å¯ä»¥è®¿é—®ä»åŸºç±»ç»§æ‰¿æ¥çš„protectedæ–¹æ³•ï¼Œè€Œä¸èƒ½è®¿é—®åŸºç±»å®ä¾‹çš„protectedæ–¹æ³• é‡åˆ°protected é¦–å…ˆæ€è€ƒè¿™ä¸ªprotectedæ¥è‡ªä½•æ–¹ æ¥ç€çœ‹å…¶å’Œè¿™ä¸ªåœ°æ–¹æ˜¯ä¸æ˜¯åŒåŒ… æœ€åçœ‹å…¶æ˜¯å¦æœ‰çˆ¶å­ç±»å…³ç³» å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªTestæ¥æŒæ¡protectedçš„ç”¨æ³• æ³¨æ„ï¼šè§‚å¯ŸåŒ…é™å®šå æ¨¡å‹ 12345678910package com.lizhi.protect.p1;public class Feather1 &#123; protected void f()&#123;&#125; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125;&#125; 1234package com.lizhi.protect.p1;public class Son1 extends Feather1&#123;&#125; 123456package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;public class Son11 extends Feather1 &#123;&#125; æµ‹è¯• 1234567891011121314151617package com.lizhi.protect.p1;import com.lizhi.protect.p11.Son11;public class Test &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ feather1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ feather1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ &#125;&#125; æµ‹è¯• 12345678910111213141516171819package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;import com.lizhi.protect.p1.Son1;import com.lizhi.protect.p11.Son11;public class Test &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son2.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son2.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» feather1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» feather1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» &#125;&#125; æµ‹è¯• 123456789101112131415161718package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;import com.lizhi.protect.p1.Son1;public class Son11 extends Feather1 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ‰€åœ¨çš„åœ°æ–¹æ˜¯Feather1çš„å­ç±» son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ‰€åœ¨çš„åœ°æ–¹æ˜¯Feather1çš„å­ç±» feather1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ feather1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ son1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ son1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ &#125;&#125; æµ‹è¯• 1234567891011121314151617181920212223package com.lizhi.protect.p1;import com.lizhi.protect.p11.Son11;public class Feather1 &#123; protected void f()&#123;&#125; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» feather1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» feather1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» &#125;&#125; æµ‹è¯• 12345678910package com.lizhi.protect.p4;import com.lizhi.protect.p44.Test4;public class MyObject4 extends Test4&#123; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125;&#125; 12345678910package com.lizhi.protect.p44;import com.lizhi.protect.p4.MyObject4;public class Test4 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; MyObject4 myObject4 = new MyObject4(); myObject4.clone();//ç¼–è¯‘ä¸é€šè¿‡ &#125;&#125; è¯´æ˜ï¼šmyobject4çš„cloneç›´æ¥æ¥è‡ªMyObject4ç±»æœ¬èº« å…¶èŒƒå›´æ˜¯MyObjcet4çš„å­ç±»ä¸å…¶åŒåŒ…çš„ç±» Test4éƒ½ä¸æ»¡è¶³ æ‰€ä»¥ç¼–è¯‘ä¸é€šè¿‡ æµ‹è¯• 1234567package com.lizhi.protect.p4;import com.lizhi.protect.p44.Test4;public class MyObject4 extends Test4&#123; &#125; 12345678910package com.lizhi.protect.p44;import com.lizhi.protect.p4.MyObject4;public class Test4 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; MyObject4 myObject4 = new MyObject4(); myObject4.clone();//ç¼–è¯‘é€šè¿‡ &#125;&#125; è¯´æ˜ï¼šmyobject4çš„cloneç›´æ¥æ¥æºäºTest4 èŒƒå›´æ˜¯Test4å­ç±»åŠå…¶åŒåŒ…çš„ç±» æ»¡è¶³ä¸å…¶åŒåŒ… ç¼–è¯‘é€šè¿‡","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼","date":"2022-02-28T00:38:22.000Z","updated":"2022-02-28T00:59:19.367Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/28/è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é—¨é¢æ¨¡å¼å®šä¹‰ï¼šä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„é«˜å±‚æ¥å£ï¼Œä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ å®ç°å­ç³»ç»Ÿ1 12345public class System1 &#123; public void operateA()&#123; System.out.println(&quot;å­ç³»ç»Ÿ1çš„Aæ“ä½œ&quot;); &#125;&#125; å­ç³»ç»Ÿ2 12345public class System2 &#123; public void operateB()&#123; System.out.println(&quot;å­ç³»ç»Ÿ2çš„Bæ“ä½œ&quot;); &#125;&#125; å­ç³»ç»Ÿ3 12345public class System3 &#123; public void operateC()&#123; System.out.println(&quot;å­ç³»ç»Ÿ3çš„Cæ“ä½œ&quot;); &#125;&#125; ç³»ç»Ÿé—¨é¢ 1234567891011public class SystemFacade &#123; private System1 system1 = new System1(); private System2 system2 = new System2(); private System3 system3 = new System3(); public void operateABC()&#123; system1.operateA(); system2.operateB(); system3.operateC(); &#125;&#125; å®¢æˆ·ç«¯è°ƒç”¨ 12345public class Client &#123; public static void main(String[] args) &#123; new SystemFacade().operateABC(); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼","date":"2022-02-26T05:05:48.000Z","updated":"2022-02-28T00:36:16.964Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/26/è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"äº«å…ƒæ¨¡å¼å®šä¹‰ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ ä¼˜ç‚¹ï¼šå¦‚æœç³»ç»Ÿæœ‰å¤§é‡ç±»ä¼¼çš„å¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„å†…å­˜å’ŒCPUèµ„æº å®ç°åœºæ™¯ï¼šå‡å¦‚æˆ‘è¦å¼€å‘ä¸€æ¬¾æ¸¸æˆï¼Œç„¶åæ¸¸æˆé‡Œé¢çš„åœ°å›¾æœ‰å¾ˆå¤šæ ‘æœ¨ è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åˆ›å»ºå‡ ä¸‡ä¸ªæ ‘çš„å¯¹è±¡ Tree 123456@Data@AllArgsConstructor@ToStringpublic class Tree &#123; private final String name;&#125; TreeNode 1234567@Data@AllArgsConstructorpublic class TreeNode &#123; private final Tree tree; private int x; private int y;&#125; TreeFactory 12345678910111213public class TreeFactory &#123; private static ConcurrentHashMap&lt;String, Tree&gt; map = new ConcurrentHashMap&lt;&gt;(); public static Tree getTree(String name)&#123; if(map.containsKey(name))&#123; return map.get(name); &#125; return null; &#125; public static void addTree(String name)&#123; map.put(name,new Tree(name)); &#125;&#125; ä¸»å‡½æ•° 123456789public static void main(String[] args) &#123; TreeFactory.addTree(&quot;æ¢§æ¡æ ‘&quot;); TreeFactory.addTree(&quot;é¦™æ¨Ÿæ ‘&quot;); TreeFactory.addTree(&quot;é“¶ææ ‘&quot;); TreeFactory.addTree(&quot;é¢åŒ…æ ‘&quot;); TreeNode treeNode1 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,1); TreeNode treeNode2 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,2); TreeNode treeNode3 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,3);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©","slug":"Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©","date":"2022-02-25T13:37:11.000Z","updated":"2022-10-04T13:54:23.136Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E5%92%8C%E9%9B%AA%E5%B4%A9/","excerpt":"","text":"ç¼“å­˜ç©¿é€å’Œé›ªå´©ç¼“å­˜çš„æ—¶å€™ï¼Œå¤§å¤§æé«˜äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯æ•°æ®æŸ¥è¯¢æ–¹é¢ã€‚ä½†åŒæ—¶ï¼Œå®ƒå¸¦æ¥å¥½å¤„çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†é—®é¢˜ã€‚ ç¼“å­˜ç©¿é€å’Œé›ªå´©å°±æ˜¯ä¸¤ä¸ªç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶ä¸šç•Œä¹Ÿå·²ç»æœ‰äº†æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆ ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰æ¦‚å¿µï¼šç¼“å­˜ç©¿é€çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œç”¨æˆ·æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‘ç°Rediså†…å­˜æ•°æ®åº“ä¸­æ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯å»æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ã€‚å‘ç°ä¹Ÿæ²¡æœ‰ï¼Œäºæ˜¯æœ¬æ¬¡æŸ¥è¯¢å¤±è´¥ã€‚å½“è¿™ç§æŸ¥è¯¢æƒ…å†µå¾ˆå¤šçš„æ—¶å€™ï¼Œç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œéƒ½æ—¶å»è¯·æ±‚äº†æŒä¹…å±‚æ•°æ®åº“ã€‚å°±æ˜¯æ„å‘³ç€è¯¥ç¼“å­˜æ— ç”¨ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜ç©¿é€ã€‚ è§£å†³æ–¹æ¡ˆï¼š å¸ƒéš†è¿‡æ»¤å™¨ å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯¹æ‰€æœ‰èƒ½æŸ¥è¯¢åˆ°çš„å‚æ•°ä»¥hashçš„å½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™è¯¥è¯·æ±‚ç›´æ¥ä¸¢å¼ƒï¼Œä»è€Œè§£å†³é—®é¢˜ ç½®ç©ºç¼“å­˜ å½“å­˜å‚¨å±‚æœªå‘½ä¸­çš„æ—¶å€™ï¼ŒåŠæ—¶è¿”å›çš„æ˜¯nullå¯¹è±¡ï¼Œç¼“å­˜ä¹Ÿå°†å…¶å­˜å‚¨èµ·æ¥åŒæ—¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œä¿æŠ¤äº†mysql é—®é¢˜ï¼š æœ‰å¯èƒ½ä¼šå­˜æ”¾å¾ˆå¤šå¾ˆå¤šå€¼ä¸ºç©ºçš„é”®å€¼å¯¹ï¼Œæµªè´¹æ–‡ä»¶ åŠæ—¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯å¦‚æœmysqlåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´è¿˜æ²¡åˆ°çš„æ—¶å€™ï¼Œå·²ç»æœ‰æŸ¥è¯¢ç»“æœäº†ï¼Œä½†æ˜¯å› ä¸ºè¿‡æœŸæ—¶é—´æ²¡åˆ°ï¼Œå´è¿˜æ˜¯è®¿é—®ä¸äº†mysqlï¼Œä»è€ŒæŸ¥è¯¢åˆ°æ•°æ® ç¼“å­˜å‡»ç©¿ï¼ˆæŸ¥å¾—å¤ªå¤šäº†ï¼‰æ¦‚è¿°ï¼šè¿™é‡Œéœ€è¦æ³¨æ„å’Œç¼“å­˜å‡»ç©¿çš„åŒºåˆ«ï¼Œç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡ä¸€ä¸ªkeyåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚å½“æŸä¸ªkeyåœ¨è¿‡æœŸçš„ç¬é—´ï¼Œæœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®ï¼Œè¿™ç±»æ•°æ®ä¸€èˆ¬æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œç”±äºç¼“å­˜è¿‡æœŸï¼Œä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼Œå¹¶ä¸”å›å†™ç¼“å­˜ï¼Œä¼šå¯¼ä½¿æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ã€‚è§£å†³æ–¹æ¡ˆï¼š è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸï¼Œä»ç¼“å­˜å±‚é¢æ¥çœ‹ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°çƒ­ç‚¹ key è¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜ã€‚ åŠ äº’æ–¥é”åˆ†å¸ƒå¼é”ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹äºæ¯ä¸ªkeyåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ é›ªå´©æ¦‚å¿µï¼šæŒ‡çš„æ˜¯åœ¨æŸä¸€æ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆæˆ–è€…é›†ä¸­å®•æœº æ­£å¸¸ï¼š é›ªå´©ï¼š å¦‚æœæ˜¯è‡ªç„¶keyè¿‡æœŸï¼Œå€’æ˜¯å½±å“ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœæ˜¯èŠ‚ç‚¹å®•æœºæˆ–è€…æ–­ç”µï¼Œè¿™å°±å¾ˆæœ‰å¯èƒ½ä¼šå°†æ•°æ®åº“å†²å® è§£å†³æ–¹æ¡ˆï¼š redisé›†ç¾¤ é™æµé™çº§ï¼šåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹ä¸ªæ•° æ•°æ®é¢„çƒ­ï¼šåœ¨æ­£å¼éƒ¨ç½²å‰ï¼Œå…ˆæŠŠå¯èƒ½çš„æ•°æ®é¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·çš„è¯å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­å»ï¼Œåœ¨å³å°†å‘ç”Ÿé«˜å¹¶å‘è®¿é—®å‰ï¼Œæ‰‹åŠ¨è§¦å‘åŠ è½½å™¨ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜è¿‡æœŸæ—¶é—´ç‚¹æ¯”è¾ƒå‡åŒ€","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-ä¸»ä»å¤åˆ¶","slug":"Redis-ä¸»ä»å¤åˆ¶","date":"2022-02-25T03:40:53.000Z","updated":"2022-10-04T13:54:59.148Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-ä¸»ä»å¤åˆ¶/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/","excerpt":"","text":"ä¸»ä»å¤åˆ¶ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨ä¸­çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ä¸Šã€‚ å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master&#x2F;leader)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave&#x2F;follower) æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚Masterä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ã€‚ ä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹(æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ ä½œç”¨ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬ï¼š 1ã€æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚2ã€æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤3ã€è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚4ã€é«˜å¯ç”¨ï¼ˆé›†ç¾¤ï¼‰åŸºçŸ³ï¼šä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µæ¨¡å¼å’Œéƒ¨ç½²é›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè¦å°†Redisè¿ç”¨äºå·¥ç¨‹é¡¹ç›®ä¸­ï¼Œåªä½¿ç”¨ä¸€å°Redisæ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼Œæœ€å°‘ä¸‰å°ï¼ˆä¸€ä¸»äºŒä»ï¼‰ â€‹ 1ã€ä»ç»“æ„ä¸Šï¼Œå•ä¸ªRedisæœåŠ¡å™¨ä¼šå‘ç”Ÿå•ç‚¹æ•…éšœï¼Œå¹¶ä¸”ä¸€å°æœåŠ¡å™¨éœ€è¦å¤„ç†æ‰€æœ‰çš„è¯·æ±‚è´Ÿè½½ï¼Œå‹åŠ›è¾ƒå¤§â€‹ 2ã€ä»å®¹é‡ä¸Šï¼Œä¸èƒ½å°†ä¸€å°æœåŠ¡æ‰€æœ‰å†…å­˜ç”¨ä½œRediså­˜å‚¨å†…å­˜ï¼Œå•å°Redisæœ€å¤§ä½¿ç”¨å†…å­˜ä¸åº”è¯¥è¶…è¿‡20Gã€‚ é…ç½®å­èŠ‚ç‚¹æˆ‘ä»¬è¿™é‡Œä½¿ç”¨dockeræ¥åš 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586# å¤åˆ¶ä¸¤ä»½é…ç½®æ–‡ä»¶ç»™ä»èŠ‚ç‚¹é•œåƒä½¿ç”¨[root@iZbp18qscowpmxk6xpk38iZ redis]# lsredis-01.conf redis-02.conf redis.conf# éœ€è¦ä¿®æ”¹è¿™ä¸‰ä»½æ–‡ä»¶ï¼Œå°†ç»‘å®šæœ¬åœ°çš„é…ç½®æ³¨é‡Šæ‰ï¼Œå…³é—­å®‰å…¨æ¨¡å¼# åˆ†åˆ«ä»¥åå°æ–¹å¼å¯åŠ¨ä¸¤ä¸ªä»èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -P -it -d -v /home/redis/redis-01.conf:/etc/redis/redis.conf --name=salveRedis01 redisa593c51bc1100e892f5d18c34ba5a05f637d1b3a4a29e5840cfeb18a633355f5[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -P -it -d -v /home/redis/redis-02.conf:/etc/redis/redis.conf --name=salveRedis02 redis08833de79be2cf719402b4f4cf42bf06d0f0a84a22e188f2b2f4d03f54ca48c1# æŸ¥çœ‹æ˜ å°„ç«¯å£ï¼Œè¿™é‡Œä¸€å®šä¸€å®šè¦æ³¨æ„ï¼ï¼æœåŠ¡å™¨è¦å¼€å®‰å…¨ç»„ï¼ï¼ï¼ä¸ç„¶å°±æ˜¯è¿æ¥å¤±è´¥å“ï¼ï¼ï¼[root@iZbp18qscowpmxk6xpk38iZ redis]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESa593c51bc110 redis &quot;docker-entrypoint.sâ€¦&quot; 24 minutes ago Up About a minute 0.0.0.0:49169-&gt;6379/tcp salveRedis0108833de79be2 redis &quot;docker-entrypoint.sâ€¦&quot; 24 minutes ago Up About a minute 0.0.0.0:49170-&gt;6379/tcp salveRedis020e9919007f5d redis &quot;docker-entrypoint.sâ€¦&quot; 38 minutes ago Up 2 minutes 0.0.0.0:49168-&gt;6379/tcp masterRedis# æŸ¥çœ‹ä¸»èŠ‚ç‚¹çš„åŸºæœ¬ä¿¡æ¯[root@iZbp18qscowpmxk6xpk38iZ ~]# docker exec -it masterRedis redis-cli127.0.0.1:6379&gt; info replication# Replicationrole:master # å½“å‰èŠ‚ç‚¹çš„è§’è‰²connected_slaves:0 # å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹master_failover_state:no-failovermaster_replid:f37ca91dd3b3578e83031f9ea087d64f9994dd9amaster_replid2:0000000000000000000000000000000000000000master_repl_offset:0second_repl_offset:-1repl_backlog_active:0repl_backlog_size:1048576repl_backlog_first_byte_offset:0repl_backlog_histlen:0# è¿›å…¥å­èŠ‚ç‚¹1å·çš„å®¢æˆ·ç«¯ï¼Œå¹¶é…ç½®çˆ¶èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker exec -it salveRedis01 redis-cli127.0.0.1:6379&gt; SLAVEOF 116.62.151.26 49168OK127.0.0.1:6379&gt; role1) &quot;slave&quot;2) &quot;116.62.151.26&quot;3) (integer) 491684) &quot;connected&quot; #è¯´æ˜è¿æ¥æˆåŠŸï¼Œå¦‚æœæ²¡å¼€å®‰å…¨ç»„çš„è¯ï¼Œè¿™ä¸€è¡Œä¼šæ˜¯connectingä¸‹ä¸€è¡Œæ˜¯-1ï¼Œè¡¨ç¤ºè¿æ¥å¤±è´¥5) (integer) 42# è¿›å…¥å­èŠ‚ç‚¹2å·çš„å®¢æˆ·ç«¯ï¼Œå¹¶é…ç½®çˆ¶èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker exec -it salveRedis02 redis-cli127.0.0.1:6379&gt; SLAVEOF 116.62.151.26 49168OK127.0.0.1:6379&gt; role1) &quot;slave&quot;2) &quot;116.62.151.26&quot;3) (integer) 491684) &quot;connected&quot;5) (integer) 112# æŸ¥çœ‹çˆ¶èŠ‚ç‚¹çš„åŸºæœ¬ä¿¡æ¯127.0.0.1:6379&gt; info replication# Replicationrole:masterconnected_slaves:2 # ä¸¤ä¸ªå­èŠ‚ç‚¹slave0:ip=116.62.151.26,port=6379,state=online,offset=112,lag=0slave1:ip=116.62.151.26,port=6379,state=online,offset=112,lag=1master_failover_state:no-failovermaster_replid:92ee701d04326eb2c74d8de1ea0fc2ec010f97dfmaster_replid2:0000000000000000000000000000000000000000master_repl_offset:112second_repl_offset:-1repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:1repl_backlog_histlen:112# åœ¨çˆ¶èŠ‚ç‚¹æµ‹è¯•æ˜¯å¦æ•°æ®åŒæ­¥127.0.0.1:6379&gt; keys *(empty array)127.0.0.1:6379&gt; set k1 v1OK# å­èŠ‚ç‚¹1å·æŸ¥è¯¢127.0.0.1:6379&gt; get k1&quot;v1&quot;# å­èŠ‚ç‚¹2å·æŸ¥è¯¢127.0.0.1:6379&gt; get k1&quot;v1&quot; ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çˆ¶èŠ‚ç‚¹ 123456# é…ç½®ä¸»èŠ‚ç‚¹çš„ipçš„ç«¯å£slaveof ä¸»æœºip ç«¯å£# å¦‚æœä¸»æœºä½¿ç”¨äº†config set masterauth passwordï¼Œæˆ–è€…ä¸»æœºé…ç½®æ–‡ä»¶ä¸­ requirepass password# åˆ™è¿™é‡Œé…ç½®æ–‡ä»¶å°±è¦åŠ ä¸Šä¸»æœºçš„å¯†ç æ¥éªŒè¯masterauth password ä¸»æœºå¯ä»¥å†™å…¥ä¹Ÿå¯ä»¥è¯»å–ï¼Œä½†æ˜¯ä»èŠ‚ç‚¹æ˜¯ä¸å¯ä»¥å†™å…¥çš„ï¼Œåªå¯ä»¥è¯»å–ä¸»èŠ‚ç‚¹å†™å…¥çš„å€¼ 12127.0.0.1:6379&gt; set k2 v2(error) READONLY You can&#x27;t write against a read only replica. ä¸»æœºå®•æœºäº†ä¹‹åï¼Œä»æœºä¾æ—§å¯ä»¥è¯»ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼Œå°±ä¸èƒ½å¾€é‡Œé¢å†™å…¥æ•°æ®äº†ã€‚ ï¼ˆè¿™é‡Œéœ€è¦ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼Œå³å½“ä¸»æœºå®•æœºåï¼Œä»æœºä¸­ä¼šé€‰ä¸¾å‡ºæ¥ä¸€ä¸ªä¸»æœºï¼Œè¿™æ ·çš„è¯å°±ä¿ç•™äº†å†™å…¥æ“ä½œï¼‰ å½“ä¸»æœºæ¢å¤è¿è¡Œï¼Œåˆ™æ¢å¤å†™å…¥åŠŸèƒ½ ä»æœºå®•æœºçš„è¯ï¼Œå¯¹ä¸»æœºæ²¡æœ‰ä»»ä½•å½±å“ å½“ä»æœºè¿è¡Œåï¼Œå°±æ¢å¤ä¸»æœºä¸­çš„æ•°æ® å¤åˆ¶åŸç†Slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€ä¸€ä¸ªsyncå‘½ä»¤ Master æ¥åˆ°å‘½ä»¤ï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚ å…¨é‡å¤åˆ¶ï¼šslaveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ å¢é‡å¤åˆ¶ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ ä½†æ˜¯åªè¦æ˜¯é‡æ–°è¿æ¥masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶ï¼‰å°†è¢«è‡ªåŠ¨æ‰§è¡Œ ä¸»ä»è¿æ¥çš„å½¢å¼ ä¸€å¯¹å¤š é“¾çŠ¶ å“¨å…µï¼ˆSentinelï¼‰æ¨¡å¼è¯¥æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³å½“ä¸»æœºå®•æœºåï¼Œä»æœºç¾¤æ— æ³•æœ‰å†™å…¥æƒé™çš„é—®é¢˜ã€‚ è¯¥æ¨¡å¼ä¸‹ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå½“ä¸»æœºå®•æœºåï¼Œä»æœºç¾¤ä¸­ä¼šè‡ªç«‹ä¸€ä¸ªä¸»æœºï¼Œä»è€Œå°±æœ‰äº†å†™å…¥çš„åŠŸèƒ½ å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚ å…¶åŸç†å°±æ˜¯å“¨å…µé€šè¿‡å‘é€å‘½ä»¤ï¼Œç­‰å¾…redisæœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§å¤šä¸ªRediså®ä¾‹çš„åŠŸèƒ½ è¿™é‡Œçš„å“¨å…µæœ‰ä¸¤ä¸ªä½œç”¨ ç›‘æ§æœåŠ¡å™¨çš„çŠ¶æ€ å½“ä¸»æœºå®•æœºåï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå­èŠ‚ç‚¹ä½œä¸ºä¸»æœºï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä»–å­èŠ‚ç‚¹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ å½“ç„¶ï¼Œå¦‚æœå“¨å…µæŒ‚äº†æ€ä¹ˆåŠï¼Ÿæ‰€ä»¥éœ€è¦é…ç½®å¤šä¸ªå“¨å…µï¼Œç„¶åè¿™å‡ ä¸ªå“¨å…µå†äº’ç›¸ç›‘è§† å‡è®¾ä¸»æœåŠ¡å™¨å®•æœºï¼Œå“¨å…µ1å…ˆæ£€æµ‹åˆ°è¿™ä¸ªç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œé‡æ–°é€‰ä¸¾çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡ç§°ä¸ºä¸»è§‚ä¸‹çº¿ã€‚å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œfailoverï¼ˆæ•…éšœè½¬ç§»ï¼‰æ“ä½œã€‚ åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå®¢è§‚ä¸‹çº¿ã€‚ é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132# å“¨å…µè¿›ç¨‹çš„ç«¯å£port 26379# æ˜¯å¦ä»¥åå°è¿è¡Œdaemonize no# ç»‘å®šçš„çº¿ç¨‹pidfile /var/run/redis-sentinel.pid# æ—¥å¿—åç§°logfile &quot;&quot;# æ—¥å¿—ä¿å­˜ç›®å½•dir /tmp# é…ç½®ç›‘è§†è°# 2ä»£è¡¨è‡³å°‘è¦æœ‰ç»“æœå“¨å…µç¡®è®¤ä¸»æœºå®•æœºsentinel monitor mymaster 127.0.0.1 6379 2sentinel down-after-milliseconds mymaster 30000acllog-max-len 128sentinel parallel-syncs mymaster 1sentinel failover-timeout mymaster 180000sentinel deny-scripts-reconfig yesSENTINEL resolve-hostnames noSENTINEL announce-hostnames no å¯åŠ¨å“¨å…µè¿›ç¨‹ 1[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -d -p 49103:26379 -v /home/redis/sentinel.conf:/etc/redis/sentinel.conf --name=sentinel redis redis-sentinel /etc/redis/sentinel.conf ä¼˜ç‚¹ï¼š ä¸»ä»å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå¯ç”¨æ€§ä¼šæ›´å¥½ ç¼ºç‚¹ï¼š redisä¸å¥½åœ¨çº¿æ‰©å®¹ å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®ä¼˜ç‚¹éº»çƒ¦","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-å‘å¸ƒè®¢é˜…","slug":"Redis-å‘å¸ƒè®¢é˜…","date":"2022-02-25T03:02:40.000Z","updated":"2022-10-04T13:54:19.293Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-å‘å¸ƒè®¢é˜…/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/","excerpt":"","text":"Rediså‘å¸ƒè®¢é˜…Rediså‘å¸ƒè®¢é˜…æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡çš„æ¨¡å¼ï¼šå‘å¸ƒè€…å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…æ¥æ”¶æ¶ˆæ¯ ä¸‰ä¸ªè§’è‰²ï¼šæ¶ˆæ¯å‘å¸ƒè€…ã€æ¶ˆæ¯æ¥æ”¶è€…ã€è®¢é˜…çš„é¢‘é“ å‘½ä»¤ ä½œç”¨ publish channel message å‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šé¢‘é“ psubscribe pattern [pattern..] è®¢é˜…ä¸€ä¸ªæˆ–è€…å¤šä¸ªç¬¦åˆç»™ç‚¹patternçš„é¢‘é“ pubsub subcommand [argument [argument..]] æŸ¥çœ‹è®¢é˜…å’Œå‘å¸ƒç³»ç»ŸçŠ¶æ€ punsubscribe [pattern [pattern..]] é€€è®¢æ‰€æœ‰ç¬¦åˆæ¨¡å¼çš„é¢‘é“ subscribe channel [channel..] è®¢é˜…æŒ‡å®šé¢‘é“ unsubscribe channel [channel..] é€€è®¢æŒ‡å®šé¢‘é“ ä¸‹é¢ç›´æ¥ä¸Šæ¡ˆä¾‹ï¼š å……å½“è®¢é˜…è€…çš„cli 12345127.0.0.1:6379&gt; SUBSCRIBE studyReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;study&quot;3) (integer) 1 å……å½“å‘å¸ƒè€…çš„cli 12127.0.0.1:6379&gt; PUBLISH study study(integer) 1 è®¢é˜…è€… 12345678127.0.0.1:6379&gt; SUBSCRIBE studyReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;study&quot;3) (integer) 11) &quot;message&quot;2) &quot;study&quot;3) &quot;designpattern&quot; åŸç†ï¼š Redisè®¢é˜…å‘å¸ƒåº•å±‚æ˜¯ä½¿ç”¨Cå®ç°çš„ Redis é€šè¿‡ PUBLISH ã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚ é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ªé¢‘é“ï¼è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œå°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®š channel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚é€šè¿‡ PUBLISH å‘½ä»¤å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯ï¼Œredis-server ä¼šä½¿ç”¨ç»™å®šçš„é¢‘é“ä½œä¸ºé”®ï¼Œåœ¨å®ƒæ‰€ç»´æŠ¤çš„ channel å­—å…¸ä¸­æŸ¥æ‰¾è®°å½•äº†è®¢é˜…è¿™ä¸ªé¢‘é“çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„é“¾è¡¨ï¼Œéå†è¿™ä¸ªé“¾è¡¨ï¼Œå°†æ¶ˆæ¯å‘å¸ƒç»™æ‰€æœ‰è®¢é˜…è€…ã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼","date":"2022-02-25T01:26:59.000Z","updated":"2022-02-25T02:59:21.994Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/25/è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"åŸå‹æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼ä¸»è¦ç”¨äºå¯¹è±¡çš„å¤åˆ¶ æ­¤è®¾è®¡æ¨¡å¼æœ‰å¤šç§å®ç°ï¼š jdkå†…ç½®cloneableæ¥å£ è‡ªå®šä¹‰æ¥å£ jdkå†…ç½®cloneableæ¥å£æˆ‘ä»¬éƒ½çŸ¥é“objectä¸­æœ‰ä¸€ä¸ªprotectedæ–¹æ³•ï¼Œå«cloneï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼ˆå³è¯¥æ–¹æ³•æ˜¯ç”±C++ç¼–å†™çš„ï¼Œå…·ä½“å®ç°æ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿè€Œå®šï¼‰ 12@HotSpotIntrinsicCandidateprotected native Object clone() throws CloneNotSupportedException; æˆ‘ä»¬æ¥è‡ªå·±é‡å†™ä¸€ä¸ªè¿™ä¸ªæ–¹æ³•è¯•ä¸€è¯• 1234567891011121314151617181920212223242526272829303132333435363738394041public class Video &#123; private String name; private Date gmtCreated; public Video(String name, Date gmtCreated) &#123; this.name = name; this.gmtCreated = gmtCreated; &#125; public Video() &#123; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Date getGmtCreated() &#123; return gmtCreated; &#125; public void setGmtCreated(Date gmtCreated) &#123; this.gmtCreated = gmtCreated; &#125; @Override protected Video clone() throws CloneNotSupportedException &#123; return (Video)super.clone(); &#125; @Override public String toString() &#123; return &quot;Video&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, gmtCreated=&quot; + gmtCreated + &#x27;&#125;&#x27;; &#125;&#125; ä¸»ç¨‹åº 1234567891011121314public static void main(String[] args) throws CloneNotSupportedException &#123; Video video = new Video(); video.setName(&quot;è§†é¢‘ä¸€å·&quot;); video.setGmtCreated(new Date()); System.out.println(video); System.out.println(video.hashCode()); System.out.println(video.getGmtCreated().hashCode()); System.out.println(&quot;=============å…‹éš†å================&quot;); Video clone = (Video) video.clone(); System.out.println(clone); System.out.println(clone.hashCode()); System.out.println(clone.getGmtCreated().hashCode()); System.out.println();&#125; æ§åˆ¶å°è¾“å‡º 12345678Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:31:04 CST 2022&#125;269468037784235907=============å…‹éš†å================Exception in thread &quot;main&quot; java.lang.CloneNotSupportedException: com.lizhi.demo1.Video at java.base/java.lang.Object.clone(Native Method) at com.lizhi.demo1.Video.clone(Video.java:35) at com.lizhi.demo1.CloneApplication.main(CloneApplication.java:13) å¯ä»¥å‘ç°ï¼ŒæŠ¥é”™äº†ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œæˆ‘ä¸æ˜¯å·²ç»é‡å†™äº†æ–¹æ³•å—ï¼Ÿ å…¶å®åŸå› å°±æ˜¯è¯¥ç±»æ²¡æœ‰ä¸€ä¸ªæ ‡è®°æ¥å£Cloneable 123456789101112131415161718192021222324252627/** * A class implements the &lt;code&gt;Cloneable&lt;/code&gt; interface to * indicate to the &#123;@link java.lang.Object#clone()&#125; method that it * is legal for that method to make a * field-for-field copy of instances of that class. * &lt;p&gt; * Invoking Object&#x27;s clone method on an instance that does not implement the * &lt;code&gt;Cloneable&lt;/code&gt; interface results in the exception * &lt;code&gt;CloneNotSupportedException&lt;/code&gt; being thrown. * &lt;p&gt; * By convention, classes that implement this interface should override * &#123;@code Object.clone&#125; (which is protected) with a public method. * See &#123;@link java.lang.Object#clone()&#125; for details on overriding this * method. * &lt;p&gt; * Note that this interface does &lt;i&gt;not&lt;/i&gt; contain the &#123;@code clone&#125; method. * Therefore, it is not possible to clone an object merely by virtue of the * fact that it implements this interface. Even if the clone method is invoked * reflectively, there is no guarantee that it will succeed. * * @author unascribed * @see java.lang.CloneNotSupportedException * @see java.lang.Object#clone() * @since 1.0 */public interface Cloneable &#123;&#125; å°†videoå®ç°è¯¥æ¥å£åï¼Œå¯åŠ¨ç¨‹åºï¼Œæ§åˆ¶å°è¾“å‡º 1234567Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:37:07 CST 2022&#125;269468037784153335=============å…‹éš†å================Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:37:07 CST 2022&#125;1681595665784153335 æˆ‘ä»¬å¯ä»¥æƒŠå¥‡çš„å‘ç°ï¼Œ ä¸¤è€…çš„å†…å®¹æ‰“å°å‡ºæ¥ä¸€æ¨¡ä¸€æ ·ï¼Œä¸¤è€…çš„å¯¹è±¡ä¸»ä½“çš„hashcodeæ˜¯ä¸åŒçš„ï¼Œè¯´æ˜videoå’Œcloneæ˜¯è´§çœŸä»·å®çš„ä¸¤ä¸ªå¯¹è±¡ã€‚ ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°ä»–ä»¬çš„gmtCreatedå˜é‡çš„hashcodeæ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜ä¸¤è€…æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªgmtCreatedï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦å°†å¤åˆ¶åçš„å¯¹è±¡å†…éƒ¨æŒ‡å‘çš„å¯¹è±¡è¿˜æ˜¯åŸæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦ä¿®æ”¹cloneæ–¹æ³• 1234567@Overrideprotected Object clone() throws CloneNotSupportedException &#123; Object obj = super.clone(); Video v = (Video) obj; v.setGmtCreated((Date) v.getGmtCreated().clone()); return obj;&#125; è‡ªå®šä¹‰æ¥å£123public interface Copyable &#123; Object copy();&#125; å…·ä½“å®ç°å°±ä¸å†™å•¦ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼","date":"2022-02-25T01:26:35.000Z","updated":"2022-02-25T02:22:49.386Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/25/è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å»ºé€ è€…æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯åœ¨ç”¨æˆ·ä¸çŸ¥é“å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹å’Œç»†èŠ‚çš„æƒ…å†µä¸‹å°±å¯ä»¥ç›´æ¥åˆ›å»ºå¤æ‚çš„å¯¹è±¡ã€‚ è¯¥æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å‘ï¼š æœ‰ä¸€ä¸ªåˆ¶é€ è€…æœ‰è‡ªå·±çš„ä¸€å¥—åˆ¶é€ æ–¹æ¡ˆæ¥åˆ¶é€ è¯¥å¯¹è±¡ è‡ªå·±æŒ‡å®šåˆ¶é€ è®¡åˆ’ åˆ¶é€ è€…åˆ¶é€ åœºæ™¯ï¼šé€ æ±½è½¦ æ±½è½¦ç±» 12345678910111213141516@Data@NoArgsConstructor@ToString@AllArgsConstructorpublic class Car &#123; private CarBody carBody; private Engine engine; private Lamp lamp; private Window window; public boolean isWhole()&#123; if(carBody!=null&amp;&amp;engine!=null&amp;&amp;lamp!=null&amp;&amp;window!=null)&#123; return true; &#125; return false; &#125;&#125; ç»„ä»¶æ¥å£ 12public interface Component &#123;&#125; è½¦èº« 123public interface CarBody extends Component &#123; void printName();&#125; å¼•æ“ 123public interface Engine extends Component &#123; void printName();&#125; è½¦çª— 123public interface Window extends Component &#123; void printName();&#125; å¥½çš„è½¦èº« 123456public class GoodCarBody implements CarBody&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„è½¦èº«&quot;); &#125;&#125; ä¸å¥½çš„è½¦èº« 123456public class BadCarBody implements CarBody&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„è½¦èº«&quot;); &#125;&#125; å¥½çš„å¼•æ“ 123456public class GoodEngine implements Engine&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„å‘åŠ¨æœº&quot;); &#125;&#125; ä¸å¥½çš„å¼•æ“ 123456public class BadEngine implements Engine&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„å‘åŠ¨æœº&quot;); &#125;&#125; å¥½çš„è½¦çª— 123456public class GoodWindow implements Window&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„è½¦çª—&quot;); &#125;&#125; ä¸å¥½çš„è½¦çª— 123456public class BadWindow implements Window&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„è½¦çª—&quot;); &#125;&#125; è½¦çš„å»ºé€ è€… 1234567public interface CarBuilder &#123; void addCarBody(CarBody carBody); void addWindow(Window window); void addLamp(Lamp lamp); void addEngine(Engine engine); Car getCar();&#125; å…·ä½“çš„å»ºé€ è€… 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DaZhongCarBulder implements CarBuilder &#123; private Car car; public DaZhongCarBulder()&#123; car = new Car(); &#125; @Override public void addCarBody(CarBody carBody) &#123; if(carBody==null)&#123; car.setCarBody(new GoodCarBody()); return; &#125; car.setCarBody(carBody); &#125; @Override public void addWindow(Window window) &#123; if(window==null)&#123; car.setWindow(new GoodWindow()); return; &#125; car.setWindow(window); &#125; @Override public void addLamp(Lamp lamp) &#123; if(lamp==null)&#123; car.setLamp(new GoodLamp()); return; &#125; car.setLamp(lamp); &#125; @Override public void addEngine(Engine engine) &#123; if(engine==null)&#123; car.setEngine(new GoodEngine()); return; &#125; car.setEngine(engine); &#125; @Override public Car getCar() &#123; if(!car.isWhole())&#123; throw new IllegalArgumentException(&quot;é›¶ä»¶ä¸é½ï¼Œè½¦ä¸èƒ½å‡ºå‚&quot;); &#125; return car; &#125;&#125; æŒ‡å¯¼è€… 123456789public class Director &#123; public static Car getCar(CarBuilder carBuilder)&#123; carBuilder.addWindow(null); carBuilder.addCarBody(null); carBuilder.addLamp(new BadLamp()); carBuilder.addEngine(null); return carBuilder.getCar(); &#125;&#125; è‡ªå®šä¹‰å»ºé€ æˆ‘ä»¬å‘ç°ï¼Œæœ‰è½¦ç”±å››éƒ¨åˆ†ç»„æˆï¼Œè¿™å››éƒ¨åˆ†å¯ä»¥æ˜¯åŒä¸€ä¸ªå·¥å‚é€ å‡ºæ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»“åˆä¸€ä¸ªæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå°†äº§å“åˆ¶é€ äº¤ç»™å·¥å‚ã€‚ ç»„ä»¶å·¥å‚æ¥å£ 123456public interface ComponentFactory &#123; CarBody getCarBody(); Engine getEngine(); Window getWindow(); Lamp getLamp();&#125; ä¸å¥½çš„ç»„ä»¶å·¥å‚ 123456789101112131415161718192021public class BadFactory implements ComponentFactory&#123; @Override public CarBody getCarBody() &#123; return new BadCarBody(); &#125; @Override public Engine getEngine() &#123; return new BadEngine(); &#125; @Override public Window getWindow() &#123; return new BadWindow(); &#125; @Override public Lamp getLamp() &#123; return new BadLamp(); &#125;&#125; å¥½çš„ç»„ä»¶å·¥å‚ 12345678910111213141516171819202122public class GoodFactory implements ComponentFactory&#123; @Override public CarBody getCarBody() &#123; return new GoodCarBody(); &#125; @Override public Engine getEngine() &#123; return new GoodEngine(); &#125; @Override public Window getWindow() &#123; return new GoodWindow(); &#125; @Override public Lamp getLamp() &#123; return new GoodLamp(); &#125;&#125; æ”¹é€ CarBuilder 1234567public interface CarBuilder &#123; CarBuilder addCarBody(CarBody carBody); CarBuilder addWindow(Window window); CarBuilder addLamp(Lamp lamp); CarBuilder addEngine(Engine engine); Car getCar();&#125; å…·ä½“åˆ¶é€ å•† 12345678910111213141516171819202122232425262728293031323334353637public class DaZhongCarBulder implements CarBuilder &#123; private Car car; public DaZhongCarBulder()&#123; car = new Car(); &#125; @Override public CarBuilder addCarBody(CarBody carBody) &#123; car.setCarBody(carBody); return this; &#125; @Override public CarBuilder addWindow(Window window) &#123; car.setWindow(window); return this; &#125; @Override public CarBuilder addLamp(Lamp lamp) &#123; car.setLamp(lamp); return this; &#125; @Override public CarBuilder addEngine(Engine engine) &#123; car.setEngine(engine); return this; &#125; @Override public Car getCar() &#123; if(!car.isWhole())&#123; throw new IllegalArgumentException(&quot;é›¶ä»¶ä¸é½ï¼Œè½¦ä¸èƒ½å‡ºå‚&quot;); &#125; return car; &#125;&#125; å®¢æˆ·ç«¯è‡ªå®šä¹‰åˆ¶é€  123456789101112131415public class Customer &#123; public static void main(String[] args) &#123; DaZhongCarBulder daZhongCarBulder = new DaZhongCarBulder(); ComponentFactory goodFactory = new GoodFactory(); ComponentFactory badFactory = new BadFactory(); // è¿™å°±æ˜¯é“¾å¼ç¼–ç¨‹ Car car = daZhongCarBulder .addCarBody(goodFactory.getCarBody()) .addEngine(badFactory.getEngine()) .addLamp(goodFactory.getLamp()) .addWindow(goodFactory.getWindow()) .getCar(); System.out.println(car); &#125;&#125; åŠ æ·±ç†è§£å†æ¥ä¸ªæ¡ˆä¾‹ï¼škfcç‚¹é¤ é¦–å…ˆé£Ÿç‰©æ¥å£ 12public interface Food &#123;&#125; é¥®æ–™æ¥å£ 123public interface Drink extends Food&#123; void drink();&#125; è–¯æ¡æ¥å£ 123public interface Chip extends Food&#123; void eatChip();&#125; ç‚¸é¸¡æ¥å£ 123public interface Chicken extends Food&#123; void eatChicken();&#125; å¥¥å°”è‰¯ç‚¸é¸¡ 123456public class OrleansFriedChicken implements Chicken&#123; @Override public void eatChicken() &#123; System.out.println(&quot;å¥¥å°”è‰¯ç‚¸é¸¡&quot;); &#125;&#125; å­œç„¶ç‚¸é¸¡ 123456public class CuminFriedChicken implements Chicken&#123; @Override public void eatChicken() &#123; System.out.println(&quot;å­œç„¶ç‚¸é¸¡&quot;); &#125;&#125; å¯ä¹ 123456public class Cola implements Drink&#123; @Override public void drink() &#123; System.out.println(&quot;å¯å£å¯ä¹&quot;); &#125;&#125; å¤§è–¯æ¡ 1234567public class BigChip implements Chip&#123; @Override public void eatChip() &#123; System.out.println(&quot;å¤§ä»½è–¯æ¡&quot;); &#125;&#125; ç™¾äº‹å¯ä¹ 123456public class BaiShi implements Drink &#123; @Override public void drink() &#123; System.out.println(&quot;ç™¾äº‹å¯ä¹&quot;); &#125;&#125; è®¢å• 1234567891011@Data@ToStringpublic class Order &#123; private List&lt;Food&gt; foods; public Order()&#123; foods = new ArrayList&lt;&gt;(); &#125; public void addFood(Food food)&#123; foods.add(food); &#125;&#125; ç‚¹å•å°ç¨‹åº 12345678910111213141516171819public class OrderApplication implements Builder&#123; private Order order; public OrderApplication()&#123; order = new Order(); &#125; @Override public Builder addFood(Food food) &#123; order.addFood(food); return this; &#125; @Override public Order getOrder() &#123; if(order.getFoods().size()==0)&#123; throw new IllegalArgumentException(&quot;æ‚¨æœªç‚¹å•ï¼&quot;); &#125; return order; &#125;&#125; å®¢æˆ·ç«¯ 123456789public static void main(String[] args) &#123; OrderApplication orderApplication = new OrderApplication(); Order order = orderApplication .addFood(new BigChip()) .addFood(new OrleansFriedChicken()) .addFood(new Cola()) .getOrder(); System.out.println(order);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-æ¦‚è¿°","slug":"è®¾è®¡æ¨¡å¼-æ¦‚è¿°","date":"2022-02-24T14:36:38.000Z","updated":"2022-02-25T01:43:48.960Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/24/è®¾è®¡æ¨¡å¼-æ¦‚è¿°/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A6%82%E8%BF%B0/","excerpt":"","text":"ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼ŸDesign Patternæ˜¯å‰è¾ˆä»¬å¯¹ä»£ç å¼€å‘ç»éªŒçš„æ€»ç»“ä¸å½’çº³ï¼Œæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—è§£å†³æ–¹æ¡ˆã€‚ 1995å¹´ï¼Œç”±GoFï¼ˆGang of Fourï¼‰å››äººå¸®åˆä½œå‡ºç‰ˆäº†ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ä¸€ä¹¦ï¼Œä¸€å…±æ”¶å½•äº†23ç§è®¾è®¡æ¨¡å¼ï¼Œäººç§°Gof23è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ï¼š å•ä¾‹æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ åŸå‹æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ ç»„åˆæ¨¡å¼ é—¨é¢æ¨¡å¼ äº«å…ƒæ¨¡å¼ ä»£ç†æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å‘½ä»¤æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼ çŠ¶æ€æ¨¡å¼ ç­–ç•¥æ¨¡å¼ èŒè´£é“¾æ¨¡å¼ è®¿é—®è€…æ¨¡å¼","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°","slug":"ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°","date":"2022-02-24T11:07:44.000Z","updated":"2023-03-06T06:45:35.827Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/02/24/ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/02/24/%E3%80%904-Hard%E3%80%91%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/","excerpt":"","text":"å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(log (m+n)) ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]è¾“å‡ºï¼š2.00000è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2 ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]è¾“å‡ºï¼š2.50000è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5 æç¤ºï¼š nums1.length == m nums2.length == n 0 &lt;= m &lt;= 1000 0 &lt;= n &lt;= 1000 1 &lt;= m + n &lt;= 2000 -106 &lt;= nums1[i], nums2[i] &lt;= 106 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²» åˆå¹¶å–ä¸­é—´å€¼è¿™ç§æ–¹æ³•åº”è¯¥æ˜¯å¤§å¤šæ•°äººçš„ç¬¬ä¸€ååº” ä½¿ç”¨ä¸€ä¸ªlisté›†åˆå­˜æ”¾ä¸¤ä¸ªæ•°ç»„çš„å€¼åæ’åº åˆ¤æ–­é›†åˆé•¿åº¦çš„å¥‡å¶æ€§ å¶æ•°ï¼Œè¿”å›ä¸­é—´ä¸¤ä¸ªæ•°çš„å’Œçš„å¹³å‡å€¼ å¥‡æ•°ï¼Œè¿”å›ä¸­é—´é‚£ä¸ªæ•° 123456789101112131415161718class Solution &#123; public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int k : nums1) &#123; list.add(k); &#125; for (int j : nums2) &#123; list.add(j); &#125; Collections.sort(list); int size = list.size(); if(size%2==0)&#123; return (list.get(size/2)+list.get(size/2-1))/2.0; &#125;else &#123; return list.get(size/2); &#125; &#125;&#125; å½’å¹¶å†æ¥ç†ä¸€ç†é¢˜ç›®çš„æ„æ€ æœ‰ä¸¤ä¸ªæ­£åºæ•°ç»„num1å’Œnums2 è¦è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•° è¿™ä¸å°±æ˜¯å½’å¹¶ä¸­åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸€æ ·çš„æ€è·¯å— ä½†æ˜¯è¿™é‡Œä¸éœ€è¦å®Œå…¨åˆå¹¶ï¼Œåªéœ€è¦åˆå¹¶åˆ°ä¸­é—´çš„ä½ç½®å°±å¯äº† è¯´å¹²å°±å¹² 123456789101112131415161718192021222324252627282930class Solution &#123; public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; // æ€»é•¿åº¦ int wholeSize = nums1.length + nums2.length; // å»ä¸­é—´å€¼ int mid = wholeSize / 2; // æ–°å»ºä¸­é—´å€¼+1é•¿åº¦çš„æ•°ç»„ int[] temp = new int[mid + 1]; int index1 = 0; int index2 = 0; for (int i = 0; i &lt; temp.length; i++) &#123; if (index1 == nums1.length) &#123; // num1å·²ç»æ”¾å®Œäº†ï¼Œç›´æ¥æ”¾num2çš„å€¼å³å¯ temp[i] = nums2[index2++]; &#125; else if (index2 == nums2.length) &#123; // num1å·²ç»æ”¾å®Œäº†ï¼Œç›´æ¥æ”¾num2çš„å€¼å³å¯ temp[i] = nums1[index1++]; &#125; else if (nums1[index1] &lt;= nums2[index2]) &#123; // num1ç›¸å¯¹æ¯”è¾ƒå°ï¼Œæ‰€ä»¥æ”¾num1çš„å€¼ temp[i] = nums1[index1++]; &#125; else &#123; // num2ç›¸å¯¹æ¯”è¾ƒå°ï¼Œæ‰€ä»¥æ”¾num2çš„å€¼ temp[i] = nums2[index2++]; &#125; &#125; // å¦‚æœæ€»é•¿åº¦æ˜¯å¶æ•°ï¼Œåˆ™è¿”å›æœ€åä¸¤ä¸ªæ•°çš„å’Œçš„å¹³å‡æ•° // å¦‚æœæ€»é•¿åº¦æ˜¯å¥‡æ•°ï¼Œåˆ™ç›´æ¥è¿”å›æœ€åä¸€ä¸ªæ•°å³å¯ return wholeSize % 2 == 0 ? (temp[mid] + temp[mid - 1]) / 2.0 : temp[mid]; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™","slug":"è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™","date":"2022-02-24T10:18:58.000Z","updated":"2022-10-04T13:56:09.005Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/24/è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-OOP%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/","excerpt":"","text":"OOPä¸ƒå¤§åŸåˆ™å¼€é—­åŸåˆ™(Open-Closed Principle ï¼ŒOCP)å®šä¹‰ï¼šå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ é—®é¢˜çš„ç”±æ¥ï¼šåœ¨è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå› ä¸ºå˜åŒ–ã€å‡çº§å’Œç»´æŠ¤ç­‰åŸå› éœ€è¦å¯¹è½¯ä»¶åŸæœ‰ä»£ç è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¯èƒ½ä¼šç»™æ—§çš„ä»£ç å¼•å…¥é”™è¯¯ã€‚ è§£å†³åŠæ³•ï¼šå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚ ä¸ºä»€ä¹ˆè¦éµå¾ªå¼€é—­åŸåˆ™ 1ã€åªè¦æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­éƒ½ä¼šå¼ºè°ƒå¼€é—­åŸåˆ™ 2ã€æ˜¯æœ€åŸºç¡€çš„è®¾è®¡åŸåˆ™ï¼Œå…¶ä»–äº”ä¸ªè®¾è®¡åŸåˆ™éƒ½æ˜¯å¼€é—­åŸåˆ™çš„å…·ä½“å½¢æ€ 3ã€å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ 4ã€å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle,SRPï¼‰å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªç±»å…·æœ‰å¤šä¸ªèŒè´£ï¼Œåº”å½“å°†å¯¹è±¡è§£è€¦ï¼Œæé«˜å†…èšï¼Œåˆ†åˆ«åˆ›å»ºä¸€äº›ç±»å»ä¸€ ä¸€å®Œæˆè¿™äº›èŒè´£ï¼Œ æ ¸å¿ƒï¼šé«˜å†…èšã€ä½è€¦åˆã€‚ ä¼˜ç‚¹ï¼š 1ã€é™ä½ç±»çš„åŠŸèƒ½å¤æ‚åº¦ 2ã€æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ 3ã€å˜æ›´é£é™©ä½ é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle ï¼ŒLSPï¼‰å®šä¹‰ï¼š å­ç±»å¯¹è±¡èƒ½å¤Ÿæ›¿ä»£ç¨‹åºä¸­çˆ¶ç±»å¯¹è±¡å‡ºç°çš„ä»»ä½•åœ°æ–¹ï¼Œå¹¶ä¸”ä¿è¯åŸæ¥çš„ç¨‹åºçš„é€»è¾‘è¡Œä¸ºä¸å˜åŠæ­£ç¡®æ€§ä¸è¢«ç ´å é‡Œæ°æ›¿æ¢è‡³å°‘åŒ…å«ä¸€ä¸‹ä¸¤ä¸ªå«ä¹‰ï¼š 1ã€å¦‚æœç»§æ‰¿æ˜¯ä¸ºäº†å®ç°ä»£ç é‡ç”¨ï¼Œé‚£ä¹ˆå…±äº«çš„çˆ¶ç±»æ–¹æ³•å°±åº”è¯¥ä¿æŒä¸å˜ï¼Œä¸èƒ½è¢«å­ç±»é‡æ–°å®šä¹‰ã€‚å­ç±»åªèƒ½é€šè¿‡æ–°æ·»åŠ æ–¹æ³•æ¥æ‰©å±•åŠŸèƒ½ï¼Œçˆ¶ç±»å’Œå­ç±»éƒ½å¯ä»¥å®ä¾‹åŒ–ï¼Œè€Œå­ç±»ç»§æ‰¿çš„æ–¹æ³•å’Œçˆ¶ç±»æ˜¯ä¸€æ ·çš„ï¼Œçˆ¶ç±»è°ƒç”¨æ–¹æ³•çš„åœ°æ–¹ï¼Œå­ç±»ä¹Ÿå¯ä»¥è°ƒç”¨åŒä¸€ä¸ªç»§æ‰¿å¾—æ¥çš„ä¸€è‡´çš„æ–¹æ³•ï¼Œè¿™æ—¶ç”¨å­ç±»å¯¹è±¡å°†çˆ¶ç±»å¯¹è±¡æ›¿æ¢æ‰æ—¶ï¼Œå½“ç„¶é€»è¾‘ä¸€è‡´ï¼Œç›¸å®‰æ— äº‹ã€‚ â€‹ 2ã€å¦‚æœç»§æ‰¿çš„ç›®çš„æ˜¯ä¸ºäº†å¤šæ€ï¼Œè€Œå¤šæ€çš„å‰æå°±æ˜¯å­ç±»è¦†ç›–å¹¶é‡æ–°å®šä¹‰çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥å°†çˆ¶ç±»å®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œå¹¶å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œè®©å­ç±»é‡æ–°å®šä¹‰è¿™äº›æ–¹æ³•ï¼Œå½“çˆ¶ç±»æ˜¯æŠ½è±¡ç±»æ—¶ï¼Œçˆ¶ç±»å°±æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å­ç±»æ›¿æ¢çˆ¶ç±»å®ä¾‹çš„ç°è±¡ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥å¤§å¤§å‡å°‘ç¨‹åºçš„bugä»¥åŠå¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚ ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversion Principle ï¼ŒDIPï¼‰å®šä¹‰ï¼šé¢å‘æ¥å£ç¼–ç¨‹ æœ¬è´¨å°±æ˜¯é€šè¿‡æŠ½è±¡(æ¥å£æˆ–æŠ½è±¡ç±»)ä½¿å„ä¸ªç±»æˆ–æ¨¡å—çš„å®ç°å½¼æ­¤ç‹¬ç«‹ï¼Œä¸äº’ç›¸å½±å“ï¼Œå®ç°æ¨¡å—é—´çš„æ¾è€¦åˆã€‚ æ¥å£éš”ç¦»åŸåˆ™(Interface Segregation Principle, ISP)å®šä¹‰ï¼šè¦ç”¨å„ä¸ªç±»å»ºç«‹ä»–ä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£ å®ƒåŒ…å«äº†2å±‚æ„æ€ï¼š æ¥å£çš„è®¾è®¡åŸåˆ™ï¼šæ¥å£çš„è®¾è®¡åº”è¯¥éµå¾ªæœ€å°æ¥å£åŸåˆ™ï¼Œä¸è¦æŠŠç”¨æˆ·ä½¿ç”¨ä¸åˆ°çš„æ–¹æ³•å¡è¿›åŒä¸€ä¸ªæ¥å£é‡Œã€‚å¦‚æœä¸€ä¸ªæ¥å£çš„æœ‰æ–¹æ³•æ²¡æœ‰è¢«ç”¨æˆ·ä½¿ç”¨åˆ°ï¼Œåˆ™è¯´æ˜è¯¥æ¥å£å·²ç»è‡ƒè‚¿äº†ï¼Œåº”è¯¥å°†å…¶åˆ†å‰²æˆå‡ ä¸ªåŠŸèƒ½ä¸“ä¸€çš„æ¥å£ã€‚ æ¥å£çš„ä¾èµ–ï¼ˆç»§æ‰¿ï¼‰åŸåˆ™ï¼šå¦‚æœä¸€ä¸ªæ¥å£aç»§æ‰¿å¦ä¸€ä¸ªæ¥å£bï¼Œåˆ™æ¥å£aç›¸å½“äºç»§æ‰¿äº†æ¥å£bçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæ¥å£aä¹Ÿåº”è¯¥éµå¾ªä¸Šè¿°åŸåˆ™ï¼šä¸åº”è¯¥åŒ…å«ç”¨æˆ·ä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚ åä¹‹ï¼Œåˆ™è¯´æ˜æ¥å£aè¢«bç»™æ±¡æŸ“äº†ï¼Œåº”è¯¥é‡æ–°è®¾è®¡å®ƒä»¬çš„å…³ç³»ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeter ï¼ŒLODï¼‰å®šä¹‰ï¼šåªä¸ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸ä¸é™Œç”Ÿäººé€šä¿¡ ç›´æ¥æœ‹å‹çš„å®šä¹‰ï¼š 1ï¼‰å½“å‰å¯¹è±¡æœ¬èº«ï¼ˆthisï¼‰ 2ï¼‰ä»¥å‚é‡å½¢å¼ä¼ å…¥åˆ°å½“å‰å¯¹è±¡æ–¹æ³•ä¸­çš„å¯¹è±¡ 3ï¼‰å½“å‰å¯¹è±¡çš„å®ä¾‹å˜é‡ 4ï¼‰å½“å‰å¯¹è±¡çš„å®ä¾‹å˜é‡å¦‚æœæ˜¯ä¸€ä¸ªèšé›†ï¼Œé‚£ä¹ˆèšé›†ä¸­çš„å…ƒç´ ä¹Ÿéƒ½æ˜¯æœ‹å‹ 5ï¼‰å½“å‰å¯¹è±¡æ‰€åˆ›å»ºçš„å¯¹è±¡ åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite&#x2F;Aggregate Reuse Principle ï¼ŒCARPï¼‰å®šä¹‰ï¼šå°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…å†…èšç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿æ¥å®ç°ï¼Œå› ä¸ºjavaæ˜¯å•ç»§æ‰¿","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Redis-é…ç½®æ–‡ä»¶","slug":"Redis-é…ç½®æ–‡ä»¶","date":"2022-02-24T07:13:55.000Z","updated":"2022-10-04T13:56:55.114Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-é…ç½®æ–‡ä»¶/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/","excerpt":"","text":"é…ç½®æ–‡ä»¶redis.confåŸºç¡€é…ç½®ä¸‹é¢ä¸ºå¸¸ç”¨çš„é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127# Redis configuration file example.## Note that in order to read the configuration file, Redis must be# started with the file path as first argument:## ./redis-server /path/to/redis.conf# è¯´æ˜å•ä½å’Œä¸åŒºåˆ†å¤§å°å†™# Note on units: when memory size is needed, it is possible to specify# it in the usual form of 1k 5GB 4M and so forth:## 1k =&gt; 1000 bytes# 1kb =&gt; 1024 bytes# 1m =&gt; 1000000 bytes# 1mb =&gt; 1024*1024 bytes# 1g =&gt; 1000000000 bytes# 1gb =&gt; 1024*1024*1024 bytes## units are case insensitive so 1GB 1Gb 1gB are all the same.################################## INCLUDES #################################### å¯ä»¥é…ç½®å¤šä¸ªconfæ–‡ä»¶ç»„åˆèµ·æ¥# Include one or more other config files here. This is useful if you# have a standard template that goes to all Redis servers but also need# to customize a few per-server settings. Include files can include# other files, so use this wisely.## Note that option &quot;include&quot; won&#x27;t be rewritten by command &quot;CONFIG REWRITE&quot;# from admin or Redis Sentinel. Since Redis always uses the last processed# line as value of a configuration directive, you&#x27;d better put includes# at the beginning of this file to avoid overwriting config change at runtime.## If instead you are interested in using includes to override configuration# options, it is better to use include as the last line.## include /path/to/local.conf# include /path/to/other.conf################################## NETWORK ###################################### ç½‘ç»œæ¨¡å—bind 127.0.0.1# å¼€å¯ä¿æŠ¤æ¨¡å¼protected-mode yes# è¿æ¥çš„æœåŠ¡å™¨ç«¯å£port 6379tcp-backlog 511# è¶…æ—¶æ—¶é—´timeout 0tcp-keepalive 300################################# GENERAL ###################################### When Redis is supervised by upstart or systemd, this parameter has no impact.# é»˜è®¤ä¸º daemonize no# éœ€è¦æ‰‹åŠ¨æ”¹ä¸ºyesï¼Œæˆ‘ä»¬éœ€è¦åå°å¯åŠ¨daemonize yes# å¦‚æœä»¥åå°æ–¹å¼è¿è¡Œï¼Œå°±éœ€è¦æŒ‡å®šä¸€ä¸ªpidæ–‡ä»¶pidfile /var/run/redis_6379.pid# Specify the server verbosity level.# This can be one of:# debug (a lot of information, useful for development/testing)# verbose (many rarely useful info, but not a mess like the debug level)# notice (moderately verbose, what you want in production probably)ç”Ÿäº§ç¯å¢ƒ# warning (only very important / critical messages are logged)# æ—¥å¿—çº§åˆ«loglevel notice# ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ålogfile &quot;&quot;# é»˜è®¤æœ‰16ä¸ªæ•°æ®åº“databases 16# æ˜¯å¦æ˜¾ç¤ºlogoalways-show-logo yesset-proc-title yesproc-title-template &quot;&#123;title&#125; &#123;listen-addr&#125; &#123;server-mode&#125;&quot;################################## SECURITY #################################### å¯ä»¥è®¾ç½®Redisçš„å¯†ç # auth# config set requirepass root# è®¾ç½®å¯†ç ä½¿ç”¨å‘½ä»¤requirepass root################################### CLIENTS ##################################### å®¢æˆ·ç«¯çš„ä¸€äº›é™# æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°maxclients 10000############################## MEMORY MANAGEMENT ################################# å†…å­˜è®¾ç½®# è®¾ç½®æœ€å¤§å†…å­˜# maxmemory &lt;bytes&gt;# The default is:# å†…å­˜æ»¡äº†ï¼Œæœ‰ä»€ä¹ˆç­–ç•¥ï¼Œå’ŒJUCä¸­çš„é‚£å››ç§æ‹’ç»ç­–ç•¥æœ‰ç‚¹ç±»ä¼¼# 1.volatile-lru:åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyè¿›è¡Œlru# 2.allkeys-lru:åˆ é™¤lruç®—æ³•çš„key# 3.volatile-random:éšæœºåˆ é™¤å³å°†è¿‡æœŸçš„# 4.allkeys-random:éšæœºåˆ é™¤# 5.volatile-ttl:åˆ é™¤å³å°†è¿‡æœŸçš„# 6.noeviction:è¿”å›é”™è¯¯maxmemory-policy noeviction############################# LAZY FREEING ####################################lazyfree-lazy-eviction nolazyfree-lazy-expire nolazyfree-lazy-server-del noreplica-lazy-flush nolazyfree-lazy-user-del nolazyfree-lazy-user-flush no é…ç½®RDBï¼ˆRedis DataBaseï¼‰æŒä¹…åŒ–Redisæ˜¯å†…å­˜æ€§æ•°æ®åº“ï¼Œå¦‚æœä¸è®²å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æœåŠ¡å™¨çŠ¶æ€ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œæ‰€ä»¥éœ€è¦å­¦ä¼šRedisä¸­çš„æŒä¹…åŒ–æ“ä½œ åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯Snapshotå¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»å–åˆ°å†…å­˜é‡Œã€‚ Redisä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½•IOæ“ä½œçš„ã€‚è¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£RDBæ–¹å¼è¦æ¯”AOFæ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚ RDBçš„ä¼˜ç‚¹æ˜¯æ•ˆç‡é«˜ï¼Œå¯¹äºæ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜ RDBçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚ rdbæ–‡ä»¶é»˜è®¤ä¿å­˜ä¸ºdump.rdb 1234567891011121314151617181920212223242526272829################################ SNAPSHOTTING ################################# å¿«ç…§ï¼šåšæŒä¹…åŒ–çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚# åœ¨è§„å®šçš„æ—¶é—´å†…æ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œå°±ä¼šç”Ÿæˆä¸€ä¸ª.rdbæ–‡ä»¶æˆ–è€….aofæ–‡ä»¶# Redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰æŒä¹…åŒ–ï¼Œç”¨å®Œæ•°æ®å°±æ²¡äº†# æŒä¹…åŒ–è§„åˆ™# 3600så†…è‡³å°‘æœ‰ä¸€ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 3600 1# 300så†…è‡³å°‘æœ‰100ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 300 100# 60så†…è‡³å°‘æœ‰10000ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 60 10000# æŒä¹…åŒ–å‡ºé”™åï¼Œæ˜¯å¦è¿˜ç»§ç»­å·¥ä½œstop-writes-on-bgsave-error yes# æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶ï¼Œæ¶ˆè€—CPUèµ„æºrdbcompression yes# æ˜¯å¦æ ¡éªŒrdbæ–‡ä»¶çš„æ•°ç›®rdbchecksum yes# æŒä¹…åŒ–ç”Ÿæˆçš„æ–‡ä»¶åå­—dbfilename dump.rdbrdb-del-sync-files no# ä¿å­˜çš„ç›®å½•ï¼Œå½“å‰ç›®å½•dir ./ é…ç½®AOFï¼ˆAppend Only Fileï¼‰æ–‡ä»¶ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredisé‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œ 123456789101112131415161718192021############################## APPEND ONLY MODE ################################ æŒä¹…åŒ–æ–‡ä»¶aofçš„é…ç½®# é»˜è®¤å…³é—­aofï¼Œé»˜è®¤å¼€å¯rdbçš„æŒä¹…åŒ–ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œrdbå®Œå…¨å¤Ÿç”¨appendonly no# æŒä¹…åŒ–æ–‡ä»¶çš„åå­—appendfilename &quot;appendonly.aof&quot;# appendfsync always # æ¯æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ä¸€ä¸‹appendfsync everysec # æ¯1séƒ½åŒæ­¥ä¸€ä¸‹# appendfsync no # ä¸åŒæ­¥ï¼Œæ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥# æ˜¯å¦é‡å†™# incrby view 10# incrby view 20# é‡å†™å# incrby 30no-appendfsync-on-rewrite noauto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb å¦‚æœaofä¸­è¢«æ¶æ„ç¯¡æ”¹äº†ï¼Œè¿™æ—¶å€™redisæ˜¯å¯åŠ¨ä¸èµ·æ¥çš„ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨redisæä¾›çš„ä¸€ä¸ªå·¥å…·redis-check-aof.exe ä¼˜ç‚¹ï¼šæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´å¥½ï¼Œ ç¼ºç‚¹ï¼šè¯¥æ–‡ä»¶è¿œè¿œå¤§äºrdbï¼Œä¿®å¤é€Ÿåº¦è¿œè¿œæ…¢äºrdbï¼Œè¿è¡Œæ•ˆç‡æ¯”rdbä½ å°ç»“ï¼š RDB æŒä¹…åŒ–æ–¹å¼èƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨ AOF æŒä¹…åŒ–æ–¹å¼è®°å½•æ¯æ¬¡å¯¹æœåŠ¡å™¨å†™çš„æ“ä½œï¼Œå½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼ŒAOFå‘½ä»¤ä»¥Redis åè‡ªåŠ ä¿å­˜æ¯æ¬¡å†™çš„æ“ä½œåˆ°æ–‡ä»¶æœªå°¾ï¼ŒRedisè¿˜èƒ½å¯¹AOFæ–‡ä»¶è¿›è¡Œåå°é‡å†™ï¼Œä½¿å¾—AOFæ–‡ä»¶çš„ä½“ç§¯ä¸è‡³äºè¿‡å¤§ã€‚ åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ– åŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“redisé‡å¯çš„æ—¶å€™ä¼šä¼˜å…ˆè½½å…¥AOFæ–‡ä»¶æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼Œå› ä¸ºåœ¨é€šå¸¸æƒ…å†µä¸‹AOFæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦æ¯”RDB æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦å®Œæ•´ã€‚ RDB çš„æ•°æ®ä¸å®æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä¸¤è€…æ—¶æœåŠ¡å™¨é‡å¯ä¹Ÿåªä¼šæ‰¾AOFæ–‡ä»¶ï¼Œé‚£è¦ä¸è¦åªä½¿ç”¨AOFå‘¢ï¼Ÿä½œè€…å»ºè®®ä¸è¦ï¼Œå› ä¸ºRDBæ›´é€‚åˆ ç”¨äºå¤‡ä»½æ•°æ®åº“ï¼ˆAOFåœ¨ä¸æ–­å˜åŒ–ä¸å¥½å¤‡ä»½ï¼‰ï¼Œå¿«é€Ÿé‡å¯ï¼Œè€Œä¸”ä¸ä¼šæœ‰AOFå¯èƒ½æ½œåœ¨çš„Bugï¼Œç•™ç€ä½œä¸ºä¸€ä¸ªä¸‡ä¸€çš„æ‰‹æ®µã€‚ æ€§èƒ½å»ºè®® å› ä¸ºRDBæ–‡ä»¶åªç”¨ä½œåå¤‡ç”¨é€”ï¼Œå»ºè®®åªåœ¨Slaveä¸ŠæŒä¹…åŒ–RDBæ–‡ä»¶ï¼Œè€Œä¸”åªè¦15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œåªä¿ç•™ save 900 1è¿™æ¡è§„åˆ™ã€‚ å¦‚æœEnable AOFï¼Œå¥½å¤„æ˜¯åœ¨æœ€æ¶åŠ£æƒ…å†µä¸‹ä¹Ÿåªä¼šä¸¢å¤±ä¸è¶…è¿‡ä¸¤ç§’æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬è¾ƒç®€å•åªloadè‡ªå·±çš„AOFæ–‡ä»¶å°±å¯ä»¥äº† ä»£ä»·ä¸€æ˜¯å¸¦æ¥äº†æŒç»­çš„IO ä»£ä»·äºŒæ˜¯AOF rewrite çš„æœ€åå°† rewrite è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°æ•°æ®å†™åˆ°æ–°æ–‡ä»¶é€ æˆçš„é˜»å¡å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚åªè¦ç¡¬ç›˜è®¸å¯ï¼Œåº”è¯¥å°½é‡å‡å°‘AOF rewrite çš„é¢‘ç‡ï¼ŒAOFé‡å†™çš„åŸºç¡€å¤§å°é»˜è®¤å€¼64Må¤ªå°äº†ï¼Œå¯ä»¥è®¾åˆ°5Gä»¥ä¸Šï¼Œé»˜è®¤è¶…è¿‡åŸå¤§å°100%å¤§å°é‡å†™å¯ä»¥æ”¹åˆ°é€‚å½“çš„æ•°å€¼ã€‚ å¦‚æœä¸Enable AOFï¼Œä»…é Master-Slave Repllcationï¼ˆä¸»ä»å¤åˆ¶ï¼‰å®ç°é«˜å¯ç”¨æ€§ä¹Ÿå¯ä»¥ï¼Œèƒ½çœæ‰ä¸€å¤§ç¬”IOï¼Œä¹Ÿå‡å°‘äº†rewriteæ—¶å¸¦æ¥çš„ç³»ç»Ÿæ³¢åŠ¨ã€‚ä»£ä»·æ˜¯å¦‚æœMaster&#x2F;Slave åŒæ—¶æ–­ç”µï¼Œä¼šä¸¢å¤±åå‡ åˆ†é’Ÿçš„æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬ä¹Ÿè¦æ¯”è¾ƒä¸¤ä¸ªMaster&#x2F;Slaveä¸­çš„RDBæ–‡ä»¶ï¼Œè½½å…¥è¾ƒæ–°çš„é‚£ä¸ªã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-æ•´åˆSpringBoot","slug":"Redis-æ•´åˆSpringBoot","date":"2022-02-24T04:08:56.000Z","updated":"2022-10-04T13:54:55.083Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-æ•´åˆSpringBoot/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E6%95%B4%E5%90%88SpringBoot/","excerpt":"","text":"SpringBootæ•´åˆRedisåœ¨SpringBoot2.xä¹‹åï¼Œåº•å±‚å·²ç»ä¸å†ä½¿ç”¨jedisæ“ä½œRedisäº†ï¼Œè€Œæ˜¯lettuce jedisï¼šé‡‡ç”¨çš„ç›´è¿ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼Œéœ€è¦ä½¿ç”¨jedis poolè¿æ¥æ± æ¥è§£å†³é—®é¢˜ï¼ˆBIOæ¨¡å¼ï¼‰ lettcueï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªå®ä¾‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜ï¼ˆDubboåº•å±‚ä¹Ÿç”¨åˆ°äº†å®ƒï¼‰ï¼ˆNIOæ¨¡å¼ï¼‰ å¦‚ä½•ä½¿ç”¨1ã€å¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;version&gt;2.6.3&lt;/version&gt;&lt;/dependency&gt; 2ã€è§‚å¯ŸRedisAutoConfigurationæºç  123456789101112131415161718192021222324252627282930@Configuration( proxyBeanMethods = false)@ConditionalOnClass(&#123;RedisOperations.class&#125;)@EnableConfigurationProperties(&#123;RedisProperties.class&#125;)@Import(&#123;LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class&#125;)public class RedisAutoConfiguration &#123; public RedisAutoConfiguration() &#123; &#125; @Bean // è¿™è¯´æ˜æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰template @ConditionalOnMissingBean( name = &#123;&quot;redisTemplate&quot;&#125; ) @ConditionalOnSingleCandidate(RedisConnectionFactory.class) public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) &#123; RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate(); template.setConnectionFactory(redisConnectionFactory); return template; &#125; @Bean // å› ä¸ºæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨stringä¼šéå¸¸å¤šï¼Œæ‰€ä»¥å†…ç½®äº†ä¸€ä¸ªStringRedisTemplate @ConditionalOnMissingBean @ConditionalOnSingleCandidate(RedisConnectionFactory.class) public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) &#123; return new StringRedisTemplate(redisConnectionFactory); &#125;&#125; 3ã€é…ç½®è¿æ¥ï¼Œçœ‹æºç å¯ä»¥å‘ç°ï¼Œå°±ç®—æˆ‘ä»¬ä¸é…ç½®ï¼Œspringbootä¹Ÿé»˜è®¤å¯ä»¥è¿æ¥æœ¬åœ°çš„redis 4ã€æµ‹è¯• å…ˆæ‰“å¼€å‘½ä»¤è¡Œå®¢æˆ·ç«¯æŸ¥çœ‹å…¨éƒ¨çš„key 12127.0.0.1:6379&gt; keys *(empty list or set) æµ‹è¯•ç±»æµ‹è¯• 123456789101112@SpringBootTestclass SpringbootRedisApplicationTests &#123; @Autowired private StringRedisTemplate redisTemplate; @Test void contextLoads() &#123; RedisConnection connection = redisTemplate.getConnectionFactory().getConnection(); connection.flushAll(); connection.flushDb(); redisTemplate.opsForValue().set(&quot;springboot integrated Redis&quot;,&quot;success&quot;); &#125;&#125; å‘½ä»¤è¡Œå®¢æˆ·ç«¯æŸ¥çœ‹å…¨éƒ¨çš„keyï¼Œå¯ä»¥å‘ç°æ•°æ®æˆåŠŸæ’å…¥äº† 12127.0.0.1:6379&gt; keys *1) &quot;springboot integrated Redis&quot; åºåˆ—åŒ–å™¨å…ˆçœ‹ä¸‹æºç  å¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰è¿™äº›åºåˆ—åŒ–ï¼Œé‚£ä¹ˆä»–ä»¬éƒ½ä¼šè¢«è®¾ç½®ä¸ºå†…ç½®çš„defaultSerializerï¼Œé‚£ä¹ˆè¿™ç§jdkçš„åºåˆ—åŒ–ä¼šä½¿æˆ‘ä»¬çš„ä¸­æ–‡è½¬ä¹‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨JSONæ¥å®ç°åºåˆ—åŒ– 123if (this.defaultSerializer == null) &#123; this.defaultSerializer = new JdkSerializationRedisSerializer(this.classLoader != null ? this.classLoader : this.getClass().getClassLoader());&#125; ä¸‹é¢æˆ‘ä»¬ç›´æ¥ä¸Šæ¡ˆä¾‹ï¼š ä½¿ç”¨jdkå†…ç½®åºåˆ—åŒ–å™¨User 1234567@Data@NoArgsConstructor@AllArgsConstructorpublic class User &#123; private String name; private int age;&#125; ç›´æ¥æµ‹è¯•å°†å¯¹è±¡å†™å…¥ 12345678@Testvoid testSerialization()&#123; User user = new User(); user.setName(&quot;zhima&quot;); user.setAge(19); redisTemplate.opsForValue().set(&quot;user&quot;, user); System.out.println(redisTemplate.opsForValue().get(&quot;user&quot;));&#125; æ‰§è¡Œå‘ç°æŠ¥é”™äº†ï¼Œè¿™å°±æƒ³åˆ°äº†æˆ‘ä»¬ä»æºç ä¸­çœ‹åˆ°çš„JdkSerializationRedisSerializerï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®è‡ªå·±æƒ³è¦çš„åºåˆ—åŒ–å™¨ï¼Œé‚£ä¹ˆå°±é»˜è®¤ä¸ºæ­¤åºåˆ—åŒ–å™¨ï¼Œæ‰€ä»¥çŸ¥é“æŠ¥è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯useræ²¡æœ‰å®ç°åºåˆ—åŒ–æ¥å£ï¼Œé‚£æˆ‘ä»¬æ¥å®ç°ä»¥ä¸‹åºåˆ—åŒ–æ¥å£ 1org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [com.lizhi.springbootredis.pojo.User] è¿™æ—¶å€™å†æ‰§è¡Œï¼Œçœ‹æ§åˆ¶å° 1User(name=zhima, age=19) è‡ªå®šä¹‰åºåˆ—åŒ–å™¨ é…ç½®è‡ªå®šä¹‰redisTemplate 123456789101112131415161718192021@Bean(&quot;myRedisTemplate&quot;)public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)&#123; RedisTemplate&lt;String, Object&gt; template = new RedisTemplate(); template.setConnectionFactory(redisConnectionFactory); Jackson2JsonRedisSerializer&lt;Object&gt; objectJackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class); StringRedisSerializer stringRedisSerializer = new StringRedisSerializer(); ObjectMapper om = new ObjectMapper(); om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); objectJackson2JsonRedisSerializer.setObjectMapper(om); // hashçš„valueä½¿ç”¨JSONåºåˆ—åŒ– template.setHashValueSerializer(objectJackson2JsonRedisSerializer); // valueä½¿ç”¨JSONåºåˆ—åŒ– template.setValueSerializer(objectJackson2JsonRedisSerializer); // hashè¡¨çš„keyä½¿ç”¨stringçš„åºåˆ—åŒ–å™¨ template.setHashKeySerializer(stringRedisSerializer); // keyé‡‡ç”¨stringçš„åºåˆ—åŒ–å™¨ template.setKeySerializer(stringRedisSerializer); template.afterPropertiesSet(); return template;&#125; å†æ‰§è¡Œåˆšåˆšçš„æµ‹è¯•ï¼Œå°±ä¼šå‘ç°ï¼Œå‘½ä»¤è¡Œä¸­çš„keyå·²ç»æ˜¯ä¸€ä¸ªæ­£å¸¸çš„å­—ç¬¦ä¸²äº† å·¥å…·ç±»RedisUtilsè¿™æ ·ä½¿ç”¨åŸç”Ÿçš„APIå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ªå·¥å…·ç±»ã€‚ 12é“¾æ¥:https://pan.baidu.com/s/1CZG5D8QUsz1NnqBjXZf0tg æå–ç :24m2","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-é€šè¿‡Jredisæ“ä½œRedis","slug":"Redis-é€šè¿‡Jedisæ“ä½œRedis","date":"2022-02-24T03:32:22.000Z","updated":"2022-10-04T13:54:48.214Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-é€šè¿‡Jedisæ“ä½œRedis/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E9%80%9A%E8%BF%87Jedis%E6%93%8D%E4%BD%9CRedis/","excerpt":"","text":"JedisJediså…¶å®å°±æ˜¯javaç”¨æ¥æ“ä½œRedisçš„ä¸€ä¸ªå·¥å…·åŒ… å¦‚ä½•ä½¿ç”¨1ã€å¯¼å…¥ä¾èµ– 12345678910111213&lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;4.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.78&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ã€ä½¿ç”¨å°è£…å¥½çš„å¯¹è±¡æµ‹è¯•è¿æ¥Redis 1234567public class TestPing &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;127.0.0.1&quot;,6379); System.out.println(jedis.ping()); &#125;&#125;// æ§åˆ¶å°è¾“å‡ºPONG å¯ä»¥ç‚¹è¿›æºç çœ‹ä¸€ä¸‹ æˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•ä¸å°±æ˜¯æˆ‘ä»¬å½“æ—¶å†™çš„é‚£äº›å—ï¼Œåªä¸è¿‡éƒ½è¢«å°è£…æˆäº†æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ å®ç°äº‹åŠ¡1234567891011121314public class TransactionTest &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379); jedis.flushDB(); jedis.set(&quot;money&quot;,&quot;100&quot;); jedis.set(&quot;out&quot;,&quot;0&quot;); jedis.watch(&quot;money&quot;); Transaction multi = jedis.multi(); jedis.decrBy(&quot;mondy&quot;,30); jedis.incrBy(&quot;out&quot;,30); multi.exec(); jedis.close(); &#125;&#125; å®é™…ä¸Šå’Œå‘½ä»¤è¡Œçš„å‘½ä»¤æ˜¯ä¸€æ¨¡ä¸€æ ·çš„","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-å®ç°ä¹è§‚é”","slug":"Redis-å®ç°ä¹è§‚é”","date":"2022-02-24T03:07:07.000Z","updated":"2022-10-04T13:54:41.398Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-å®ç°ä¹è§‚é”/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81/","excerpt":"","text":"æµ…å®ç°ä¸€ä¸‹ä¹è§‚é”è¿™é‡Œéœ€è¦ä½¿ç”¨watchï¼Œç›´æ¥ä¸Šæ¡ˆä¾‹å§ éœ€æ±‚ï¼šç°æœ‰å­˜æ¬¾100å…ƒï¼ŒèŠ±å‡ºå»30å…ƒï¼Œè¿˜å‰©ä¸‹70å…ƒ 12345678910111213141516127.0.0.1:6379&gt; set money 100OK127.0.0.1:6379&gt; set out 0OK127.0.0.1:6379&gt; watch moneyOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; decrby money 30QUEUED127.0.0.1:6379&gt; incrby out 30QUEUED127.0.0.1:6379&gt; exec1) (integer) 702) (integer) 30# watchåœ¨äº‹åŠ¡æ‰§è¡Œç»“æŸåå°±å¤±æ•ˆäº† ç°åœ¨æˆ‘ä»¬å¼€ä¸¤ä¸ªå®¢æˆ·ç«¯cli-1å’Œcli-2ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„å‘½ä»¤å’Œé¡ºåºæ‰§è¡Œ cli-1 12345678127.0.0.1:6379&gt; watch moneyOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; decrby money 20QUEUED127.0.0.1:6379&gt; incrby out 20QUEUED cli-2 123456127.0.0.1:6379&gt; get money&quot;70&quot;127.0.0.1:6379&gt; incrby money 230(integer) 300127.0.0.1:6379&gt; get money&quot;300&quot; cli-1 1234127.0.0.1:6379&gt; exec # ç›‘è§†çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥è¯¥äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™moneyä¸Šçš„watchæ²¡æœ‰è§£é™¤ï¼Œå¯ä»¥é€šè¿‡unwactchè§£é™¤(nil)127.0.0.1:6379&gt; get money&quot;300&quot;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"å¤šå¹¶å‘ä¸­çš„é”","slug":"JUC-å¤šå¹¶å‘ä¸­çš„é”","date":"2022-02-23T07:56:59.000Z","updated":"2023-01-07T07:55:53.613Z","comments":true,"path":"javaEE/JUC/2022/02/23/JUC-å¤šå¹¶å‘ä¸­çš„é”/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JUC/2022/02/23/JUC-%E5%A4%9A%E5%B9%B6%E5%8F%91%E4%B8%AD%E7%9A%84%E9%94%81/","excerpt":"","text":"ä¸ºä»€ä¹ˆéœ€è¦é”ï¼Ÿåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸è®ºæ€ä¹ˆæ“ä½œæ•°æ®éƒ½ä¸ä¼šå‡ºç°ä»€ä¹ˆè‡´å‘½çš„æ“ä½œï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå¤šå¹¶å‘çš„æ—¶ä»£ï¼Œæˆ‘ä»¬æ›´å¤šçš„è¦è€ƒè™‘å¤šå¹¶å‘ï¼Œå¹¶ä¿è¯å¤šå¹¶å‘ç¯å¢ƒçš„å®‰å…¨æ€§ã€‚ åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹äº‰æŠ¢æ“ä½œåŒä¸€ä»½æ•°æ®ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ç§æœºåˆ¶æ¥ä¿è¯è¿™ä¸€ä»½æ•°æ®çš„å®‰å…¨æ€§ã€‚ é”æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿåœ¨javaä¸­ï¼Œæ¯ä¸€ä¸ªObjectéƒ½æœ‰ä¸€æŠŠé”ï¼Œè¿™æŠŠé”æ”¾åœ¨å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­ï¼Œé”ä¸­è®°å½•äº†å½“å‰å¯¹è±¡è¢«å“ªä¸ªçº¿ç¨‹æ‰€å ç”¨ã€‚ å†…å­˜ä¸­çš„å¯¹è±¡ç»“æ„ å¯¹é½å¡«å……å­—èŠ‚æ˜¯ä¸ºäº†æ»¡è¶³javaå¯¹è±¡å¿…é¡»æ˜¯8æ¯”ç‰¹çš„å€æ•°è¿™ä¸€æ¡ä»¶æ‰€è®¾è®¡çš„ å®ä¾‹æ•°æ®æ˜¯ä¸ºäº†ä¿å­˜å¯¹è±¡å±æ€§å’Œæ–¹æ³•çš„ å¯¹è±¡å¤´æ˜¯ä¸ºäº†ä¿å­˜å¯¹è±¡çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¯¹è±¡å¤´åŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯Mark Word ä¸€ä¸ªæ˜¯Class Pointer Class Pointer æŒ‡å‘Classå¯¹è±¡ Mark Word (32 bit)å­˜æ”¾äº†å¾ˆå¤šå’Œå½“å‰å¯¹è±¡è¿è¡Œæ—¶çŠ¶æ€æœ‰å…³çš„æ•°æ® hashCode é”çŠ¶æ€ synchronizedå®ç°åŸç†synchronizedè¢«ç¼–è¯‘åä¼šç”Ÿæˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¾èµ–è¿™ä¸¤ä¸ªæŒ‡ä»¤å°±å¯ä»¥å®ç°é”çš„æœºåˆ¶ï¼Œä»è€Œå®ç°çº¿ç¨‹çš„åŒæ­¥ è¿™æ˜¯æœªä¸Šé”çš„ä»£ç ï¼š 12345678910111213import java.util.concurrent.TimeUnit;public class TestSync &#123; private int count; public void add()&#123; try &#123; TimeUnit.MILLISECONDS.sleep(30); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;:===&gt;&quot;+count++); &#125;&#125; 123456789101112131415161718public static void main(String[] args) &#123; TestSync ts = new TestSync(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start();&#125; æˆ‘ä»¬æ¥åŠ ä¸€ä¸‹synchronizedä»£ç å— 1234567891011121314151617package com.lizhi;import java.util.concurrent.TimeUnit;public class TestSync &#123; private int count; public void add()&#123; synchronized(this)&#123; try &#123; TimeUnit.MILLISECONDS.sleep(30); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;:===&gt;&quot;+count++); &#125; &#125;&#125; å¯ä»¥å‘ç°ç»“æœååˆ†æ­£ç¡®ï¼Œæˆ‘ä»¬æ¥åç¼–è¯‘ä¸€ä¸‹ï¼Œå¾—åˆ°ä»¥ä¸‹å­—èŠ‚ç æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849javap -c .\\TestSync.classCompiled from &quot;TestSync.java&quot;public class com.lizhi.TestSync &#123; public com.lizhi.TestSync(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public void add(); Code: 0: aload_0 1: dup 2: astore_1 3: monitorenter 4: getstatic #2 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit; 7: ldc2_w #3 // long 30l 10: invokevirtual #5 // Method java/util/concurrent/TimeUnit.sleep:(J)V 13: goto 21 16: astore_2 17: aload_2 18: invokevirtual #7 // Method java/lang/InterruptedException.printStackTrace:()V 21: getstatic #8 // Field java/lang/System.out:Ljava/io/PrintStream; 24: invokestatic #9 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread; 27: invokevirtual #10 // Method java/lang/Thread.getName:()Ljava/lang/String; 30: aload_0 31: dup 32: getfield #11 // Field count:I 35: dup_x1 36: iconst_1 37: iadd 38: putfield #11 // Field count:I 41: invokedynamic #12, 0 // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;I)Ljava/lang/String; 46: invokevirtual #13 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 49: aload_1 50: monitorexit 51: goto 59 54: astore_3 55: aload_1 56: monitorexit 57: aload_3 58: athrow 59: return Exceptio n table: from to target type 4 13 16 Class java/lang/InterruptedException 4 51 54 any 54 57 54 any&#125; å¯ä»¥çœ‹åˆ°åœ¨ç¬¬3è¡Œå’Œç¬¬50è¡Œå‡ºç°äº†monitorenterå’Œmonitorexit Monitorè¯¥å•è¯çš„æ„æ€æ˜¯ç›‘è§†å™¨ï¼Œå¯ä»¥å°†å…¶æƒ³æˆä¸€é—´å®¾é¦†çš„å®¢æˆ¿ï¼ŒæŠŠå„ä¸ªçº¿ç¨‹æƒ³åƒæˆå®¢äººã€‚å¦‚æœå®¢äººæœªé€€æˆ¿ï¼Œåœ¨è¿™ä¹‹åçš„å®¢äººåˆ™æ— æ³•å…¥ä½ï¼Œåªèƒ½ç­‰å¾…è¿™ä¸ªå®¢äººé€€æˆ¿åæ–¹å¯å…¥ä½ã€‚ monitoræ˜¯ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„mutex lockæ¥å®ç°çš„ javaçº¿ç¨‹å®é™…ä¸Šæ˜¯å¯¹æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ˜ å°„ï¼Œæ¯å½“æŒ‚èµ·æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹éƒ½è¦åˆ‡æ¢ æ“ä½œç³»ç»Ÿå†…æ ¸æ€ï¼Œè¿™ç§æ“ä½œæ˜¯æ¯”è¾ƒé‡é‡çº§çš„ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ç”šè‡³åˆ‡æ¢æ—¶é—´ä¼šè¶…è¿‡ä»»åŠ¡æœ¬èº«æ‰§è¡Œçš„æ—¶é—´ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨synchronizedçš„ä¼šå¯¹ç³»ç»Ÿçš„æ€§èƒ½äº§ç”Ÿå¾ˆä¸¥é‡çš„å½±å“ï¼Œä½†æ˜¯ä»java6å¼€å§‹ï¼Œsynchronizedè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¼•å…¥äº†åå‘é”å’Œè½»é‡çº§é”ã€‚ é”çš„å››ç§çŠ¶æ€ç”±ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼šæ— é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ã€‚ è¿™å°±ä¸Mark Wordä¸­çš„å››ç§çŠ¶æ€å¯¹åº”ä¸Šäº† æ³¨æ„ï¼šé”åªèƒ½å‡çº§ä¸èƒ½é™çº§ æ— é” æ— é”å³æ²¡æœ‰å¯¹è‡ªèº«èµ„æºä¸Šé”ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥æ‹¿åˆ°èµ„æºå¹¶æ“ä½œ è¿™å°±å¯èƒ½å‡ºç°ä¸¤ç§æƒ…å†µ æŸä¸ªå¯¹è±¡ä¸ä¼šå‡ºç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæˆ–è€…è¯´å³ä½¿å‡ºç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿä¸ä¼šå‡ºç°ç«äº‰çš„æƒ…å†µ èµ„æºä¼šè¢«ç«äº‰ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³å¯¹èµ„æºé”å®šï¼Œä¸è¿‡è¿™æ ·ä¹Ÿä¸è¡Œï¼Œä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œå°±æƒ³é€šè¿‡ä¸€ç§å…¶ä»–æœºåˆ¶æ¥æ§åˆ¶å¤šçº¿ç¨‹ï¼Œ æ¯”å¦‚è¯´ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹æƒ³ä¿®æ”¹åŒä¸€ä¸ªå€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹æˆåŠŸï¼Œå…¶ä»–å¤±è´¥çš„çº¿ç¨‹éœ€è¦ä¸æ–­å°è¯•ï¼Œç›´åˆ°ä¿®æ”¹æˆåŠŸ ï¼Œè¿™å°±æ˜¯CASï¼ˆCompare And Swapï¼‰,CASåœ¨æ“ä½œç³»ç»Ÿä¸­é€šè¿‡ä¸€æ¡æŒ‡ä»¤æ¥å®ç°ï¼Œæ‰€ä»¥å…¶å°±å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œæœ‰äº†è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°æ— é”ç¼–ç¨‹ åå‘é” å‡å¦‚ä¸€ä¸ªå¯¹è±¡è¢«åŠ é”äº†ï¼Œé‚£ä¹ˆåœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè·å¾—è¿™ä¸ªå¯¹è±¡é”ï¼Œå¹¶åªæœ‰å½“çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ï¼Œæ‰ä¼šå°†é”é‡Šæ”¾ã€‚ æˆ‘ä»¬è®¾æƒ³çš„æ˜¯ï¼Œæœ€å¥½è¿™ä¸ªå¯¹è±¡èƒ½å¤Ÿè®¤è¯†è¿™ä¸ªçº¿ç¨‹ï¼Œå½“è¿™ä¸ªçº¿ç¨‹è¿‡æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æŠŠè‡ªå·±çš„é”ç»™ä»–ï¼Œè¿™å¯ä»¥è¯´è¿™ä¸ªå¯¹è±¡åçˆ±è¿™ä¸ªçº¿ç¨‹ï¼Œè¿™å°±æ˜¯åå‘é”çš„æ¦‚å¿µ é‚£ä¹ˆè¿™ä¸ªè®¤è¯†çš„äººï¼Œè¢«è¿™ä¸ªå¯¹è±¡è®°åœ¨å“ªé‡Œå‘¢ï¼Ÿé‚£å°±æ˜¯åœ¨å¯¹è±¡å¤´ä¸­MarkWordçš„çº¿ç¨‹IDä¸­ï¼Œå‡å¦‚æƒ…å†µå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡å‘ç°ï¼Œä¸æ­¢æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨äº‰æŠ¢é”ï¼Œé‚£ä¹ˆè¯¥åå‘é”ä¼šç›´æ¥å‡çº§æˆè½»é‡çº§é” è½»é‡çº§é” é‚£å½“é”å‡çº§ä¸ºè½»é‡çº§é”çš„æ—¶å€™ï¼Œå¦‚ä½•åˆ¤æ–­çº¿ç¨‹å’Œæ‰€ä¹‹é—´çš„ç»‘å®šå…³ç³»å‘¢ï¼Ÿå¯ä»¥å†çœ‹ä¸‹é‚£å¼ markwordçš„è¡¨ï¼Œè¿™é‡Œå·²ç»ä¸å†ä½¿ç”¨çº¿ç¨‹IDè¿™ä¸ªå­—æ®µäº†ï¼Œè€Œæ˜¯å°†30bitå˜ä¸ºæŒ‡å‘çº¿ç¨‹æ ˆä¸­çš„é”è®°å½•ï¼ˆLock Recordï¼‰çš„æŒ‡é’ˆ å½“ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è·å¾—å¯¹è±¡çš„é”çš„æ—¶å€™ï¼ŒåŠ å…¥çœ‹åˆ°é”çš„æ ‡å¿—ä½ä¸º00é‚£ä¹ˆå°±çŸ¥é“å®ƒæ˜¯è½»é‡çº§é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ä¼šåœ¨è‡ªå·±çš„è™šæ‹Ÿæœºæ ˆä¸­å¼€è¾Ÿä¸€å—è¢«ç§°ä¸ºLock Recordçš„ç©ºé—´ï¼ˆçº¿ç¨‹ç§æœ‰çš„å“¦ï¼‰ï¼Œè¯¥æ§ä»¶ç”¨æ¥å­˜æ”¾å¯¹è±¡å¤´ä¸­çš„Mark wordçš„å‰¯æœ¬ä»¥åŠowneræŒ‡é’ˆï¼Œçº¿ç¨‹é€šè¿‡CASå»å°è¯•è·å¾—é”ï¼Œä¸€æ—¦è·å–é‚£ä¹ˆå°†ä¼šå¤åˆ¶è¯¥å¯¹è±¡å¤´ä¸­çš„markwordåˆ°æœ¬çº¿ç¨‹çš„Lock recordä¸­å¹¶ä¸”å°†Locker recordä¸­çš„owneræŒ‡é’ˆæŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹è±¡çš„å‰ä¸‰åä½å°†ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘çº¿ç¨‹è™šæ‹Ÿæœºæ ˆä¸­çš„Lock Recordï¼Œè¿™æ ·ä¸€æ¥å°±å®ç°äº†çº¿ç¨‹å’Œå¯¹è±¡é”çš„ç»‘å®šã€‚ å½“çº¿ç¨‹å·²ç»è¢«æŠ¢å äº†ï¼Œé‚£å…¶ä»–æƒ³æŠ¢å çš„çº¿ç¨‹ä¼šè‡ªæ—‹ç­‰å¾…ï¼ˆå¯ä»¥ç†è§£ä¸ºè½®è¯¢ï¼‰ï¼Œä¸æ–­å°è¯•æ‹¿åˆ°é”ï¼Œè¿™ç§æ“ä½œåŒºåˆ«äºè¢«æ“ä½œç³»ç»ŸæŒ‚èµ·é˜»å¡ï¼Œå¦‚æœå¯¹è±¡çš„é”å¾ˆå¿«å°±è¢«é‡Šæ”¾çš„è¯ï¼Œè‡ªæ—‹å°±ä¸éœ€è¦è¿›è¡Œç³»ç»Ÿä¸­æ–­å’Œé‡æ–°æ¢å¤ï¼Œæ‰€ä»¥å®ƒçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚ è‡ªæ—‹ç›¸å½“äºCPUç©ºè½¬ï¼Œå¦‚æœCPUç©ºè½¬æ—¶é—´è¿‡é•¿ï¼Œæ€§èƒ½ä¹Ÿä¼šäº§ç”ŸæŸè€—ï¼Œç„¶åå°±æœ‰äº†ä¸€ç§ä¼˜åŒ–ï¼Œå°±æ˜¯é€‚åº”æ€§è‡ªæ—‹ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è‡ªæ—‹çš„æ—¶é—´ä¼šæ ¹æ®ä¸Šä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šè‡ªæ—‹çš„æ—¶é—´ä»¥åŠé”çš„çŠ¶æ€æ¥å†³å®šçš„ é‡é‡çº§é” å¦‚æœåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹è¦è·å¾—è¿™ä¸ªå¯¹è±¡é”ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦è‡ªæ—‹ç­‰å¾…çš„çº¿ç¨‹è¶…è¿‡ä¸€ä¸ªï¼Œåˆ™ä¼šå‡çº§ä¸ºé‡é‡çº§é”ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨monitoræ¥å¯¹çº¿ç¨‹è¿›è¡Œæ§åˆ¶ï¼Œæ­¤æ—¶å°†ä¼šå®Œå…¨é”å®šèµ„æºï¼Œå¯¹çº¿ç¨‹çš„ç®¡æ§ä¹Ÿæ›´ä¸ºä¸¥æ ¼ æ— é”ç¼–ç¨‹javaä¸­çš„synchronizedå°±æ˜¯æ‚²è§‚é”ï¼ˆPessimistic Concurrency Controlï¼‰ï¼Œä»€ä¹ˆå«æ‚²è§‚é”å‘¢ï¼Ÿ ç®€å•æ¥è¯´å°±æ˜¯æ“ä½œç³»ç»Ÿä¼šæ‚²è§‚åœ°è®¤ä¸ºï¼Œå¦‚æœä¸ä¸¥æ ¼åŒæ­¥çº¿ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆä¸€å®šä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥äº’æ–¥é”ä¼šé”å®šèµ„æºï¼Œç›´ä¾›ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œè€Œé˜»å¡å…¶ä»–çº¿ç¨‹ï¼Œå› æ­¤å«æ‚²è§‚é”ï¼Œä½†æ˜¯æ‚²è§‚é”ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯è¯»çš„æ“ä½œï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦åœ¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½é”å®šèµ„æºã€‚å¯èƒ½ä¼šå‡ºç°åŒæ­¥ä»£ç å—æ‰§è¡Œçš„è€—æ—¶è¿œè¿œå°äºçº¿ç¨‹åˆ‡æ¢çš„è€—æ—¶ã€‚ä½¿ç”¨æ‚²è§‚é”ï¼Œä¼šå¯¼è‡´æ€§èƒ½ååˆ†ä¸å®¹ä¹è§‚ï¼Œæ¯”å¦‚å¤§é‡ç”¨æˆ·éœ€è¦åŒæ—¶è¯»å–åŒä¸€ä»½èµ„æºï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ‚²è§‚é”ï¼Œåˆ™åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æŸ¥çœ‹ï¼Œå…¶ä»–ç”¨æˆ·éƒ½åœ¨ä¸€ç›´ç™½å±ï¼Œä½†æ˜¯ï¼å…¶å®å¯¹äºè¯»çš„æ“ä½œï¼Œå³ä½¿æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œè¯¥æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¯¹è¯¥æ•°æ®é€ æˆå½±å“ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¸é”å®šèµ„æºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥å¯¹çº¿ç¨‹è°ƒç”¨è¿›è¡Œä¸€äº›åè°ƒå‘¢ï¼Ÿè¿™æ—¶å€™å°±å‡ºç°äº†ä¹è§‚é”è¿™ç§æœºåˆ¶ï¼Œå®ç°åŸç†å°±æ˜¯CASï¼ˆCompare And Swapï¼‰ CASæˆ‘ä»¬æ¥ä¸¾ä¸ªæ —å­ï¼šäººå°±æ˜¯çº¿ç¨‹ï¼Œå•æ‰€å°±æ˜¯å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ªå€¼æ¥è¡¨ç¤ºæ˜¯å¦è¢«å ç”¨occupy 0è¡¨ç¤ºç©ºé—² 1è¡¨ç¤ºæœ‰äºº å¾ˆå¤šäººè¦å»æŠ¢å•æ‰€ï¼Œç„¶åçº¿ç¨‹Aï¼ˆOld Value &#x3D; 0 ï¼Œnew Value &#x3D;1ï¼‰ã€Bï¼ˆOld Value &#x3D; 0ï¼Œnew Value &#x3D; 1ï¼‰è¿™ä¸¤ä¸ªäººå†²åˆ°äº†æœ€å‰é¢ï¼Œç„¶åAç‡å…ˆå’Œå•æ‰€çš„occupyæ¯”è¾ƒï¼ˆCompareï¼‰å‘ç°å’ŒoldValueä¸€è‡´ï¼Œåˆ™å°†oldValueä¸å•æ‰€çš„occupyäº¤æ¢ï¼ˆAnd Swapï¼‰ï¼Œè¿™æ—¶å€™Bä¸€çœ‹è‡ªå·±çš„oldValueä¸å•æ‰€çš„occupyï¼ˆ1ï¼‰ä¸ä¸€è‡´ï¼Œä»–å¾ˆä¸ç”˜å¿ƒï¼Œä½†ä¹Ÿåªèƒ½åœ¨å•æ‰€å¤–è¸±æ­¥ï¼ˆè‡ªæ—‹ï¼‰ï¼Œé€šå¸¸åœ¨ç­‰äº†ä¸€æ®µæ—¶é—´åï¼ˆè®¾ç½®æœ€å¤§è‡ªæ—‹æ¬¡æ•°ï¼‰ï¼Œéª‚å‡ºä¸€å¥å›½ç²¹åå°±ç¦»å»äº† è¿™æ—¶å€™å¯èƒ½å°±å‡ºç°äº†é—®é¢˜ï¼Œå› ä¸ºCompareå’ŒSwapæ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ²¡æœ‰åŸå­æ€§ï¼Œè¿™å°±æœ‰å¯èƒ½å‡ºç°ï¼Œå½“Aå³å°†å°†å€¼æ”¹ä¸º1çš„é‚£ä¸€åˆ¹é‚£ï¼ŒBæŠ¢åˆ°äº†æ—¶é—´ç‰‡ï¼Œå°†å…¶æ”¹ä¸ºäº†1ï¼Œç„¶åAä¹Ÿå°†å…¶æ”¹ä¸º1ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ï¼Œä¸¤ä¸ªäººä¸€èµ·è¿›å…¥äº†å•æ‰€ã€‚ é‚£ä¹ˆå¦‚ä½•ä¿è¯CASçš„åŸå­æ€§å‘¢ï¼Ÿéš¾é“è¿˜æ˜¯é”æ¥å®ç°åŒæ­¥å—ï¼Ÿè¿™ä¸å°±æ˜¯ä¸€ä¸ªé¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„é—®é¢˜äº†å—ï¼Ÿ å…¶å®å•Šï¼Œå„ç§ä¸åŒæ¶æ„çš„CPUéƒ½æä¾›äº†æŒ‡ä»¤çº§åˆ«çš„CASåŸå­æ“ä½œï¼Œ æ¯”å¦‚åœ¨X86æ¶æ„ä¸‹ï¼Œé€šè¿‡cmpxchgæŒ‡ä»¤å¯ä»¥æ”¯æŒCAS åœ¨ARMä¸‹ï¼Œé€šè¿‡LL&#x2F;SCæ¥å®ç°CSâ€¦â€¦ ä¹Ÿå°±æ˜¯è¯´ä¸é€šè¿‡æ“ä½œç³»ç»Ÿçš„åŒæ­¥åŸè¯­ï¼ˆæ¯”å¦‚ mutexï¼‰ï¼ŒCPUå·²ç»å®ç°äº†CSï¼Œä¸Šå±‚åªéœ€è¦è°ƒç”¨å³å¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ä¾èµ–é”æ¥è¿›è¡Œçº¿ç¨‹åŒæ­¥ï¼Œä½†æ˜¯è¿™ä¹Ÿä¸æ„å‘³ç€æ— é”å¯ä»¥å®Œå…¨ä»£æ›¿æœ‰é” åˆ©ç”¨CASç‰¹æ€§æ¥è¿›è¡Œæ— é”ç¼–ç¨‹éœ€æ±‚ï¼šä½¿ç”¨ä¸‰æ¡çº¿ç¨‹ï¼Œå°†ä¸€ä¸ªå€¼ï¼Œä»0ç´¯åŠ åˆ°1000 1ã€é”™è¯¯ 123456789101112public class Application2 &#123; static int count =0 ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count&lt;1000)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count++); &#125; &#125;).start(); &#125; &#125;&#125; 2ã€ä½¿ç”¨synchronized 1234567891011121314public class Application2 &#123; static int count =0 ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count&lt;1000)&#123; synchronized (Application2.class)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count++); &#125; &#125; &#125;).start(); &#125; &#125;&#125; 3ã€æ— é” 123456789101112public class Application2 &#123; static AtomicInteger count =new AtomicInteger(0) ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count.get()&lt;1000)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count.getAndIncrement()); &#125; &#125;).start(); &#125; &#125;&#125; æ¢ç©¶æºç  AtomicIntegerçš„getAndIncrementæ–¹æ³• 123public final int getAndIncrement() &#123; return U.getAndAddInt(this, VALUE, 1);&#125; Uçš„getAndAddIntæ–¹æ³• 1private static final jdk.internal.misc.Unsafe U = jdk.internal.misc.Unsafe.getUnsafe(); Uæ˜¯ä¸€ä¸ªæ“ä½œåº•å±‚çš„ç±» 12345678@HotSpotIntrinsicCandidatepublic final int getAndAddInt(Object o, long offset, int delta) &#123; int v; do &#123; v = getIntVolatile(o, offset); &#125; while (!weakCompareAndSetInt(o, offset, v, v + delta)); return v;&#125; 123456@HotSpotIntrinsicCandidatepublic final boolean weakCompareAndSetInt(Object o, long offset, int expected, int x) &#123; return compareAndSetInt(o, offset, expected, x);&#125; 1234@HotSpotIntrinsicCandidatepublic final native boolean compareAndSetInt(Object o, long offset, int expected, int x); å¯åŠ¨æ¬¡æ•°å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°æ¥é…ç½®ï¼Œé»˜è®¤æ˜¯10ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ­»å¾ªç¯ Unsafe","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"https://li-zhi.net.cn/categories/javaEE/JUC/"}],"tags":[{"name":"JUC","slug":"JUC","permalink":"https://li-zhi.net.cn/tags/JUC/"}]},{"title":"Redis-äº‹åŠ¡","slug":"Redis-äº‹åŠ¡","date":"2022-02-23T07:32:42.000Z","updated":"2022-10-04T13:54:45.002Z","comments":true,"path":"javaEE/Redis/2022/02/23/Redis-äº‹åŠ¡/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/23/Redis-%E4%BA%8B%E5%8A%A1/","excerpt":"","text":"äº‹åŠ¡å›é¡¾æˆ‘ä»¬åœ¨MySQLä¸­å­¦ä¹ çš„äº‹åŠ¡å…·æœ‰ACIDåŸåˆ™ åŸå­æ€§ï¼ˆAtomicityï¼‰ åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ äº‹åŠ¡å‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ Redisä¸­çš„äº‹åŠ¡äº‹åŠ¡çš„æœ¬è´¨å³ï¼šä¸€ç»„å‘½ä»¤ä¸€èµ·æ‰§è¡Œï¼Œä¸å…è®¸è¢«æ’é˜Ÿã€‚ åœ¨Redisä¸­ï¼Œå•æ¡å‘½ä»¤æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ äº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ 123456789101112131415161718192021222324# å¼€å¯äº‹åŠ¡127.0.0.1:6379&gt; multiOK# å‘½ä»¤å…¥é˜Ÿ127.0.0.1:6379&gt; hset user:1 name zhimaQUEUED127.0.0.1:6379&gt; hset user:1 age 19QUEUED127.0.0.1:6379&gt; hset user:1 address SuzhouQUEUED127.0.0.1:6379&gt; hmget user:1 name age addressQUEUED# æ‰§è¡Œäº‹åŠ¡127.0.0.1:6379&gt; exec1) (integer) 12) (integer) 13) (integer) 14) 1) &quot;zhima&quot; 2) &quot;19&quot; 3) &quot;Suzhou&quot;# ä¸­é€”æ”¾å¼ƒäº‹åŠ¡127.0.0.1:6379&gt; discard ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šå³ä»£ç æœ¬èº«åˆé—®é€€ï¼Œæ¯”å¦‚127.0.0.1:6379&gt; asdmlk (error) ERR unknown command &#39;asdmlk&#39;å‘½ä»¤è¡Œä¼šç›´æ¥æŠ¥é”™ 12345678910111213141516127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; set k1 v1QUEUED127.0.0.1:6379&gt; set k2 v2QUEUED127.0.0.1:6379&gt; getset k2(error) ERR wrong number of arguments for &#x27;getset&#x27; command127.0.0.1:6379&gt; set k3 v3QUEUED127.0.0.1:6379&gt; exec(error) EXECABORT Transaction discarded because of previous errors.127.0.0.1:6379&gt; get k3(nil)127.0.0.1:6379&gt; get k2(nil) å¯ä»¥å‘ç°æ‰€æœ‰çš„å‘½ä»¤éƒ½æ²¡æœ‰æ‰§è¡Œã€‚ è¿è¡Œæ—¶å¼‚å¸¸ï¼šå¦‚æœäº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¿™ç§é”™è¯¯ï¼Œå…¶ä»–è¯­å¥ç…§å¸¸æ‰§è¡Œï¼Œè¯¥è¯­å¥ä¸æ‰§è¡Œï¼ŒæŠ›å‡ºå¼‚å¸¸ 1234567891011127.0.0.1:6379&gt; set k1 varOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; incr k1QUEUED127.0.0.1:6379&gt; get k1QUEUED127.0.0.1:6379&gt; exec1) (error) ERR value is not an integer or out of range2) &quot;var&quot;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ","slug":"CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ","date":"2022-02-23T03:45:07.000Z","updated":"2022-10-04T13:52:27.206Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/23/CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/23/CS%E5%92%8CBS%E6%9E%B6%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","excerpt":"","text":"C&#x2F;Sæ¶æ„å’ŒB&#x2F;Sæ¶æ„C&#x2F;Sæ¶æ„ Client&#x2F;Serverå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨ å®¢æˆ·ç«¯æ˜¯é’ˆå¯¹æŸä¸€å…·ä½“ä¸šåŠ¡ä¸“é—¨å¼€å‘çš„è½¯ä»¶ï¼Œæ˜¯éœ€è¦ä¸“é—¨å®‰è£…çš„è½¯ä»¶ã€‚ ç”±äºå®¢æˆ·ç«¯æ˜¯ä¸“ç”¨çš„è½¯ä»¶ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ç¨‹åºä¸€èˆ¬ä¹Ÿå…·æœ‰å¯¹å…·ä½“ä¸šåŠ¡è¿›è¡Œå¤„ç†çš„èƒ½åŠ›ï¼Œå¯ä»¥å‡è½»æœåŠ¡ç«¯å‹åŠ› ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œå®‰å…¨æ€§è¾ƒé«˜ è‡´å‘½é—®é¢˜ï¼šç‰ˆæœ¬å‡çº§æˆæœ¬å¾ˆé«˜ å°±æ¯”å¦‚QQã€å¾®ä¿¡ç­‰åº”ç”¨ç¨‹åº B&#x2F;Sæ¶æ„ Browser&#x2F;Serveæµè§ˆå™¨&#x2F;æœåŠ¡å™¨ å®ƒå…¶å®ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„C&#x2F;Sæ¶æ„ï¼Œåªä¸è¿‡è¿™ä¸ªClientæ˜¯æµè§ˆå™¨ï¼Œæ˜¯ä¸€ä¸ªé€šç”¨çš„å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹å…·ä½“ä¸šåŠ¡è¿›è¡Œå¤„ç†çš„èƒ½åŠ›ï¼Œé€Ÿåº¦é™ä½ã€‚ ä¼˜ç‚¹ï¼šä¸å­˜åœ¨å®¢æˆ·ç«¯å‡çº§çš„é—®é¢˜ è‡´å‘½é—®é¢˜ï¼šé€Ÿåº¦æ…¢ï¼Œè€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå®‰å…¨æ€§ä½ å°±æ¯”å¦‚ï¼Œç½‘é¡µç‰ˆQQ","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","slug":"ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","date":"2022-02-22T09:10:53.000Z","updated":"2023-03-06T06:45:29.740Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/02/22/ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/02/22/%E3%80%903-Medium%E3%80%91%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/","excerpt":"","text":"æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: s = &quot;abcabcbb&quot;è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ ç¤ºä¾‹ 2: 123è¾“å…¥: s = &quot;bbbbb&quot;è¾“å‡º: 1è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚ ç¤ºä¾‹ 3: 1234è¾“å…¥: s = &quot;pwwkew&quot;è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot; æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚ æç¤ºï¼š 0 &lt;= s.length &lt;= 5 * 104 s ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ Related Topics å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² æ»‘åŠ¨çª—å£ æš´åŠ›è§£æ³•éå†æ•°ç»„çš„æ‰€æœ‰çš„åŒºé—´ï¼Œå°†æ»¡è¶³é¢˜æ„åŒºé—´é•¿åº¦çš„æœ€å¤§å€¼è¿”å› 123456789101112131415161718192021222324252627282930313233343536373839class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if (len &lt;= 1) &#123; return len; &#125; int maxLength = 1; for (int i = 0; i &lt; len; i++) &#123; for (int j = i + 1; j &lt; len; j++) &#123; // å¦‚æœæ˜¯æ— é‡å¤çš„å­ä¸²æ‰éœ€è¦å’Œ maxLength ä½œæ¯”è¾ƒ if (allUnique(s, i, j)) &#123; maxLength = Math.max(maxLength, j - i + 1); &#125; &#125; &#125; return maxLength; &#125; /** * è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è¿”å›è¯¥åŒºé—´æ˜¯å¦æœ‰é‡å¤çš„å­—ç¬¦ï¼Œæœ‰åˆ™è¿”å›falseï¼Œæ²¡æœ‰åˆ™è¿”å›true * * @param s * @param i * @param j * @return */ private boolean allUnique(String s, int i, int j) &#123; // è¿™é‡Œä½¿ç”¨ArrayListä¹Ÿæ˜¯å¯ä»¥çš„ Set&lt;Character&gt; set = new HashSet&lt;&gt;(); // çœ‹sçš„[i,j]åŒºé—´å†…æ˜¯å¦æœ‰é‡å¤çš„å­—ç¬¦ for (int x = i; x &lt;= j; x++) &#123; if (set.contains(s.charAt(x))) &#123; return false; &#125; set.add(s.charAt(x)); &#125; return true; &#125;&#125; ä¸­é—´ä¼šæœ‰é‡å¤çš„æ¯”è¾ƒ å¯¼è‡´æ•ˆç‡ååˆ†ä½ä¸‹ å½“stringé•¿åº¦ååˆ†å¤§çš„æ—¶å€™ï¼Œä¸€å®šä¼šå¯¼è‡´è¶…æ—¶ æ»‘åŠ¨çª—å£æ³•æ€è·¯å¦‚ä¸‹ç»„å›¾æ‰€ç¤º ç¤ºä¾‹ä»£ç  1 123456789101112131415161718192021222324252627282930313233class Solution &#123; // è¿™æ˜¯å®Œå®Œå…¨å…¨éµå®ˆæ»‘åŠ¨çª—å£çš„æ€è·¯ public int lengthOfLongestSubstring(String s) &#123; int size = s.length(); if(size &lt;= 1)&#123; return s; &#125; char[] sArray = s.toCharArray(); Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); int left = 0; int right = 0; int maxLength = 0; // [left,right)æ˜¯æ²¡æœ‰é‡å¤å…ƒç´ çš„åŒºé—´ while (right &lt; size) &#123; // å¦‚æœçª—å£ä¸­æ²¡æœ‰æ­¤å…ƒç´ æˆ–è€…å‡ºç°æ¬¡æ•°ä¸º0ï¼Œæ‰©å¤§å³è¾¹ç•Œ while (right &lt; size &amp;&amp; window.getOrDefault(sArray[right], 0) == 0) &#123; window.merge(sArray[right++], 1, Integer::sum); &#125; maxLength = Math.max(right - left, maxLength); // å¦‚æœèµ°åˆ°äº†å°¾éƒ¨ï¼Œä¸éœ€è¦å†ç¼©å°çª—å£äº†ï¼Œç›´æ¥è¿”å›æœ€å¤§å€¼å³å¯ if (right == size) &#123; return maxLength; &#125; // æ²¡æœ‰åˆ°å°¾éƒ¨ï¼Œrightæ‰€åœ¨çš„ä½ç½®å°±æ˜¯[left,right)ä¸­é‡å¤çš„å…ƒç´  // while (sArray[left] != sArray[right]) &#123; window.merge(sArray[left++], -1, Integer::sum); &#125; window.merge(sArray[left++], -1, Integer::sum); &#125; return maxLength; &#125;&#125; åœ¨è¿™é“é¢˜ç›®ä¸­ç”¨setæ¥å……å½“windowä¹Ÿæ˜¯å¯ä»¥çš„ ç¤ºä¾‹ä»£ç  2 1234567891011121314151617181920212223242526272829class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int size = s.length(); if(size &lt;= 1)&#123; return s; &#125; char[] sArray = s.toCharArray(); Set&lt;Character&gt; window = new HashSet&lt;&gt;(); int right = 0; int left = 0; int maxLength = 1; while (right &lt; size) &#123; // åªè¦çª—å£ä¸­æ²¡æœ‰sArray[right]ï¼Œå°±ä¸€ç›´æ‰©å¤§å³è¾¹ç•Œ while (right &lt; size &amp;&amp; !window.contains(sArray[right])) &#123; window.add(sArray[right++]); &#125; maxLength = Math.max(right - left, maxLength); // è¯´æ˜åˆ°äº†å°¾éƒ¨ if (right == size) &#123; return maxLength; &#125; while (sArray[left] != sArray[right]) &#123; window.remove(sArray[left++]); &#125; window.remove(sArray[left++]); &#125; return maxLength; &#125;&#125; ä½†æ˜¯è¿™ä¸¤ç§éƒ½ä¸å¤§å¥½ è¿™ä¸¤ç§çš„windowçš„å®šä¹‰éƒ½æ˜¯sçš„[legft,right)åŒºé—´æ˜¯ä¸é‡å¤çš„å­ä¸² ä¸‹é¢çœ‹windowçš„å®šä¹‰æ˜¯sçš„[left,right]åŒºé—´ä¸æ˜¯é‡å¤çš„å­ä¸²çš„æ—¶å€™è¯¥å¦‚ä½•å†™ä»£ç  ç¤ºä¾‹ä»£ç  3 12345678910111213141516171819202122232425class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int size = s.length(); if(size &lt;= 1)&#123; return s; &#125; char[] sArray = s.toCharArray(); Set&lt;Character&gt; window = new HashSet&lt;&gt;(); int right = 0; int left = 0; int maxLength = 1; // [left,right]æ˜¯ä¸é‡å¤çš„å­ä¸² while (right &lt; size) &#123; char rightChar = sArray[right]; // ä¿æŒçª—å£ä¸­æ²¡æœ‰å’Œå³å°†åŠ å…¥çš„å³è¾¹ç•Œä¸€æ ·çš„å­—ç¬¦ while (window.contains(rightChar)) &#123; window.remove(sArray[left++]); &#125; maxLength = Math.max(maxLength, right - left + 1); // å°†å³è¾¹ç•ŒåŠ å…¥çª—å£ window.add(sArray[right++]); &#125; return maxLength; &#125;&#125; ä½¿ç”¨é˜Ÿåˆ—ä¼˜åŒ–12345678910111213141516171819202122class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int size = s.length(); if(size &lt;= 1)&#123; return s; &#125; char[] sArray = s.toCharArray(); int right = 0; int left = 0; int maxLength = 0; LinkedList&lt;Character&gt; window = new LinkedList&lt;&gt;(); while (right &lt; size) &#123; while (window.contains(sArray[right])) &#123; window.removeFirst(); left++; &#125; maxLength = Math.max(maxLength, right - left + 1); window.addLast(sArray[right++]); &#125; return maxLength; &#125;&#125; ä½¿ç”¨mapä¼˜åŒ–æˆ‘ä»¬å‘ç°å¯¹äºå¤„ç†leftï¼Œéœ€è¦éå†leftå¾€åèµ° é‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨mapå­˜ä¸€ä¸‹ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿæ‹¿åˆ°çª—å£ä¸­é‡å¤çš„å­—ç¬¦çš„é‚£ä¸€ä¸ªç´¢å¼• 12345678910111213141516171819202122232425class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int size = s.length(); if(size &lt;= 1)&#123; return s; &#125; char[] sArray = s.toCharArray(); int right = 0; int left = 0; int maxLength = 0; Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); while (right &lt; size) &#123; // å¦‚æœå³è¾¹ç•ŒåŠ å…¥å°±ä¼šå¯¼è‡´çª—å£æœ‰é‡å¤å­—ç¬¦äº† if (window.containsKey(sArray[right])) &#123; // æ›´æ–°å·¦è¾¹ç•Œ left = Math.max(window.get(sArray[right]) + 1, left); &#125; // æ›´æ–°æœ€å¤§å€¼ maxLength = Math.max(maxLength, right - left + 1); // è¦†ç›–æˆ–ä¿å­˜å¯¹åº”çš„å…³ç³» window.put(sArray[right], right++); &#125; return maxLength; &#125;&#125; å¯¹mapå†æ¬¡è¿›è¡Œä¼˜åŒ– å› ä¸ºå­—ç¬¦æ˜¯ç¡®å®šçš„æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥newä¸€ä¸ª128é•¿åº¦çš„æ•°ç»„æ¥å½“hashmapï¼Œé”®æ˜¯å­—ç¬¦çš„ascllç å€¼ï¼Œå€¼æ˜¯ç´¢å¼•ï¼Œä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123; return len; &#125; int maxLength = 1; int left = 0; int right = 0; int[] window = new int[128]; while(right &lt; len)&#123; char now = s.charAt(right); // å¦‚æœwindow[now]æ²¡æœ‰å€¼å°±æ˜¯0å’ŒåŸæœ¬çš„leftç›¸æ¯”è¾ƒå³å¯ left = Math.max(left, window[now] +1); // æ›´æ–°æœ€å¤§å€¼ maxLength = Math.max(maxLength, right-left+1); // è¦†ç›–æˆ–ä¿å­˜å¯¹åº”çš„å…³ç³» window[now] = right++; &#125; return maxLength; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹","slug":"Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹","date":"2022-02-22T08:41:55.000Z","updated":"2022-10-04T13:54:37.679Z","comments":true,"path":"javaEE/Redis/2022/02/22/Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/22/Redis-%E4%B8%89%E5%A4%A7%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"ä¸‰ç§ç‰¹æ®Šç±»å‹geospatialè¯¥æ•°æ®ç±»å‹æ˜¯ç”¨æ¥å­˜å‚¨åœ°ç†ç©ºé—´çš„ é™„è¿‘çš„äººï¼Œå‘é€å®šä½ï¼Œåˆ†äº«å®æ—¶ä½ç½®ï¼Œæ‰“è½¦çš„æ—¶å€™çš„è·ç¦»è®¡ç®—éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå®ç° æˆ‘ä»¬è¿™é‡Œä½¿ç”¨è¿™å‡ ä¸ªåŸå¸‚çš„ç»çº¬åº¦ä½œä¸ºæµ‹è¯• åŸå¸‚ ç»åº¦ ç»´åº¦ ç›¸åŸåŒº 120.64239 31.36889 å´æ±ŸåŒº 120.638317 31.159815 å¤ªä»“ 121.10891 31.4497 å¸¸ç†Ÿå¸‚ 120.75225 31.65374 æ˜†å±±å¸‚ 120.98074 31.38464 è¿™é‡Œæœ‰å…­ä¸ªåŸºæœ¬å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªä¸ªçœ‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354# geoadd key longitude latitude member [longitude latitude member..]# å¢åŠ ä¸€ä¸ªç»çº¬åº¦çš„åæ ‡# ä¸¤ææ— æ³•æ·»åŠ ï¼Œä¸€èˆ¬æˆ‘ä»¬é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥127.0.0.1:6379&gt; geoadd Suzhou 120.64239 31.36889 XiangChengDistrict 120.638317 31.159815 WuJiangDistrict 121.10891 31.4497 TaiCang 120.75225 31.65374 ChangShuCity 120.98074 31.38464 KunShanCity(integer) 5# geodist key member1 member2 [unit]# è·å–ä¸¤åœ°ä¹‹é—´çš„è·ç¦»å•ä½ä¸ºç±³127.0.0.1:6379&gt; GEODIST Suzhou TaiCang WuJiangDistrict&quot;55133.1652&quot;127.0.0.1:6379&gt; GEODIST Suzhou TaiCang KunShanCity km&quot;14.1556&quot;# geohash key member [member..]# è·å–memberçš„äºŒç»´çš„ç©ºé—´ç»çº¬åº¦æ•°æ®ç¼–ç # è¿™ä¸ªå¯ä»¥csdnæœä¸€ä¸‹å…·ä½“çš„ç®—æ³•å®ç°127.0.0.1:6379&gt; geohash Suzhou TaiCang1) &quot;wtw4gvhzf10&quot;# geopos key member [member..]# æŸ¥çœ‹memberçš„ç»çº¬åº¦127.0.0.1:6379&gt; geopos Suzhou TaiCang XiangChengDistrict1) 1) &quot;121.10891193151474&quot; 2) &quot;31.449701065685858&quot;2) 1) &quot;120.64238995313644&quot; 2) &quot;31.368889085683811&quot;# georadius key longitude latitude radius m|km|ft|mi [WITHSCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC| ESC]# miæ˜¯è‹±é‡Œï¼Œftæ˜¯è‹±å°º# ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾åˆ°æŸä¸€åŠå¾„å†…çš„å…ƒç´ # WITHCOORDè¡¨ç¤ºæ˜¾ç¤ºåæ ‡# WITHDISTè¡¨ç¤ºæ˜¾ç¤ºè·ç¦»è¯¥ç‚¹çš„ä½ç½®# WITHHASHè¡¨ç¤ºæ˜¾ç¤ºè¯¥åœ°å€çš„hashå€¼# COUNT countè¡¨ç¤ºæ˜¾ç¤ºå‡ ä¸ª# ASC| ESC è¡¨ç¤ºæ­£åºè¿˜æ˜¯å€’åº127.0.0.1:6379&gt; georadius Suzhou 120.98080 31.28460 30 km withdist1) 1) &quot;KunShanCity&quot; 2) &quot;11.1271&quot;2) 1) &quot;TaiCang&quot; 2) &quot;22.0285&quot;# georadiusbymember key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC]# ä»¥memberä¸ºä¸­å¿ƒradiusä¸ºåŠå¾„ï¼Œæ‰¾åˆ°åœ¨æ­¤èŒƒå›´ä¸­çš„å…ƒç´ 127.0.0.1:6379&gt; georadiusbymember Suzhou TaiCang 30 km withcoord withdist withhash asc1) 1) &quot;TaiCang&quot; 2) &quot;0.0000&quot; 3) (integer) 4054798020485654 4) 1) &quot;121.10891193151474&quot; 2) &quot;31.449701065685858&quot;2) 1) &quot;KunShanCity&quot; 2) &quot;14.1556&quot; 3) (integer) 4054794184325796 4) 1) &quot;120.98073989152908&quot; 2) &quot;31.38463984296795&quot; geoçš„åº•å±‚å…¶å®æ˜¯Zsetï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Zsetçš„å‘½ä»¤å»æ“ä½œgeo 1234567127.0.0.1:6379&gt; zrem Suzhou TaiCang(integer) 1127.0.0.1:6379&gt; zrange Suzhou 0 -11) &quot;WuJiangDistrict&quot;2) &quot;XiangChengDistrict&quot;3) &quot;ChangShuCity&quot;4) &quot;KunShanCity&quot; Hyperloglog å…ˆæ¥äº†è§£ä¸€ä¸‹åŸºæ•°æ˜¯ä»€ä¹ˆï¼Ÿ åŸºæ•°å…¶å®å°±æ˜¯ä¸€ä¸ªé›†åˆä¸­ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé›†åˆå»é‡åçš„é›†åˆé•¿åº¦ ä¸šåŠ¡åœºæ™¯ï¼š ç½‘ç«™çš„è®¿é—®é‡ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä¹Ÿç®—ä¸€ä¸ªäººï¼‰ ä¼ ç»Ÿä½¿ç”¨seté›†åˆçš„é‡å¤æ— åºçš„ç‰¹æ€§ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„idï¼Œä»¥seté›†åˆçš„é•¿åº¦ä½œä¸ºæ ‡å‡†ã€‚ä½†æ˜¯ï¼Œä¸“é—¨ä½¿ç”¨ä¸€ä¸ªsetæ¥ä¿å­˜ç”¨æˆ·idæœªå…ä¼˜ç‚¹å¥¢ä¾ˆï¼Œå¦‚æœidæ˜¯åˆ†å¸ƒå¼çš„ä¼šå¾ˆå¤æ‚ï¼Œå¯¼è‡´seté›†åˆå¾ˆåºå¤§ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ Hyperloglogå°±æ˜¯ç”¨æ¥è§£å†³æ­¤é—®é¢˜çš„ç®—æ³•ã€‚ ä¼˜ç‚¹ï¼šå ç”¨å¾ˆå°çš„å†…å­˜ç©ºé—´å­˜æ”¾2^64ä¸ªæ•°æ®ï¼Œä¹Ÿåªå ç”¨12kb ç‘•ç–µï¼šä¼šæœ‰0.81%çš„é”™è¯¯ç‡ 123456789101112131415161718192021222324# pfadd key member [member..]127.0.0.1:6379&gt; pfadd set a b c d e f g h i j k l(integer) 1# pfcount key [key..]# è¿”å›åŸºæ•°127.0.0.1:6379&gt; pfcount set(integer) 12127.0.0.1:6379&gt; pfadd set2 j k l m n(integer) 1127.0.0.1:6379&gt; pfcount set set2(integer) 14# pfmerge destkey sourcekey [sourcekey..]# å°†sourcekeyåˆå¹¶åˆ°destkey127.0.0.1:6379&gt; pfmerge set set2OK# æ¢ç©¶åº•å±‚ï¼š# æˆ‘ä»¬è·å–ä¸€ä¸‹æ­¤æ•°æ®çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥çœ‹åˆ°å®é™…ä¸Šå­˜å‚¨çš„æ˜¯string127.0.0.1:6379&gt; type setstring127.0.0.1:6379&gt; get set&quot;HYLL\\x01\\x00\\x00\\x00\\x0c\\x00\\x00\\x00\\x00\\x00\\x00\\x00Fm\\x80I\\xe8\\x80@\\xc4\\x84K\\\\\\x80D&lt;\\x848\\x80B=\\x80K\\x83\\x80B\\xed\\x84A\\xfc\\x8cG\\x8e\\x80Bm\\x80BZ&quot; Bitmapä½å­˜å‚¨ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸¤ç§çŠ¶æ€çš„åŒºåˆ† æ¯”å¦‚ç»Ÿè®¡ä¸­å›½çš„ç”·å­å’Œå¥³å­çš„æ•°ç›® 14äº¿ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œ0ä»£è¡¨å¥³å­ï¼Œ1ä»£è¡¨ç”· 0 0 1 1 1 0 1 â€¦ ç™»å½•ï¼Œå¤´åƒæ˜¯äº®ç€çš„ï¼Œæœªç™»å½•ï¼Œå¤´åƒæ˜¯ç°è‰²çš„ã€‚ 12345678910111213141516171819202122232425# setbit key offset value# è®¾ç½®offsetä½æ˜¯value127.0.0.1:6379&gt; setbit sign 0 0(integer) 0127.0.0.1:6379&gt; setbit sign 1 1(integer) 0127.0.0.1:6379&gt; setbit sign 2 0(integer) 0127.0.0.1:6379&gt; setbit sign 3 1(integer) 0# ä¸­å›½signå¯ä»¥ä»£è¡¨# æ˜ŸæœŸæ—¥æœªæ‰“å¡# æ˜ŸæœŸä¸€å·²æ‰“å¡# æ˜ŸæœŸäºŒæœªæ‰“å¡# æ˜ŸæœŸä¸‰å·²æ‰“å¡# getbit key offset# æŸ¥çœ‹è¯¥å¤©æ˜¯å¦æ‰“å¡127.0.0.1:6379&gt; getbit sign 3(integer) 1# bitcount key [start end]# æŸ¥çœ‹signä¸­ä¸º1çš„ä¸ªæ•°127.0.0.1:6379&gt; BITCOUNT sign(integer) 2","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ ","slug":"ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ ","date":"2022-02-21T10:53:00.000Z","updated":"2023-03-06T06:45:23.359Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/02/21/ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ /","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/02/21/%E3%80%902-Medium%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/","excerpt":"","text":"ä¸¤æ•°ç›¸åŠ ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚ è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚ ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚ ListNode 12345678//Definition for singly-linked list.public class ListNode &#123; int val; ListNode next; ListNode() &#123;&#125; ListNode(int val) &#123; this.val = val; &#125; ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;&#125; ç¤ºä¾‹1: 123è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]è¾“å‡ºï¼š[7,0,8]è§£é‡Šï¼š342 + 465 = 807. ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šl1 = [0], l2 = [0]è¾“å‡ºï¼š[0] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šl1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9]è¾“å‡ºï¼š[8,9,9,9,0,0,0,1] å›¾ç¤º1ï¼š å›¾ç¤º2ï¼š æç¤ºï¼š æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ [1, 100] å†… 0 &lt;= Node.val &lt;= 9 é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶ Related Topics é€’å½’ é“¾è¡¨ æ•°å­¦ é“¾è¡¨è½¬å€¼è®¡ç®—é‡åˆ°è¿™ç§é“¾è¡¨çš„é¢˜ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯å°†é€»è¾‘å›¾ç”»å‡ºæ¥ ç»è¿‡è§‚å¯Ÿå¯çŸ¥ï¼Œé“¾è¡¨çš„ç¬¬ä¸€ä½è¡¨ç¤ºè¯¥æ•°å­—çš„ä¸ªä½ï¼Œç¬¬äºŒä½ä»£è¡¨è¯¥æ•°å­—çš„åä½ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„è§£é¢˜æ€è·¯å°±æ˜¯ 1ã€å°†é“¾è¡¨è¡¨ç¤ºçš„æ•°å­—ç®—å‡ºæ¥ 2ã€å°†ä¸¤ä¸ªæ•°å­—åŠ èµ·æ¥ 3ã€ç”¨è¯¥æ•°å­—æ„å»ºå‡ºæ¥ç»“æœé“¾è¡¨å¹¶è¿”å› ç¤ºä¾‹ä»£ç  123456789101112131415161718192021222324252627class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; long sum = compute(l1) + compute(l2); ListNode listNode = new ListNode(); // è¿™é‡Œçš„listNodeæ˜¯è™šæ‹ŸèŠ‚ç‚¹ï¼Œæœ€åè¿”å›çš„æ˜¯è¯¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ ListNode temp = listNode; while (sum != 0) &#123; // è¿™é‡Œéœ€è¦ä½¿ç”¨å¼ºè½¬ // (sum % 10)çš„ç»“æœæ˜¯longç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ListNodeçš„intå‹çš„valä¼šæŠ¥é”™ temp.next = new ListNode((int) (sum % 10)); temp = temp.next; sum /= 10; &#125; return listNode.next; &#125; /** * è¯¥å‡½æ•°æ˜¯ä¸ºäº†è®¡ç®—é“¾è¡¨æ‰€è¡¨ç¤ºçš„å€¼ */ private long compute(ListNode node) &#123; long result = 0; for (long i = 1; node != null; node = node.next, i *= 10L) &#123; result += node.val * i; &#125; return result; &#125;&#125; æ¥ç®—ä¸€ä¸‹longçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ longåœ¨Javaé‡Œé¢ä½¿ç”¨8ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯64ä½ï¼Œæœ€å¤§å€¼ä¹Ÿå°±æ˜¯2^64-1ï¼Œä¹Ÿå°±æ˜¯9_223_372_036_854_775_807 æ­¤æ–¹æ³•ä¹ä¸€çœ‹ç¡®å®æ²¡é—®é¢˜ ä½†æ˜¯é¢˜ç›®æç¤ºæœ‰ä»¥ä¸‹è¦æ±‚ æµ‹è¯•çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°100ä½çš„æ•°å­—ï¼Œlongç±»å‹æœ€å¤§å€¼è¿œè¿œä¸å¤Ÿ å½“é“¾è¡¨å¾ˆé•¿çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•å°±ä¼šè¶…æ—¶å¹¶ä¸”å‘ç”Ÿæº¢å‡ºé”™è¯¯ é€’å½’ç°åœ¨æœ‰ä¸¤ä¸ªé“¾è¡¨ï¼Œè¦æ¸…æ¥šä¸¤ç‚¹ 1ã€ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸ä¸€å®šç›¸åŒ 2ã€ä¸¤ä¸ªé“¾è¡¨ç›¸åŠ åï¼Œé•¿åº¦ä¸ä¸€å®šä¸å˜ é€’å½’éœ€è¦å…ˆå°†é€’å½’é€€å‡ºæ¡ä»¶å†™å‡ºæ¥ï¼Œå³ä¸¤è€…éƒ½åˆ°å°¾éƒ¨ï¼Œå…ˆå°±ç®€å•çœ‹çœ‹æˆ‘ç”»çš„æ€è·¯å›¾ ç¤ºä¾‹ä»£ç  1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode listNode = new ListNode(); add(l1,l2,listNode); return listNode; &#125; public ListNode add(ListNode a,ListNode b,ListNode temp)&#123; // å½“ä¸¤ä¸ªé“¾è¡¨éƒ½åˆ°å¤´äº†ï¼Œåˆ™é€€å‡ºé€’å½’ if(a==null&amp;&amp;b==null)&#123; return temp; &#125; // æ­¤å˜é‡æ˜¯ç”¨æ¥æ ‡æ³¨ä¸‹ä¸€æ¬¡é€’å½’çš„æ—¶å€™ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦æ˜¯éƒ½å°¾éƒ¨äº† boolean flag=false; // å½“aåˆ°å°¾éƒ¨çš„æ—¶å€™ï¼Œå°†tempçš„æ•°æ®åŸŸå˜ä¸ºè‡ªèº«åŠ ä¸Šbçš„æ•°æ®åŸŸçš„å€¼ if(a==null)&#123; temp.val+=b.val; // åœ¨aå·²ç»åˆ°å°¾éƒ¨çš„æƒ…å†µä¸‹ï¼Œbçš„nextä¸ºnullï¼Œå³bå°†åœ¨ä¸‹ä¸€æ¬¡é€’å½’åˆ°å°¾éƒ¨äº†ï¼Œåˆ™å°†flagå˜ä¸ºtrue if(b.next==null)&#123; flag=true; &#125; // å½“båˆ°å¤´çš„æ—¶å€™ï¼Œå°†tempçš„æ•°æ®åŸŸå˜ä¸ºè‡ªèº«åŠ ä¸Šbçš„æ•°æ®åŸŸçš„å€¼ &#125;else if(b==null)&#123; temp.val+=a.val; // åœ¨bå·²ç»åˆ°å°¾éƒ¨çš„æƒ…å†µä¸‹ï¼Œaçš„nextä¸ºnullï¼Œå³aå°†åœ¨ä¸‹ä¸€æ¬¡é€’å½’åˆ°å°¾éƒ¨äº†ï¼Œåˆ™å°†flagå˜ä¸ºtrue if(a.next==null)&#123; flag=true; &#125; &#125;else &#123; temp.val+=a.val+b.val; if(a.next==null&amp;&amp;b.next==null)&#123; flag=true; &#125; &#125; // leftç”¨æ¥å­˜å‚¨å½“å‰è¿™ä¸€ä½çš„å€¼æ˜¯å¦&gt;=10ï¼Œå¦‚æœæ»¡è¶³ï¼Œåˆ™è¿›1 int left=temp.val&gt;=10?1:0; // å°†leftä½œä¸ºåˆå§‹å€¼newå‡ºæ¥tempçš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆ temp.next = new ListNode(left); // ä¸ºäº†é˜²æ­¢è¶…è¿‡åï¼Œæ‰€ä»¥è¿™é‡Œåšäº†å–ä½™çš„æ“ä½œï¼Œ temp.val = temp.val%10; // å¦‚æœä¸‹ä¸€æ¬¡é€’å½’çš„æ—¶å€™ä¸¤è€…éƒ½åˆ°äº†å°¾éƒ¨ï¼Œå¹¶ä¸”æ²¡æœ‰è¿›1ï¼Œåˆ™ä¸éœ€è¦newå‡ºæ¥tempçš„next if(flag&amp;&amp;left==0)&#123; temp.next=null; &#125; //é€’å½’è°ƒç”¨ return add(a==null?null:a.next,b==null?null:b.next,temp.next); &#125;&#125; å…¶å®è¿™ç§é€’å½’å°±æ˜¯åŒ–ç®€ä¸ºç¹äº† ä¸‹é¢è¿™ç§åšæ³•æ‰æ˜¯æˆ‘è§‰å¾—æ¯”è¾ƒå¥½çš„ ç¤ºä¾‹ä»£ç  2 1234567891011121314151617181920212223242526272829303132class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; return addTwoNumbers(l1, l2, 0); &#125; private ListNode addTwoNumbers(ListNode l1, ListNode l2, int flag) &#123; // ä¸¤è€…éƒ½ä¸ºnullæ‰ä¼šç»“æŸé€’å½’ if (l1 == null &amp;&amp; l2 == null) &#123; ListNode tail = null; // å¯èƒ½æœ€åè¿˜éœ€è¦è¿›ä½ if (flag == 1) &#123; tail = new ListNode(1); &#125; return tail; &#125; int sum = flag; if (l1 != null) &#123; sum += l1.val; l1 = l1.next; &#125; if (l2 != null) &#123; sum += l2.val; l2 = l2.next; &#125; // æ–°å»ºèŠ‚ç‚¹ ListNode node = new ListNode(sum % 10); // èŠ‚ç‚¹çš„nextå°±é€’å½’å¤„ç† node.next = addTwoNumbers(l1, l2, sum / 10); // è¿”å›è¿™ä¸ªæ–°å»ºçš„èŠ‚ç‚¹ï¼Œæœ€åä¸€å±‚è¿”å›çš„ä¹Ÿå°±æ˜¯å¤´èŠ‚ç‚¹ return node; &#125;&#125; é½å¤´å¹¶è¿›éå†ç›´æ¥ä¸¤æ¡é“¾è¡¨ä¸€èµ·éå† ç”¨ä¸€ä¸ªå˜é‡å­˜å‚¨æ˜¯å¦éœ€è¦è¿›ä½ è¿™ä¸ªæ€è·¯å…¶å®å’Œç¬¬äºŒç§é€’å½’çš„å†™æ³•æ€è·¯æ˜¯ä¸€æ ·çš„ 123456789101112131415161718192021222324252627282930313233class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; int flag = 0; // è™šæ‹Ÿå¤´èŠ‚ç‚¹ ListNode dummy = new ListNode(0); ListNode node = dummy; // åªæœ‰æœ‰ä¸€ä¸ªæ²¡æœ‰åˆ°å°¾éƒ¨ï¼Œå°±ä¸€ç›´å¾ªç¯ while (l1 != null || l2 != null) &#123; int sum = flag; if (l1 != null) &#123; sum += l1.val; l1 = l1.next; &#125; if (l2 != null) &#123; sum += l2.val; l2 = l2.next; &#125; // è®°å½•æ˜¯å¦éœ€è¦è¿›ä½ flag = sum / 10; // æ–°å»ºèŠ‚ç‚¹å¹¶æ¥åˆ°nodeåé¢ node.next = new ListNode(sum % 10); node = node.next; &#125; // å¦‚æœæœ€åä¸€æ¬¡éœ€è¦è¿›ä½ï¼Œéœ€è¦ä¿®è¡¥ä¸€ä¸‹ if (flag == 1) &#123; node.next = new ListNode(1); &#125; // åˆ¤æ–­dummyçš„nextæ˜¯å¦ä¸ºç©º // ä¸ºç©ºçš„æ—¶å€™å°±æ˜¯l1å’Œl2éƒ½æ˜¯nullï¼Œé‚£ä¹ˆå°±è¿”å›dummyå³å¯ // ä¸ä¸ºç©ºçš„æ—¶å€™å°±è¯´æ˜l1æˆ–è€…l2æœ‰ä¸€ä¸ªä¸ç©ºï¼Œé‚£å°±ç›´æ¥è¿”å›dummyçš„nextå³å¯ return dummy.next == null ? dummy : dummy.next; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ","slug":"ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ","date":"2022-02-21T10:52:45.000Z","updated":"2023-03-06T06:45:17.814Z","comments":true,"path":"ç®—æ³•/åˆ·é¢˜ç¯‡/2022/02/21/ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ/","link":"","permalink":"https://li-zhi.net.cn/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/2022/02/21/%E3%80%901-Easy%E3%80%91%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","excerpt":"","text":"ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums = [2,7,11,15], target = 9è¾“å‡ºï¼š[0,1]è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [3,2,4], target = 6è¾“å‡ºï¼š[1,2] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [3,3], target = 6è¾“å‡ºï¼š[0,1] æç¤ºï¼š 2 &lt;= nums.length &lt;= 104 -109 &lt;= nums[i] &lt;= 109 -109 &lt;= target &lt;= 109 åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ è¿›é˜¶ï¼šä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n2) çš„ç®—æ³•å—ï¼Ÿ Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æš´åŠ›æšä¸¾æ³•é¢˜ç›®æ„æ€å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯ç»™ä¸€ä¸ªtargetå’Œä¸€ä¸ªæ•°ç»„ ç›®æ ‡æ˜¯åœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢æ‰¾åˆ° å’Œæ˜¯ target çš„é‚£ä¸¤ä¸ªæ•°çš„ç´¢å¼•æ•°ç»„ æš´åŠ›æšä¸¾å¾ˆç®€å•ï¼Œä»£ç ç›´æ¥ç»™å‡º ç¤ºä¾‹ä»£ç  1234567891011121314class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; for (int i = 0; i &lt; nums.length; i++) &#123; for (int j = 0; j &lt; nums.length; j++) &#123; // å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£å°±ä¿å­˜ç»“æœå¹¶è¿”å› if (j != i &amp;&amp; nums[j] == target - nums[i]) &#123; return new int[]&#123;i, j&#125;; &#125; &#125; &#125; // æ²¡æœ‰ç¬¦åˆè¦æ±‚çš„ä¸¤ä¸ªæ•° return new int[]&#123;-1, -1&#125;; &#125;&#125; å“ˆå¸Œè¡¨æš´åŠ›æšä¸¾å–åˆ°target-nums[i]çš„æ–¹æ³•æ˜¯éå†ç®—æ³• å…³é”®åœ¨äºå¦‚ä½•å¿«é€ŸçŸ¥é“iåé¢æœ‰æ²¡æœ‰ç­‰äºtarget-nums[i]çš„å€¼ é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨Mapç»“æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ ç¤ºä¾‹ä»£ç  12345678910111213141516class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; // é”®ä¸ºnums[i] // å€¼ä¸ºç´¢å¼• HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; // æ‰¾åˆ°äº†target-nums[i] if (map.containsKey(target - nums[i])) &#123; return new int[]&#123;map.get(target - nums[i]), i&#125;; &#125; map.put(nums[i], i); &#125; // è¯´æ˜æ²¡æ‰¾åˆ° return new int[]&#123;-1, -1&#125;; &#125;&#125; Tipsç›¸ä¿¡å¾ˆå¤šåŒå­¦çœ‹åˆ°è¿™ç§æ–¹æ³•ï¼Œç¬¬ä¸€ååº”å¯èƒ½ä¸æ˜¯è¿™æ ·å†™çš„ ä½ çš„ä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„ï¼Œå·®å¼‚å°±åœ¨//==========================ä¹‹é—´çš„ä»£ç  å…ˆéå†ä¸€éæ•°ç»„ï¼Œç›®çš„æ˜¯å°†å€¼å’Œå…¶ç´¢å¼•å…ˆæ”¾å…¥map 123456789101112131415161718192021222324class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; // é”®ä¸ºnums[i] // å€¼ä¸ºç´¢å¼• // ========================== // è¿™é‡Œæ‰‹åŠ¨è®¾ç½®å®¹å™¨åˆå§‹å¤§å° // è¿™æ ·æŒ‡å®šåˆå§‹å®¹é‡çš„åŸå› æ˜¯æ­¤mapè‚¯å®šä¸ä¼šæ”¾è¶…è¿‡nums.lengthæ•°ç›®çš„å…ƒç´ ï¼Œæ‰€ä»¥å°±è®¾ç½®é»˜è®¤å®¹é‡ä¸ºå…¶æ­£å¥½è¦æ‰©å®¹çš„æ•°é‡+1ï¼Œå°±ä¸ä¼šæ‰©å®¹äº† // è¿™é‡Œä¸æ‡‚å¾—è¯ï¼Œå°±ä¸å†™ï¼Œèµ°é»˜è®¤çš„å®¹é‡ç„¶åå®ƒè‡ªå·±æ‰©å®¹ä¹Ÿæ˜¯å¯ä»¥çš„ HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;((int)((float) nums.length / 0.75F + 1.0F)); for (int i = 0; i &lt; nums.length; i++) &#123; map.put(nums[i], i); &#125; // ========================== for (int i = 0; i &lt; nums.length; i++) &#123; // æ‰¾åˆ°äº†target-nums[i] if (map.containsKey(target - nums[i])) &#123; return new int[]&#123;map.get(target - nums[i]), i&#125;; &#125; map.put(nums[i], i); &#125; // è¯´æ˜æ²¡æ‰¾åˆ° return new int[]&#123;-1, -1&#125;; &#125;&#125; ä¸ºä»€ä¹ˆä¸éœ€è¦æå‰éå†ä¸€éå°†å€¼å’Œç´¢å¼•çš„å¯¹åº”å…³ç³»æ”¾å…¥mapä¸­ï¼Œè€Œæ˜¯å¯ä»¥è¾¹éå†è¾¹æŸ¥mapå‘¢ï¼Ÿ æ¡ˆä¾‹ï¼šnums = [2, 7, 11, 15],target = 13 è¾¹éå†è¾¹æ”¾å…¥map å½“æ¡ä»¶æˆç«‹çš„æ—¶å€™ï¼Œnums[i]æ˜¯11ï¼Œtarget - nums[i]æ˜¯2 2æ˜¯åœ¨11ä¹‹å‰éå†çš„ï¼Œæ‰€ä»¥2å’Œå…¶ç´¢å¼•çš„å¯¹åº”å…³ç³»å·²ç»åœ¨mapä¸­äº†ï¼Œäºæ˜¯å¾—åˆ°äº†ç­”æ¡ˆ è¿™æ—¶å€™çš„mapæ˜¯ä¸å®Œæ•´çš„ï¼Œåªæœ‰2ã€7çš„å¯¹åº”å…³ç³» é¢„å¡«å……map å½“æ¡ä»¶æˆç«‹çš„æ—¶å€™ï¼Œnums[i]æ˜¯2ï¼Œtarget - nums[i]æ˜¯11 åœ¨éå†2çš„æ—¶å€™ï¼Œ11è¿™ä¸ªå€¼çš„å¯¹åº”å…³ç³»å·²ç»åœ¨mapä¸­äº†ï¼Œäºæ˜¯å¾—åˆ°äº†ç­”æ¡ˆ è¿™æ—¶å€™çš„mapæ˜¯å®Œæ•´çš„ æ€»ç»“ ç»è¿‡ä¸Šé¢æ¡ˆä¾‹çš„åˆ†æï¼Œåº”è¯¥å¯ä»¥æ„Ÿè§‰åˆ°ä¸¤è€…ä¹‹é—´çš„ä¸åŒäº†ï¼Œæ˜æ˜¾æ„Ÿå—åˆ°è¾¹éå†è¾¹æ”¾mapçš„æ–¹æ¡ˆä¼˜äºé¢„å¡«å……çš„æ–¹æ¡ˆ åˆ†æ å½“ç„¶ä¸æ˜¯æ¯æ¬¡æ¶‰åŠç±»ä¼¼é¢˜ç›®éƒ½è¿™æ ·çš„ï¼Œè¯¥é¢„éå†è¿˜æ˜¯è¦é¢„éå†çš„ï¼Œä¸‹é¢åˆ†æä¸€ä¸‹ä¸ºå•¥è¿™é¢˜å¯ä»¥è¿™æ · ä¸‹é¢å‡è®¾ç­”æ¡ˆå­˜åœ¨ï¼Œåˆ™target = nums[i] + nums[j] ( i &lt; j ) é¢„éå†æ˜¯åœ¨å½“å‰ä½ç½®iï¼Œå‘åæ‰¾target - nums[i]çš„ä½ç½®j å…ˆæ‰¾åˆ°é‚£ä¸ªå°çš„ç´¢å¼•ï¼Œç„¶åå†æ‰¾å¤§çš„é‚£ä¸ªç´¢å¼• è¾¹éå†è¾¹å­˜æ˜¯åœ¨å½“å‰ä½ç½®jï¼Œå‘å‰æ‰¾target - nums[j]çš„ä½ç½®i å…ˆæ‰¾åˆ°é‚£ä¸ªå¤§çš„ç´¢å¼•ï¼Œç„¶åå†æ‰¾å°çš„é‚£ä¸ªç´¢å¼•","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ","slug":"å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ","date":"2022-02-21T07:58:53.000Z","updated":"2022-09-27T13:57:21.326Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/21/å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/21/%E5%8E%BBIOE%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","excerpt":"","text":"ä»€ä¹ˆå»IOEï¼ŸIæ˜¯ä»¥IBMä¸ºä»£è¡¨çš„å°å‹æœºå°å‹æœºä¸X86æœåŠ¡å™¨çš„åŒºåˆ«ï¼š ä»·æ ¼ ä¸€å°å°å‹æœºå¯ä»¥ä¹°3-4å°X86æœåŠ¡å™¨ æŒ‡ä»¤ X86 å…¼å®¹æ€§å¥½ æ€§èƒ½å·® å°å‹æœº å…¼å®¹æ€§å·® æ€§èƒ½å¥½ æ€§èƒ½ é¢†åŸŸ Oæ˜¯ä»¥ORACLEä¸ºä»£è¡¨çš„å…³ç³»å‹æ•°æ®åº“æ¶æ„2013å¹´5æœˆ17æ—¥ï¼Œæœ€åä¸€å°IBMå°å‹æœºåœ¨æ”¯ä»˜å®ä¸‹çº¿äº†ï¼Œè¿™ä¸ªæ˜¯å»IOEçš„ä¸€ä¸ªé‡è¦çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ORACLEæ•°æ®åº“å‘Šåˆ«é˜¿é‡Œå·´å·´æ˜¯åœ¨2013å¹´çš„7æœˆ10æ—¥ï¼Œè¿™ä¸€å¤©é˜¿é‡Œå·´å·´çš„ä¸€ä¸ªé‡è¦å¹¿å‘Šç³»ç»Ÿçš„ORACLEæ•°æ®åº“ä¹Ÿä¸‹çº¿äº†ï¼Œä¹Ÿæ˜¯æ·˜å®æœ€åä¸€ä¸ªORACLEæ•°æ®åº“ï¼Œè¿™ä¸¤ä»¶äº‹æƒ…åˆåœ¨ä¸€èµ·å•Šï¼Œä¹Ÿæ˜¯æ„æˆé˜¿é‡Œå·´å·´çš„ä¸€ä¸ªé‡è¦çš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚ é˜¿é‡Œå·´å·´å‘¢ä¸€ç›´æ˜¯é‡‡ç”¨çš„æ˜¯ORCALEæ•°æ®åº“ï¼Œå¹¶åˆ©ç”¨å°å‹æœºå’Œé«˜ç«¯çš„å­˜å‚¨è®¾å¤‡æé«˜æ€§èƒ½å’Œæ•°æ®åº“çš„æ€§èƒ½ï¼Œä½†éšç€ä¸šåŠ¡çš„ä¸åœçš„å‘å±•ï¼Œæ•°æ®é‡æ„ˆå‘åºå¤§ã€‚ ä¼ ç»Ÿçš„ç§»åŠ¨å¼ORACLEæ•°æ®åº“çš„æ‰©å±•ï¼Œä¹Ÿå­˜åœ¨ç€ä¸€äº›ç“¶é¢ˆã€‚ä¼ ç»Ÿçš„ORACLEè½¯ä»¶ä¸ºä»£è¡¨çš„å…³ç³»æ•°æ®åº“ï¼Œå¤§å¤šæ•°å‘¢æ˜¯ä»¥é›†ä¸­å¼æ¶æ„ä¸ºä¸»ï¼Œè¿™äº›ä¼ ç»Ÿçš„æ•°æ®åº“è½¯ä»¶æ˜¯æœ€å¤§çš„ç‰¹ç‚¹å‘¢ï¼Œå°±æ˜¯å°†æ‰€æœ‰çš„æ•°æ®é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä¾èµ–å¤§å‹çš„é«˜ç«¯è®¾å¤‡æ¥æé«˜å¤„ç†çš„æ€§èƒ½å’Œæ‰©å±•æ€§ï¼Œé›†ä¸­å¼æ•°æ®åº“çš„æ‰©å±•å‘¢ï¼Œä¸»è¦æ˜¯é‡‡ç”¨å‘ä¸Šæ‰©å±•çš„é‚£è¿™ç§æ–¹å¼å•Šï¼Œå°±æ˜¯é€šè¿‡å¢åŠ CPUå†…å­˜çš„æ–¹å¼æé«˜å¤„ç†èƒ½åŠ›ï¼Œè¿™ç§å¤„ç†çš„æ¶æ„å°±ä½¿å¾—æ•°æ®åº“æˆä¸ºä¸€ä¸ªå¾ˆå¤§çš„ä¸€ä¸ªç³»ç»Ÿç“¶é¢ˆï¼Œè¶Šæ¥è¶Šä¸é€‚åˆç›®å‰æµ·é‡æ•°æ®å¯¹è®¡ç®—èƒ½åŠ›çš„ä¸€ä¸ªéœ€æ±‚ã€‚ Eæ˜¯ä»¥EMCä¸ºä»£è¡¨çš„é«˜ç«¯SANå­˜å‚¨è®¾å¤‡SANï¼šStorage Area Network EMCæ˜¯ä¸€å®¶ç¾å›½ä¿¡æ¯å­˜å‚¨å…¬å¸ã€‚","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹","slug":"Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹","date":"2022-02-21T02:00:54.000Z","updated":"2022-10-04T13:54:51.466Z","comments":true,"path":"javaEE/Redis/2022/02/21/Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/21/Redis-%E4%BA%94%E5%A4%A7%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"åŸºç¡€çŸ¥è¯†redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“Redisçš„ç“¶é¢ˆæ˜¯æ ¹æ®æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ã€‚ ä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜å¯ä»¥è¿™ä¹ˆå¿«ï¼Ÿredisæ˜¯cè¯­è¨€å†™çš„ï¼Œå®˜ç½‘æä¾›çš„æ€§èƒ½æ•°æ® 1s 11ä¸‡è¯»å– 1s 8ä¸‡å†™å…¥ è¯¯åŒºï¼š é«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ å¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ CPUâ€”&gt;å†…å­˜â€”&gt;ç¡¬ç›˜ æ ¸å¿ƒï¼šrediså°†æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾å…¥å†…å­˜ä¸­ï¼Œæ‰€ä»¥ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡æ˜¯å¾ˆé«˜çš„ï¼Œå¤šçº¿ç¨‹ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼Œååˆ†è€—æ—¶ï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªCPUä¸Šçš„ï¼Œæ²¡æœ‰çº¿ç¨‹è°ƒåº¦çš„è€—æ—¶ äº”å¤§æ•°æ®ç±»å‹åŸºç¡€å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738# åˆ‡æ¢æ•°æ®åº“select index# æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ•°æ®æ•°dbsize# æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¬¦åˆpatternçš„keykeys pattern# æ˜¯å¦å­˜åœ¨è¯¥keyï¼Œå­˜åœ¨åˆ™è¿”å›1ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0exists key# ç§»é™¤keymove key#è®¾ç½®kvset key value# æŸ¥çœ‹keyå­˜å‚¨çš„å€¼get key# æŸ¥çœ‹ç±»å‹type key# è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºsecondssexpire key seconds#æŸ¥çœ‹å‰©ä½™æ—¶é—´ttl key# æ¸…ç©ºå½“å‰æ•°æ®åº“flushdb# æ¸…ç©ºæ‰€æœ‰çš„æ•°æ®åº“çš„å†…å®¹flushall# éšæœºè¾“å‡ºä¸€ä¸ªkeyrandomkey String123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123# è¿½åŠ keyå­˜å‚¨çš„valueå­—ç¬¦ä¸²# å¦‚æœkeyä¸å­˜åœ¨ï¼Œåˆ™è¯¥å‘½ä»¤ç›¸å½“äºset# append key valueappend key &quot;appendstring&quot;# æŸ¥çœ‹keyå­˜å‚¨çš„å­—ç¬¦ä¸²çš„é•¿åº¦strlen key# è‡ªå¢1ï¼Œè‡ªå‡1çš„æ“ä½œ# incr key # decr key127.0.0.1:6379&gt; set views 1OK127.0.0.1:6379&gt; incr views(integer) 2127.0.0.1:6379&gt; incr views(integer) 3127.0.0.1:6379&gt; decr views(integer) 2127.0.0.1:6379&gt; decr views(integer) 1# ä¸€æ¬¡æ€§åŠ æˆ–è€…å‡æŒ‡å®šæ•°å­—çš„æ“ä½œ# incrby key increment# decrby key decrement127.0.0.1:6379&gt; incrby views 10(integer) 11127.0.0.1:6379&gt; decrby views 10(integer) 1# è·å–ä¸€ä¸ªèŒƒå›´å†…çš„å­—ç¬¦ä¸²ï¼Œå³substring==&gt;[start,end)# æ³¨æ„è¿™é‡Œçš„getrangeæ˜¯é—­åŒºé—´ï¼Œ[start,end]# getrange key start end127.0.0.1:6379&gt; set name zhimaOK127.0.0.1:6379&gt; getrange name 0 3&quot;zhim&quot;127.0.0.1:6379&gt; getrange name 0 -1&quot;zhima&quot;# æ›¿æ¢å­—ç¬¦ä¸²# setrange key offset value127.0.0.1:6379&gt; set key randomstringOK127.0.0.1:6379&gt; setrange key 3 xxx(integer) 12127.0.0.1:6379&gt; get key&quot;ranxxxstring&quot;# setex (set with expire) è®¾ç½®è¿‡æœŸæ—¶é—´# è®¾ç½®è¯¥å­—æ®µè¿‡æœŸæ—¶é—´ä¸º30s# setex key seconds valuesetex key 30 &quot;expire&quot;# å¦‚æœä¸å­˜åœ¨åˆ™è®¾ç½®å€¼ï¼Œåœ¨åˆ†å¸ƒå¼é”ä¸­ç»å¸¸ä½¿ç”¨# setnx (set if not exist)# setnx key value127.0.0.1:6379&gt; set key1 value1OK127.0.0.1:6379&gt; get key1&quot;value1&quot;127.0.0.1:6379&gt; setnx key1 &quot;setnx&quot;(integer) 0127.0.0.1:6379&gt; set key1 &quot;setnx&quot;OK127.0.0.1:6379&gt; get key1&quot;setnx&quot;# æ‰¹é‡è·å–å’Œè®¾ç½®å€¼ # mget mset msetnx# mset key value [key value..]# mget key [key..]# msetex key value [key value..]127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3OK127.0.0.1:6379&gt; get k2&quot;v2&quot;127.0.0.1:6379&gt; keys *1) &quot;k2&quot;2) &quot;k1&quot;3) &quot;k3&quot;127.0.0.1:6379&gt; mget k1 k21) &quot;v1&quot;2) &quot;v2&quot;127.0.0.1:6379&gt; msetnx k1 modifiedv1 k4 v4 # è¯¥æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼(integer) 0127.0.0.1:6379&gt; get k4(nil)# åˆ é™¤# del key127.0.0.1:6379&gt; set k1 v1OK127.0.0.1:6379&gt; keys *1) &quot;k1&quot;127.0.0.1:6379&gt; del k1(integer) 1127.0.0.1:6379&gt; keys *(empty list or set)# å¯¹è±¡set user:1&#123;name:zhangsan,age:3&#125; # è®¾ç½®ä¸€ä¸ªuser:1å¯¹è±¡ å€¼ä¸ºjsonå­—ç¬¦ä¸²æ¥ä¿å­˜# è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„å±æ€§ï¼š&#123;className&#125;:&#123;id&#125;:&#123;field&#125;ï¼Œåœ¨redisä¸­æ˜¯å¯ä»¥çš„127.0.0.1:6379&gt; mset user:1:name zhima user:1:age 19OK127.0.0.1:6379&gt; keys *1) &quot;user:1:age&quot;2) &quot;user:1:name&quot;127.0.0.1:6379&gt; mget user:1:name user:1:age1) &quot;zhima&quot;2) &quot;19&quot;# ç»„åˆå‘½ä»¤# getsetå…ˆå–å¾—å½“å‰çš„å€¼å¹¶è¿”å›ï¼Œç„¶åä¿®æ”¹å½“å‰çš„å€¼# getset key value127.0.0.1:6379&gt; getset db redis(nil)127.0.0.1:6379&gt; get db&quot;redis&quot;127.0.0.1:6379&gt; getset db modified&quot;redis&quot;127.0.0.1:6379&gt; get db&quot;modified&quot; Listå¯ä»¥ç»™å…¶è®¾ç½®ä¸€ä¸ªä½¿ç”¨è§„åˆ™ï¼Œåˆ™å¯ä»¥å°†å…¶å®ç°æ ˆæˆ–è€…é˜Ÿåˆ—çš„åŠŸèƒ½ 1234567891011# è®¾ç½®å’Œå–å€¼# lrange key start stop [start,stop]127.0.0.1:6379&gt; lpush list1 v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list1 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; lrange list1 0 11) &quot;v3&quot;2) &quot;v2&quot; åˆ†æå¯çŸ¥è¿™é‡Œçš„lpushæ˜¯å¤´æ’å…¥ï¼Œä¹Ÿå°±æ˜¯leftæ’å…¥ï¼Œé‚£ä¸ä¹‹å¯¹åº”çš„è‚¯å®šè¿˜æœ‰ä¸ªå°¾æ’å…¥ï¼Œå³rightæ’å…¥ï¼Œä½†æ˜¯å•Šåªæœ‰LRANGEæ“ä½œæ¥å–å¾—é›†åˆé‡Œçš„æ•°æ®ï¼Œæ²¡æœ‰RRANGEæ“ä½œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131127.0.0.1:6379&gt; rpush list v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list 0 -11) &quot;v1&quot;2) &quot;v2&quot;3) &quot;v3&quot;# åˆ é™¤å¤´éƒ¨çš„å€¼å¹¶è¿”å›# lpop key127.0.0.1:6379&gt; lpop list&quot;v1&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;2) &quot;v3&quot;# åˆ é™¤å°¾éƒ¨çš„å€¼å¹¶è¿”å›# rpop key127.0.0.1:6379&gt; rpop list&quot;v3&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;# è·å–ç´¢å¼•å¤„çš„å…ƒç´ # lindex key index127.0.0.1:6379&gt; lpush list v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; lindex list 0&quot;v3&quot;# è·å–é›†åˆé•¿åº¦# llen key 127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; llen list(integer) 3# ç§»é™¤æŒ‡å®šä¸ªæ•°çš„åŒ¹é…çš„å€¼# lrem key count value127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v3&quot;3) &quot;v2&quot;4) &quot;v1&quot;127.0.0.1:6379&gt; lrem list 1 v1(integer) 1127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v3&quot;3) &quot;v2&quot;127.0.0.1:6379&gt; lrem list 2 v3(integer) 2127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;# æˆªå–æŒ‡å®šä½ç½®çš„å€¼# ltrim key start stop127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; ltrim list 0 2OK127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;# å°†é›†åˆå°¾éƒ¨å…ƒç´ ç§»é™¤ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªé›†åˆå¤´éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ # rpoplpush source destination127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; rpoplpush list otherlist&quot;v1&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;127.0.0.1:6379&gt; lrange otherlist 0 -11) &quot;v1&quot;# ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„å…ƒç´ çš„å€¼127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;127.0.0.1:6379&gt; lset list 0 modifiedOK127.0.0.1:6379&gt; lrange list 0 -11) &quot;modified&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;# lpush key value [value...]# å½“è¯¥é›†åˆä¸å­˜åœ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»º# lset key index value# å½“è¯¥é›†åˆä¸å­˜åœ¨çš„æ—¶å€™ä¼šæŠ¥é”™# åœ¨æŒ‡å®šå€¼çš„å‰é¢|åé¢æ’å…¥å€¼# linsert key BEFORE|AFTER pivot value127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; linsert list before v2 brforev2(integer) 6127.0.0.1:6379&gt; linsert list after v4 afterv4(integer) 7127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;afterv4&quot;4) &quot;v3&quot;5) &quot;brforev2&quot;6) &quot;v2&quot;7) &quot;v1&quot; è¯¥Listå®è´¨ä¸Šæ˜¯ä½¿ç”¨é“¾è¡¨å®ç°çš„ æ ˆï¼šå‡ºæ ˆï¼ˆLpopï¼‰å…¥æ ˆï¼ˆLpushï¼‰&#x3D;&#x3D; å‡ºæ ˆï¼ˆRpopï¼‰ å…¥æ ˆï¼ˆRpushï¼‰ é˜Ÿåˆ—ï¼šå‡ºé˜Ÿï¼ˆLpopï¼‰å…¥é˜Ÿï¼ˆRpushï¼‰&#x3D;&#x3D; å‡ºæ ˆï¼ˆRpopï¼‰ å…¥æ ˆï¼ˆLpushï¼‰ Setè¯¥é›†åˆçš„ç‰¹ç‚¹æ˜¯ï¼šæ— åºä¸é‡å¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112# æ·»åŠ ä¸€ä¸ªå…ƒç´ # sadd key member [member..]# æŸ¥çœ‹æ‰€æœ‰çš„æˆå‘˜# smembers key127.0.0.1:6379&gt; sadd set a b c a(integer) 3127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;# åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ 127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; sismember set c(integer) 1127.0.0.1:6379&gt; sismember set d(integer) 0# æŸ¥çœ‹é›†åˆçš„é•¿åº¦127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; scard set(integer) 3# åˆ é™¤æŸä¸ªå…ƒç´ # srem key member [member..]127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; srem set a c(integer) 2127.0.0.1:6379&gt; smembers set1) &quot;b&quot;# éšæœºè¿”å›æŒ‡å®šä¸ªæ•°çš„å…ƒç´ # srandmember key count127.0.0.1:6379&gt; smembers set1) &quot;d&quot;2) &quot;a&quot;3) &quot;b&quot;4) &quot;c&quot;5) &quot;e&quot;127.0.0.1:6379&gt; srandmember set 31) &quot;d&quot;2) &quot;e&quot;3) &quot;c&quot;127.0.0.1:6379&gt; srandmember set 31) &quot;d&quot;2) &quot;b&quot;3) &quot;a# éšæœºåˆ é™¤æŒ‡å®šä¸ªæ•°çš„å…ƒç´ ï¼Œä¸å†™counté»˜è®¤ä¸º1# spop key [count] 127.0.0.1:6379&gt; smembers set1) &quot;d&quot;2) &quot;a&quot;3) &quot;b&quot;4) &quot;c&quot;5) &quot;e&quot;127.0.0.1:6379&gt; spop set 31) &quot;c&quot;2) &quot;e&quot;3) &quot;a&quot;127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;d&quot;# å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åˆ°å¦ä¸€ä¸ªé›†åˆä¸­# smove source destination member127.0.0.1:6379&gt; sadd set a b c d e(integer) 5127.0.0.1:6379&gt; smove set set2 a(integer) 1127.0.0.1:6379&gt; smembers set21) &quot;a&quot;127.0.0.1:6379&gt; smembers set1) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;# äº¤é›† sinter key [key..]# å·®é›† sdiff key [key..]# å¹¶é›† sunion key [key..]127.0.0.1:6379&gt; smembers set1) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;127.0.0.1:6379&gt; smembers set21) &quot;b&quot;2) &quot;a&quot;3) &quot;g&quot;127.0.0.1:6379&gt; sinter set set21) &quot;b&quot;127.0.0.1:6379&gt; sdiff set set21) &quot;d&quot;2) &quot;e&quot;3) &quot;c&quot;127.0.0.1:6379&gt; sunion set set21) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;a&quot;6) &quot;g&quot; HashMapé›†åˆï¼Œkey-Mapé›†åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100# hset key field value# æ”¾å…¥ä¸€ä¸ªmap# hget key field 127.0.0.1:6379&gt; hset hashmap name zhima(integer) 1127.0.0.1:6379&gt; hget hashmap name&quot;zhima&quot;# è®¾ç½®å’Œå–å¾—å¤šä¸ªé”®å€¼å¯¹# hmset key field name [field name..]# hmget key field [field..]127.0.0.1:6379&gt; hmset user:1 name zhim age 10OK127.0.0.1:6379&gt; hmget user:1 name age1) &quot;zhim&quot;2) &quot;10&quot;# ä½¿ç”¨hsetæ›´æ–°é”®å€¼å¯¹127.0.0.1:6379&gt; hset user:1 name zhima(integer) 0127.0.0.1:6379&gt; hmget user:1 name age1) &quot;zhima&quot;2) &quot;19&quot;# å–å¾—æ‰€æœ‰çš„é”®å€¼å¯¹# hgetall key 127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;19&quot;# è·å–é”®å€¼å¯¹ä¸ªæ•°# hlen key127.0.0.1:6379&gt; hlen user:1(integer) 2# åˆ é™¤é”®å€¼å¯¹# hdel key field127.0.0.1:6379&gt; hdel user:1 name(integer) 1127.0.0.1:6379&gt; hgetall user:11) &quot;age&quot;2) &quot;19&quot;# æ˜¯å¦å­˜åœ¨è¯¥é”®å€¼å¯¹# hexists key field127.0.0.1:6379&gt; hexists user:1 name(integer) 1127.0.0.1:6379&gt; hexists user:1 unknown(integer) 0# è·å¾—æ‰€æœ‰çš„é”®# hkeys key# è·å¾—æ‰€æœ‰çš„å€¼# hvals key127.0.0.1:6379&gt; hkeys user:11) &quot;name&quot;2) &quot;age&quot;127.0.0.1:6379&gt; hvals user:11) &quot;zhima&quot;2) &quot;19&quot;# å¢åŠ å€¼# hincrby key field increment # ï¼æ³¨æ„ï¼šï¼è¿™é‡Œæ²¡æœ‰è‡ªå‡çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä¸ºincrementè®¾ç½®è´Ÿæ•°æ¥å®ç°å‡127.0.0.1:6379&gt; hincrby user:1 name 1(error) ERR hash value is not an integer127.0.0.1:6379&gt; hincrby user:1 age 2(integer) 21127.0.0.1:6379&gt; hmset user:2 name lizhi age &quot;19&quot;OK127.0.0.1:6379&gt; hgetall user:21) &quot;name&quot;2) &quot;lizhi&quot;3) &quot;age&quot;4) &quot;19&quot;127.0.0.1:6379&gt; hincrby user:2 age 2(integer) 21127.0.0.1:6379&gt; hincrby user:2 age -1(integer) 20# å¦‚æœä¸å­˜åœ¨è¯¥å­—æ®µï¼Œåˆ™æ·»åŠ è¯¥å­—æ®µ# å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œæ“ä½œ# hsetnx key field value127.0.0.1:6379&gt; hsetnx user:1 name modified(integer) 0127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;21&quot;127.0.0.1:6379&gt; hsetnx user:1 address unknown(integer) 1127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;21&quot;5) &quot;address&quot;6) &quot;unknown&quot; Hashmapé€‚åˆå­˜å‚¨å¯¹è±¡ Zsetï¼ˆæœ‰åºåˆ—è¡¨ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172# æ·»åŠ å€¼ è¿™ä¸ªscoreç›¸å½“äºæƒé‡ï¼Œç”¨æ¥æ’åº# zadd key [NX|XX] [CH] [INCR] score member [score member..]127.0.0.1:6379&gt; zadd myzset 1 one(integer) 1127.0.0.1:6379&gt; zadd myzset 2 two 3 three(integer) 2# æ­£åºè¾“å‡º# zrange key start stop [withscores]127.0.0.1:6379&gt; zrange myzset 0 -11) &quot;one&quot;2) &quot;two&quot;3) &quot;three&quot;# å€’å™è¾“å‡º# zrevrange key start stop [withscores]127.0.0.1:6379&gt; zrevrange salary 0 -11) &quot;lizhi&quot;2) &quot;xiaozhang&quot;3) &quot;zhima&quot;# æºå¸¦æƒé‡è¾“å‡º127.0.0.1:6379&gt; zrange salary 0 -1 withscores1) &quot;zhima&quot;2) &quot;1000&quot;3) &quot;xiaozhang&quot;4) &quot;1500&quot;5) &quot;lizhi&quot;6) &quot;2000&quot;# zrangebyscore key min max [withscores] [limit offset count]# è·å–scoreåœ¨minåˆ°maxä¹‹é—´çš„å…ƒç´ ï¼Œé—­åŒºé—´127.0.0.1:6379&gt; zrangebyscore salary 1000 16001) &quot;zhima&quot;2) &quot;xiaozhang&quot;127.0.0.1:6379&gt; zrangebyscore salary -inf +inf1) &quot;zhima&quot;2) &quot;xiaozhang&quot;3) &quot;lizhi&quot;# zrevrangebyscore key max min [withscores] [limit offset count]# å€’å™è¾“å‡ºscoreåœ¨maxåˆ°minä¹‹é—´çš„ï¼Œé—­åŒºé—´ï¼Œ# [limit offset count]æ˜¯æŒ‡å®šæ˜¾ç¤ºä»offsetå¼€å§‹çš„countä¸ªæ•°æ®ï¼ŒåŒ…æ‹¬offsetæ‰€åœ¨çš„å…ƒç´ 127.0.0.1:6379&gt; zrevrangebyscore salary 1600 10001) &quot;xiaozhang&quot;2) &quot;zhima&quot;127.0.0.1:6379&gt; zadd salary 10 xiaoming 27 ziaohzhyang 19 zhima 25 lizhi(integer) 4127.0.0.1:6379&gt; zrangebyscore salary 10 191) &quot;xiaoming&quot;2) &quot;zhima&quot;127.0.0.1:6379&gt; zrangebyscore salary 10 25 withscores1) &quot;xiaoming&quot;2) &quot;10&quot;3) &quot;zhima&quot;4) &quot;19&quot;5) &quot;lizhi&quot;6) &quot;25&quot;127.0.0.1:6379&gt; zrangebyscore salary 10 25 limit 0 21) &quot;xiaoming&quot;2) &quot;zhima&quot;# åˆ é™¤å…ƒç´ 127.0.0.1:6379&gt; zrem salary xiaoming(integer) 1# æŸ¥çœ‹è¯¥é›†åˆçš„é•¿åº¦# zcard key127.0.0.1:6379&gt; zcard salary(integer) 3# æŸ¥çœ‹ç¬¦åˆ[min,max]åŒºé—´çš„å…ƒç´ ä¸ªæ•°# zcount key min max127.0.0.1:6379&gt; zcount salary 10 19(integer) 2 æ³¨ï¼šä»¥ä¸Šå‘½ä»¤åªæ˜¯å¸¸ç”¨å‘½ä»¤ï¼Œæ›´å¤šå‘½ä»¤å¯ä»¥åœ¨å®˜ç½‘æŸ¥çœ‹ è‹±æ–‡å®˜ç½‘åœ°å€ï¼šhttps://redis.io/ ä¸­æ–‡å®˜ç½‘åœ°å€ï¼šhttp://www.redis.cn/","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-å‰æœŸå‡†å¤‡","slug":"Redis-å‰æœŸå‡†å¤‡","date":"2022-02-19T09:36:09.000Z","updated":"2022-10-04T13:54:33.955Z","comments":true,"path":"javaEE/Redis/2022/02/19/Redis-å‰æœŸå‡†å¤‡/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Redis/2022/02/19/Redis-%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/","excerpt":"","text":"Nosqlæˆ‘ä»¬å…ˆå‰å­¦çš„éƒ½æ˜¯mysqlï¼Œå®ƒæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè¡¨ä¸è¡¨ä¹‹é—´æœ‰è”ç³»ã€‚ NoSqlå³éå…³ç³»å‹æ•°æ®åº“ã€‚ MySql MySqlçš„ç“¶é¢ˆ æ•°æ®å¤ªå¤§äº†ï¼Œä¸€ä¸ªæœºå™¨å°±æ”¾ä¸ä¸‹äº† 30ä¸‡ä»¥ä¸Šçš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ç´¢å¼•ï¼ˆB+Treeï¼‰ è®¿é—®é‡å¤§çš„è¯ï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§ è§£å†³æ–¹æ¡ˆï¼šè¯»å†™åˆ†ç¦»ï¼ˆå‚ç›´æ‹†åˆ†ï¼‰ å› ä¸º80%ç½‘ç«™å¯¹äºæ•°æ®çš„æ“ä½œéƒ½æ˜¯è¯»å–ï¼Œä¸ä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†æå‡æ•ˆç‡ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¯»å–å®Œæ•°æ®åï¼Œå°†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢å¦‚æœæ˜¯åŒæ ·çš„ä¸šåŠ¡ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®ï¼Œä¼šå¤§å¤§æå‡æ€§èƒ½ï¼Œè§£å†³äº†è¯»çš„å‹åŠ› è§£å†³æ–¹æ¡ˆï¼šåˆ†åº“åˆ†è¡¨ï¼ŒMySqlé›†ç¾¤ï¼ˆæ°´å¹³æ‹†åˆ†ï¼‰æ¯ä¸€ä¸ªé›†ç¾¤æ”¾ä¸€äº›è¡¨å’Œæ•°æ®åº“ï¼Œè¿™æ ·çš„æ“ä½œè§£å†³äº†å†™çš„å‹åŠ› å¦‚ä»Šçš„æ•°æ®æ•°æ®é‡å¤§ï¼Œå˜åŒ–å¿«ï¼Œå¯¼è‡´mysqlæ— æ³•å¾ˆå¥½çš„è§£å†³é—®é¢˜ã€‚ æœ‰çš„äººä½¿ç”¨mysqlæ¥å­˜å‚¨ä¸€äº›æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œåšå®¢æ¨æ–‡ï¼Œå›¾ç‰‡ç­‰ï¼Œæ•°æ®åº“éå¸¸åºå¤§ï¼Œæ•ˆç‡ååˆ†ä½ä¸‹ã€‚ å¦‚æœæœ‰ä¸€ç§æ•°æ®åº“æ¥ä¸“é—¨å¤„ç†è¿™ç§æ•°æ®ï¼Œmysqlçš„å‹åŠ›å°±å˜å°äº†ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨Nosqläº† ç‰¹ç‚¹ æ–¹ä¾¿æ‹“å±•ï¼ˆæ•°æ®ä¹‹é—´è”ç³»ä½ï¼Œå¾ˆå¥½æ‹“å±•ï¼‰ å¤§æ•°æ®é«˜æ€§èƒ½ï¼ˆRedis1sè¯»11ä¸‡æ¬¡ï¼Œå†™8ä¸‡æ¬¡ï¼ŒNosqlçš„ç¼“å­˜è®°å½•ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼‰ æ•°æ®å¤šæ ·ï¼Œä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ å¤§æ•°æ®æ—¶ä»£çš„3Vï¼šå‡ºç°çš„ä¸€äº›é—®é¢˜ Volume æµ·é‡ Variety å¤šæ · Velocity å®æ—¶ å¤§æ•°æ®æ—¶ä»£çš„3é«˜ï¼šå¯¹ç¨‹åºçš„è¦æ±‚ é«˜æ€§èƒ½ é«˜å¯ç”¨ï¼ˆæ‰©ï¼‰ é«˜å¹¶å‘ Nosqlçš„å››å¤§åˆ†ç±» KVé”®å€¼å¯¹ æ–°æµªï¼šRedis ç¾å›¢ï¼šRedis+Tair é˜¿é‡Œ+ç™¾åº¦ï¼šRedis+MemeCache åº”ç”¨åœºæ™¯ï¼šå†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºäº›æ—¥å¿—ç³»ç»Ÿç­‰ç­‰ã€‚ æ•°æ®æ¨¡å‹ï¼šKey æŒ‡å‘çš„é”®å€¼å¯¹Valueï¼Œé€šå¸¸ç”¨hash tableæ¥å®ç° ä¼˜ç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦å¿« ç¼ºç‚¹ï¼šæ•°æ®æ— ç»“æ„ï¼Œé€šå¸¸åªè¢«å½“åšå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶å­˜å‚¨ æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆBSONæ ¼å¼ï¼‰ MongoDB åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼ŒC++ç¼–å†™çš„ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¤§é‡çš„æ–‡æ¡£ MongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸­é—´çš„äº§ç‰©ï¼ŒMongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»å‹æ•°æ®åº“çš„ ConthDB åº”ç”¨åœºæ™¯ï¼šwebåº”ç”¨ æ•°æ®æ¨¡å‹ï¼škey-valueé”®å€¼å¯¹ï¼ˆValueä¸ºç»“æ„åŒ–æ•°æ®ï¼‰ ä¼˜ç‚¹ï¼šæ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼è¡¨ç»“æ„å¯ä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“é‚£æ ·éœ€è¦é¢„å…ˆå®šä¹‰è¡¨ç»“æ„ ç¼ºç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­å¥ åˆ—å­˜å‚¨æ•°æ®åº“ HBase åº”ç”¨åœºæ™¯ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ æ•°æ®æ¨¡å‹ï¼šä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜å‚¨åœ¨ä¸€èµ· ä¼˜ç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‹“å±•æ€§å¼ºï¼Œå®¹æ˜“å®ç°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ ç¼ºç‚¹ï¼šåŠŸèƒ½ç›¸å¯¹å±€é™ å›¾å½¢å…³ç³»æ•°æ®åº“ å­˜çš„æ˜¯å…³ç³»ï¼Œä¸æ˜¯å­˜å›¾å½¢çš„ Neo4j InfoGrid åº”ç”¨åœºæ™¯ï¼šç¤¾äº¤ç½‘ç»œã€ç›¸å…³æ¨è æ•°æ®æ¨¡å‹ï¼šå›¾æ¶æ„ ä¼˜ç‚¹ï¼šåˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³•ï¼Œæ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€Nåº¦å…³ç³»æŸ¥æ‰¾ç­‰ ç¼ºç‚¹ï¼šå¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤æ–¹å¼ Redisç®€ä»‹æ¦‚è¿° Rediså…¨åæ˜¯Remote Dictionary Server ï¼Œå³è¿œç¨‹å­—å…¸è°ƒç”¨ é»˜è®¤ç«¯å£æ˜¯6379 Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ å®ƒæ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚ å­—ç¬¦ä¸²ï¼ˆstringsï¼‰ï¼Œ æ•£åˆ—ï¼ˆhashesï¼‰ï¼Œ åˆ—è¡¨ï¼ˆlistsï¼‰ï¼Œ é›†åˆï¼ˆsetsï¼‰ï¼Œ æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ ä¸èŒƒå›´æŸ¥è¯¢ï¼Œ bitmapsï¼Œ hyperloglogs å’Œ åœ°ç†ç©ºé—´ï¼ˆgeospatialï¼‰ ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚ Redis å†…ç½®äº† å¤åˆ¶ï¼ˆreplicationï¼‰ï¼ŒLUAè„šæœ¬ï¼ˆLua scriptingï¼‰ï¼Œ LRUé©±åŠ¨äº‹ä»¶ï¼ˆLRU evictionï¼‰ï¼Œäº‹åŠ¡ï¼ˆtransactionsï¼‰ å’Œä¸åŒçº§åˆ«çš„ ç£ç›˜æŒä¹…åŒ–ï¼ˆpersistenceï¼‰ï¼Œ å¹¶é€šè¿‡ Rediså“¨å…µï¼ˆSentinelï¼‰å’Œè‡ªåŠ¨ åˆ†åŒºï¼ˆClusterï¼‰æä¾›é«˜å¯ç”¨æ€§ï¼ˆhigh availabilityï¼‰ã€‚ å®ƒä½¿ç”¨ANSIã€Cè¯­è¨€ç¼–å†™çš„ã€æ”¯æŒç½‘ç»œã€å¯ä»¥åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-valueæ•°æ®åº“ã€å¹¶æä¾›å¤šç§è¯­è¨€çš„APIï¼Œäº¦è¢«ç§°ä¸ºç»“æ„åŒ–æ•°æ®åº“ ä¸‹è½½ä¸‹è½½åç›´æ¥è§£å‹å³å¯12é“¾æ¥ï¼šhttps://pan.baidu.com/s/12ozkQkUss8GH70lf7qrinQ æå–ç ï¼šnv5z ç‚¹å‡»redis-server.exeå³å¯å¯åŠ¨æœåŠ¡ å¤‡æ³¨Redisæ¨èæˆ‘ä»¬ä½¿ç”¨Linuxä½¿ç”¨redisï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨æ¥å­¦ä¹ redis 12é“¾æ¥:https://pan.baidu.com/s/1Hy1eFwcSqfftXrWv92-zug æå–ç :u1ff å°†å‹ç¼©æ–‡ä»¶è§£å‹åˆ°æœåŠ¡å™¨çš„optç›®å½•ä¸‹å³å¯ï¼Œè¿›å…¥è§£å‹åçš„ç›®å½•ï¼Œç„¶åå®‰è£…gcc-c++ 12yum install gcc-c++make ä¹Ÿå¯ä»¥ä½¿ç”¨dockeråˆ›å»ºrediså®¹å™¨ 1234# å¼€å¯ä¸€ä¸ªrediså®¹å™¨å¹¶è®¾ç½®å¯†ç docker run -it --name studyredis -p6379:6379 --requirepass lizhi9275 redis# æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨docker ps","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"}]},{"title":"Springboot-shiro","slug":"SpringBoot-Shiro","date":"2022-02-17T03:56:42.000Z","updated":"2022-10-04T13:55:11.308Z","comments":true,"path":"javaEE/SpringBoot/2022/02/17/SpringBoot-Shiro/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringBoot/2022/02/17/SpringBoot-Shiro/","excerpt":"","text":"Shiroç®€ä»‹å…¶å®è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªå…³äºåšå®‰å…¨ç®¡ç†çš„æ¡†æ¶ï¼Œä»–ä¸ä»…å¯ä»¥å’ŒjavaEEç»“åˆä¹Ÿå¯ä»¥å’ŒjavaSEç»“åˆ æä¾›çš„åŠŸèƒ½ Authenticationï¼šèº«ä»½è®¤è¯ï¼Œç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·çš„èº«ä»½ Authorizationï¼šæˆæƒï¼Œ Session Managementï¼š Shiroå†…ç½®çš„sessionï¼Œå¯¹å…¶è¿›è¡Œç®¡ç† Cryptographyï¼šåŠ å¯†ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§ Web Supportï¼š webæ”¯æŒï¼Œå¯ä»¥å¾ˆå¥½çš„é›†æˆåˆ°webç¯å¢ƒ Cachingï¼š ç¼“å­˜ï¼Œ Concurrencyï¼š å¤šå¹¶å‘ Testingï¼šæµ‹è¯• Remember Meï¼šâ€è®°ä½æˆ‘â€çš„åŠŸèƒ½ Shiroç»“æ„æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹Shiroçš„ç»“æ„ è§£é‡Šä¸€ä¸‹å‡ºç°çš„åè¯ subjectï¼šä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥æ˜¯Subjectï¼Œä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼ŒSubjectå…¶å®åªæ˜¯ä¸€ä¸ªé—¨é¢ï¼ŒSecurityManager æ‰æ˜¯å®é™…çš„æ‰§è¡Œè€… SecurityManagerï¼šå®‰å…¨ç®¡ç†å™¨ï¼Œå³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’ï¼Œå¹¶ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰çš„Subjectï¼Œå®ƒæ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸Shiroçš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ Realmï¼š Shiroä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ï¼Œè§’è‰²ï¼Œæƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManager è¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆå®ƒéœ€è¦ä»Realm è·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒï¼Œæ¥ç¡®å®šç”¨æˆ·çš„èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²ã€æƒé™ï¼Œè¿›è¡ŒéªŒè¯ç”¨æˆ·çš„æ“ä½œæ˜¯å¦èƒ½å¤Ÿè¿›è¡Œ å¿«é€Ÿå¼€å§‹ï¼ˆçœ‹ä¸€ä¸‹ç›´æ¥è¿‡ï¼‰å¯¼å…¥ä¾èµ– 123456789101112131415161718192021222324&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-core --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-core&lt;/artifactId&gt; &lt;version&gt;1.8.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.slf4j/jcl-over-slf4j --&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt; &lt;version&gt;1.7.24&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.24&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt;&lt;/dependency&gt; é…ç½®æ–‡ä»¶ log4j.properties 123456789101112131415161718log4j.rootLogger=INF0,stdoutlog4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m %n# GeneraL Apache Librarieslog4j.logger.org.apache=WARN# Springlog4j.logger.org.springframework=WARN# Defautt Shiro Logginglog4j.logger.org.apache.shiro=INF0# DisabLe verbose Logginglog4j.logger.org.apache.shiro.util.ThreadContext=WARNlog4j.logger.org.apache.shiro.cache.ehcache.EhCache=WARN shiro.ini 12345678910111213141516171819202122232425[users]# user &#x27;root&#x27; with password &#x27;secret&#x27; and the &#x27;admin&#x27; roleroot = secret, admin# user &#x27;guest&#x27; with the password &#x27;guest&#x27; and the &#x27;guest&#x27; roleguest = guest, guest# user &#x27;presidentskroob&#x27; with password &#x27;12345&#x27;ï¼ˆ&quot;That&#x27;s the same combination on# my Luggage!!!&quot; ;)), and rote &#x27;president&#x27;presidentskroob = 12345, president# user &#x27;darkhe met&#x27; with password &#x27;Ludicrousspeedâ€™and rotes &#x27;darklordâ€™and &#x27;schwartzdarkhelmet = ludicrousspeed, darklord, schwartz# user &#x27;tonestarr&#x27; with password &#x27;vespa&#x27; and roles &#x27;goodguy&#x27; and &#x27;schwartz&#x27;lonestarr = vespa, goodguy, schwartz# RoLes with assigned permissions# Each Line conforms to the format defined in the# org.apache.shiro.reatm.text.TextConfigurationReatm#setRoleDefinitions JavaDoc# -[roles]# &#x27;admin&#x27; role has all permissions, indicated by the wildcard&#x27;* &#x27;admin = *# The &#x27;schwartz&#x27; role can do anything (*) with any lightsaber:schwartz = lightsaber:*# The &#x27;goodguy&#x27; role is aLlowed to &#x27;drive&#x27; (action) the winnebago (type) with# ticense plate &#x27;eagle5&#x27; (instance specific id)goodguy = winnebago:drive:eagle5 ShiroQuickStart.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public class ShiroQuickStart &#123; private static final Logger LOG = LoggerFactory.getLogger(ShiroQuickStart.class); public static void main(String[] args) &#123; Factory&lt;SecurityManager&gt; factory = new IniSecurityManagerFactory(&quot;classpath:shiro.ini&quot;); SecurityManager securityManager = factory.getInstance(); SecurityUtils.setSecurityManager(securityManager); Subject currentUser = SecurityUtils.getSubject(); Session session = currentUser.getSession(); session.setAttribute(&quot;someKey&quot;,&quot;aValue&quot;); String value = (String) session.getAttribute(&quot;someKey&quot;); if(&quot;aValue&quot;.equals(value))&#123; LOG.info(&quot;Retrieved the correct value&quot;); &#125; if(!currentUser.isAuthenticated())&#123; UsernamePasswordToken token = new UsernamePasswordToken(&quot;lonestar&quot;, &quot;vespa&quot;); token.setRememberMe(true); try&#123; currentUser.login(token); &#125;catch (UnknownAccountException uae)&#123; LOG.info(&quot;There is no user with username whith &quot;+ token.getPrincipal()); &#125;catch (IncorrectCredentialsException ice)&#123; LOG.info(&quot;Password for account&quot;+ token.getPrincipal()+&quot;was incorrect&quot;); &#125;catch (LockedAccountException lae)&#123; LOG.info(&quot;The Account for userName&quot;+ token.getPrincipal()+&quot;is locked. &quot; + &quot;Please contact your administrator to unlocked it&quot;); &#125;catch (AuthenticationException ae)&#123; //unexpected exception &#125; &#125; LOG.info(&quot;USER[&quot;+ currentUser.getPrincipal()+&quot;] logged in successfully&quot;); if(currentUser.hasRole(&quot;schwartz&quot;))&#123; LOG.info(&quot;May the Schwartz be with you&quot;); &#125;else &#123; LOG.info(&quot;Hello,Mere mortal&quot;); &#125; if(currentUser.isPermitted(&quot;lightsaber:wield&quot;))&#123; LOG.info(&quot;You may use a lightsaber ring use it wisely&quot;); &#125;else &#123; LOG.info(&quot;Sorry, light rings are for schwartz masters only&quot;); &#125; if(currentUser.isPermitted(&quot;winnebago:drive:eagle5&quot;))&#123; LOG.info(&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate(id) &#x27;eagle5&#x27;. &quot; + &quot;Here are the keys-have fun!&quot;); &#125;else &#123; LOG.info(&quot;Sorry,you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago&quot;); &#125; currentUser.logout(); System.exit(0); &#125;&#125; è¿è¡Œè¾“å‡º 123456789101112131415161718192021222324252627282930313233342022-02-17 14:33:37,982 DEBUG [org.apache.shiro.io.ResourceUtils] - Opening resource from class path [shiro.ini] 2022-02-17 14:33:38,021 DEBUG [org.apache.shiro.config.Ini] - Parsing [users] 2022-02-17 14:33:38,026 DEBUG [org.apache.shiro.config.Ini] - Parsing [roles] 2022-02-17 14:33:38,523 DEBUG [org.apache.shiro.config.IniFactorySupport] - Creating instance from Ini [sections=users,roles] 2022-02-17 14:33:38,571 DEBUG [org.apache.shiro.realm.text.IniRealm] - Discovered the [roles] section. Processing... 2022-02-17 14:33:38,575 DEBUG [org.apache.shiro.realm.text.IniRealm] - Discovered the [users] section. Processing... 2022-02-17 14:33:38,594 DEBUG [org.apache.shiro.session.mgt.AbstractValidatingSessionManager] - No sessionValidationScheduler set. Attempting to create default instance. 2022-02-17 14:33:38,595 INFO [org.apache.shiro.session.mgt.AbstractValidatingSessionManager] - Enabling session validation scheduler... 2022-02-17 14:33:38,625 DEBUG [org.apache.shiro.session.mgt.DefaultSessionManager] - Creating new EIS record for new session instance [org.apache.shiro.session.mgt.SimpleSession,id=null] 2022-02-17 14:33:39,022 INFO [com.lizhi.springbootshiro.start.ShiroQuickStart] - Retrieved the correct value 2022-02-17 14:33:39,022 DEBUG [org.apache.shiro.realm.AuthenticatingRealm] - Looked up AuthenticationInfo [null] from doGetAuthenticationInfo 2022-02-17 14:33:39,022 DEBUG [org.apache.shiro.realm.AuthenticatingRealm] - No AuthenticationInfo found for submitted AuthenticationToken [org.apache.shiro.authc.UsernamePasswordToken - lonestar, rememberMe=true]. Returning null. 2022-02-17 14:33:39,030 INFO [com.lizhi.springbootshiro.start.ShiroQuickStart] - There is no user with username whith lonestar SpringBootæ•´åˆShiroå…ˆæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æŠŠåŸºæœ¬çš„ç¯å¢ƒæ­å¥½ å¯¼å…¥ä¾èµ–ï¼Œè¿™é‡Œåªæ˜¾ç¤ºshiroçš„ç›¸å…³ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt; &lt;version&gt;1.8.0&lt;/version&gt;&lt;/dependency&gt; å®ä½“ç±»User.java 12345678910@Data@NoArgsConstructor@AllArgsConstructor@ToStringpublic class User &#123; private int id; private String userName; private String password; private String perms;&#125; é…ç½®ç±»ShiroConfig.java 1234567891011121314151617181920212223@Configurationpublic class ShiroConfig &#123; //ShiroFilterFactoryBean @Bean public ShiroFilterFactoryBean getShiroFilterFactory(@Autowired DefaultWebSecurityManager defaultWebSecurityManager)&#123; ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager); return shiroFilterFactoryBean; &#125; //DefaultWebSecurityManager @Bean public DefaultWebSecurityManager getDefaultWebSecurityManager(@Autowired UserRealm userRealm)&#123; DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager(); securityManager.setRealm(userRealm); return securityManager; &#125; //realm,éœ€è¦è‡ªå®šä¹‰ï¼Œç”¨æ¥åšæˆæƒå’Œè®¤è¯çš„ @Bean public UserRealm userRealm()&#123; return new UserRealm(); &#125; UserRealm.java 1234567891011121314151617public class UserRealm extends AuthorizingRealm &#123; @Autowired private UserMapper userMapper; //æˆæƒ @Override protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123; System.out.println(&quot;æˆæƒ&quot;); return null; &#125; //è®¤è¯ @Override protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123; System.out.println(&quot;è®¤è¯&quot;); return null; &#125;&#125; index.html 123456789101112131415&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;é¦–é¡µ&lt;/h2&gt; &lt;ul&gt; &lt;a th:href=&quot;@&#123;/user/add&#125;&quot;&gt;ç”¨æˆ·å¢&lt;/a&gt; &lt;a th:href=&quot;@&#123;/user/del&#125;&quot;&gt;ç”¨æˆ·åˆ &lt;/a&gt; &lt;a th:href=&quot;@&#123;/user/update&#125;&quot;&gt;ç”¨æˆ·æ”¹&lt;/a&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; userçš„addé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„add&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; userçš„delé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„delete&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; userçš„updateé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„update&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; MyController.java 1234567891011121314151617181920212223242526272829package com.lizhi.springbootshiro.contoller;import org.apache.shiro.SecurityUtils;import org.apache.shiro.authc.IncorrectCredentialsException;import org.apache.shiro.authc.UnknownAccountException;import org.apache.shiro.authc.UsernamePasswordToken;import org.apache.shiro.subject.Subject;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.validation.BindingResult;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class MyController &#123; @GetMapping(&quot;/index&quot;) public String index(Model model)&#123; model.addAttribute(&quot;msg&quot;,&quot;hello,shiro&quot;); return &quot;index&quot;; &#125; //è¿™é‡Œæ˜¯restfulé£æ ¼ @GetMapping(&quot;/user/&#123;method&#125;&quot;) public String operateUser(@PathVariable(&quot;method&quot;) String method)&#123; return &quot;user/&quot;+method; &#125;&#125; UserMapper.java userè¡¨ä¸­å°±ä¸‰ä¸ªå­—æ®µã€‚id,user_name,password,perms 12345@Mapperpublic interface UserMapper &#123; List&lt;User&gt; listAllUsers(); User getUserByName(String userName);&#125; UserMapper.xml 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lizhi.springbootshiro.mapper.UserMapper&quot;&gt; &lt;select id=&quot;listAllUsers&quot; resultType=&quot;com.lizhi.springbootshiro.pojo.User&quot;&gt; select id,user_name as userName,password,perms from `user` &lt;/select&gt; &lt;select id=&quot;getUserByName&quot; resultType=&quot;com.lizhi.springbootshiro.pojo.User&quot;&gt; select id,user_name as userName,password,perms from `user` where user_name = #&#123;userName&#125; &lt;/select&gt;&lt;/mapper&gt; ç™»å½•æ‹¦æˆªç™»å½•æ‹¦æˆªæŒ‡çš„æ˜¯ï¼Œæœªç™»å½•çš„ç”¨æˆ·ä¸å¾—è¿›å…¥ç”¨æˆ·çš„å¢åˆ æ”¹é¡µé¢ ä¸‹é¢æ˜¯é›†ä¸­æ‹¦æˆªè§„åˆ™ï¼Œä¸€èˆ¬authcå’Œpermsç”¨çš„æ¯”è¾ƒå¤š 1234567/** * annoï¼š æ— éœ€è®¤è¯å³å¯è®¿é—® * authcï¼šå¿…é¡»è®¤è¯äº†æ‰å¯ä»¥è®¿é—® * permsï¼šå¿…é¡»æ‹¥æœ‰æƒé™æ‰å¯ä»¥è®¿é—® * rolesï¼šå¿…é¡»æ‹¥æœ‰æŸç§è§’è‰²æ‰å¯ä»¥è®¿é—® * userï¼šå¿…é¡»æ‹¥æœ‰è®°ä½æˆ‘çš„åŠŸèƒ½çš„æ—¶å€™æ‰å¯ä»¥è®¿é—®ï¼ˆä¸€èˆ¬å¾ˆå°‘ç”¨ï¼‰ */ è¿™æ˜¯åœ¨ShiroFilterFactoryBeanä¸­é…ç½®çš„ 1234567891011121314151617@Beanpublic ShiroFilterFactoryBean getShiroFilterFactory(@Autowired DefaultWebSecurityManager defaultWebSecurityManager)&#123; ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager); Map&lt;String,String&gt; filterMap = new LinkedHashMap&lt;&gt;(); filterMap.put(&quot;/user/add&quot;,&quot;perms[user:add]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:addæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/update&quot;,&quot;perms[user:update]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:updateæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/del&quot;,&quot;perms[user:del]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:delæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/*&quot;,&quot;authc&quot;); shiroFilterFactoryBean.setFilterChainDefinitionMap(filterMap); shiroFilterFactoryBean.setLoginUrl(&quot;/login&quot;); //è®¾ç½®ç™»å½•çš„è·¯å¾„ shiroFilterFactoryBean.setSuccessUrl(&quot;/index&quot;); //è®¾ç½®ç™»å½•æˆåŠŸçš„è·¯å¾„ shiroFilterFactoryBean.setUnauthorizedUrl(&quot;/unauth&quot;); //è®¾ç½®æœªæˆæƒçš„ç”¨æˆ·è¢«è®¿é—®åè·³è½¬çš„è·¯å¾„ return shiroFilterFactoryBean;&#125; login.html 12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Login&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;ç™»å½•&lt;/h2&gt; &lt;p style=&quot;color: red&quot;&gt;[[$&#123;error&#125;]]&lt;/p&gt; &lt;form th:action=&quot;@&#123;/login.do&#125;&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;userName&quot; placeholder=&quot;è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥æ‚¨çš„å¯†ç &quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;&gt; &lt;/p&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; MyControllerä¸­é…ç½®è·¯å¾„ 123456789101112131415161718192021222324252627282930@GetMapping(&quot;/login&quot;)public String login()&#123; return &quot;login&quot;;&#125;@GetMapping(&quot;/unauth&quot;)@ResponseBody //è¿™é‡Œå·æ‡’æ²¡å†™é¡µé¢äº†ï¼Œè€Œæ˜¯ç›´æ¥å°†æ¶ˆæ¯è¿”å›åˆ°é¡µé¢ä¸­public String unauthorized()&#123; return &quot;æœªç»æˆæƒæ— æ³•è®¿é—®æ­¤é¡µé¢&quot;;&#125;@GetMapping(&quot;/login.do&quot;)public String doLogin(String userName, String password, Model model) &#123; //è·å–å½“å‰ç”¨æˆ· Subject currentUser = SecurityUtils.getSubject(); UsernamePasswordToken token = new UsernamePasswordToken(userName, password); try&#123; currentUser.login(token);//è¿™é‡Œä¸‹ä¸€æ­¥æ˜¯åˆ°userRealmçš„è®¤è¯æ–¹æ³• //å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¯´æ˜ç™»å½•æˆåŠŸ Subject currentUser = SecurityUtils.getSubject(); //æ‹¿åˆ°shiroå†…éƒ¨çš„sessionä¿å­˜æ•°æ®ï¼Œ currentUser.getSession().setAttribute(&quot;loginInfo&quot;,user); return &quot;index&quot;; &#125;catch (UnknownAccountException uae)&#123; model.addAttribute(&quot;error&quot;,&quot;ç”¨æˆ·åé”™è¯¯&quot;); return &quot;login&quot;; &#125;catch (IncorrectCredentialsException ice)&#123; model.addAttribute(&quot;error&quot;,&quot;å¯†ç é”™è¯¯&quot;); return &quot;login&quot;; &#125;&#125; ç”¨æˆ·è®¤è¯æ¡ˆä¾‹èµ°åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°æ— è®ºæ€ä¹ˆç™»å½•éƒ½æ˜¯é”™çš„ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚ ç”¨æˆ·è®¤è¯æŒ‡çš„æ˜¯ï¼Œå½“ç”¨æˆ·ç™»å½•çš„æ—¶å€™ï¼Œå¯¹å…¶è¿›è¡ŒéªŒè¯ 1234567891011121314151617@Overrideprotected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123; System.out.println(&quot;è®¤è¯&quot;); /** * æ•°æ®åº“ä¸­è¯»å–æ•°æ® */ UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken; User user = userMapper.getUserByName(token.getUsername()); if(user==null)&#123; //è¿™é‡Œå¦‚æœè¿”å›nullçš„è¯ï¼Œä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸åˆ°ä¸‹å›¾å¤„ return null; &#125; //è¿™é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°userä¼šè®¾ç½®ç»™å½“å‰ç™»å½•å¯¹è±¡çš„Principalä¸­ã€‚ //å¯ä»¥é€šè¿‡SecurityUtils.getSubject().getPrincipal()è·å– //ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ­£ç¡®çš„å¯†ç ï¼Œå³æ•°æ®åº“ä¸­çš„å¯†ç ï¼Œäº¤ç»™shiroæ¥åšå¯†ç çš„æ ¡éªŒï¼Œå¦‚æœå¯†ç é”™è¯¯ï¼Œä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸åˆ°ä¸‹å›¾çš„åœ°æ–¹ return new SimpleAuthenticationInfo(user, user.getPassword(),&quot;&quot;);&#125; è¿™é‡Œæ’ä¸Šä¸€å˜´ï¼Œåœ¨webç¯å¢ƒä¸­ï¼Œé€šè¿‡subjectæ‹¿åˆ°çš„sessionå³webæ¡†æ¶ä¸­çš„é‚£ä¸ªsessionã€‚ ä½†æ˜¯å¦‚æœshiroæ²¡æœ‰ä½¿ç”¨åœ¨webç¯å¢ƒçš„è¯ï¼Œå†…éƒ¨ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªsessionçš„ï¼Œä½†æ˜¯é‚£ä¸ªå°±ä¸æ˜¯webä¸­çš„sessionäº†ã€‚ ç”¨æˆ·æˆæƒå¥½å•¦ï¼Œç°åœ¨æ¡ˆä¾‹å·²ç»å¯ä»¥è·‘èµ·æ¥äº†ï¼Œå¹¶ä¸”å¦‚æœè´¦å·å¯†ç æ­£ç¡®çš„è¯æ˜¯å¯ä»¥ç™»å½•çš„ï¼Œå¹¶ä¸”è¿”å›åˆ°ä¸»é¡µ è¿˜è®°å¾—æˆ‘ä»¬åœ¨ä¸‹å›¾é…ç½®çš„è¿™ä¸€ä¸²è®©äººä¸€å¤´é›¾æ°´çš„é…ç½®å—ï¼Ÿ è¿™é‡Œå°±åªæ˜¯é…ç½®äº†ä¸€ä¸ªè§„åˆ™ï¼Œä½†æ˜¯å…·ä½“ç™»å½•çš„ç”¨æˆ·çš„æˆæƒè¿˜æ²¡æœ‰åšï¼Œæˆ‘ä»¬ç°åœ¨å»å®Œæˆå®ƒå§ 1234567891011121314@Overrideprotected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123; System.out.println(&quot;æˆæƒ&quot;); SimpleAuthorizationInfo info = new SimpleAuthorizationInfo(); //è¿™é‡Œéœ€è¦æ ¹æ®ç”¨æˆ·è¡¨çš„æ•°æ®è¿›è¡Œå¢åŠ æƒé™ Subject subject = SecurityUtils.getSubject(); //æ‹¿åˆ°ç”¨æˆ·è®¤è¯çš„æ—¶å€™ä¼ å…¥çš„user User currentUser = (User) subject.getPrincipal(); System.out.println(&quot;æƒé™ä¸ºï¼š&quot;+ currentUser.getPerms()); //æ•°æ®åº“ä¸­permså­—æ®µæ˜¯ä»¥è¿™æ ·çš„å½¢å¼å­˜å‚¨çš„ user:add,user:update //æ‰€ä»¥éœ€è¦å°†å…¶ç”¨ï¼Œåˆ†å‰²ç„¶åä½¿ç”¨å·¥å…·ç±»å°†å…¶è½¬æ¢ä¸ºé›†åˆä¼ å…¥addStringPermissions info.addStringPermissions(Arrays.asList(currentUser.getPerms().split(&quot;,&quot;))); return info;&#125; ç°åœ¨å°±å®Œæˆäº†æ‰€æœ‰çš„é…ç½®å•¦ï¼å¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ è¿™é‡Œå†å¤šå®Œæˆä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯é¦–é¡µåªæ˜¾ç¤ºç”¨æˆ·å…·æœ‰æƒé™çš„é“¾æ¥ é¦–å…ˆéœ€è¦å¯¼å…¥thymeleafçš„ä¾èµ–ï¼Œç„¶åå†å¯¼å…¥å‘½åç©ºé—´xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot; 12345&lt;dependency&gt; &lt;groupId&gt;com.github.theborakompanioni&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-shiro&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt;&lt;/dependency&gt; é…ç½®ä¸€ä¸ªbean 12345//æ•´åˆthymeleaf@Beanpublic ShiroDialect shiroDialect()&#123; return new ShiroDialect();&#125; index.html 1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;é¦–é¡µ&lt;/h2&gt; &lt;p&gt;[[$&#123;msg&#125;]]&lt;/p&gt; &lt;!--å½“sessionä¸­æ²¡æœ‰ç™»å½•ä¿¡æ¯çš„æ—¶å€™æ˜¾ç¤º--&gt; &lt;p th:if=&quot;$&#123;session.loginInfo==null&#125;&quot;&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;!--å½“sessionæœ‰ä¿¡æ¯çš„æ—¶å€™æ˜¾ç¤º--&gt; &lt;p th:if=&quot;$&#123;session.loginInfo!=null&#125;&quot;&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; &lt;!--æˆ–è€…åƒè¿™æ ·å†™ï¼Œä¸ç”¨å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥session &lt;p shiro:notAuthenticated&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;p shiro:authenticated&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; --&gt; &lt;ul&gt; &lt;li shiro:hasPermission=&quot;user:add&quot;&gt;&lt;a th:href=&quot;@&#123;/user/add&#125;&quot;&gt;ç”¨æˆ·å¢&lt;/a&gt;&lt;/li&gt; &lt;li shiro:hasPermission=&quot;user:del&quot;&gt;&lt;a th:href=&quot;@&#123;/user/del&#125;&quot;&gt;ç”¨æˆ·åˆ &lt;/a&gt;&lt;/li&gt; &lt;li shiro:hasPermission=&quot;user:update&quot;&gt;&lt;a th:href=&quot;@&#123;/user/update&#125;&quot;&gt;ç”¨æˆ·æ”¹&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; æ³¨é”€å¤§å®¶éƒ½åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œä¸Šé¢çš„é¡µé¢ä¸­å¤šäº†ä¸€ä¸ªæ³¨é”€çš„é“¾æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®Œæˆä¸€ä¸‹æ³¨é”€çš„åŠŸèƒ½ 12345@GetMapping(&quot;/logout&quot;)public String logout()&#123; SecurityUtils.getSubject().logout(); return &quot;index&quot;;&#125; æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œshiroå·²ç»å°†å…¶å®Œç¾å¾—å°è£…å¥½äº† ä»¥ä¸Š","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"swagger","slug":"SpringBoot-Swagger","date":"2022-02-17T02:11:19.000Z","updated":"2022-10-04T13:55:14.714Z","comments":true,"path":"javaEE/SpringBoot/2022/02/17/SpringBoot-Swagger/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringBoot/2022/02/17/SpringBoot-Swagger/","excerpt":"","text":"Swagger å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶ RestFulé£æ ¼çš„APIå±•ç¤ºå¯ä»¥å®ç°APIæ–‡æ¡£å’ŒAPIå®šä¹‰åŒæ­¥æ›´æ–° SpringBootæ•´åˆSwagger å¯¼å…¥ç›¸å…³ä¾èµ– 1234567891011121314151617&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;!--éœ€è¦webçš„æ”¯æŒ--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; å†™ä¸€ä¸ªç®€å•çš„Controller 1234567@RestControllerpublic class HelloController &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return &quot;hello&quot;; &#125;&#125; å¼€å¯SwaggeråŠŸèƒ½ 1234@Configuration@EnableSwagger2public class SwaggerConfig &#123; &#125; è®¿é—®swagger-ui.html æˆ‘ä»¬åœ¨uiçš„jaråŒ…ä¸­å¯ä»¥çŸ¥é“æˆ‘ä»¬å¯ä»¥è®¿é—®è¯¥é¡µé¢ è¿™æ˜¯è®¿é—®çš„é¡µé¢ é…ç½®SwaggerSwaggerä¸­ç”¨æ¥é…ç½®çš„beanæ˜¯Docket é…ç½®æ–‡æ¡£ä¿¡æ¯123456789101112131415161718@Beanpublic Docket docket()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo());&#125;//é…ç½®swaggerä¿¡æ¯public ApiInfo apiInfo()&#123; return new ApiInfo( &quot;swaggeræµ‹è¯•&quot;,//æ–‡æ¡£åç§° &quot;åˆæ¬¡æµ‹è¯•swagger&quot;,//æ–‡æ¡£æè¿° &quot;1.0&quot;,//ç‰ˆæœ¬å· &quot;http://li-zhi.net.cn/&quot;,//ä½œè€…ä¸ªäººåšå®¢ new Contact(&quot;ææ™º&quot;,&quot;http://li-zhi.net.cn/&quot;,&quot;1158778689@qq.com&quot;),//ä½œè€…è”ç³»æ–¹å¼ &quot;Apache 2.0&quot;,//å¼€æºåè®® &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;, new ArrayList&lt;&gt;() );&#125; é…ç½®æ¨¡å‹1234567@Controllerpublic class SwaggerModelConfig &#123; @GetMapping(&quot;/user&quot;) public User user()&#123; return new User(); &#125;&#125; æˆ‘æ˜¯ä¸“é—¨å»ºäº†ä¸€ä¸ªSwaggerModelConfigæ¥æ”¾ç½®æ‰€æœ‰çš„æ¨¡å‹ç±» é…ç½®åˆ†ç»„å› ä¸ºé¡¹ç›®ä¸€èˆ¬æ˜¯åˆ†ç»„ååŒå¼€å‘ï¼Œæ¯ä¸ªç»„å„è‡ªå¼€å‘çš„æ¥å£ï¼Œé‚£æ¥å£æ–‡æ¡£åº”è¯¥å„è‡ªåˆ†å¼€ï¼Œæ‰€ä»¥å°±æœ‰äº†åˆ†ç»„çš„éœ€è¦ åˆ†ç»„åªéœ€è¦é…ç½®ä¸€ä¸ªgroupName(â€œgroupNameâ€)å³å¯ 12345678910@Beanpublic Docket docket2()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group2&quot;);&#125;@Beanpublic Docket docket1()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;);&#125; é…ç½®æ‰«æçš„æ¥å£è¿™é‡Œä¸»è¦è®²ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯æŒ‰è·¯å¾„æ‰«æï¼Œç¬¬äºŒç§æ˜¯æŒ‰åŒ…åæ‰«æ æŒ‰è·¯å¾„æ‰«æ123456789@Beanpublic Docket docket1()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;) .select() .paths(PathSelectors.ant(&quot;/user/**&quot;)) // è¯¥é…ç½®ä¸‹ï¼Œè¯¥ç»„ä¼šæ‰«ææ‰€æœ‰çš„/user/ä¸‹çš„æ‰€æœ‰çš„API .build();&#125; æŒ‰åŒ…åæ‰«æ123456789@Beanpublic Docket docket2()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group2&quot;) .select() .apis(RequestHandlerSelectors.basePackage(&quot;com.lizhiswaggertest.controller&quot;)) //è¯¥é…ç½®ä¸‹ï¼Œè¯¥ç»„ä¼šæ‰«ææ‰€æœ‰æ­¤åŒ…ä¸‹çš„APIæ¥å£ .build();&#125; åœ¨ç±»RequestHandlerSelectorsä¸­è¿˜æœ‰å…¶ä»–çš„æ‰«ææœºåˆ¶ï¼Œå¯è‡ªè¡Œç ”ç©¶ æ ¹æ®ç¯å¢ƒæ§åˆ¶æ˜¯å¦èƒ½è®¿é—®swaggerä¸€èˆ¬äº§å“çš„å¼€å‘éƒ½ä¼šæœ‰å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€ä¸Šçº¿ç­‰å¤šå¥—ç¯å¢ƒï¼Œæ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼Œæ§åˆ¶æ˜¯å¦å¯ä»¥è®¿é—®swaggerçš„uiç•Œé¢ é…ç½®æ–‡ä»¶application.yml 1234567891011121314151617181920212223---server: port: 8081spring: profiles: dev---server: port: 8082spring: profiles: test---server: port: 8083spring: profiles: pro---spring: profiles: active: dev é…ç½®devç¯å¢ƒå’Œtestç¯å¢ƒå¯ä»¥ä½¿ç”¨swagger 12345678@Beanpublic Docket docket1(Environment environment)&#123; Profiles devProfile = Profiles.of(&quot;dev&quot;,&quot;test&quot;); boolean dev = environment.acceptsProfiles(devProfile); return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;) .enable(dev);&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"å•ä¾‹è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å•ä¾‹è®¾è®¡æ¨¡å¼","date":"2022-02-16T11:02:56.000Z","updated":"2022-02-25T01:43:38.836Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/16/è®¾è®¡æ¨¡å¼-å•ä¾‹è®¾è®¡æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å•ä¾‹è®¾è®¡æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯ï¼Œä¸€ä¸ªç¯å¢ƒä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡ è¯¥æ¨¡å¼æœ‰äº”ç§å®ç°æ–¹å¼ æ¶æ±‰æ¨¡å¼ æ‡’æ±‰æ¨¡å¼ é™æ€å†…éƒ¨ç±»æ¨¡å¼ æšä¸¾æ¨¡å¼ è¯¥è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ˜¯æ„é€ æ–¹æ³•ç§æœ‰åŒ– é¥¿æ±‰æ¨¡å¼æ¶æ±‰æ¨¡å¼ï¼šè§åçŸ¥æ„ï¼Œå°±æ˜¯åœ¨ç±»è¢«åŠ è½½çš„æ—¶å€™å°±åˆ›å»ºã€‚ æ¡ˆä¾‹ï¼šRuntimeç±» ç¼ºç‚¹ï¼šæµªè´¹å†…å­˜ç©ºé—´ æˆ‘æŸ¥äº†èµ„æ–™ï¼ŒæŸ¥åˆ°äº†è¿™ä¸ªç¼ºç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªç¼ºç‚¹æˆ‘ä¸æ—¶å¾ˆèƒ½ç†è§£ 123456789public class Hungry &#123; private final static Hungry HUNGRY = new Hungry(); private Hungry()&#123; &#125; public static Hungry getInstance()&#123; return HUNGRY; &#125;&#125; æ‡’æ±‰æ¨¡å¼è¿™ç§å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä»åˆ†å‡ ä¸ªç‰ˆæœ¬ä»ç®€å•åˆ°å¤æ‚ Version 0112345678910111213public class LazyMan &#123; private static LazyMan lAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(lAZYMAN==null)&#123; //A lAZYMAN = new LazyMan(); &#125; return lAZYMAN; &#125;&#125; ç¼ºç‚¹ï¼šåªèƒ½åœ¨å•çº¿ç¨‹ä¸­å®‰å…¨ï¼Œå¤šçº¿ç¨‹ä¸­æ˜¯ä¸å®‰å…¨çš„ ç°åœ¨æœ‰çº¿ç¨‹Aå’Œçº¿ç¨‹Bï¼Œçº¿ç¨‹Aèµ°åˆ°äº†æ³¨è§£Aå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œè¿™æ—¶å€™lAZYMANè¿˜æ˜¯nullï¼Œæ‰€ä»¥çº¿ç¨‹Båˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œç„¶åçº¿ç¨‹AæŠ¢å›CPUï¼Œå®ƒè¿™æ—¶å€™å·²ç»åœ¨ifè¯­å¥é‡Œé¢äº†ï¼Œç®­åœ¨å¼¦ä¸Šä¸å¾—ä¸å‘ï¼Œæ‰€ä»¥çº¿ç¨‹Aä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œå¯¼è‡´å•ä¾‹æ¨¡å¼è¢«ç ´åï¼Œæ‰€ä»¥è¯¥å®ç°æ–¹å¼çº¿ç¨‹ä¸å®‰å…¨ Version 02123456789101112public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public synchronized static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; LAZYMAN = new LazyMan(); &#125; return LAZYMAN; &#125;&#125; ç¼ºç‚¹ï¼šä¸ºæ–¹æ³•åŠ é”ï¼Œç¡®å®ä¿è¯äº†å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“åŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯LazyMançš„Classç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—çŸ¥è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨ã€‚ä½†æ˜¯æˆ‘ä»¬å¥½å¥½æƒ³æƒ³ï¼Œå½“æˆ‘ä»¬åˆ›å»ºäº†ç¬¬ä¸€ä¸ªå•ä¾‹å¯¹è±¡ä¹‹åï¼Œè¿˜éœ€è¦é”æ¥ä¿è¯åŒæ­¥å—ï¼Ÿç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œè‚¯å®šæ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ•ˆç‡ä½ä¸‹ï¼Œéœ€è¦æ”¹è¿›ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªç‰ˆæœ¬ Version 03123456789101112131415public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; LAZYMAN = new LazyMan(); &#125; &#125; return LAZYMAN; &#125;&#125; æˆ‘ä»¬ä¸ä½¿ç”¨åŒæ­¥æ–¹æ³•æ¥ä¿è¯æ‰€æœ‰çš„çº¿ç¨‹åŒæ­¥ï¼Œæˆ‘ä»¬åªå¯¹LAZYMANå¯¹è±¡è¿˜ä¸ºnullçš„çº¿ç¨‹åŒæ­¥ï¼Œè¿™æ—¶å€™åˆå‡ºç°äº†é—®é¢˜ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚çº¿ç¨‹Aèµ°åˆ°äº†æ³¨é‡ŠAå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œè¿™æ—¶å€™lAZYMANè¿˜æ˜¯nullï¼Œæ‰€ä»¥çº¿ç¨‹Båˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œç„¶åçº¿ç¨‹AæŠ¢å›CPUï¼Œå®ƒè¿™æ—¶å€™å·²ç»åœ¨ifè¯­å¥é‡Œé¢äº†ï¼Œç®­åœ¨å¼¦ä¸Šä¸å¾—ä¸å‘ï¼Œæ‰€ä»¥çº¿ç¨‹Aä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œå¯¼è‡´å•ä¾‹æ¨¡å¼è¢«ç ´åï¼Œæ‰€ä»¥è¯¥å®ç°æ–¹å¼çº¿ç¨‹ä¸å®‰å…¨ï¼Œæˆ‘ä»¬å‘ç°è¿™å’Œæˆ‘ä»¬æ²¡æœ‰åŠ é”çš„æ—¶å€™çš„æƒ…å½¢å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŒé‡é”æœºåˆ¶ Version 04public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; if(LAZYMAN==null)&#123; //B LAZYMAN = new LazyMan(); &#125; &#125; &#125; return LAZYMAN; &#125; &#125; æˆ‘ä¸ªäººçš„ç†è§£æ˜¯ç¬¬ä¸€é‡é”æ˜¯ä¸ºäº†è¿‡æ»¤LAZYMANä¸ºNULLçš„çº¿ç¨‹ï¼Œç¬¬äºŒé‡é”æ˜¯ä¸ºäº†ä¿è¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»åˆ›å»ºå¯¹è±¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¼¼ä¹æ‰¾ä¸åˆ°ä»€ä¹ˆç ´ç»½äº†ï¼Œæˆ‘ä»¬æ¥ç»§ç»­å¾€ä¸‹çœ‹ Version 05123456789101112131415161718public class LazyMan &#123; private volatile static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; if(LAZYMAN==null)&#123; //B LAZYMAN = new LazyMan(); &#125; &#125; &#125; return LAZYMAN; &#125;&#125; ä¹ä¸€çœ‹ï¼Œå¥½åƒå’Œä¸Šä¸€ä¸ªç‰ˆæœ¬æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä»”ç»†ä¸€çœ‹ï¼Œå…¶å®åŒºåˆ«æ˜¯åœ¨è¿™ä¸ªå•ä¾‹å˜é‡çš„ä¿®é¥°ç¬¦å¤šäº†ä¸€ä¸ªvolatileã€‚ volatileä¸‰å¤§ä½œç”¨ ä¿è¯å¯è§æ€§ ä¸ä¿è¯åŸå­æ€§ ç¦æ­¢è¯¥å˜é‡å‡ºç°çš„åœ°æ–¹å‘ç”ŸæŒ‡ä»¤é‡æ’ è¿™é‡Œçš„è¯ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ç‰¹æ€§æ˜¯ç¬¬ä¸‰ç‚¹ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ LAZYMAN = new LazyMan(); è¿™ä¸€å¥è¯å…¶å®æ‰§è¡Œäº†ä¸‰ä¸ªæ­¥éª¤ å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ åˆå§‹åŒ–å¯¹è±¡ å°†è¯¥å†…å­˜ç©ºé—´çš„åœ°å€æŒ‡å‘å˜é‡ JVMå†…éƒ¨ä¼šæœ‰ä¸€ç§å«æŒ‡ä»¤é‡æ’çš„ä»£ç ä¼˜åŒ–æœºåˆ¶ï¼Œè¿™æ—¶å€™ï¼Œè¿™ä¸‰è€…çš„é¡ºåºå°±æœ‰å¯èƒ½ä¼šæ”¹å˜ã€‚ ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚çº¿ç¨‹Aèµ°åˆ°äº†æ³¨é‡ŠAå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œå¼€å§‹æ‰§è¡ŒLAZYMAN = new LazyMan();å¼€è¾Ÿå†…å­˜ç©ºé—´åï¼Œæ²¡æœ‰å…ˆåˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œæ˜¯å…ˆå°†è¯¥å†…å­˜ç©ºé—´çš„åœ°å€æŒ‡å‘å˜é‡ï¼Œè¿™æ—¶å€™çº¿ç¨‹AæŠ¢å›äº†CPUï¼Œè¿™æ—¶å€™çš„LAZYMANå·²ç»ä¸æ˜¯NULLäº†ï¼Œç›´æ¥å°†å…¶è¿”å›äº†å‡ºå»ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡å…¶å®è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œè¿˜æ˜¯ä¸ªç©ºæ¶å­ï¼Œè¿™å°±å‡ºç°äº†é—®é¢˜ã€‚ å½“ç„¶è¿™ç§æƒ…å†µååˆ†ååˆ†å°‘ï¼Œä½†æ˜¯ä¸ºäº†ä¸¥è°¨æ€§ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Švolatileå…³é”®è¯ç¦æ­¢æŒ‡ä»¤é‡æ’ é™æ€å†…éƒ¨ç±»æ¨¡å¼1234567891011public class StaticWay &#123; private StaticWay()&#123; &#125; public static class InnerClass&#123; private static final StaticWay STATICWAY = new StaticWay(); &#125; public static StaticWay getInstance()&#123; return InnerClass.STATICWAY; &#125;&#125; è¯¥å®ç°æ–¹å¼å…¶å®å°±æ˜¯åˆ©ç”¨çš„JVMçš„ä¸€äº›ç‰¹æ€§ ç±»çš„åŠ è½½åˆ†ä¸ºä»¥ä¸‹è¿‡ç¨‹ ç±»çš„åŠ è½½ï¼šå°†Classæ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–è¯¥ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ ç±»çš„é“¾æ¥ï¼šå°†Javaç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JVMä¸­ éªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ç¬¦åˆJVMè§„èŒƒ å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®æˆå‘˜å˜é‡çš„é»˜è®¤å€¼ è§£æï¼šJVMå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ ç±»çš„åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»æ„é€ å™¨&lt; clinit &gt;()æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå…¶çˆ¶ç±»ä¸ºåˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» ï¼ŒJVMä¼šä¿è¯ç±»æ„é€ å™¨åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¢«æ­£ç¡®åŠ é” å…¶å®æœ€å¼€å§‹çš„é¥¿æ±‰å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯ä¹Ÿæ˜¯è¿™ä¸ªåŸç† é¢ è¦†å…¶å®ä¸€è·¯åˆ°äº†è¿™é‡Œï¼Œä»¥ä¸Šæ–¹æ³•éƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚å› ä¸ºjavaæœ‰ä¸€ä¸ªå¾ˆç‰›Xçš„åŒ…ã€‚ java.lang.reflect æˆ‘ä»¬åœ¨æœ€å¼€å§‹è¯´è¿‡ï¼Œå•ä¾‹æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯æ„é€ å™¨ç§æœ‰åŒ–ï¼Œä½†æ˜¯javaçš„åå°„æœºåˆ¶ï¼Œå®ƒä¸è®²æ­¦å¾·ï¼Œå®ƒå¯ä»¥ç›´æ¥ä¿®æ”¹æƒé™ä¿®é¥°ç¬¦ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ã€‚ 12345678public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;Hungry&gt; constructor = Hungry.class.getDeclaredConstructor(null); constructor.setAccessible(true); Hungry hungry1 = Hungry.getInstance();; Hungry hungry2 = constructor.newInstance(); System.out.println(hungry1==hungry2);&#125;//å¯æƒ³è€ŒçŸ¥æœ€åçš„ç»“æœæ˜¯ false å¯ä¸å¯ä»¥å¯¹å…¶ä½œå‡ºé˜²å¾¡å‘¢ï¼Ÿ 1234567891011121314private Hungry()&#123; if(HUNGRY!=null)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;&#125;Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490) at com.lizhi.hungry.Hungry.main(Hungry.java:26)Caused by: java.lang.IllegalArgumentException: è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼ at com.lizhi.hungry.Hungry.&lt;init&gt;(Hungry.java:15) ... 5 more ä¸Šè¿°æ–¹æ³•å¯¹é¥¿æ±‰å·²ç»ä½œå‡ºäº†åˆé€‚çš„é˜²å¾¡ï¼Œé‚£å¯¹äºæ‡’æ±‰æ¨¡å¼ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä½¿ç”¨åå°„åˆ›å»ºçš„å‘¢ï¼Ÿè¿™æ—¶å€™è¿™ä¸ªé˜²å¾¡å°±æ˜¯å½¢åŒè™šè®¾äº†ï¼Œå› ä¸ºæˆ‘ä»¬è‚¯å®šæ˜¯ç¦æ­¢åå°„å»åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ç§è‚¯å®šæ˜¯ä¸è¡Œçš„ 123456789101112131415161718192021222324252627282930public class LazyMan &#123; private static LazyMan LazyMan; private LazyMan()&#123; if(LAZYMAN!=null)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;else &#123; synchronized (LazyMan.class)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; public static LazyMan getInstance()&#123; if(LazyMan==null)&#123; synchronized (LazyMan.class)&#123; if(LazyMan==null)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; return LazyMan; &#125; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;LazyMan&gt; constructor = LazyMan.class.getDeclaredConstructor(null); constructor.setAccessible(true); LazyMan lazyMan1 = constructor.newInstance(); LazyMan lazyMan2 = LazyMan.getInstance(); System.out.println(lazyMan1==lazyMan2); &#125;&#125; æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå¸ƒå°”å€¼æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ 12345678910111213141516171819202122232425262728293031public class LazyMan &#123; private volatile static LazyMan LazyMan; private volatile static boolean flag ; private LazyMan()&#123; if(flag)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;else &#123; flag=true; &#125; &#125; public static LazyMan getInstance()&#123; if(LazyMan==null)&#123; synchronized (LazyMan.class)&#123; if(LazyMan==null)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; return LazyMan; &#125; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;LazyMan&gt; constructor = LazyMan.class.getDeclaredConstructor(null); constructor.setAccessible(true); LazyMan lazyMan1 = constructor.newInstance();// LazyMan lazyMan2 = constructor.newInstance(); LazyMan lazyMan2 = LazyMan.getInstance();// LazyMan lazyMan1 = LazyMan.getInstance(); System.out.println(lazyMan1==lazyMan2); &#125;&#125; è¿™æ ·åå°„å°±æ— æ³•æ§åˆ¶æˆ‘ä»¬çš„å•ä¾‹äº†ï¼ æšä¸¾ç±»è¿™æ—¶å€™æœ‰æ²¡æœ‰æƒ³èµ·æ¥æˆ‘ä»¬åœ¨å­¦javaSEçš„æ—¶å€™å°±å­¦åˆ°äº†ä¸€ä¸ªè‡ªå¸¦å•ä¾‹æ¨¡å¼çš„ç±»å‹ï¼Œé‚£å°±æ˜¯æšä¸¾ç±»Enumï¼ æˆ‘ä»¬æ¥å°è¯•æ”»å‡»ä¸€ä¸‹æšä¸¾ç±»ï¼ 1234567891011public enum SingleEnum &#123; SINGLETON; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;SingleEnum&gt; constructor = SingleEnum.class.getDeclaredConstructor(String.class, int.class); constructor.setAccessible(true); SingleEnum single1 = constructor.newInstance(&quot;single&quot;, 2); SingleEnum single2 = constructor.newInstance(&quot;single&quot;, 2); System.out.println(single1==single2); &#125;&#125; è¿™æ—¶å€™å‘ç°æŠ¥é”™äº†ï¼ï¼ 123Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot reflectively create enum objects at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484) at com.lizhi.SingleEnum.main(SingleEnum.java:12) æˆ‘ä»¬ç‚¹è¿›newInstanceæ–¹æ³•çœ‹ä¸‹æºç ï¼Œ 1234567891011121314151617181920@CallerSensitive@ForceInline // to ensure Reflection.getCallerClass optimizationpublic T newInstance(Object ... initargs) throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException&#123; if (!override) &#123; Class&lt;?&gt; caller = Reflection.getCallerClass(); checkAccess(caller, clazz, clazz, modifiers); &#125; if ((clazz.getModifiers() &amp; Modifier.ENUM) != 0) throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); ConstructorAccessor ca = constructorAccessor; // read volatile if (ca == null) &#123; ca = acquireConstructorAccessor(); &#125; @SuppressWarnings(&quot;unchecked&quot;) T inst = (T) ca.newInstance(initargs); return inst;&#125; æˆ‘ä»¬å‘ç°äº†è¿™å¥è¯throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); è¿™å°±è§£é‡Šé€šäº†ï¼ŒåŸæ¥æ˜¯javaçš„åå°„å·²ç»å¤„ç†å¥½äº†æšä¸¾ç±»ï¼Œä½¿å…¶çœŸæ­£çš„å®ç°äº†å®‰å…¨çš„å•ä¾‹ï¼","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"å·¥å‚è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å·¥å‚è®¾è®¡æ¨¡å¼","date":"2022-02-16T11:01:20.000Z","updated":"2022-02-25T01:45:08.928Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/16/è®¾è®¡æ¨¡å¼-å·¥å‚è®¾è®¡æ¨¡å¼/","link":"","permalink":"https://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å·¥å‚è®¾è®¡æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯ï¼šå°†ç±»å®ä¾‹åŒ–çš„æ“ä½œä¸ä½¿ç”¨å¯¹è±¡çš„æ“ä½œåˆ†å¼€ï¼Œè®©ä½¿ç”¨è€…ä¸ç”¨çŸ¥é“å…·ä½“å‚æ•°å°±å¯ä»¥å®ä¾‹åŒ–å‡ºæ‰€éœ€è¦çš„äº§å“ç±»ï¼Œä»è€Œé¿å…äº†åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æ˜¾å¼æŒ‡å®šï¼Œå®ç°äº†è§£è€¦ã€‚ è¯¥è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç§å®ç° ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼ å·¥å‚æ–¹æ³•å®ç°æ¨¡å¼ æŠ½è±¡å·¥å‚å®ç°æ¨¡å¼ ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼ä¸€ä¸ªæ±½è½¦å·¥å‚ç”Ÿäº§æ±½è½¦ã€‚æœ‰ç‰¹æ–¯æ‹‰ã€å¤§ä¼—ã€äº”è± è½¦çš„æ¥å£ 123public interface Car &#123; void printName();&#125; å¤§ä¼— 123456public class DaZhong implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;å¤§ä¼—&quot;); &#125;&#125; ç‰¹æ–¯æ‹‰ 123456public class TeSiLa implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;ç‰¹æ–¯æ‹‰&quot;); &#125;&#125; äº”è± 123456public class WuLin implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;äº”è±å®å…‰&quot;); &#125;&#125; å·¥å‚ 12345678910111213public class CarFactory &#123; public static Car getCar(String carName)&#123; if(&quot;å¤§ä¼—&quot;.equals(carName))&#123; return new DaZhong(); &#125;else if(&quot;äº”è±å®å…‰&quot;.equals(carName))&#123; return new WuLin(); &#125;else if(&quot;ç‰¹æ–¯æ‹‰&quot;.equals(carName))&#123; return new TeSiLa(); &#125;else &#123; return null; &#125; &#125;&#125; ç¼ºç‚¹ï¼šå¾ˆéš¾æ¨ªå‘æ‹“å±•ï¼Œå¦‚æœæˆ‘åæœŸéœ€è¦åŠ æ–°çš„è½¦å‹ï¼Œéœ€è¦æ”¹å˜åŸæ¥çš„ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼ˆOOPä¸ƒå¤§åŸåˆ™ï¼‰ ä¼˜ç‚¹ï¼šç®€å•æ˜“æ‡‚ å¯ä»¥ç®€å•ä¼˜åŒ– 1234567891011public class CarFactory &#123; public static Car getWuLin()&#123; return new WuLin(); &#125; public static Car getDaZhong()&#123; return new DaZhong(); &#125; public static Car getTeSiLa()&#123; return new TeSiLa(); &#125;&#125; å·¥å‚æ–¹æ³•å®ç°æ¨¡å¼è¿˜æ˜¯ç®€å•å·¥å‚çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æ¥æ¢ä¸ªå·¥å‚ è¿™ä¸€æ¬¡æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ±½è½¦å·¥å‚çš„æ¥å£ 123public interface CarFactory &#123; Car getCar();&#125; ç‰¹æ–¯æ‹‰å·¥å‚ 123456public class TeSiLaCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new TeSiLa(); &#125;&#125; å¤§ä¼—å·¥å‚ 123456public class DaZhongCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new DaZhong(); &#125;&#125; äº”è±å·¥å‚ 123456public class WuLinCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new WuLin(); &#125;&#125; ç¼ºç‚¹ï¼šå½“æ±½è½¦ç±»å‹å¾ˆå¤šçš„æ—¶å€™ï¼Œä¼šæœ‰å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå„è‡ªçš„å·¥å‚ï¼Œæ²¡æœ‰å¿…è¦ æŠ½è±¡å·¥å‚å®ç°æ¨¡å¼è¿™æ¬¡æˆ‘ä»¬æ¢ä¸€ä¸ªåœºæ™¯ï¼šå°ç±³å’Œåä¸ºéƒ½æœ‰è·¯ç”±å™¨å’Œæ‰‹æœºçš„äº§å“ è·¯ç”±å™¨æ¥å£ 1234public interface Router &#123; void doConfig(); void printInfo();&#125; æ‰‹æœºæ¥å£ 1234public interface MobilePhone &#123; void sendMsg(); void callUp();&#125; å‚å®¶æ¥å£ 1234public interface ProductFactory &#123; MobilePhone getMobilePhone(); Router getRouter();&#125; åä¸ºæ‰‹æœº 1234567891011public class HuaWeiMobilePhone implements MobilePhone &#123; @Override public void sendMsg() &#123; System.out.println(&quot;åä¸ºæ‰‹æœºå‘ä¿¡æ¯&quot;); &#125; @Override public void callUp() &#123; System.out.println(&quot;åä¸ºæ‰‹æœºæ‰“ç”µè¯&quot;); &#125;&#125; åä¸ºè·¯ç”±å™¨ 1234567891011public class HuaWeiRouter implements Router &#123; @Override public void doConfig() &#123; System.out.println(&quot;åä¸ºè·¯ç”±å™¨é…ç½®&quot;); &#125; @Override public void printInfo() &#123; System.out.println(&quot;åä¸ºè·¯ç”±å™¨æ‰“å°è¯¦ç»†ä¿¡æ¯&quot;); &#125;&#125; å°ç±³è·¯ç”±å™¨ 1234567891011public class XiaoMiRouter implements Router &#123; @Override public void doConfig() &#123; System.out.println(&quot;å°ç±³è·¯ç”±å™¨é…ç½®&quot;); &#125; @Override public void printInfo() &#123; System.out.println(&quot;å°ç±³è·¯ç”±å™¨æ‰“å°è¯¦ç»†ä¿¡æ¯&quot;); &#125;&#125; å°ç±³æ‰‹æœº 1234567891011public class XiaoMiMobilePhone implements MobilePhone &#123; @Override public void sendMsg() &#123; System.out.println(&quot;å°ç±³æ‰‹æœºå‘ä¿¡æ¯&quot;); &#125; @Override public void callUp() &#123; System.out.println(&quot;å°ç±³æ‰‹æœºæ‰“ç”µè¯&quot;); &#125;&#125; åä¸ºå‚å•† 1234567891011public class HuaWeiFactory implements ProductFactory &#123; @Override public MobilePhone getMobilePhone() &#123; return new HuaWeiMobilePhone(); &#125; @Override public Router getRouter() &#123; return new HuaWeiRouter(); &#125;&#125; å°ç±³å‚å•† 1234567891011public class XiaoMiFactory implements ProductFactory &#123; @Override public MobilePhone getMobilePhone() &#123; return new XiaoMiMobilePhone(); &#125; @Override public Router getRouter() &#123; return new XiaoMiRouter(); &#125;&#125; ä¸¤ä¸ªç»´åº¦ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ˜¯äº§å“æ—ï¼ˆè·¯ç”±å™¨ã€æ‰‹æœºï¼‰ï¼Œç¬¬äºŒä¸ªç»´åº¦æ˜¯å…·ä½“å‚å•†ï¼ˆåä¸ºï¼Œå°ç±³ï¼‰ã€‚ æ ¹æ®è¿™ä¸¤ç§ç»´åº¦åˆ†åˆ«è®¾è®¡äº†æ¥å£ï¼ŒæŠ½è±¡çš„å·¥å‚å®šä¹‰ç”Ÿäº§å“ªäº›äº§å“æ—ï¼Œå…·ä½“çš„å·¥å‚å…·ä½“å®ç°è‡ªå·±çš„äº§å“æ—","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"SpringBoot-Security","slug":"SpringBoot-Security","date":"2022-02-16T08:20:46.000Z","updated":"2022-10-04T13:55:07.490Z","comments":true,"path":"javaEE/SpringBoot/2022/02/16/SpringBoot-Security/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringBoot/2022/02/16/SpringBoot-Security/","excerpt":"","text":"ç®€ä»‹Spring Security æ˜¯é’ˆå¯¹Springé¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯Spring Bootåº•å±‚å®‰å…¨æ¨¡å—é»˜è®¤çš„æŠ€æœ¯é€‰å‹ï¼Œä»–å¯ä»¥å®ç°å¼ºå¤§çš„Webå®‰å…¨æ§åˆ¶ï¼Œå¯¹äºå®‰å…¨æ§åˆ¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦å¼•å…¥spring-boot-starter-securityæ¨¡å—ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œå³å¯å®ç°å¼ºå¤§çš„å®‰å…¨ç®¡ç†! Spring Securityçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯â€œè®¤è¯â€å’Œâ€œæˆæƒâ€ï¼ˆè®¿é—®æ§åˆ¶ï¼‰ â€œè®¤è¯â€(Authentication) â€œæˆæƒâ€ (Authorization) è¿™ä¸ªæ¦‚å¿µæ˜¯é€šç”¨çš„ï¼Œè€Œä¸æ˜¯åªåœ¨Spring Security ä¸­å­˜åœ¨ã€‚ åŸºæœ¬ä½¿ç”¨ å¯¼å…¥ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; ç»§æ‰¿WebSecurityConfigurerAdapter 123@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123;&#125; é‡å†™ä»¥ä¸‹æ–¹æ³•åšå‡ºæƒé™è®¾ç½® 1234567891011121314151617@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; //é¦–é¡µéƒ½å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯å„ä¸ªçº§åˆ«ä¸‹çš„é¡µé¢è®¾ç½®æˆåªèƒ½å„è‡ªçš„çº§åˆ«æ‰å¯ä»¥è®¿é—® http.authorizeRequests() .antMatchers(&quot;/&quot;).permitAll() .antMatchers(&quot;/vip1/**&quot;).hasRole(&quot;vip1&quot;) .antMatchers(&quot;/vip2/**&quot;).hasRole(&quot;vip2&quot;) .antMatchers(&quot;/vip3/**&quot;).hasRole(&quot;vip3&quot;); //æ²¡æœ‰æƒé™é»˜è®¤å›åˆ°ç™»å½•é¡µé¢ï¼ŒloginPageè®¾ç½®ç™»å½•é¡µé¢ï¼ŒloginProcessingUrlè®¾ç½®ç™»å½•æäº¤çš„api //å¦‚æœåªå†™ http.formLogin();ä¼šæœ‰ä¸€ä¸ªé»˜è®¤ç™»å½•é¡µé¢å’Œé»˜è®¤çš„ç™»å½•æäº¤çš„api http.formLogin().loginPage(&quot;/login&quot;).loginProcessingUrl(&quot;/user/api/login&quot;); //è®¾ç½®é€€å‡ºæ—¶å€™ä½¿sessionå¤±æ•ˆï¼ŒlogoutSuccessUrlè®¾ç½®é€€å‡ºæˆåŠŸçš„é¡µé¢ http.logout().invalidateHttpSession(true).logoutSuccessUrl(&quot;/index&quot;); //è®¾ç½®â€™è®°ä½æˆ‘â€˜çš„åŠŸèƒ½ //remember-meä¸ºé»˜è®¤æäº¤çš„å‚æ•° http.rememberMe().rememberMeParameter(&quot;remember&quot;);&#125; é‡å†™ä»¥ä¸‹æ–¹æ³•åšå‡ºæˆæƒå¤„ç† 123456789101112@Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; /** * è¿™é‡Œè¦ä»æ•°æ®åº“è¯» */ //BCryptPasswordEncoderä¸ºå¯†ç è®¾ç½®åŠ å¯†ï¼Œå¦‚æœä¸è®¾ç½®ä¼šæŠ¥é”™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–åŠ å¯†çš„ç±» BCryptPasswordEncoder encoder = new BCryptPasswordEncoder(); auth.inMemoryAuthentication().passwordEncoder(encoder) .withUser(&quot;zhima&quot;).password(encoder.encode(&quot;a&quot;)).roles(&quot;vip1&quot;,&quot;vip3&quot;) .and() .withUser(&quot;lizhi&quot;).password(encoder.encode((&quot;123456&quot;))).roles(&quot;vip1&quot;,&quot;vip2&quot;,&quot;vip3&quot;);&#125; æµ‹è¯• thymeleafæ¨¡æ¿ç»“åˆSpringSecurityå¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; &lt;version&gt;3.0.4.RELEASE&lt;/version&gt;&lt;/dependency&gt; è§‚å¯Ÿè¿™ä¸ªé¡µé¢çš„ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity4&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div sec:authorize=&quot;!isAuthenticated()&quot;&gt; &lt;!--sec:authorize=&quot;!isAuthenticated()&quot;å½“ç”¨æˆ·æ²¡ç™»å½•çš„æ—¶å€™--&gt; &lt;p&gt;é¦–é¡µ&lt;/p&gt; &lt;p&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;isAuthenticated()&quot;&gt; &lt;!--sec:authorize=&quot;isAuthenticated()&quot;å½“ç”¨æˆ·ç™»å½•çš„æ—¶å€™--&gt; ç”¨æˆ·åï¼š&lt;span sec:authentication=&quot;name&quot;&gt;&lt;/span&gt; &lt;!--sec:authentication=&quot;name&quot;å–å‡ºç”¨æˆ·çš„ç”¨æˆ·å--&gt; æˆæƒï¼š&lt;span sec:authentication=&quot;principal.authorities&quot;&gt;&lt;/span&gt; &lt;!--sec:authentication=&quot;principal.authorities&quot;å–å‡ºç”¨æˆ·çš„roles--&gt; &lt;p&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip1&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip1&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip1æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip1&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/1&#125;&quot;&gt;vip1-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/2&#125;&quot;&gt;vip1-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/3&#125;&quot;&gt;vip1-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip2&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip2&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip2æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip2&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/1&#125;&quot;&gt;vip2-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/2&#125;&quot;&gt;vip2-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/3&#125;&quot;&gt;vip2-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip3&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip3&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip3æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip3&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/1&#125;&quot;&gt;vip3-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/2&#125;&quot;&gt;vip3-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/3&#125;&quot;&gt;vip3-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"ForkJoin","slug":"ForkJoin","date":"2022-02-11T08:48:02.000Z","updated":"2022-10-04T13:52:53.878Z","comments":true,"path":"javaEE/JUC/2022/02/11/ForkJoin/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JUC/2022/02/11/ForkJoin/","excerpt":"","text":"ForkJoinä»€ä¹ˆæ˜¯ForkJoinï¼Ÿå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œæäº¤æ•ˆç‡ï¼Œå¤§æ•°æ®é‡çš„æ—¶å€™ä½¿ç”¨ï¼ æŠŠå¤§ä»»åŠ¡æ‹†åˆ†æˆå°ä»»åŠ¡ ForkJoinç‰¹ç‚¹ï¼šå·¥ä½œçªƒå–å†…éƒ¨ç»´æŠ¤çš„åŒç«¯é˜Ÿåˆ—ï¼Œä¸¤ç«¯éƒ½å¯ä»¥å‡º å¦‚ä½•ä½¿ç”¨ åˆ›å»ºForkJoinPoolå¯¹è±¡ æ–°å»ºä¸€ä¸ªè®¡ç®—ä»»åŠ¡ForkJoinTaskæ”¾å…¥æ± å­ä¸­è®¡ç®— 1234567891011121314151617181920212223242526272829303132package com.lizhi;import java.util.concurrent.RecursiveTask;public class ForkJoinDemo extends RecursiveTask&lt;Long&gt; &#123; private long start; private long end; private long temp = 10000L; public ForkJoinDemo(long start, long end) &#123; this.start = start; this.end = end; &#125; @Override public Long compute()&#123; long result = 0; if(end-start&lt;temp)&#123; for (long i = start; i &lt;= end; i++) &#123; result+=i; &#125; &#125;else &#123; long middle = (start + end) / 2; ForkJoinDemo forkJoinDemo1 = new ForkJoinDemo(start,middle); forkJoinDemo1.fork(); ForkJoinDemo forkJoinDemo2 = new ForkJoinDemo(middle,end); forkJoinDemo2.fork();//æŠŠä»»åŠ¡å‹å…¥çº¿ç¨‹é˜Ÿåˆ— result = forkJoinDemo1.join()+ forkJoinDemo2.join(); &#125; return result; &#125;&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"https://li-zhi.net.cn/categories/javaEE/JUC/"}],"tags":[{"name":"JUC","slug":"JUC","permalink":"https://li-zhi.net.cn/tags/JUC/"}]},{"title":"å‡½æ•°å¼æ¥å£","slug":"å‡½æ•°å¼æ¥å£","date":"2022-02-11T07:13:29.000Z","updated":"2022-10-04T13:56:05.902Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/11/å‡½æ•°å¼æ¥å£/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/11/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/","excerpt":"","text":"å‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£ï¼Œå³åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å³ä¸ºå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ç®€åŒ–ä½¿ç”¨ã€‚ å‡½æ•°å¼æ¥å£ä¸€èˆ¬æ¥å£ä¸Šéƒ½ä¼šæœ‰@FunctionInterfaceæ³¨è§£åšæ ‡è®°ï¼Œä½œç”¨æ˜¯æ£€æŸ¥è¯¥æ¥å£æ˜¯å¦åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœä¸å†™ï¼Œä½†æ˜¯æ¥å£ä¸­ç¡®å®åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå½±å“lambdaçš„ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸€äº›å¸¸è§çš„å‡½æ•°å¼æ¥å£ Function&lt; T , R &gt;å‡½æ•°å‹æ¥å£ Tä¸ºä¼ å…¥å‚æ•°çš„ç±»å‹ Rä¸ºè¿”å›å€¼ç±»å‹ 123Function&lt;String, String&gt; f = s -&gt; s.substring(2,4);String apply = f.apply(&quot;asdas asd &quot;);System.out.println(apply); Predicate&lt; T &gt;æ–­è¨€å‹æ¥å£ Tä¸ºä¼ å…¥å‚æ•°çš„ç±»å‹ è¿”å›å€¼ä¸ºBoolean 123Predicate&lt;String&gt; p = t-&gt;t.length()&gt;5;System.out.println(p.test(&quot;3223&quot;));System.out.println(p.test(&quot;saf223&quot;)); Consumer&lt; T &gt;æ¶ˆè´¹è€…å‹æ¥å£ Tä¸ºä¼ å…¥çš„å‚æ•° æ— è¿”å›å€¼ 123Consumer&lt;String&gt; consumer = c-&gt; System.out.println(&quot;æˆ‘ä½¿ç”¨äº†&quot;+c);consumer.accept(&quot;123&quot;);consumer.accept(&quot;456&quot;); Supplier&lt; T &gt;ç”Ÿäº§è€…å‹æ¥å£ Tä¸ºè¿”å›å€¼ç±»å‹ 12Supplier&lt;String&gt; supplier = ()-&gt; UUID.randomUUID().toString();System.out.println(supplier.get());","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"çº¿ç¨‹æ± ","slug":"JUC-çº¿ç¨‹æ± ","date":"2022-02-11T06:31:26.000Z","updated":"2022-10-04T13:53:09.177Z","comments":true,"path":"javaEE/å¤šçº¿ç¨‹/2022/02/11/JUC-çº¿ç¨‹æ± /","link":"","permalink":"https://li-zhi.net.cn/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2022/02/11/JUC-%E7%BA%BF%E7%A8%8B%E6%B1%A0/","excerpt":"","text":"çº¿ç¨‹æ± ä¸‰å¤§æ–¹æ³•æˆ‘ä»¬å…ˆçœ‹ä½¿ç”¨Executorsåˆ›å»ºçš„ä¸‰ç§çº¿ç¨‹æ±  123Executors.newSingleThreadExecutor();//åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± Executors.newFixedThreadPool();//åˆ›å»ºä¸€ä¸ªå›ºå®šæ•°ç›®çš„çº¿ç¨‹çš„çº¿ç¨‹æ± Executors.newCachedThreadPool();//ç¼“å­˜æ± ï¼Œä¼šå¤ç”¨ä¹‹å‰ä½¿ç”¨è¿‡çš„çº¿ç¨‹ æ‰§è¡Œçº¿ç¨‹ 12345678public static void main(String[] args) &#123; ExecutorService executorService = Executors.newSingleThreadExecutor(); for (int i = 0; i &lt; 10; i++) &#123; executorService.execute(()-&gt;&#123; System.out.println(Thread.currentThread().getName()); &#125;); &#125;&#125; ä¸ƒå¤§å‚æ•°é˜¿é‡Œå·´å·´è§„èŒƒä¸­æœ‰è¿™ä¹ˆä¸€æ¡ 12345çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨Executorså»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ThreadPoolExecutorçš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚ è¯´æ˜ï¼šExecutorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š1ï¼‰FixedThreadPoolå’ŒSingleThreadPool: å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´OOMã€‚2ï¼‰CachedThreadPool: å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´OOMã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹åˆ›å»ºè¿™ä¸‰ç§çº¿ç¨‹æ± çš„æ„é€ æ–¹æ³• 1234567891011121314151617public static ExecutorService newSingleThreadExecutor() &#123; return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()));&#125;public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) &#123; return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(), threadFactory);&#125;public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());&#125; å¯ä»¥å‘ç°ï¼Œè¿™ä¸‰ä¸ªæ„é€ æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡å…¶å®éƒ½æ˜¯ThreadPoolExecutorå¯¹è±¡ï¼Œåªä¸è¿‡å°±æ˜¯æ„é€ å‚æ•°ä¸ä¸€æ ·ã€‚ å‚æ•° ä½œç”¨ int corePoolSize æ ¸å¿ƒçº¿ç¨‹æ± çš„å¤§å° int maximumPoolSize æœ€å¤§çº¿ç¨‹æ± çš„å¤§å° long keepAliveTime è¶…æ—¶æ—¶é—´è¿‡åå°±é‡Šæ”¾ TimeUnit unit è¶…æ—¶æ—¶é—´å•ä½ BlockingQueue&lt; Runnable&gt; workQueue é˜»å¡é˜Ÿåˆ— ThreadFactory threadFactory çº¿ç¨‹å·¥å‚ï¼Œåˆ›å»ºçº¿ç¨‹çš„ï¼Œä¸€èˆ¬ä¸ç”¨åŠ¨ RejectedExecutionHandler handler æ‹’ç»ç­–ç•¥ 123456789101112131415161718192021public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; corePoolSizeä¸ºä¸€ç›´å¼€ç€çš„çº¿ç¨‹æ•°ï¼Œå½“workQueueå·²ç»æ»¡äº†ï¼Œåˆ™ç»§ç»­å¼€å¯çº¿ç¨‹ç›´åˆ°maximumPoolSizeï¼Œå½“çº¿ç¨‹æ•°åˆ°äº†maximumPoolSizeï¼Œç„¶åworkQueueä¹Ÿæ»¡äº†ï¼Œå¦‚æœè¿˜æœ‰æ–°çš„ä»»åŠ¡ï¼Œåˆ™ä½¿ç”¨handleræ‹’ç»ç­–ç•¥å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ å½“corePoolSize-maximumPoolSizeåŒºé—´çš„çº¿ç¨‹ç­‰å¾…äº†workQueueæ—¶é—´åï¼Œè¿˜æ˜¯æ²¡ä»»åŠ¡æ¥ï¼Œåˆ™å…³é—­è¯¥åŒºé—´çš„çº¿ç¨‹ 123456789ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor( 2, 5, 3, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(3), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy()); CPUå¯†é›†å‹å’ŒIOå¯†é›†å‹æœ€å¤§çº¿ç¨‹æ•°åˆ°åº•å¦‚ä½•å®šä¹‰ï¼Ÿ CPUå¯†é›†å‹å‡ æ ¸CPUå°±æ˜¯å‡ ï¼Œå¯ä»¥ä¿è¯æ•ˆç‡æœ€é«˜ 1Runtime.getRuntime().availableProcessors()//åŠ¨æ€è·å–cpuæ ¸æ•° IOå¯†é›†å‹ç¨‹åºé‡Œé¢æœ‰å¤šå°‘ä¸ªéå¸¸æ¶ˆè€—IOçš„çº¿ç¨‹ï¼Œä¸€èˆ¬æœ€å¤§çº¿ç¨‹æ•°è®¾ç½®ä¸ºè¯¥æ•°å­—çš„ä¸¤å€ å››å¤§æ‹’ç»ç­–ç•¥ AbortPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œå¹¶ä¸”æŠ›å‡ºå¼‚å¸¸ CallerRunsPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œå¾€ä¸Šä¼ é€’æ­¤ä»»åŠ¡ï¼Œå“ªæ¥çš„å›å“ªé‡Œå» DiscardOldestPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ DiscardPolicyå°è¯•å’Œæœ€è€çš„é‚£ä¸€ä¸ªçº¿ç¨‹ç«äº‰ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"å¤šçº¿ç¨‹","slug":"javaEE/å¤šçº¿ç¨‹","permalink":"https://li-zhi.net.cn/categories/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://li-zhi.net.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"JVM-ç®€ä»‹","slug":"JVM-ç®€ä»‹","date":"2022-02-10T04:24:26.000Z","updated":"2022-10-04T13:53:05.830Z","comments":true,"path":"javaEE/JVM/2022/02/10/JVM-ç®€ä»‹/","link":"","permalink":"https://li-zhi.net.cn/javaEE/JVM/2022/02/10/JVM-%E7%AE%80%E4%BB%8B/","excerpt":"","text":"JVMçš„ä½“ç³»ç»“æ„ä¸‹é¢æ˜¯ç®€æ˜“çš„ç»“æ„å›¾ æ ˆä¸­ä¸ä¼šæœ‰åƒåœ¾å›æ”¶ å¤§éƒ¨åˆ†JVMè°ƒä¼˜éƒ½æ˜¯åœ¨å †å†…å­˜ä¸Šè¿›è¡Œè°ƒä¼˜ è¯¦ç»†çš„ç»“æ„å›¾å¦‚ä¸‹ æ²™ç®±å®‰å…¨æœºåˆ¶â€‹ javaå®‰å…¨æ¨¡å‹çš„æ ¸å¿ƒå°±æ˜¯javaæ²™ç®±ï¼ˆsandboxï¼‰ã€‚æ²™ç®±æ˜¯ä¸€ä¸ªé™åˆ¶ç¨‹åºè¿è¡Œçš„ç¯å¢ƒã€‚æ²™ç®±æœºåˆ¶å°±æ˜¯å°†javaä»£ç é™å®šåœ¨JVMç‰¹å®šçš„è¿è¡ŒèŒƒå›´å†…ï¼Œå¹¶ä¸”ä¸¥æ ¼é™åˆ¶ä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®ï¼Œé€šè¿‡è¿™æ ·çš„æªæ–½æ¥ä¿è¯å¯¹ä»£ç çš„æœ‰æ•ˆéš”ç¦»ï¼Œé˜²æ­¢å¯¹æœ¬åœ°ç³»ç»Ÿé€ æˆç ´åã€‚æ²™ç®±ä¸»è¦é™åˆ¶ç³»ç»Ÿèµ„æºï¼ˆCPUï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œç½‘ç»œï¼‰è®¿é—®ã€‚ä¸åŒçº§åˆ«çš„æ²™ç®±å¯¹è¿™äº›èµ„æºçš„é™åˆ¶å°±ä¸ä¸€æ · â€‹ æ‰€æœ‰çš„javaç¨‹åºè¿è¡Œéƒ½å¯ä»¥æŒ‡å®šæ²™ç®±ï¼Œå¯ä»¥æŒ‡å®šå®‰å…¨ç­–ç•¥ã€‚ â€‹ åœ¨javaä¸­ï¼Œå°†æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæœ¬åœ°ä»£ç å’Œè¿œç¨‹ä»£ç ä¸¤éƒ¨åˆ†ï¼Œæœ¬åœ°ä»£ç æ˜¯é»˜è®¤å¯ä¿¡ä»»çš„ï¼Œè€Œè¿œç¨‹ä»£ç åˆ™è¢«çœ‹åšæ˜¯ä¸å—ä¿¡ä»»çš„ã€‚å¯¹äºæˆäºˆä¿¡ä»»çš„æœ¬åœ°ä»£ç ï¼Œå¯ä»¥è®¿é—®ä¸€åˆ‡æœ¬åœ°èµ„æºã€‚è€Œå¯¹äºéæˆäºˆä¿¡ä»»çš„è¿œç¨‹ä»£ç åœ¨æ—©æœŸçš„javaå®ç°ä¸­ï¼Œå®Œå…¨ä¾èµ–äºjavaæ²™ç®±æœºåˆ¶ã€‚ä¸‹å›¾æ˜¯jdk1.0çš„å®‰å…¨æ¨¡å‹ â€‹ ä½†æ˜¯å¦‚æ­¤ä¸¥æ ¼çš„å®‰å…¨æœºåˆ¶ä¹Ÿç»™ç¨‹åºçš„åŠŸèƒ½æ‹“å±•å¸¦æ¥äº†éšœç¢ï¼Œæ¯”å¦‚ç”¨æˆ·å¸Œæœ›è¿œç¨‹ä»£ç è®¿é—®æœ¬åœ°èµ„æºçš„æ—¶å€™ï¼Œå°±ä¼šè¢«æ²™ç®±æœºåˆ¶æ‰€æ‹’ç»ã€‚æ‰€ä»¥åœ¨åæ¥çš„jdk1.1ç‰ˆæœ¬ä¸­ï¼Œé’ˆå¯¹å®‰å…¨æœºåˆ¶åšå‡ºäº†æ”¹è¿›ï¼Œå¢åŠ äº†å®‰å…¨ç­–ç•¥ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®æƒé™ã€‚ä¸‹å›¾æ˜¯jdk1.1çš„å®‰å…¨æ¨¡å‹ â€‹ åœ¨jdk1.2çš„ç‰ˆæœ¬ä¸­ï¼Œå†æ¬¡å¼•è¿›å®‰å…¨æœºåˆ¶ï¼Œå¢åŠ äº†ä»£ç ç­¾åï¼Œä¸è®ºæ˜¯æœ¬åœ°ä»£ç è¿˜æ˜¯è¿œç¨‹ä»£ç ï¼Œéƒ½ä¼šæŒ‰ç…§ç”¨æˆ·çš„å®‰å…¨ç­–ç•¥è®¾å®šï¼Œç”±ç±»åŠ è½½å™¨åŠ è½½åˆ°JVMä¸­æƒé™ä¸åŒçš„è¿è¡Œç©ºé—´ï¼Œæ¥å®ç°å·®å¼‚åŒ–çš„ä»£ç æ‰§è¡Œæƒé™æ§åˆ¶ã€‚ä¸‹å›¾æ˜¯jdk1.2çš„å®‰å…¨æ¨¡å‹ â€‹ å½“å‰æœ€æ–°çš„å®‰å…¨æœºåˆ¶å®ç°ï¼Œåˆ™å¼•å…¥äº†åŸŸï¼ˆdomainï¼‰çš„æ¦‚å¿µã€‚JVMä¼šæŠŠæ‰€æœ‰çš„ä»£ç åŠ è½½åˆ°ä¸åŒçš„ç³»ç»Ÿå’Œåº”ç”¨åŸŸï¼Œç³»ç»ŸåŸŸéƒ¨åˆ†ä¸“é—¨è´Ÿè´£ä¸å…³é”®èµ„æºè¿›è¡Œäº¤äº’ï¼Œè€Œå„ä¸ªåº”ç”¨åŸŸéƒ¨åˆ†åˆ™é€šè¿‡ç³»ç»Ÿçš„éƒ¨åˆ†ä»£ç†æ¥å¯¹å„ç§éœ€è¦çš„èµ„æºè¿›è¡Œè®¿é—®ã€‚è™šæ‹Ÿæœºä¸­ä¸åŒçš„å—ä¿æŠ¤åŸŸï¼ˆProtected Domainï¼‰ï¼Œå¯¹åº”ä¸ä¸€æ ·çš„æƒé™ï¼ˆPermissionï¼‰ã€‚å­˜åœ¨äºä¸åŒåŸŸä¸­çš„ç±»æ–‡ä»¶å°±å…·æœ‰äº†å½“å‰åŸŸçš„å…¨éƒ¨æƒé™ã€‚ä¸‹å›¾æ˜¯jdk1.6çš„å®‰å…¨æ¨¡å‹ â€‹ ç»„æˆæ²™ç®±çš„åŸºæœ¬ç»„ä»¶: å­—èŠ‚ç æ ¡éªŒå™¨(bytecode verifier):ç¡®ä¿javaç±»æ–‡ä»¶é­å¾ªjavaè¯­è¨€è§„èŒƒã€‚è¿™æ ·å¯ä»¥å¸®åŠ©avaç¨‹åºå®ç°å†…å­˜ä¿æŠ¤ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»æ–‡ä»¶éƒ½ä¼šç»è¿‡å­—èŠ‚ç æ ¡éªŒï¼Œæ¯”å¦‚æ ¸å¿ƒç±»ã€‚ ç±»è£…è½½å™¨(classloader):å…¶ä¸­ç±»è£…è½½å™¨åœ¨3ä¸ªæ–¹é¢å¯¹javaæ²™ç®±èµ·ä½œç”¨ å®ƒé˜²æ­¢æ¶æ„ä»£ç å»å¹²æ¶‰å–„æ„çš„ä»£ç ; å®ƒå®ˆæŠ¤äº†è¢«ä¿¡ä»»çš„ç±»åº“è¾¹ç•Œ; å®ƒå°†ä»£ç å½’å…¥ä¿æŠ¤åŸŸï¼Œç¡®å®šäº†ä»£ç å¯ä»¥è¿›è¡Œå“ªäº›æ“ä½œã€‚ â€‹ è™šæ‹Ÿæœºä¸ºä¸åŒçš„ç±»åŠ è½½å™¨è½½å…¥çš„ç±»æä¾›ä¸åŒçš„å‘½åç©ºé—´ï¼Œå‘½åç©ºé—´ç”±ä¸€ç³»åˆ—å”¯ä¸€çš„åç§°ç»„æˆï¼Œæ¯ä¸€ä¸ªè¢«è£…è½½çš„ç±»å°†æœ‰ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªå‘½åç©ºé—´æ˜¯ç”±avaè™šæ‹Ÿæœºä¸ºæ¯ä¸€ä¸ªç±»è£…è½½å™¨ç»´æŠ¤çš„ï¼Œå®ƒä»¬äº’ç›¸ä¹‹é—´ç”šè‡³ä¸å¯è§ã€‚ ç±»è£…è½½å™¨é‡‡ç”¨çš„æœºåˆ¶æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ã€‚ ä»æœ€å†…å±‚IVMè‡ªå¸¦ç±»åŠ è½½å™¨å¼€å§‹åŠ è½½ï¼Œå¤–å±‚æ¶æ„åŒåç±»å¾—ä¸åˆ°åŠ è½½ä»è€Œæ— æ³•ä½¿ç”¨; ç”±äºä¸¥æ ¼é€šè¿‡åŒ…æ¥åŒºåˆ†äº†è®¿é—®åŸŸï¼Œå¤–å±‚æ¶æ„çš„ç±»é€šè¿‡å†…ç½®ä»£ç ä¹Ÿæ— æ³•è·å¾—æƒé™è®¿é—®åˆ°å†…å±‚ç±»ï¼Œç ´åä»£ç å°±è‡ªç„¶æ— æ³•ç”Ÿæ•ˆã€‚ å­˜å–æ§åˆ¶å™¨(access controller):å­˜å–æ§åˆ¶å™¨å¯ä»¥æ§åˆ¶æ ¸å¿ƒAPIå¯¹æ“ä½œç³»ç»Ÿçš„å­˜å–æƒé™ï¼Œè€Œè¿™ä¸ªæ§åˆ¶çš„ç­–ç•¥è®¾å®šï¼Œå¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šã€‚ å®‰å…¨ç®¡ç†å™¨(security manager):æ˜¯æ ¸å¿ƒAPIå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸»è¦æ¥å£ã€‚å®ç°æƒé™æ§åˆ¶ï¼Œæ¯”å­˜å–æ§åˆ¶å™¨ä¼˜å…ˆçº§é«˜ã€‚ å®‰å…¨è½¯ä»¶åŒ…(security package):javasecurityä¸‹çš„ç±»å’Œæ‰©å±•åŒ…ä¸‹çš„ç±»ï¼Œå…è®¸ç”¨æˆ·ä¸ºè‡ªå·±çš„åº”ç”¨å¢åŠ æ–°çš„å®‰å…¨ç‰¹æ€§ï¼ŒåŒ…æ‹¬: å®‰å…¨æä¾›è€… æ¶ˆæ¯æ‘˜è¦ æ•°å­—ç­¾å åŠ å¯† é‰´åˆ« nativeå‡¡æ˜¯å¸¦äº†nativeå…³é”®è¯çš„æ–¹æ³•ï¼Œè¯´æ˜è¿™ä¸ªæ–¹æ³•javaè¯­è¨€å®ç°ä¸äº†ï¼Œæ­¤æ–¹æ³•ä¼šè¢«æ”¾å…¥æœ¬åœ°æ–¹æ³•æ ˆä¸­ï¼Œè¯¥æ ˆé€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰å»è°ƒç”¨åº•å±‚çš„Cæˆ–è€…C++è¯­è¨€å†™çš„æ–¹æ³•ã€‚ æ–¹æ³•åŒºMethod Area æ–¹æ³•åŒºæ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€æœ‰å­—æ®µå’Œæ–¹æ³•å­—èŠ‚ç ï¼Œä»¥åŠä¸€äº›ç‰¹æ®Šæ–¹æ³•ï¼Œå¦‚æ„é€ å‡½æ•°ï¼Œæ¥å£ä»£ç ä¹Ÿåœ¨æ­¤å®šä¹‰ï¼Œç®€å•æ¥è¯´ï¼Œæ‰€æœ‰å®šä¹‰çš„æ–¹æ³•çš„ä¿¡æ¯éƒ½ä¼šè¢«ä¿å­˜åœ¨è¯¥åŒºåŸŸ é™æ€å˜é‡ã€å¸¸é‡ã€ç±»ä¿¡æ¯ï¼ˆæ„é€ æ–¹æ³•ï¼Œæ¥å£å®šä¹‰ï¼‰ï¼Œè¿è¡Œæ—¶çš„å¸¸é‡æ± å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼Œä½†æ˜¯å®ä¾‹å˜é‡å­˜åœ¨äºå†…å­˜åŒºä¸­ï¼Œä¸æ–¹æ³•åŒºæ— å…³ PCå¯„å­˜å™¨ç¨‹åºè®¡æ•°å™¨ï¼šProgram Counter Register â€‹ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œå®ç°ç¨‹åºç§æœ‰çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•åŒºä¸­çš„æ–¹æ³•å­—èŠ‚ç  å †ï¼ˆHeapï¼‰ä¸€ä¸ªJVMåªæœ‰ä¸€ä¸ªå †å†…å­˜ï¼Œå †å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œé‡Œé¢ä¸€èˆ¬æ”¾å®ä¾‹å¯¹è±¡ å †å†…å­˜ç»†åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š æ–°ç”ŸåŒº Young&#x2F;New å…»è€åŒº old æ°¸ä¹…åŒº perm GCåƒåœ¾å›æ”¶ä¸»è¦åœ¨ä¼Šç”¸å›­åŒºå’Œå…»è€åŒº å †å†…å­˜æ»¡äº†å°±ä¼šçˆ†OOMï¼ˆOutOfMemoryErrorï¼‰é”™è¯¯ æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯åœ¨ä¼Šç”¸å›­åŒºäº§ç”Ÿçš„ ä¼Šç”¸å›­æ»¡äº†ä¼šè§¦å‘è½»GCï¼Œæœ‰çš„å°±ç›´æ¥æ­»äº†ï¼Œç„¶åç•™ä¸‹æ¥çš„å»å¾€å¹¸å­˜åŒº å¦‚æœå¹¸å­˜åŒºæ»¡äº†ï¼Œå°±å»å¾€è€å¹´åŒº å¦‚æœè€å¹´åŒºæ»¡äº†ï¼Œè§¦å‘ä¸€æ¬¡é‡GCï¼ˆä¼Šç”¸å›­åŒºå’Œå¹¸å­˜è€…åŒºéƒ½æ¸…ä¸€éï¼Œæ´»ä¸‹æ¥çš„å»è€å¹´åŒºï¼‰ åƒåœ¾å¤„ç†å™¨GCGCçš„ä½œç”¨åŒºåŸŸåªæœ‰å † ä¸¤ç§å›æ”¶ï¼šè½»GC ã€Full GC GCçš„ç®—æ³• æ ‡è®°æ¸…é™¤æ³• æ ‡è®°æ•´ç†æ³• æ ‡è®°å¤åˆ¶ç®—æ³• å¼•ç”¨è®¡æ•°æ³•ï¼ˆç»™æ¯ä¸€ä¸ªå¯¹è±¡åˆ†é…ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå°†è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡æ¸…é™¤ï¼‰ æ ‡è®°å¤åˆ¶æ³•è°ç©ºè°æ˜¯toå¹¸å­˜åŒº æ–°ç”ŸåŒºä¸»è¦ä½¿ç”¨å¤åˆ¶ç®—æ³• å¥½å¤„ï¼šæ²¡æœ‰å†…å­˜ç¢ç‰‡ åå¤„ï¼šæµªè´¹äº†å†…å­˜ç©ºé—´ å¤åˆ¶ç®—æ³•ä½¿ç”¨æœ€ä½³åœºæ™¯ï¼šå¯¹è±¡å­˜æ´»åº¦è¾ƒä½çš„æ—¶å€™ æ ‡è®°æ¸…é™¤æ³•æ‰«æè¿™äº›æ´»ç€çš„å¯¹è±¡ï¼Œæ¸…é™¤æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ ç¼ºç‚¹ï¼šä¸¤æ¬¡æ‰«æï¼Œæµªè´¹æ—¶é—´ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ ä¼˜ç‚¹ï¼šä¸éœ€è¦é¢å¤–ç©ºé—´ æ ‡è®°æ•´ç†æ³•å†æ¬¡æ‰«æï¼Œå‘ä¸€ç«¯ç§»åŠ¨å­˜æ´»çš„å¯¹è±¡ åˆ†ä»£æ”¶é›†ç®—æ³• å¹´è½»ä»£ï¼š å­˜æ´»ç‡ä½ å¤åˆ¶ç®—æ³• è€å¹´ä»£ å­˜æ´»ç‡é«˜ æ ‡è®°æ¸…é™¤+æ ‡è®°å‹ç¼©æ··åˆå®ç° è¿™äº”é“é¢è¯•é¢˜å¯ä»¥è¯•ç€åšä¸€åš è¯·ä½ è°ˆè°ˆä½ å¯¹JVMçš„ç†è§£ï¼Ÿjava8è™šæ‹Ÿæœºå’Œä¹‹å‰çš„æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ ä»€ä¹ˆæ˜¯OOMï¼Œä»€ä¹ˆæ˜¯æ ˆæº¢å‡ºï¼Ÿæ€ä¹ˆåˆ†æï¼Ÿ JVMçš„å¸¸ç”¨è°ƒä¼˜å‚æ•°æœ‰å“ªäº›ï¼Ÿ å†…å­˜å¿«ç…§å¦‚ä½•æŠ“å–ï¼Ÿæ€ä¹ˆåˆ†æDumpæ–‡ä»¶ï¼Ÿ è°ˆè°ˆä½ å¯¹ç±»åŠ è½½å™¨çš„è®¤è¯†ï¼Ÿ","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"https://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://li-zhi.net.cn/tags/JVM/"}]},{"title":"ifè¯­å¥å‡å°‘åµŒå¥—","slug":"ifè¯­å¥å‡å°‘åµŒå¥—","date":"2022-02-07T12:32:09.000Z","updated":"2022-10-04T13:52:57.435Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/ifè¯­å¥å‡å°‘åµŒå¥—/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/if%E8%AF%AD%E5%8F%A5%E5%87%8F%E5%B0%91%E5%B5%8C%E5%A5%97/","excerpt":"","text":"ifçš„å¤šé‡åµŒå¥—ç›´æ¥ä¸¾æ —å­ï¼šæœ‰ä¸€ä¸ªç”µå•†å¹³å°ï¼Œå½“ç”¨æˆ·æ¶ˆè´¹æ»¡1000å…ƒï¼Œæ ¹æ®vipç­‰çº§å¯äº«å—ä¼˜æƒ  æ™®é€šä¼šå‘˜ ä¸æ‰“æŠ˜ ç™½é“¶ä¼šå‘˜ ä¼˜æƒ 50å…ƒ é»„é‡‘ä¼šå‘˜ æ‰“8æŠ˜ ç™½é‡‘ä¼šå‘˜ ä¼˜æƒ 50å…ƒï¼Œå†æ‰“ä¸ƒæŠ˜ Version 1.0ä¼šå‘˜ç±»å‹æšä¸¾ 1234567891011121314151617181920public enum UserType &#123; /** * ORDINARY_VIP: æ™®é€šä¼šå‘˜ * SILVER_VIP: ç™½é“¶ä¼šå‘˜ * GOLD_VIPï¼š é»„é‡‘ä¼šå‘˜ * PLATINUM_VIPï¼šç™½é‡‘ä¼šå‘˜ */ ORDINARY_VIP(1), SILVER_VIP(2), GOLD_VIP(3), PLATINUM_VIP(4); private int code; UserType(int code) &#123; this.code = code; &#125; public int getCode() &#123; return code; &#125;&#125; 12345678910111213private static double getResult(long money, int type)&#123; double result = money; if(money &gt;= 1000)&#123; if(type == UserType.SILVER_VIP.getCode())&#123; result = money - 50; &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = money * 0.8; &#125;else if(type == UserType.PLATNUM_VIP.getCode())&#123; result = (money - 50)*0.7; &#125; &#125; return result;&#125; å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„ifè¯­å¥å¯èƒ½ä¸æ˜¯é‚£ä¹ˆç¹çï¼Œä½†æ˜¯å½“ä¸šåŠ¡ååˆ†å¤æ‚æˆ–è€…å½“ç­–ç•¥ä¼šç»å¸¸å˜åŠ¨çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä¿®æ”¹æºä»£ç ï¼Œè¿™å°±ä¸¥é‡è¿åäº†å¼€é—­åŸåˆ™ï¼Œä½†æ˜¯æˆ‘å¯ä¸å¯å‡å°‘ifçš„å‡ºç°ç”šè‡³ä¸å‡ºç°å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬ç»“åˆä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆæ¥ä¸€æ­¥ä¸€æ­¥å°è¯•è§£å†³é—®é¢˜ å«è¯­å¥ ç­–ç•¥æ¨¡å¼ Version 1.1å«è¯­å¥ï¼Œå°±æ˜¯å°†ä¸ç¬¦åˆçš„æƒ…å†µç›´æ¥è¿”å› 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.0ç­–ç•¥æ¨¡å¼å°±æ˜¯å°†å„ä¸ªä¼šå‘˜çš„ä¼˜æƒ æ–¹å¼æå‡ºä¸€ä¸ªæ¥å£ï¼Œåˆ†åˆ«å®ç° ç­–ç•¥æ¥å£ 123public interface Strategy &#123; double compute(long money);&#125; æ™®é€šä¼šå‘˜ 123456public class OrdinaryStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money; &#125;&#125; é»„é‡‘ä¼šå‘˜ 123456public class GoldStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money*0.8; &#125;&#125; ç™½é‡‘ä¼šå‘˜ 123456public class PlatinumStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125;&#125; ç™½é“¶ä¼šå‘˜ 123456public class SilverStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money-50; &#125;&#125; 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.112345678910111213public class StrategyFactory &#123; public static Map&lt;Integer,Strategy&gt; map; private StrategyFactory()&#123; map = new HashMap&lt;&gt;(); init(); &#125; private void init()&#123; map.put(UserType.ORDINARY_VIP.getCode(), new OrdinaryStrategy()); map.put(UserType.SILVER_VIP.getCode(), new SilverStrategy()); map.put(UserType.GOLD_VIP.getCode(),new GoldStrategy()); map.put(UserType.PLATINUM_VIP.getCode(),new PlatinumStrategy()); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125; è¿™é‡Œçš„å·¥å‚è¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç° Version 2.2ç­–ç•¥æ¥å£ 1234public interface Strategy &#123; double compute(long money); int getType();&#125; é»„é‡‘ä¼šå‘˜ 123456789101112public class GoldStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money*0.8; &#125; @Override public int getType() &#123; return UserType.GOLD_VIP.getCode(); &#125;&#125; æ™®é€šä¼šå‘˜ 1234567891011public class OrdinaryStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money; &#125; @Override public int getType() &#123; return UserType.ORDINARY_VIP.getCode(); &#125;&#125; ç™½é‡‘ä¼šå‘˜ 1234567891011public class PlatinumStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125; @Override public int getType() &#123; return UserType.PLATINUM_VIP.getCode(); &#125;&#125; ç™½é“¶ä¼šå‘˜ 1234567891011public class SilverStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money-50; &#125; @Override public int getType() &#123; return UserType.SILVER_VIP.getCode(); &#125;&#125; ç­–ç•¥å·¥å‚ 12345678910111213141516public class StrategyFactory &#123; private static Map&lt;Integer, Strategy&gt; map; public StrategyFactory() &#123; map=new HashMap&lt;&gt;(); init(); &#125; private void init() &#123; List&lt;Strategy&gt; strategies=new ArrayList&lt;&gt;(); strategies.add(new GoldStrategy()); strategies.add(new OrdinaryStrategy()); strategies.add(new PlatinumStrategy()); strategies.add(new SilverStrategy()); map=strategies.stream().collect(Collectors.toMap(Strategy::getType,strategy -&gt; strategy)); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125;","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Cookieå’ŒSession","slug":"Cookieå’ŒSession","date":"2022-02-07T10:04:34.000Z","updated":"2022-09-27T14:17:58.259Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Cookieå’ŒSession/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Cookie%E5%92%8CSession/","excerpt":"","text":"æƒ…æ™¯åœ¨çº¿æˆ‘ä»¬åœ¨ç™»å½•å®Œä¸€ä¸ªç½‘ç«™åï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚å¤§å®¶æœ‰æ²¡æœ‰å¥½å¥‡è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å­¦è¿‡HTTPçš„éƒ½çŸ¥é“ï¼ŒHTTPè®¿é—®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨æ˜¯ä¸çŸ¥é“ä½ è¿™æ˜¯ç¬¬å‡ æ¬¡è®¿é—®è¯¥ç½‘ç«™çš„ã€‚ é‚£ä¹ˆCookieï¼ŒSessionå°±æ˜¯æ¥åšåˆ°è®©æœåŠ¡å™¨é¢„å…ˆçŸ¥é“ä¸€äº›ä¿¡æ¯ï¼Œå…¶æ ¸å¿ƒå…¶å®å°±æ˜¯å­˜å‚¨ã€‚ Cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ï¼ŒSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ ä¸‹é¢æˆ‘ä»¬æ¥è¯´è¯´Cookie CookieCookieç¿»è¯‘ä¸ºå°é¥¼å¹² è¯¥æŠ€æœ¯å¯ä»¥å®ç°æ¯æ¬¡HTTPè¯·æ±‚éƒ½è‡ªåŠ¨å¸¦æ•°æ®ç»™æœåŠ¡å™¨ï¼Œä»è€Œå®ç°æœåŠ¡å™¨å¯ä»¥åœ¨è¯·æ±‚çš„æ—¶å€™å°±é¢„å…ˆçŸ¥é“ä¸€äº›ä¿¡æ¯ã€‚ æµç¨‹å›¾å¦‚ä¸‹ æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹Cookie å¦‚æœä½¿ç”¨Cookieä¿å­˜è´¦å·å¯†ç ï¼Œé‚£åªè¦åˆ«äººç›—åˆ°ä½ çš„Cookieï¼Œé‚£ä¹ˆä½ çš„è´¦å·å¯†ç å°±æ³„éœ²äº†ï¼æ‰€ä»¥å°±å‡ºç°äº†Sessionçš„æŠ€æœ¯ SessionSessionç¿»è¯‘ä¸ºä¼šè¯ å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨è¿›å»ç½‘ç«™ï¼Œåˆ™å¼€å§‹ä¸€ä¸ªä¼šè¯ï¼Œä½†æ˜¯ä¼šè¯çš„ç»“æŸæ¯”è¾ƒæ¨¡ç³Šï¼Œå¯ä»¥è‡ªåŠ¨è®¾ç½®sessionè¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ°¸ä¸è¿‡æœŸã€‚ Sessionä¿å­˜åœ¨æœåŠ¡å™¨ï¼Œå½“äº§ç”Ÿäº†ä¸€æ¬¡ä¼šè¯ï¼Œåˆ™æœåŠ¡å™¨è¿”å›çš„æ—¶å€™æºå¸¦å­˜å‚¨sessionç›¸å…³ä¿¡æ¯çš„Cookieï¼Œå¹¶ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œè€Œè¿™ä¸ªsessionå¯¹è±¡çš„ä¿¡æ¯åˆ™ä¿å­˜åœ¨æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­ã€‚ ä¸‹é¢æ˜¯æµç¨‹å›¾","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Token","slug":"Token","date":"2022-02-07T10:01:03.000Z","updated":"2023-01-11T08:08:38.418Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Token/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Token/","excerpt":"","text":"ä¸ºä»€ä¹ˆä¼šå‡ºç°Tokenç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“Cookieå’ŒSessionï¼ˆä¸çŸ¥é“è¿™ä¸¤è€…çš„åœ¨æˆ‘å¦å¤–ä¸¤ç¯‡åšå®¢é‡Œé¢æœ‰å†™ï¼Œé™„ä¸Šé“¾æ¥ï¼ŒCookieå’ŒSessionï¼‰ éšç€æŠ€æœ¯çš„å‘å±•ï¼Œç”¨æˆ·ç¾¤ä½“å˜çš„è¶Šæ¥è¶Šå¤§ï¼Œå¦‚æœæœåŠ¡å™¨ä¾æ—§ä½¿ç”¨åŸºäºCookieçš„Sessionï¼Œåœ¨æŸä¸€æ—¶é—´æ®µæœ‰å¤§é‡ç”¨æˆ·è®¿é—®çš„è¯ï¼ŒæœåŠ¡å™¨å°±ä¼šå°†å¤§é‡çš„Sessionä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå¯¼è‡´æœåŠ¡å™¨æ€§èƒ½é™ä½ï¼Œä¸ºäº†å¤„ç†è¿™ç§é—®é¢˜ï¼Œå°±å‡ºç°äº†ä¸€ç§æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯JWT(JSON Web Token) Token JWTæ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„ï¼Œåˆ†åˆ«æ˜¯headerã€payloadã€signature headeréƒ¨åˆ†ç”³æ˜ç”¨ä»€ä¹ˆç®—æ³•ç”Ÿæˆç­¾å payloadéƒ¨åˆ†ä¿å­˜ä¸€äº›æ•°æ® signatureéƒ¨åˆ†ä¿å­˜headerç”³æ˜çš„ç®—æ³•ç”Ÿæˆçš„ç­¾å å°ç»“Sessionã€Cookieã€Tokenéƒ½æ˜¯æ˜¯åœ¨æœåŠ¡å™¨äº§ç”Ÿçš„ Cookieæ˜¯ä¿å­˜SessionIDçš„è½½ä½“ï¼Œä½†æ˜¯Sessionå¯¹è±¡æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨æ•°æ®åº“ä¸­çš„ Tokenåœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œä¿å­˜æœåŠ¡å™¨ç«¯çš„å¯†æ–‡ï¼Œå°†tokenæ”¾å…¥cookieå‘é€è¯¶å®¢æˆ·ç«¯å¹¶äº¤ç”±å®¢æˆ·ç«¯ä¿å­˜","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Ngrok","slug":"Ngrok","date":"2022-02-07T09:30:02.000Z","updated":"2022-10-04T13:54:15.986Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Ngrok/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Ngrok/","excerpt":"","text":"ä½¿ç”¨Ngrokå¿«é€Ÿéƒ¨ç½²é¡¹ç›® æ‰“å¼€https://ngrok.cc/ æ³¨å†Œä¸€ä¸ªè´¦æˆ· æ”¯ä»˜2å—é’±è¿›è¡Œæ”¯ä»˜å®å®åè®¤è¯ ç‚¹å‡»å¼€é€šéš§é“å¹¶ç¿»åˆ°æœ€å å¼€é€šéš§é“é€‰é¡¹ è¯´æ˜ï¼š éš§é“åè®®ï¼Œä¸¤è€…å³å¯ HTTP HTTPSï¼ˆHTTPSéœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œå¹¶ä¸”å·²ç»ç”³è¯·äº†SSLè¯ä¹¦ï¼Œæ‰èƒ½æœ‰æ•ˆï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨httpsã€‚ï¼‰ éš§é“åç§° éšä¾¿å†™å³å¯ å‰ç½®åŸŸå å†™è‡ªå·±å–œæ¬¢çš„ httpéªŒè¯ç”¨æˆ·åå’Œå¯†ç  è¿™é‡Œå¯ä»¥ä¸å†™ ç¡®è®¤ä¿¡æ¯ï¼Œå¼€é€š è¿›å…¥éš§é“ç®¡ç†é¡µé¢ psï¼šè¿™é‡Œå’Œæˆ‘ä¹‹å‰å†™çš„é…ç½®ä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºä¸€ä¸ªç”¨æˆ·åªèƒ½å…è´¹å¼€é€šä¸€ä¸ªhttpéš§é“ ä¸‹è½½å®¢æˆ·ç«¯ ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„è½¯ä»¶ï¼Œå¹¶è§£å‹ å¯åŠ¨æ‰¹å¤„ç†å‘½ä»¤ psï¼šæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ä¸æ˜¯ä¹±ç ï¼Œæˆ‘ä¹Ÿä¸ç†è§£è¿™æ¬¡ä½¿ç”¨ä¸ºä»€ä¹ˆä¼šä¹±ç ï¼Œè¿™é‡Œä¸å½±å“ä½¿ç”¨ è¾“å…¥éš§é“idï¼Œå›è½¦ å¦‚æœä¹‹å‰é…ç½®äº†è´¦å·å¯†ç ï¼Œåˆ™åœ¨æ­¤å¤„éœ€è¦è¾“å…¥è´¦å·å¯†ç  å¯åŠ¨æœ¬åœ°é¡¹ç›® æ³¨ï¼šæœ¬åœ°é¡¹ç›®å¯åŠ¨çš„ç«¯å£ä¸€å®šè¦å’Œä¹‹å‰å†™çš„ç«¯å£æ˜ å°„ä¸€è‡´ æ‰“å¼€ç½‘å€æµ‹è¯• æœ¬åœ° Ngrokæä¾›çš„ç½‘ç«™è®¿é—®","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"å…³äºè·¯å¾„","slug":"å…³äºè·¯å¾„","date":"2022-02-07T08:57:28.000Z","updated":"2022-10-04T13:56:00.923Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/å…³äºè·¯å¾„/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/%E5%85%B3%E4%BA%8E%E8%B7%AF%E5%BE%84/","excerpt":"","text":"è®¿é—®è·¯å¾„URLç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç”¨äºå®šä½èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚ é€šå¸¸çš„URLèµ„æºè®¿é—®è·¯å¾„ç”±ä¸¤éƒ¨åˆ†æ„æˆ:èµ„æºè·¯å¾„ä¸èµ„æºåç§°ã€‚ èµ„æºåç§°æŒ‡çš„æ˜¯è¦è®¿é—®èµ„æºçš„ç›´æ¥åç§°ï¼Œå¦‚show.html,æˆ–ä¸è¦è®¿é—®èµ„æºå­˜åœ¨æ˜ å°„å…³ç³»çš„é—´æ¥åç§°ï¼Œå¦‚show.do èµ„æºè·¯å¾„ï¼Œåˆ™æ˜¯é€šè¿‡è¯¥è·¯å¾„åˆ™å¯ä»¥å®šä½åˆ°æŒ‡å®šçš„èµ„æºï¼Œå³èµ„æºè·¯å¾„æ˜¯æŒ‡åœ¨URLèµ„æºè®¿é—®è·¯å¾„ä¸­é™¤äº†èµ„æºåç§°ä»¥å¤–çš„å…¶å®ƒéƒ¨åˆ†ã€‚ æ ¹æ®â€œèµ„æºè·¯å¾„æ˜¯å¦å¯ä»¥ç‹¬ç«‹å®Œæˆèµ„æºå‡†ç¡®å®šä½â€çš„åˆ¤åˆ«æ ‡å‡†,å¯ä»¥å°†è®¿é—®è·¯å¾„åˆ†ä¸ºç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ ç»å¯¹è·¯å¾„ç»å¯¹è·¯å¾„ï¼Œæ˜¯æŒ‡æ ¹æ®ç»™å‡ºçš„è®¿é—®è·¯å¾„å¯ä»¥ç²¾ç¡®çš„å®šä½åˆ°è¿™ä¸ªèµ„æºçš„è·¯å¾„ å¯¹äºè®¡ç®—æœºä¸­Webåº”ç”¨çš„ç»å¯¹è·¯å¾„ï¼Œåˆ™æ˜¯æŒ‡å¸¦è®¿é—®åè®®çš„è·¯å¾„ã€‚å³URL ç›¸å¯¹è·¯å¾„ç›¸å¯¹è·¯å¾„,æ˜¯æŒ‡ä»…æ ¹æ®è®¿é—®è·¯å¾„æ— æ³•å‡†ç¡®å®šä½èµ„æºçš„è·¯å¾„ã€‚ ç›¸å¯¹è·¯å¾„å¿…é¡»è¦ç»“åˆå…¶å‚ç…§è·¯å¾„æ‰å¯ç»„æˆå¯ä»¥å‡†ç¡®å®šä½èµ„æºçš„ç»å¯¹è·¯å¾„ã€‚ å‚ç…§è·¯å¾„çš„ä¸åŒï¼Œæ‰€å½¢æˆçš„å¯ä»¥å‡†ç¡®å®šä½èµ„æºçš„ç»å¯¹è·¯å¾„ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ åœ¨è¿›è¡Œèµ„æºè®¿é—®æ—¶,å¿…é¡»è¦å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„æ‰å¯å®Œæˆèµ„æºçš„ç²¾ç¡®å®šä½ ç»å¯¹è·¯å¾„ &#x3D; å‚ç…§è·¯å¾„ + ç›¸å¯¹è·¯å¾„ æ ¹æ®ç›¸å¯¹è·¯å¾„æ˜¯å¦ä»¥æ–œæ å¼€å¤´ï¼Œä¸”è·¯å¾„æŒ‡å‘çš„æ–‡ä»¶ä¸åŒï¼Œå…¶é»˜è®¤çš„å‚ç…§è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ ä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„å‰å°è·¯å¾„æ‰€è°“å‰å°è·¯å¾„æ˜¯æŒ‡ï¼Œç”±æµè§ˆå™¨è§£ææ‰§è¡Œçš„ä»£ç ä¸­æ‰€åŒ…å«çš„è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œhtmlã€ cssã€ jsä¸­çš„è·¯å¾„ï¼ŒåŠjspæ–‡ä»¶ä¸­é™æ€éƒ¨åˆ†çš„è·¯å¾„(HTMLæ ‡ç­¾ä¸­çš„è·¯å¾„)ã€‚html åŠjspæ–‡ä»¶ä¸­çš„&lt; img src-&#x3D;*&#x2F;&gt;ã€&lt; a href&#x3D;â€â€&gt;. &lt; form action&#x3D;â€â€&gt;ç­‰æ ‡ç­¾ä¸­çš„ä»¥æ–œæ å¼€å¤´çš„è·¯å¾„éƒ½å±äºå‰å°è·¯å¾„ å‰å°è·¯å¾„çš„å‚ç…§è·¯å¾„æ˜¯WebæœåŠ¡å™¨çš„æ ¹è·¯å¾„,å³http://127.0.0.1:8080 å°†å‰å°è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„çš„å·¥ä½œ,æ˜¯ç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆçš„ã€‚ è¯¥è·¯å¾„çš„ä½œç”¨æ˜¯è¦ä¸ºç”¨æˆ·æäº¤å¯¹æŸç§èµ„æºçš„è¯·æ±‚,æ˜¯è¦æŸ¥æ‰¾å¹¶å®šä½æœåŠ¡å™¨ä¸­çš„æŸèµ„æºã€‚ ç®€å•æ¥è¯´,å‰å°è·¯å¾„çš„ä½œç”¨æ˜¯â€œæŸ¥æ‰¾â€ åå°è·¯å¾„æ‰€è°“åå°è·¯å¾„æ˜¯æŒ‡ï¼Œç”±æœåŠ¡å™¨è§£ææ‰§è¡Œçš„ä»£ç åŠæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œjava ä»£ç ä¸­çš„è·¯å¾„ã€jspæ–‡ä»¶åŠ¨æ€éƒ¨åˆ†javaä»£ç å—)ä¸­çš„è·¯å¾„ã€xmlç­‰é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„(é…ç½®æ–‡ä»¶æ˜¯è¦è¢«javaä»£ç è§£æååŠ è½½åˆ°å†…å­˜çš„ï¼Œå…¶ä¸­çš„è·¯å¾„ä¼šå‡ºç°åœ¨Java ä»£ç ä¸­) åå°è·¯å¾„çš„å‚ç…§è·¯å¾„æ˜¯Webåº”ç”¨çš„æ ¹è·¯å¾„ã€‚http://127.0.0.1:8080/projectName å°†åå°è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„çš„å·¥ä½œ,æ˜¯ç”±æœåŠ¡å™¨è‡ªåŠ¨å®Œæˆçš„ã€‚è¯¥è·¯å¾„çš„ä½œç”¨æ˜¯æ ‡è¯†å‡ºè¯¥èµ„æºåœ¨æœåŠ¡å™¨ä¸­çš„è·¯å¾„ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯èƒ½å¤ŸæŒ‰ç…§è¿™ä¸ªè®¾å®šè·¯å¾„æ¥æŸ¥æ‰¾ç›¸åº”èµ„æºã€‚ç®€å•æ¥è¯´,åå°è·¯å¾„çš„ä½œç”¨æ˜¯â€œæ ‡è¯†â€ ä»¥è·¯å¾„å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ä»¥è·¯å¾„åç§°å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ï¼Œæ— è®ºæ˜¯å‡ºç°åœ¨å‰å°é¡µé¢,è¿˜æ˜¯å‡ºç°åœ¨åå°Javaä»£ç æˆ–é…ç½®æ–‡ä»¶ä¸­ï¼Œå…¶å‚ç…§è·¯å¾„éƒ½æ˜¯å½“å‰è®¿é—®è·¯å¾„çš„èµ„æºè·¯å¾„ã€‚ å³ä½¿æ˜¯response çš„sendRedirect()æ–¹æ³•çš„å‚æ•°è·¯å¾„,è‹¥ä¸ä»¥æ–œæ å¼€å¤´ï¼Œå…¶ä¹Ÿå±äºâ€œä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„â€ç±»çš„è·¯å¾„ï¼Œå‚ç…§è·¯å¾„ä¸ºå½“å‰æœåŠ¡å™¨çš„æ ¹è·¯å¾„ æ€»ç»“ ç›¸å¯¹è·¯å¾„ç±»å‹ å‚ç…§è·¯å¾„ ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„çš„å®Œæˆè€… å‰å°è·¯å¾„ å½“å‰WebæœåŠ¡å™¨çš„æ ¹è·¯å¾„ æµè§ˆå™¨ åå°è·¯å¾„ å½“å‰Webåº”ç”¨çš„æ ¹è·¯å¾„ WebæœåŠ¡å™¨ ä»¥è·¯å¾„åç§°å¼€å¤´çš„è·¯å¾„ å½“å‰è®¿é—®è·¯å¾„çš„èµ„æºè·¯å¾„ æµè§ˆå™¨&#x2F;WebæœåŠ¡å™¨ PSï¼š å¯¹äºresponseçš„sendRedirect( )æ–¹æ³•å®Œæˆçš„é‡å®šå‘ è‹¥å…¶å‚æ•°è·¯å¾„ä¸ºâ€œä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„â€è¿™ä¸ªåå°è·¯å¾„æ˜¯ä¸ªç‰¹ä¾‹ã€‚æ˜¯ç”±sendRedirect( )æ–¹æ³•çš„æœ¬è´¨å†³å®šçš„ã€‚è¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥å®Œæˆåœ¨å½“å‰é¡¹ç›®ä¸­èµ„æºçš„è·³è½¬,è¿˜å¯ä»¥è·³è½¬åˆ°å…¶å®ƒé¡¹ç›®ä¸­çš„èµ„æºã€‚æ‰€ä»¥è¿™ä¸ªåå°è·¯å¾„çš„å‚ç…§è·¯å¾„ä¸ºâ€œå½“å‰WebæœåŠ¡å™¨çš„æ ¹â€ã€‚æ‰€ä»¥è¦åŠ resquest.getContextPath(); æ³¨æ„ï¼Œåªæœ‰è¿™ä¸€ç§é‡å®šå‘æ˜¯ç‰¹ä¾‹,å°†æ¥æˆ‘ä»¬è¿˜ä¼šå­¦ä¹ åˆ°å…¶å®ƒæ–¹å¼å®ç°çš„é‡å®šå‘ï¼Œä½†é‚£é‡Œçš„é‡å®šå‘å°±ä¸æ˜¯ç‰¹ä¾‹,è€Œæ˜¯éµå¾ªæˆ‘ä»¬ä¹‹å‰çš„è·¯å¾„è½¬æ¢ç†è®º å¦‚æœåŠ æ–œæ å’Œä¸åŠ æ–œæ éƒ½å¯ä»¥å®Œæˆè·³è½¬ï¼Œå°±åŠ ä¸Šæ–œæ ","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"SpringMVC-æ–‡ä»¶ä¸‹è½½","slug":"SpringMVC-æ–‡ä»¶ä¸‹è½½","date":"2022-01-31T06:57:54.000Z","updated":"2022-10-04T13:55:44.776Z","comments":true,"path":"javaEE/SpringMVC/2022/01/31/SpringMVC-æ–‡ä»¶ä¸‹è½½/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/31/SpringMVC-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/","excerpt":"","text":"æ–‡ä»¶ä¸‹è½½æ–‡ä»¶ä¸‹è½½å¾ˆç®€å•ï¼Œåªè¦è®¾ç½®ä¸€ä¸‹å“åº”å¤´å³å¯ é¡µé¢ï¼š 123456789101112131415161718192021&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; ul li &#123; cursor: pointer; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;a href=&quot;javascript:&quot;&gt;ç‚¹å‡»æ–‡å­—ä¸‹è½½&lt;/a&gt;&lt;ul id=&quot;ul&quot;&gt; &lt;c:forEach items=&quot;$&#123;fileList&#125;&quot; var=&quot;file&quot;&gt; &lt;li&gt;&lt;a href=&quot;/fileDownLoad.do?fileName=$&#123;file&#125;&quot;&gt;$&#123;file&#125;&lt;/a&gt;&lt;/li&gt; &lt;/c:forEach&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; Controllerï¼š 123456789101112131415161718@GetMapping(&quot;/fileDownLoad.do&quot;)public String fileDownLoad(String fileName,HttpServletRequest req,HttpServletResponse resp) throws IOException &#123; String realPath = req.getServletContext().getRealPath(&quot;\\\\download&quot;)+&quot;\\\\&quot;; File file = new File(realPath.concat(fileName)); resp.setHeader(&quot;Content-disposition&quot;,&quot;attachment; filename=&quot;+ URLEncoder.encode(file.getName(),&quot;UTF-8&quot;)); ServletOutputStream outputStream = resp.getOutputStream(); FileInputStream fis = new FileInputStream(file); byte[] buffer = new byte[1024]; int len=0; while((len=fis.read(buffer))&gt;0)&#123; outputStream.write(buffer,0,len); &#125; outputStream.flush(); fis.close(); outputStream.close(); return &quot;filedownload&quot;;&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-æ–‡ä»¶ä¸Šä¼ ","slug":"SpringMVC-æ–‡ä»¶ä¸Šä¼ ","date":"2022-01-31T06:55:40.000Z","updated":"2022-10-04T13:55:41.444Z","comments":true,"path":"javaEE/SpringMVC/2022/01/31/SpringMVC-æ–‡ä»¶ä¸Šä¼ /","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/31/SpringMVC-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/","excerpt":"","text":"å‡†å¤‡å·¥ä½œé¦–å…ˆå¯¹äºè¡¨å•ä¸­çš„enctypeå±æ€§åšä¸€ä¸ªäº†è§£ application&#x2F;x-www&#x3D;form-urlencoded:é»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•ä¸­çš„valueçš„å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆURLç¼–ç æ–¹å¼ multipart&#x2F;form-data:è¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šå°†æ–‡ä»¶åŸŸä¸­çš„æ–‡ä»¶å¤œé£æ’åˆ°è¯·æ±‚å‚æ•°ä¸­ text&#x2F;plain:é™¤äº†æŠŠç©ºæ ¼æ”¹ä¸ºâ€œ+â€å·å¤–ï¼Œå…¶ä»–å­—ç¬¦ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚åˆç›´æ¥é€šè¿‡è¡¨å•æ¥å‘é€é‚®ä»¶ æ–‡ä»¶ä¸Šä¼ æ˜¯ä¸€ä¸ªwebé¡¹ç›®ä¸­å¾ˆå¸¸è§çš„åŠŸèƒ½ï¼Œåœ¨springmvcä¸­æœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œä½†æ˜¯springmvcé»˜è®¤ä¸Šä¸‹æ–‡æ²¡æœ‰é…ç½®MultipartResolverï¼Œæ‰€ä»¥åœ¨åšæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½å‰ï¼Œéœ€è¦é…ç½®MultipartResolverï¼Œ åœ¨åŸæœ‰åŒ…çš„åŸºç¡€ä¸Šå¯¼å…¥æ­¤åŒ… 12345&lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.3&lt;/version&gt;&lt;/dependency&gt; æ³¨å†ŒMultipartResolverå®ä¾‹ï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œä¸ç„¶æŠ¥é”™ 12345&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;10485760&quot;/&gt; &lt;property name=&quot;maxInMemorySize&quot; value=&quot;40960&quot;/&gt;&lt;/bean&gt; ä»¥ä¸‹å°±ä¸èµ˜è¿°springMVCçš„é…ç½®æ–‡ä»¶äº† ä¸Šä¼ å•ä¸ªæ–‡ä»¶é¡µé¢ï¼š 1234567891011121314151617&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;å•ä¸ªæ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;avatar&quot; id=&quot;avatar&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; controllerï¼š 12345678910111213141516171819202122@PostMapping(&quot;/singleFileUpload.do&quot;)public String singleFileUploadDo(@RequestParam(value = &quot;avatar&quot;,required = false) CommonsMultipartFile avatar,HttpServletRequest req, Model model) throws IOException &#123; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = avatar.getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ avatar.transferTo(new File(realSavePath)); return &quot;singleFileUpload&quot;;&#125; ä¸Šä¼ å¤šä¸ªæ–‡ä»¶å…¶å®å’Œä¸Šä¼ å•ä¸ªæ–‡ä»¶å¾ˆåƒï¼Œåªè¦inputæ§ä»¶çš„nameå±æ€§æ˜¯ä¸€æ ·çš„ï¼Œé‚£å®ƒä»¬å°±æ˜¯ä¸€ç»„ï¼Œä¸‹é¢æ¥çœ‹çœ‹ä»£ç  controllerï¼šï¼ˆä¸¤æ³•ï¼Œä¸ªäººåå‘äºç¬¬äºŒç§ï¼‰ 12345678910111213141516171819202122232425@PostMapping(&quot;/multiFileUpload.do&quot;)public String multiFileUploadDo(@RequestParam(value = &quot;file&quot;,required = false) CommonsMultipartFile[] files,HttpServletRequest req, Model model) throws IOException &#123; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload/multipart&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; for (int i = 0; i &lt; files.length; i++) &#123; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = files[i].getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ files[i].transferTo(new File(realSavePath)); &#125; return &quot;multiFileUpload&quot;;&#125; 1234567891011121314151617181920212223@PostMapping(&quot;/multiFileUpload.do&quot;)public Map multiFileUploadDo(HttpServletRequest request) throws IOException &#123; String realPath = request.getServletContext().getRealPath(&quot;\\\\multipartUpload&quot;)+&quot;\\\\&quot;; CommonsMultipartResolver cmr = new CommonsMultipartResolver(request.getServletContext()); if(cmr.isMultipart(request))&#123; MultipartHttpServletRequest req = (MultipartHttpServletRequest) request; MultiValueMap&lt;String, MultipartFile&gt; multiFileMap = req.getMultiFileMap(); for (String fieldName : multiFileMap.keySet()) &#123; String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); //åˆ›å»ºå­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶å¤¹ File dir = new File(realPath + uuidPath + fieldName); dir.mkdirs(); List&lt;MultipartFile&gt; multipartFiles = multiFileMap.get(fieldName); for (MultipartFile f : multipartFiles) &#123; //å¦‚æœæ–‡ä»¶ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ if(!f.isEmpty())&#123; f.transferTo(new File(dir.getPath()+&quot;\\\\&quot;+f.getOriginalFilename())); &#125; &#125; &#125; &#125; return &quot;multiFileUpload&quot;;&#125; é¡µé¢ï¼š 12345678910111213141516171819202122232425&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/multiFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ä»¥ä¸Šéƒ½æ˜¯åŒæ­¥æäº¤ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æäº¤å¹¶ä¸”å°†å›¾ç‰‡é¢„è§ˆå‡ºæ¥ï¼Œè¿™æ¬¡åªæ¼”ç¤ºå•ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œå¤šä¸ªæ–‡ä»¶ä¸Šä¼ åŒç†ã€‚ å¼‚æ­¥æäº¤å¹¶æä¾›é¢„è§ˆControllerï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@PostMapping(&quot;/reg.do&quot;)@ResponseBodypublic Map reg(User user,String relativePath)&#123; user.setAvatarUrl(&quot;\\\\upload\\\\&quot;.concat(relativePath)); HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;(); System.out.println(user); map.put(&quot;result&quot;,&quot;success&quot;); return map;&#125;@PostMapping(&quot;/singleFileUpload.do&quot;)@ResponseBodypublic Map singleFileUploadDo(@RequestParam(value = &quot;avatar&quot;,required = false)CommonsMultipartFile avatar, HttpServletRequest req) throws IOException &#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); if(avatar==null||avatar.isEmpty())&#123; map.put(&quot;result&quot;,&quot;fail&quot;); return map; &#125; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = avatar.getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ avatar.transferTo(new File(realSavePath)); map.put(&quot;result&quot;,&quot;success&quot;); //ç”¨æ¥ç»™é¡µé¢æ˜¾ç¤ºå›¾ç‰‡ map.put(&quot;relativePath&quot;,&quot;\\\\upload\\\\&quot;.concat(realFileName)); //ç”¨æ¥ç»™å‰ç«¯åˆ¤æ–­æ˜¯å¦éœ€è¦å†æ¬¡ä¸Šä¼  map.put(&quot;fileName&quot;,avatarWholeName); return map;&#125; é¡µé¢ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;å•ä¸ªæ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form id=&quot;form&quot; action=&quot;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; name=&quot;userName&quot; id=&quot;userName&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;number&quot; placeholder=&quot;è¯·è¾“å…¥å¹´é¾„&quot; name=&quot;age&quot; id=&quot;age&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;avatar&quot; id=&quot;avatar&quot;&gt; &lt;div style=&quot;display: none&quot; id=&quot;showimgcontainer&quot;&gt; &lt;img id=&quot;showimg&quot; width=&quot;400px&quot; height=&quot;400px&quot; style=&quot;border: solid 1px black&quot;/&gt; &lt;/div&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;button&quot; id=&quot;submitBtn&quot; value=&quot;æ³¨å†Œ&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery.form.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt; let fileName; let relativePath; $(&#x27;#avatar&#x27;).change(()=&gt;&#123; if(fileName===$(&#x27;#avatar&#x27;)[0].files[0].name)&#123; return; &#125; let options = &#123; url: &#x27;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&#x27;, dataType:&#x27;text&#x27;, success(data)&#123; data = JSON.parse(data); if(data.result===&#x27;fail&#x27;)&#123; alert(&quot;æ–‡ä»¶ä¸ºç©ºæˆ–è€…ä¸å­˜åœ¨&quot;); return; &#125; relativePath = data.relativePath; fileName = data.fileName; $(&#x27;#showimgcontainer&#x27;).show(); $(&#x27;#showimg&#x27;).attr(&#x27;src&#x27;,relativePath); &#125; &#125; $(&#x27;#form&#x27;).ajaxSubmit(options); &#125;) $(&#x27;#submitBtn&#x27;).click(()=&gt;&#123; $.ajax(&#123; url: &#x27;$&#123;pageContext.request.contextPath&#125;/reg.do&#x27;, method:&#x27;post&#x27;, data: &#123;relativePath:relativePath,userName:$(&#x27;#userName&#x27;).val(),age:$(&#x27;#age&#x27;).val()&#125;, success(data) &#123; if(data.result===&#x27;success&#x27;)&#123; alert(&quot;æ³¨å†ŒæˆåŠŸ&quot;); window.location = &#x27;$&#123;pageContext.request.contextPath&#125;/login&#x27;; &#125;else &#123; alert(&quot;å‡ºé”™ï¼è¯·é‡è¯•ï¼&quot;); &#125; &#125; &#125;) &#125;)&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"Linux-å…¶ä»–å‘½ä»¤","slug":"Linux-å…¶ä»–å‘½ä»¤","date":"2022-01-31T06:10:26.000Z","updated":"2023-01-10T14:32:41.773Z","comments":true,"path":"javaEE/Linux/2022/01/31/Linux-å…¶ä»–å‘½ä»¤/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Linux/2022/01/31/Linux-%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4/","excerpt":"","text":"dfä½œç”¨æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ ä½¿ç”¨è¯´æ˜12345678910# æ ¼å¼ï¼šdf [å‚æ•°] [å¯¹è±¡ç£ç›˜/åˆ†åŒº]# å¸¸ç”¨å‚æ•° # æ˜¾ç¤ºæ‰€æœ‰ç³»ç»Ÿæ–‡ä»¶ -a, --all include pseudo, duplicate, inaccessible file system # ä»¥å®¹æ˜“é˜…è¯»çš„æ–¹å¼å±•ç¤º -h, --human-readable print sizes in human readable format (e.g., 1K 234M 2G # æ˜¾ç¤ºç´¢å¼•èŠ‚ç‚¹çš„ä¿¡æ¯ -i, --inodes list inode information instead of block usage # åªæ˜¾ç¤ºæœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿ -l, --local limit listing to local file systems","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"https://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://li-zhi.net.cn/tags/Linux/"}]},{"title":"SpringMVC-JSON","slug":"SpringMVC-JSON","date":"2022-01-29T02:05:17.000Z","updated":"2022-10-04T13:55:22.980Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-JSON/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-JSON/","excerpt":"","text":"JSON(JavaScript Object Notation)JSONæ˜¯ä¸€ç§ååˆ†è½»é‡çº§çš„æ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œæˆ‘ä»¬æ¥è®²ä¸€ä¸‹å¤„ç†JSONå­—ç¬¦ä¸²çš„ä¸¤ä¸ªåº“ Jackson 12345&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.13.1&lt;/version&gt;&lt;/dependency&gt; å°†å¯¹è±¡è½¬ä¸ºJSONå­—ç¬¦ä¸² 12ObjectMapper mapper = new ObjectMapper();String json = mapper.writeValueAsString(user); è¿™æ—¶å€™ï¼Œé¡µé¢å†æ¬¡å‡ºç°ä¹±ç é—®é¢˜ ç¬¬ä¸€ç§åŸç”Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯ 1@GetMapping(value = &quot;/json1&quot;,produces = &quot;application/json;charset=utf-8&quot;) ç¬¬äºŒç§ä½¿ç”¨springmvcçš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ®µé…ç½®åªé’ˆå¯¹jacksonåº“ 1234567891011121314&lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt; &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt; &lt;constructor-arg value=&quot;UTF-8&quot;/&gt; &lt;/bean&gt; &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt; &lt;property name=&quot;objectMapper&quot;&gt; &lt;bean class=&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt; &lt;property name=&quot;failOnEmptyBeans&quot; value=&quot;false&quot;/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt;&lt;/mvc:annotation-driven&gt; é‚£æˆ‘ä»¬æ€ä¹ˆå¤„ç†æ—¶é—´å¯¹è±¡å‘¢ï¼Ÿ 12345678@GetMapping(&quot;/datejson&quot;)@ResponseBodypublic String jsonDate() throws JsonProcessingException &#123; Date date = new Date(); ObjectMapping objectMapping = new ObjectMapper(); return objectMapping.writeValueAsString(date);&#125;//è¿”å›çš„æ˜¯å½“æ—¶çš„æ—¶é—´æˆ³ ä¸‹é¢æ˜¯ç¬¬ä¸€ç§æ–¹æ³• 123456@GetMapping(&quot;/datejson&quot;)@ResponseBodypublic String jsonDate() throws JsonProcessingException &#123; SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); return new ObjectMapper().writeValueAsString(sdf.format(new Date()));&#125; è¿™æ˜¯ç¬¬äºŒç§æ–¹æ³• 123456789@GetMapping(&quot;/datejson2&quot;)@ResponseBodypublic String jsonDate2() throws JsonProcessingException &#123; ObjectMapper mapper = new ObjectMapper(); mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,false); SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); mapper.setDateFormat(sdf); return mapper.writeValueAsString(new Date());&#125; FastJson 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.78&lt;/version&gt;&lt;/dependency&gt; ä¸»è¦çš„ä¸‰ä¸ªç±» JSONObject å¯¹åº”JSONå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨getæ–¹æ³•è·å–JSONå¯¹è±¡çš„å€¼ JSONArray ä»£è¡¨JSONæ•°æ® JSONä»£è¡¨JSONarrayå’ŒJSONObjectçš„è½¬åŒ– ä¸»è¦ç”¨è¿™ä¸ªç±»çš„é™æ€æ–¹æ³•å»è½¬åŒ–JSONå­—ç¬¦ä¸²å’Œå¯¹è±¡","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-Controller","slug":"SpringMVC-Controller","date":"2022-01-29T02:02:36.000Z","updated":"2022-10-04T13:55:19.525Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-Controller/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-Controller/","excerpt":"","text":"Controlleræ§åˆ¶å™¨å’Œmybatisä¸åŒï¼Œåœ¨springmvcä¸­ï¼Œæ³¨è§£å¼€å‘æ‰æ˜¯ä¸»æµï¼Œæ‰€ä»¥æ¥ä¸‹æ¥éƒ½ä¼šä½¿ç”¨æ³¨è§£æ¥å¼€å‘ã€‚ è¢«@Controlleræ ‡æ³¨çš„ç±»æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œéƒ½å„è‡ªæ˜ å°„ä¸€ä¸ªurlåœ°å€ åœ¨springä¸­æˆ‘ä»¬è¯´è¿‡ï¼Œä½¿ç”¨æ³¨è§£çš„æ—¶å€™éœ€è¦åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ³¨è§£æ‰«æ 12&lt;context:component-scan base-package=&quot;com.lizhi.controller&quot;/&gt;&lt;!--è¿™é‡Œæœ€å¥½å†™åˆ°controlleråŒ…ï¼Œå› ä¸ºè¯¥é…ç½®æ–‡ä»¶ä¸“æ³¨äºå¤„ç†Controllerå±‚çš„äº‹æƒ…ï¼Œä¸è¦å°†åŒ…æ‰«æçš„èŒƒå›´æ‰©å¤§--&gt; å›é¡¾springä¸­çš„å¸¸ç”¨æ³¨å†Œbeançš„æ³¨è§£ 12345@Component æ™®é€šç»„ä»¶@Service æœåŠ¡å±‚@Repository æŒä¹…å±‚@Mapper mybatisçš„æ¥å£å±‚@Controller æ§åˆ¶å™¨å±‚ å› ä¸ºæˆ‘ä»¬é…ç½®çš„DispatcherServletä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œä½†æ˜¯å¯¹äºé™æ€èµ„æºï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹¦æˆªå¯¹ä»–åšå‡ºå¤„ç†ï¼Œæ‰€ä»¥æœ‰äº†ä»¥ä¸‹é…ç½® 12&lt;!-- Springmvcä¸å¤„ç†é™æ€æ–‡ä»¶--&gt;&lt;mvc:default-servlet-handler/&gt; @RequestMappingè¯¥æ³¨è§£å¯ä»¥ä½œç”¨äºç±»ä¸Šé¢æˆ–è€…æ–¹æ³•ä¸Šé¢ æ–¹æ³•ä¸Šé¢ è¯¥æ–¹æ³•æ˜ å°„çš„urlåœ°å€å³ä¸ºæ³¨è§£ä¸­çš„å€¼ ç±»ä¸Šé¢ å½“å…¶ä½œç”¨åœ¨ç±»ä¸Šé¢çš„æ—¶å€™ï¼Œè¯¥æ§åˆ¶å™¨ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•çš„æ˜ å°„è·¯å¾„çš„å‰é¢éƒ½ä¼šåŠ ä¸Šè¯¥æ³¨è§£ä¸­çš„å€¼ @GetMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯getè¯·æ±‚ @PostMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯postè¯·æ±‚ @PutMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯putè¯·æ±‚ @DeleteMappingè¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯deleteè¯·æ±‚ @RestControllerå½“ç±»ä¸Šä¸æ˜¯@Controlleræ³¨è§£è€Œæ˜¯@RestControlleræ—¶å€™ï¼Œè¯¥ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•è¿”å›çš„å€¼ï¼Œä¸ä¼šè·³è½¬è§†å›¾ï¼Œè€Œæ˜¯è¿”å›JSONå­—ç¬¦ä¸² å¦‚æœä¸æƒ³è®©ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½è¿”å›å­—ç¬¦ä¸² åˆ™ç±»ä¸Šé¢ä½¿ç”¨@Controlleræ³¨è§£ï¼Œæ–¹æ³•ä¸Šä½¿ç”¨@ResponseBodyæ ‡æ³¨æ­¤æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸²ä¸è¦è¢«è§†å›¾è§£æå™¨è§£æ RestFulé£æ ¼æ¦‚å¿µï¼šRestFulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ å®ƒä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œå®ƒå°±åªæ˜¯ä¸€ä¸ªstyleã€‚åŸºäºè¿™ç§é£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´åŠ ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œå¹¶ä¸”å®‰å…¨ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æºé€šè¿‡ä¸ç”¨çš„å‚æ•°æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œæ–¹æ³•å•ä¸€ï¼Œpostå’Œget http:&#x2F;locoalhost:8080&#x2F;item&#x2F;insertItem postæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;deleteitem getæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;queryItem getæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;updateitem postæäº¤ ä½¿ç”¨RestFulé£æ ¼æ“ä½œèµ„æº http:&#x2F;locoalhost:8080&#x2F;item&#x2F;add&#x2F;å‚æ•°&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;update&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;query&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;update&#x2F;å‚æ•°&#x2F;â€¦ æœ¬è´¨å…¶å®å°±æ˜¯é€šè¿‡ä¸åŒçš„æäº¤æ–¹å¼èµ°ä¸åŒçš„æ–¹æ³• ç»“æœè·³è½¬æ–¹å¼æ§åˆ¶å™¨æœ€åç›´æ¥returnå­—ç¬¦ä¸²çš„è¯é»˜è®¤è¯·æ±‚è½¬å‘ å¦‚æœæƒ³è¦é‡å®šå‘å­—ç¬¦ä¸²å‰é¢åŠ â€œ**redirect:**â€å³å¯ å¤„ç†å‰ç«¯æ•°æ® å¦‚æœæäº¤å‚æ•°çš„åç§°å’Œæ–¹æ³•çš„å‚æ•°åä¸€è‡´çš„è¯ï¼Œ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add?name=lizhi&amp;age=20 1234@GetMapping(&quot;user/add&quot;)public String test01(String name,int age,Model model)&#123; return &quot;user&quot;;&#125; å¦‚æœæäº¤å‚æ•°å’Œæ–¹æ³•å‚æ•°ä¸ä¸€è‡´çš„è¯ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add?username=lizhi&amp;userage=20 1234@GetMapping(&quot;user/add&quot;)public String add(@RequestParam(&quot;username&quot;) String name,@RequestParam(&quot;userage&quot;)int age,Model model)&#123; return &quot;user&quot;;&#125; å¦‚æœæäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add è¦æ±‚æäº¤çš„è¡¨å•è¦å’Œå±æ€§çš„å±æ€§åä¸€è‡´ï¼Œæ–¹æ³•å‚æ•°å³å¯ç›´æ¥ä½¿ç”¨å¯¹è±¡ 1234@PostMapping(&quot;user/add&quot;)public String add(User user,Model model)&#123; return &quot;user&quot;;&#125; è¿”å›å‰ç«¯æ•°æ® ModelAndView è¯¥å¯¹è±¡åœ¨åˆè¯†mvcçš„æ—¶å€™å·²ç»è§è¿‡ï¼Œä¸å†èµ˜è¿° Modelï¼ˆè¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼‰ è¯¥å¯¹è±¡åœ¨ä½¿ç”¨æ³¨è§£å¼€å‘çš„æ—¶å€™ä¹Ÿå·²ç»è§è¿‡ï¼Œè¿™é‡Œä¹Ÿä¸å†èµ˜è¿° ModelMap ModelMapå®ç°äº†Modelæ¥å£ï¼Œç»§æ‰¿äº†LinkedHashMapï¼Œæ‰€ä»¥å®ƒæ›´å¼ºå¤§ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹Modelä¼šæ›´å¸¸ç”¨","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ç®€è¿°","slug":"SpringMVC-ç®€è¿°","date":"2022-01-29T02:01:23.000Z","updated":"2022-10-04T13:55:30.676Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-ç®€è¿°/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-%E7%AE%80%E8%BF%B0/","excerpt":"","text":"Spring MVCModel 1æ—¶ä»£æ‰€æœ‰è¯·æ±‚ç›´æ¥è½¬å‘åˆ°jspç„¶ååœ¨jspç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œç„¶åæ ¹æ®ä¸åŒçš„ç»“æœè·³è½¬ä¸åŒçš„é¡µé¢ Model 2æ—¶ä»£Controller å–å¾—è¡¨å•æ•°æ® å¤„ç†ä¸šåŠ¡é€»è¾‘ æ ¹æ®ä¸åŒçš„æƒ…å†µè·³è½¬ä¸åŒçš„é¡µé¢ View å±•ç¤ºæ•°æ® Model ä¸šåŠ¡é€»è¾‘ ä¿å­˜æ•°æ® ç®€ä»‹SpringMVCçš„ç‰¹ç‚¹ï¼š è½»é‡çº§ï¼Œç®€å•æ˜“å­¦ ä¸springæ— ç¼ç»“åˆï¼Œå¯ä»¥å°†mvcä¸­æ‰€æœ‰éœ€è¦çš„ç±»æ³¨å†Œåˆ°iocå®¹å™¨ä¸­ é«˜æ•ˆï¼ŒåŸºäºè¯·æ±‚å’Œå“åº”çš„mvcæ¡†æ¶ åŠŸèƒ½å¼ºå¤§ï¼ŒRESTFULé£æ ¼ï¼Œæ ¼å¼åŒ–ï¼Œæ•°æ®éªŒè¯ çº¦å®šå¤§äºé…ç½® è¯´ç™½äº†å­¦å®ƒå°±ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºå®ƒè®©æˆ‘ä»¬å¼€å‘å˜å¾—ç®€å•äº† åŸç† å›é¡¾servletæˆ‘ä»¬éƒ½å­¦è¿‡java webï¼Œé‚£æ—¶å€™æˆ‘ä»¬å¯¹äºå‰ç«¯çš„è¯·æ±‚éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªservletæ¥å¤„ç†çš„ï¼Œç„¶ååœ¨servleté‡Œé¢ï¼Œå¤„ç†å‰ç«¯ä¼ æ¥çš„æ•°æ®ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›å¤„ç†ä¹‹åçš„æ•°æ®ï¼Œç„¶åservletæ ¹æ®è¿™äº›æ•°æ®ï¼Œè¿›è¡Œé‡å®šå‘æˆ–è€…è¯·æ±‚è½¬å‘ ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªservletï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬åœ¨å¼€å‘ä¸­å†™äº†å¤§é‡çš„servletï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦åœ¨web.xmlä¸­æ³¨å†Œï¼Œååˆ†ç¹çã€‚ æ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚è§£å†³ä¸äº†çš„ï¼Œæ‰€ä»¥ï¼Œspringmvcåœ¨servletä¹‹å‰åŠ äº†ä¸€å±‚æ¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ SpringMVCçš„webæ¡†æ¶æ˜¯ä»¥å›´ç»•DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼Œè°ƒåº¦å™¨ï¼Œè¯·æ±‚åˆ†å‘å™¨ï¼‰è®¾è®¡çš„ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ï¼ˆæ–¹æ³•æˆ–è€…ç±»ï¼Œä¸‹é¢çš„åˆè¯†mvcæ˜¯ä»¥ç±»çº§ä½œä¸ºå¤„ç†å™¨ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ–¹æ³•çº§å»åšå¤„ç†å™¨ï¼‰ ä¸‹å›¾æ˜¯DispatcherServletçš„ç»“æ„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›åœ¨javawebé˜¶æ®µæ¯”è¾ƒçœ¼ç†Ÿçš„ç±»ï¼Œæ¯”å¦‚Servletï¼ŒGenericServletï¼ŒHttpServletã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼ŒDispatcherServletæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå’Œæˆ‘ä»¬å½“æ—¶å†™çš„servletæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä»–å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ã€‚ äººåˆ°ä¸­å¹´æœ‰ä¸‰å¤§ä»¶ï¼Œæ¸æå¤§æ£ä¿æ¸©æ¯ã€‚ SpringMVCä¸­ä¹Ÿæœ‰ä¸‰å¤§ä»¶ï¼Œåˆ†åˆ«æ˜¯ å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆHandlerMappingï¼‰ å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰ è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰ æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸‰å¤§ä»¶æ˜¯å¦‚ä½•åœ¨springmvcä¸­å‘æŒ¥ä½œç”¨çš„ï¼ŒåŸç†å›¾å¦‚ä¸‹ï¼š æ ¸å¿ƒç±»å›¾ ç®€è¦åˆ†æ DispatcherServletå°±å¯ä»¥ç®€å•ç†è§£ä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼Œä»–ä¼šå°†æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚æ‹¦æˆª å°†è¯¥è¯·æ±‚å‘é€ç»™HandlerMappingå®ç°ç±»ï¼Œè¯¥å®ç°ç±»æ ¹æ®urlæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ§åˆ¶å™¨ï¼Œå°†ç»“æœè¿”å›ç»™DispatcherServlet DispatcherServletæ ¹æ®HandlerMappingè§£æçš„ç»“æœï¼Œé€‚é…å¹¶æ‰§è¡Œå¯¹åº”çš„æ§åˆ¶å™¨çš„é€»è¾‘ï¼Œ æ§åˆ¶å™¨è¿”å›ä¿¡æ¯ï¼ŒHandlerAdapterå®ç°ç±»æ¥æ”¶è¯¥ä¿¡æ¯å¹¶å°†å…¶è§£ææˆModelAndViewå¯¹è±¡è¿”å›åˆ°DispatcherServlet DispatcherServletè°ƒç”¨ViewResolverå®ç°ç±»å°†HandlerAdapterå®ç°ç±»ä¼ å›æ¥çš„è§†å›¾é€»è¾‘å’Œæ¨¡å‹è§£æ è§†å›¾è§£æå™¨å°†è§£æåçš„é€»è¾‘è§†å›¾åä¼ å›DispatcherServlet DispatcherServletæ ¹æ®è§£æåçš„è§†å›¾åç§°æ‰¾åˆ°è¯¥è§†å›¾ æ¸²æŸ“è§†å›¾ï¼Œè¿”å›é¡µé¢ï¼Œä½œå‡ºå“åº”","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-æ‹¦æˆªå™¨","slug":"SpringMVC-æ‹¦æˆªå™¨","date":"2022-01-28T14:48:50.000Z","updated":"2022-10-04T13:55:34.517Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-æ‹¦æˆªå™¨/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E6%8B%A6%E6%88%AA%E5%99%A8/","excerpt":"","text":"SpringMVCä¸­çš„æ‹¦æˆªå™¨å…¶å®æ­¤æ‹¦æˆªå™¨å°±æ˜¯æˆ‘ä»¬åœ¨javawebé˜¶æ®µä½¿ç”¨çš„è¿‡æ»¤å™¨ï¼Œåªä¸è¿‡æ˜¯æ¢äº†ä¸€ä¸ªåå­—è€Œå·²ï¼Œæ¢æ±¤ä¸æ¢è¯ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚ åªä¸è¿‡æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ è¿‡æ»¤å™¨ï¼š Servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•javawebå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨ åœ¨url-patternä¸­é…ç½®äº†&#x2F;*åï¼Œä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ æ‹¦æˆªå™¨ï¼š æ‹¦æˆªå™¨æ˜¯SpringMVCä¸­æ‰ä¼šæœ‰çš„ï¼Œåªæœ‰ä½¿ç”¨äº†æ­¤æ¡†æ¶çš„å·¥ç¨‹æ‰å¯ä»¥ä½¿ç”¨ æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¦‚æœè®¿é—®çš„æ˜¯é™æ€èµ„æºæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„ è‡ªå®šä¹‰æ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£ 1234567891011121314151617181920212223242526272829package com.lizhi.interceptor;import org.springframework.web.servlet.HandlerInterceptor;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class MyInterceptor implements HandlerInterceptor &#123; /** * return trueæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ */ @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; System.out.println(&quot;===å¤„ç†å‰===&quot;); return true; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; System.out.println(&quot;===å¤„ç†å===&quot;); &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; System.out.println(&quot;===æ¸…ç†===&quot;); &#125;&#125; åœ¨Springæ ¸å¿ƒæ–‡ä»¶ä¸­æ³¨å†Œæ‹¦æˆªå™¨ 1234567&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--/**ä¼šæ‹¦æˆªè¿™ä¸ªè¯·æ±‚ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.lizhi.interceptor.MyInterceptor&quot;/&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ä¹±ç ","slug":"SpringMVC-ä¹±ç ","date":"2022-01-28T14:48:01.000Z","updated":"2022-10-04T13:55:37.492Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-ä¹±ç /","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E4%B9%B1%E7%A0%81/","excerpt":"","text":"ä¹±ç ï¼ä¸€ç”Ÿä¹‹æ•Œï¼ï¼ï¼UserController 123456789101112131415161718package com.lizhi.controller;import com.lizhi.pojo.User;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;@Controller@RequestMapping(&quot;/user&quot;)public class UserController &#123; @PostMapping(&quot;/login.do&quot;) public String login(User user, Model model)&#123; model.addAttribute(&quot;user&quot;,user); return &quot;index&quot;; &#125;&#125; login.jsp 123456789101112131415161718&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;/user/login.do&quot; method=&quot;post&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt; &lt;/p&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; index.jsp 12345678910&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;name:$&#123;user.name&#125;age:$&#123;user.age&#125;&lt;/body&gt;&lt;/html&gt; ç»“æœå¦‚ä¸‹ï¼š æˆ‘ä»¬å…ˆå°è¯•ä¸€ä¸‹é…ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆ 1234567891011121314151617181920212223package com.lizhi.filter;import javax.servlet.*;import java.io.IOException;public class CharsetFilter implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; servletRequest.setCharacterEncoding(&quot;utf-8&quot;); servletResponse.setCharacterEncoding(&quot;utf-8&quot;); &#125; @Override public void destroy() &#123; &#125;&#125; è®°å¾—å»web.xmlä¸­æ³¨å†Œ 12345678&lt;filter&gt; &lt;filter-name&gt;charsetFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.lizhi.filter.CharsetFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;charsetFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æˆ‘ä»¬å°è¯•åå‘ç°ï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œé‚£æ—¢ç„¶æˆ‘ä»¬å†™çš„è¿‡æ»¤å™¨ä¸è¡Œ é‚£springmvcç»™æˆ‘ä»¬å†™äº†ä¸€ä¸ªä¸“é—¨å¤„ç†ä¹±ç çš„è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ï¼Œè¿™æ˜¯ç¬¬äºŒç§æ–¹æ¡ˆï¼Œå¾ˆç¨³å¦¥ 123456789101112&lt;filter&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æµ‹è¯•åå‘ç°ï¼Œè¿˜æ˜¯ä¹±ç ï¼ï¼è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å»çœ‹ä¸€ä¸‹tomcatçš„configç›®å½•ä¸‹çš„server.xmlï¼Œæ‰¾åˆ°connectoræ ‡ç­¾å¹¶ä¿®æ”¹å±æ€§ 123&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; URIEncoding=&quot;UTF-8&quot; /&gt; å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œæˆ‘ä»¬å»æ‰¾ä¸€ä¸ªå…¶ä»–å¤§ä½¬è‡ªå·±å†™çš„è¿‡æ»¤å™¨è¯•ä¸€è¯•ï¼Œè¿™æ˜¯ç¬¬ä¸‰ç§æ–¹æ¡ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.lizhi.filter;import javax.servlet.*;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletRequestWrapper;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.io.UnsupportedEncodingException;import java.nio.charset.StandardCharsets;import java.util.Map;public class EncodeFilter implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; //å¤„ç†responseçš„å­—ç¬¦ç¼–ç  HttpServletResponse resp = (HttpServletResponse) servletResponse; resp.setContentType(&quot;text/html;utf-8&quot;); HttpServletRequest req = (HttpServletRequest) servletRequest; HttpServletRequest myreq = new MyRequest(req); filterChain.doFilter(myreq, resp); &#125; @Override public void destroy() &#123; &#125;&#125;class MyRequest extends HttpServletRequestWrapper &#123; private HttpServletRequest request; private boolean hasEncode; public MyRequest(HttpServletRequest request) &#123; super(request); this.request = request; &#125; @Override public Map getParameterMap() &#123; String method = request.getMethod(); if(&quot;post&quot;.equalsIgnoreCase(method))&#123; try&#123; request.setCharacterEncoding(&quot;utf-8&quot;); return request.getParameterMap(); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125;else if(&quot;get&quot;.equalsIgnoreCase(method))&#123; Map&lt;String,String[]&gt; parameterMap = request.getParameterMap(); if(!hasEncode)&#123; for (String parameterName : parameterMap.keySet()) &#123; String[] values = parameterMap.get(parameterName); if(values!=null)&#123; for (int i = 0; i &lt; values.length; i++) &#123; try&#123; values[i] = new String(values[i].getBytes(&quot;ISO-8859-1&quot;),&quot;utf-8&quot;); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; hasEncode = true; &#125; return parameterMap; &#125; return super.getParameterMap(); &#125; @Override public String getParameter(String name) &#123; Map&lt;String,String[]&gt; parameterMap = getParameterMap(); String[] values = parameterMap.get(name); if(values==null)&#123; return null; &#125; return values[0]; &#125; @Override public String[] getParameterValues(String name) &#123; Map&lt;String,String[]&gt; parameterMap = getParameterMap(); return parameterMap.get(name); &#125;&#125; ç»“æœæµ‹è¯•å‘ç°ï¼Œè¿˜æ˜¯ä¸å¯¹ï¼å…¶å®ä¹±ç çš„é—®é¢˜åˆ°è¿™é‡Œä¸€èˆ¬éƒ½ä¼šè§£å†³äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸è¡Œå‘¢ï¼Ÿ å…¶å®æ˜¯åœ¨æ³¨å†Œfilterçš„æ—¶å€™å°±å‡ºé”™äº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹é¢çš„æ­£ç¡®é…ç½®ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ 12345678&lt;filter&gt; &lt;filter-name&gt;otherEncodeFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.lizhi.filter.EncodeFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;otherEncodeFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æœ‰çš„å°ä¼™ä¼´å¯èƒ½åœ¨ä¸€å¼€å§‹å°±çœ‹å‡ºæ¥äº†ï¼Œæ²¡é”™ï¼Œå°±æ˜¯&lt;&lt;url-pattern&gt;/*&lt;/url-pattern&gt;&gt;è¿™é‡Œçš„æ‹¦æˆªè·¯å¾„æˆ‘ä»¬åº”è¯¥ä½¿ç”¨/*è€Œä¸æ˜¯/ ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å‰è€…æ˜¯æ‹¦æˆªä¸€åˆ‡è¯·æ±‚ï¼ŒåŒ…æ‹¬jsp è€Œåè€…ä¼šæ‹¦æˆªé™¤äº†jspçš„æ‰€æœ‰èµ„æº ç›¸ä¿¡åƒäº†è¿™æ¬¡äºï¼Œå¤§å®¶ä¹‹åå°±å†ä¹Ÿä¸ä¼šå¿˜è®°è¿™ä¸ªå‘äº†ï¼è€Œä¸”ä¹Ÿäº†è§£äº†å¤§éƒ¨åˆ†ä¹±ç é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹","slug":"SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹","date":"2022-01-28T14:26:57.000Z","updated":"2022-10-04T13:55:26.774Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹/","link":"","permalink":"https://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E7%AC%AC%E4%B8%80%E4%B8%AASpringMVC%E5%B7%A5%E7%A8%8B/","excerpt":"","text":"åˆè¯†SpringMVCç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ™®é€šmavenå·¥ç¨‹ ç¬¬äºŒæ­¥ï¼šå¯¼å…¥æ‰€éœ€ä¾èµ– 12345678910111213141516171819202122232425&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.3.14&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt; &lt;artifactId&gt;jstl-api&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;taglibs&lt;/groupId&gt; &lt;artifactId&gt;standard&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt;&lt;/dependency&gt; ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ webæ”¯æŒ ç¬¬å››æ­¥ï¼šåœ¨web.xmlä¸­é…ç½®DispatcherServlet 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; ç¬¬äº”æ­¥ï¼šåœ¨èµ„æºè·¯å¾„ä¸‹åˆ›å»ºspringmvc-servlet.xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®å¤„ç†å™¨æ˜ å°„å™¨ï¼Œå¤„ç†å™¨é€‚é…å™¨ï¼Œè§†å›¾è§£æå™¨ 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt; &lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;/bean&gt; &lt;bean id=&quot;/hello&quot; class=&quot;com.lizhi.controller.HelloServlet&quot;/&gt;&lt;/beans&gt; ç¬¬å…­æ­¥ï¼šåˆ›å»ºHelloControllerå®ç°Controlleræ¥å£ï¼Œå¹¶æ³¨å†Œï¼Œidä¸ºè·¯å¾„ 12345678910111213141516171819package com.lizhi.controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.mvc.Controller;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class HelloServlet implements Controller &#123; @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(&quot;msg&quot;,&quot;HelloSpringMVC&quot;); modelAndView.setViewName(&quot;hello&quot;); return modelAndView; &#125;&#125; ç¬¬ä¸ƒæ­¥ï¼šåœ¨WEB-INFæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºjspæ–‡ä»¶å¤¹ï¼Œåœ¨jspæ–‡ä»¶å¤¹ä¸­åˆ›å»ºhello.jsp 123456789&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;$&#123;msg&#125;&lt;/body&gt;&lt;/html&gt; ç¬¬å…«æ­¥ï¼šå¯åŠ¨tomcatæµ‹è¯• ä½¿ç”¨æ³¨è§£å¼€å‘å‰å››æ­¥å¦‚ä¸Š ç¬¬äº”æ­¥ï¼šåœ¨springmvc-servletä¸­å¼€å¯æ³¨è§£æ”¯æŒ 123456789101112131415161718192021222324252627282930313233&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt; &lt;context:component-scan base-package=&quot;com.lizhi.controller&quot;/&gt; &lt;!-- Springmvcä¸å¤„ç†é™æ€æ–‡ä»¶--&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!--æ”¯æŒspringmvcæ³¨è§£é©±åŠ¨åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ¥å®Œæˆæ˜ å°„å…³ç³»è¦æƒ³è®©æ³¨è§£ç”Ÿæ•ˆï¼Œåˆ™å¿…é¡»è¦å‘ä¸Šä¸‹æ–‡æ³¨å†ŒDefaultAnnotationHandlerMappingå’Œä¸€ä¸ªAnnotationMethodHandlerMappingå®ä¾‹è¿™ä¸¤ä¸ªå¤„ç†å™¨åˆ†åˆ«æ˜¯ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«çš„è€Œannotation-drivenåˆ™å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆäº†è¿™ä¸¤ä¸ªç±»çš„é…ç½®--&gt; &lt;mvc:annotation-driven/&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; ç¬¬å…­æ­¥ï¼šåˆ›å»ºController 123456789101112131415package com.lizhi.controller;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;@Controllerpublic class UserController &#123; @GetMapping(&quot;login&quot;) public String login(Model model)&#123; //modelå¯¹è±¡æ˜¯é¡µé¢æ¨¡å‹ï¼Œå¯ä»¥åœ¨æ­¤å¯¹è±¡ä¸­æ”¾å…¥ä¸šåŠ¡è¿”å›çš„å‰ç«¯éœ€è¦çš„æ•°æ® model.addAttribute(&quot;msg&quot;,&quot;è¯·ç™»å½•&quot;); return &quot;login&quot;; &#125;&#125; ç¬¬ä¸ƒæ­¥ï¼šåœ¨WEB-INFæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºjspæ–‡ä»¶å¤¹ï¼Œåœ¨jspæ–‡ä»¶å¤¹ä¸­åˆ›å»ºlogin.jsp ç¬¬å…«æ­¥ï¼šå¯åŠ¨tomcatæµ‹è¯• å¦‚æœå‡ºç°404æˆ–è€…500é”™è¯¯å¯ï¼Œå°è¯•ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆ åœ¨pom.xmlä¸­åŠ å…¥æ­¤æ®µé…ç½® 123456789101112131415161718192021&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå‡ºç°çš„é—®é¢˜--&gt;&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; åœ¨artifactä¸­åŠ å…¥libç›®å½•ï¼Œå¹¶å°†æ‰€éœ€jaråŒ…å¯¼å…¥å…¶ä¸­","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"MyBatisæ˜ å°„å™¨æ–‡ä»¶","slug":"MyBatisæ˜ å°„å™¨æ–‡ä»¶","date":"2022-01-27T10:59:36.000Z","updated":"2022-10-04T13:54:12.745Z","comments":true,"path":"javaEE/MyBatis/2022/01/27/MyBatisæ˜ å°„å™¨æ–‡ä»¶/","link":"","permalink":"https://li-zhi.net.cn/javaEE/MyBatis/2022/01/27/MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E6%96%87%E4%BB%B6/","excerpt":"","text":"æ˜ å°„å™¨æ–‡ä»¶mybatisçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„å°±åœ¨äºå®ƒçš„è¯­å¥æ˜ å°„ã€‚ æ­£æ˜¯å› ä¸ºæ­¤æ˜ å°„å™¨æ–‡ä»¶ï¼Œæ‰ä½¿æˆ‘ä»¬å‡å°‘äº†å°†è¿‘95%çš„JDBCä»£ç ï¼Œä½¿æˆ‘ä»¬æ›´ä¸“æ³¨äºä¹¦å†™SQLè¯­å¥ æ˜ å°„å™¨æ–‡ä»¶åªæœ‰è¿™äº›é¡¶çº§å…ƒç´  cache cache-ref delete insert resultMap select sql update selectè¯¥æ ‡ç­¾å¯¹æ ‡SQLè¯­å¥çš„DQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯selectè¯­å¥ 123&lt;select id=&quot;getStudentById&quot; resultType=&quot;student&quot;&gt; select * from student where id = #&#123;id&#125;&lt;/select&gt; è¿™ä¸ªselectè¯­å¥æ˜ å°„namespaceç»‘å®šçš„æ¥å£ä¸­çš„listTeachersæ–¹æ³• resultTypeå®šä¹‰è¿”å›å€¼ç±»å‹ #{id}æ˜¯å–åˆ°æ–¹æ³•ä¼ å…¥çš„å‚æ•° å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ resultType æœŸæœ›ä»è¿™æ¡è¯­å¥ä¸­è¿”å›ç»“æœçš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚ æ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯é›†åˆï¼Œé‚£åº”è¯¥è®¾ç½®ä¸ºé›†åˆåŒ…å«çš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«çš„ç±»å‹ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ resultMap å¯¹å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœæ˜ å°„æ˜¯ MyBatis æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¦‚æœä½ å¯¹å…¶ç†è§£é€å½»ï¼Œè®¸å¤šå¤æ‚çš„æ˜ å°„é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ useCache å°†å…¶è®¾ç½®ä¸º true åï¼Œå°†ä¼šå¯¼è‡´æœ¬æ¡è¯­å¥çš„ç»“æœè¢«äºŒçº§ç¼“å­˜ç¼“å­˜èµ·æ¥ï¼Œé»˜è®¤å€¼ï¼šå¯¹ select å…ƒç´ ä¸º trueã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ insertï¼Œupdateå’Œdeleteè¿™ä¸‰ä¸ªæ ‡ç­¾å¯¹æ ‡SQLè¯­å¥çš„DMLè¯­å¥ å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ parameterMap ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šï¼ˆå¯¹ insertã€update å’Œ delete è¯­å¥ï¼‰trueã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ useGeneratedKeys ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„ getGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL Server è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ keyProperty ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰æŒ‡å®šèƒ½å¤Ÿå”¯ä¸€è¯†åˆ«å¯¹è±¡çš„å±æ€§ï¼ŒMyBatis ä¼šä½¿ç”¨ getGeneratedKeys çš„è¿”å›å€¼æˆ– insert è¯­å¥çš„ selectKey å­å…ƒç´ è®¾ç½®å®ƒçš„å€¼ï¼Œé»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ sqlè¯¥æ ‡ç­¾ç”¨æ¥å®šä¹‰sqlç‰‡æ®µï¼Œä¸€èˆ¬ç”¨æ¥å®šä¹‰ä¸€äº›å¯å¤ç”¨çš„SQLè¯­å¥ç‰‡æ®µï¼Œä½¿ç”¨includeæ ‡ç­¾ä»¥åœ¨å…¶ä»–è¯­å¥ä¸­ä½¿ç”¨ 12345678910111213&lt;sql id=&quot;userColumns&quot;&gt; $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password &lt;/sql&gt;&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt; select &lt;include refid=&quot;userColumns&quot;&gt; &lt;property name=&quot;alias&quot; value=&quot;t1&quot;/&gt; &lt;/include&gt;, &lt;include refid=&quot;userColumns&quot;&gt; &lt;property name=&quot;alias&quot; value=&quot;t2&quot;/&gt; &lt;/include&gt; from some_table t1 cross join some_table t2&lt;/select&gt; å‚æ•°å¦‚æœä¼ å…¥ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¡Œä¸ºå°±ä¼šæœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚æ¯”å¦‚ï¼š 1234&lt;insert id=&quot;insertUser&quot; parameterType=&quot;User&quot;&gt; insert into users (id, username, password) values (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)&lt;/insert&gt; JDBC è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªåˆ—å…è®¸ä½¿ç”¨ null å€¼ï¼Œå¹¶ä¸”å¯èƒ½ä¼šä½¿ç”¨å€¼ä¸º null çš„å‚æ•°ï¼Œå°±å¿…é¡»è¦æŒ‡å®š JDBC ç±»å‹ï¼ˆjdbcType) å­—ç¬¦ä¸²æ›¿æ¢é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨#{}è·å–å‚æ•°çš„å€¼çš„æ—¶å€™ï¼Œmybatisä¼šåˆ›å»ºä¸€ä¸ªPreparedStatementå¯¹è±¡ï¼Œé€šè¿‡é¢„ç¼–è¯‘ï¼Œç”Ÿæˆä¸#{}å‡ºç°æ¬¡æ•°ç›¸åŒçš„å ä½ç¬¦ï¼ˆå³ ? ï¼‰è¿™æ ·æ›´å®‰å…¨å¹¶ä¸”æ›´è¿…é€Ÿã€‚ ä½†æ˜¯æœ‰æ—¶å€™æƒ³ç›´æ¥åœ¨SQLè¯­å¥ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸éœ€è¦è½¬ä¹‰æ­¤å­—ç¬¦ä¸²ï¼ˆå³ä¸éœ€è¦å ä½ç¬¦ï¼‰ï¼Œæ¯”å¦‚ORDER BYè¯­å¥ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨${}è¯­å¥ï¼Œè¿™æ ·çš„è¯ï¼Œmybatiså°±ä¸ä¼šè½¬ä¹‰è¯¥å­—ç¬¦ä¸²äº† å½“ SQL è¯­å¥ä¸­çš„å…ƒæ•°æ®ï¼ˆå¦‚è¡¨åæˆ–åˆ—åï¼‰æ˜¯åŠ¨æ€ç”Ÿæˆçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ›¿æ¢å°†ä¼šéå¸¸æœ‰ç”¨ã€‚ ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœä½ æƒ³ select ä¸€ä¸ªè¡¨ä»»æ„ä¸€åˆ—çš„æ•°æ®æ—¶ï¼Œä¸éœ€è¦è¿™æ ·å†™ï¼š 12345678910@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)User findById(@Param(&quot;id&quot;) long id);@Select(&quot;select * from user where name = #&#123;name&#125;&quot;)User findByName(@Param(&quot;name&quot;) String name);@Select(&quot;select * from user where email = #&#123;email&#125;&quot;)User findByEmail(@Param(&quot;email&quot;) String email);// å…¶å®ƒçš„ &quot;findByXxx&quot; æ–¹æ³• è€Œæ˜¯å¯ä»¥åªå†™è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š 12@Select(&quot;select * from user where $&#123;column&#125; = #&#123;value&#125;&quot;)User findByColumn(@Param(&quot;column&quot;) String column, @Param(&quot;value&quot;) String value); å…¶ä¸­ $&#123;column&#125; ä¼šè¢«ç›´æ¥æ›¿æ¢ï¼Œè€Œ #&#123;value&#125; ä¼šä½¿ç”¨ ? é¢„å¤„ç†ã€‚ è¿™æ ·ï¼Œå°±èƒ½å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼š 123User userOfId1 = userMapper.findByColumn(&quot;id&quot;, 1L);User userOfNameKid = userMapper.findByColumn(&quot;name&quot;, &quot;kid&quot;);User userOfEmail = userMapper.findByColumn(&quot;email&quot;, &quot;noone@nowhere.com&quot;); ç»“æœé›†æ˜ å°„å¯ä»¥è‡ªå®šä¹‰ä¸€äº›å¤æ‚çš„è¿”å›å€¼å¯¹è±¡ ç®€å•ç»“æœé›†æ˜ å°„123456789@Data@NoArgsConstructor@AllArgsConstructor@Alias(&quot;aliasStudent&quot;)public class Student &#123; private Integer id; private String name; private Integer tid;&#125; 12345678&lt;select id=&quot;getStudentById&quot; resultMap=&quot;studentMap&quot;&gt; select student_id,student_name,student_tid from student where id = #&#123;id&#125;&lt;/select&gt;&lt;resultMap id=&quot;studentMap&quot;&gt; &lt;id column=&quot;student_id&quot; property=&quot;id&quot;/&gt; &lt;result column=&quot;student_name&quot; property=&quot;name&quot;/&gt; &lt;result column=&quot;student_tid&quot; property=&quot;tid&quot;/&gt;&lt;/resultMap&gt; é«˜çº§ç»“æœé›†æ˜ å°„1234567@Data@NoArgsConstructor@AllArgsConstructorpublic class Teacher &#123; private int id; private String name;&#125; 123456789101112&lt;resultMap id=&quot;teacherMap&quot; type=&quot;com.lizhi.pojo.Teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot; /&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;collection property=&quot;students&quot; ofType=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;/association&gt; &lt;/collection&gt;&lt;/resultMap&gt; resultMapçš„å­æ ‡ç­¾ constructor ç”¨äºåœ¨å®ä¾‹åŒ–ç±»æ—¶ï¼Œæ³¨å…¥ç»“æœåˆ°æ„é€ æ–¹æ³•ä¸­ idArg - ID å‚æ•°ï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½ arg - å°†è¢«æ³¨å…¥åˆ°æ„é€ æ–¹æ³•çš„ä¸€ä¸ªæ™®é€šç»“æœ id â€“ ä¸€ä¸ª ID ç»“æœï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½ result â€“ æ³¨å…¥åˆ°å­—æ®µæˆ– JavaBean å±æ€§çš„æ™®é€šç»“æœ association ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”,è®¸å¤šç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹ åµŒå¥—ç»“æœæ˜ å°„ â€“ å…³è”å¯ä»¥æ˜¯ resultMap å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨ collection ä¸€ä¸ªå¤æ‚ç±»å‹çš„é›†åˆ åµŒå¥—ç»“æœæ˜ å°„ â€“ é›†åˆå¯ä»¥æ˜¯ resultMap å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨ constructoræœ‰äº›æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå³é‚£äº›å¾ˆå°‘æ”¹å˜æˆ–è€…åŸºæœ¬ä¸å˜çš„ç±»ï¼Œå³å¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥ 12345&lt;constructor&gt; &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; name=&quot;id&quot; /&gt; &lt;arg column=&quot;age&quot; javaType=&quot;_int&quot; name=&quot;age&quot; /&gt; &lt;arg column=&quot;username&quot; javaType=&quot;String&quot; name=&quot;username&quot; /&gt;&lt;/constructor&gt; id &amp; result12&lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt;&lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; è¿™äº›å…ƒç´ æ˜¯ç»“æœæ˜ å°„çš„åŸºç¡€ã€‚ id å’Œ result å…ƒç´ éƒ½å°†ä¸€ä¸ªåˆ—çš„å€¼æ˜ å°„åˆ°ä¸€ä¸ªç®€å•æ•°æ®ç±»å‹ï¼ˆString, int, double, Date ç­‰ï¼‰çš„å±æ€§æˆ–å­—æ®µã€‚ è¿™ä¸¤è€…ä¹‹é—´çš„å”¯ä¸€ä¸åŒæ˜¯ï¼Œid å…ƒç´ å¯¹åº”çš„å±æ€§ä¼šè¢«æ ‡è®°ä¸ºå¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡å®ä¾‹æ—¶ä½¿ç”¨ã€‚ è¿™æ ·å¯ä»¥æé«˜æ•´ä½“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç¼“å­˜å’ŒåµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥æ˜ å°„ï¼‰çš„æ—¶å€™ã€‚ ä¸¤ä¸ªå…ƒç´ éƒ½æœ‰ä¸€äº›å±æ€§ï¼š å±æ€§ æè¿° property æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœ JavaBean æœ‰è¿™ä¸ªåå­—çš„å±æ€§ï¼ˆpropertyï¼‰ï¼Œä¼šå…ˆä½¿ç”¨è¯¥å±æ€§ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µï¼ˆfieldï¼‰ã€‚ column æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ javaType ä¸€ä¸ª Java ç±»çš„å…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚ jdbcType JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹åçš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯ä»¥ä¸ºç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚ jdbcTypeæ”¯æŒçš„ JDBC ç±»å‹ ä¸ºäº†ä»¥åå¯èƒ½çš„ä½¿ç”¨åœºæ™¯ï¼ŒMyBatis é€šè¿‡å†…ç½®çš„ jdbcType æšä¸¾ç±»å‹æ”¯æŒä¸‹é¢çš„ JDBC ç±»å‹ã€‚ BIT FLOAT CHAR TIMESTAMP OTHER UNDEFINED TINYINT REAL VARCHAR BINARY BLOB NVARCHAR SMALLINT DOUBLE LONGVARCHAR VARBINARY CLOB NCHAR INTEGER NUMERIC DATE LONGVARBINARY BOOLEAN NCLOB BIGINT DECIMAL TIME NULL CURSOR ARRAY associationè¯¥æ ‡ç­¾å¤„ç†ä¸€ä¸ªå¯¹è±¡èšåˆå¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»ã€‚ mybatisæœ‰ä¸¤ç§ä¸åŒæ–¹å¼å»åŠ è½½å…³è” åµŒå¥—selectæŸ¥è¯¢ï¼šé€šè¿‡å¦ä¸€ä¸ªSQLè¯­å¥å»åŠ è½½å¤æ‚å¯¹è±¡ åµŒå¥—ç»“æœæŸ¥è¯¢ï¼šé€šè¿‡è¿æ¥æŸ¥è¯¢ç›´æ¥å°†æ‰€æœ‰çš„ç»“æœæŸ¥è¯¢å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€å¼ è¡¨é‡Œé¢ åµŒå¥—selectæŸ¥è¯¢ï¼ˆä¸æ¨èï¼‰12345678910111213&lt;resultMap id=&quot;StudentMap&quot; type=&quot;student&quot;&gt; &lt;result column=&quot;tid&quot; property=&quot;tid&quot;/&gt; &lt;association property=&quot;teacher&quot; column=&quot;tid&quot; javaType=&quot;teacher&quot; select=&quot;getTeacherById&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;getTeacherById&quot; resultType=&quot;teacher&quot;&gt; select * from teacher where id = #&#123;tid&#125;&lt;/select&gt;&lt;select id=&quot;getStudentById&quot; resultMap=&quot;StudentMap&quot;&gt; select * from student where id = #&#123;id&#125;&lt;/select&gt; ä¼˜ç‚¹ï¼šSQLè¯­å¥å†™èµ·æ¥æ–¹ä¾¿ ç¼ºç‚¹ï¼šå¤šå±‚SQLåµŒå¥—ï¼Œä¸æ˜“äºç»´æŠ¤ï¼Œä½¿ç”¨äº†mybatisçš„ç›¸å…³æ’ä»¶ä¼šå¯¼è‡´selectè¯­å¥çˆ†çº¢ï¼Œçœ‹èµ·æ¥ä¸èˆ’æœ å¯¹äºå¤§å‹æ•°æ®ä¸Šï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªâ€œN+1æŸ¥è¯¢é—®é¢˜â€ï¼Œé—®é¢˜æè¿°å¦‚ä¸‹ æ‰§è¡Œäº†ä¸€ä¸ªå•ç‹¬çš„SQLè¯­å¥å»åŠ è½½æ¯ä¸€æ¡è®°å½•çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯+1ï¼‰ å¯¹è¿”å›çš„åˆ—è¡¨çš„æ¯ä¸€æ¡è®°å½•ï¼Œéƒ½éœ€è¦æ‰§è¡Œè¿™æ ·çš„ä¸€ä¸ªå•ç‹¬çš„SQLè¯­å¥å»åŠ è½½è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯Nï¼‰ è¿™æ ·ä¼šå¯¼è‡´è¿è¡Œæˆåƒä¸Šä¸‡æ¡sqlè¯­å¥ï¼Œå¤§å¤§å¢åŠ ç³»ç»Ÿå¼€é”€ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ åµŒå¥—ç»“æœæŸ¥è¯¢ï¼ˆæ¨èï¼‰123456789101112131415&lt;resultMap id=&quot;studentMap&quot; type=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot; javaType=&quot;_int&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot; javaType=&quot;string&quot;/&gt; &lt;result property=&quot;tid&quot; column=&quot;tid&quot; javaType=&quot;_int&quot;/&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot; javaType=&quot;_int&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot; javaType=&quot;string&quot;/&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=&quot;getStudentById&quot; resultMap=&quot;studentMap&quot;&gt; select s.id sid, s.name sname, tid, t.name tname from student s inner join teacher t on s.id = #&#123;id&#125; and tid = t.id&lt;/select&gt; ä¼˜ç‚¹ï¼šé…ç½®resultMapååˆ†æ–¹ä¾¿ï¼Œé€»è¾‘ååˆ†æ¸…æ¥šï¼Œæ–¹ä¾¿æŸ¥é”™å’Œç»´æŠ¤ ç¼ºç‚¹ï¼šè¿æ¥æŸ¥è¯¢çš„SQLè¯­å¥å†™èµ·æ¥éš¾åº¦å¤§ï¼Œ collectioncollectionå¯ä»¥è¯´æ˜¯å¤šä¸ªç±»å‹çš„å…³è”ï¼Œæ‰€ä»¥ä¸associationçš„å¤„ç†ååˆ†ç›¸ä¼¼ åµŒå¥—selectæŸ¥è¯¢123456789&lt;resultMap id=&quot;teacherMap&quot; type=&quot;teacher&quot;&gt; &lt;collection property=&quot;students&quot; javaType=&quot;ArrayList&quot; column=&quot;id&quot; ofType=&quot;student&quot; select=&quot;getStudentsByTid&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;getStudentsByTid&quot; resultType=&quot;student&quot;&gt; select * from student where tid = #&#123;id&#125;&lt;/select&gt;&lt;select id=&quot;getTeacherById&quot; resultMap=&quot;teacherMap&quot;&gt; SELECT * FROM teacher WHERE id = #&#123;id&#125;&lt;/select&gt; æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨ofTypeæ¥æŒ‡å®šé›†åˆçš„æ³›å‹ åµŒå¥—ç»“æœæŸ¥è¯¢1234567891011121314&lt;resultMap id=&quot;teacherMap&quot; type=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;collection property=&quot;students&quot; ofType=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;result property=&quot;tid&quot; column=&quot;tid&quot;/&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;getTeacherById&quot; resultMap=&quot;teacherMap&quot;&gt; SELECT t.name tname,t.id tid,s.id sid, s.name sname FROM teacher t inner join student s on t.id=#&#123;id&#125; and s.tid=#&#123;id&#125;&lt;/select&gt; ç¼“å­˜é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åˆ°åº•ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ ç¼“å­˜è¿™ä¸ªè¯ï¼Œç›¸ä¿¡å¤§å®¶å¯¹å…¶ä¸ä¼šé™Œç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬åœ¨bç«™ï¼Œè…¾è®¯è§†é¢‘è¿™ä¸€ç±»è§†é¢‘APPä¸­éƒ½ä¼šç¼“å­˜è¿‡ä¸€äº›è§†é¢‘ã€‚ é‚£æˆ‘ä»¬å¯ä»¥ä»ä¸­å½’çº³å‡ºï¼Œç¼“å­˜å°±æ˜¯ç¨‹åºä»¥æŸç§å½¢å¼å°†æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡çš„ä½¿ç”¨ã€‚ é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ç¼“å­˜å‘¢ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜è¦è¿½æ±‚ä¸‰é«˜ï¼Œå½“ç„¶ä¸ä¼šæ˜¯é«˜è¡€è„‚ï¼Œé«˜è¡€ç³–ï¼Œé«˜è¡€å‹ã€‚æˆ‘ä»¬æ‰€è¯´çš„ä¸‰é«˜æ˜¯é«˜å¹¶å‘ï¼Œé«˜å¯ç”¨ï¼Œé«˜æ€§èƒ½ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œå¯¹äºæ•°æ®åº“çš„æ“ä½œæ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„ã€‚å› æ­¤ï¼Œå¤šæ¬¡è¿æ¥æ•°æ®åº“ä¸åˆ©äºæˆ‘ä»¬è¾¾åˆ°ä¸‰é«˜ï¼Œé‚£ä¹ˆç¼“å­˜å°±æ˜¯ä¼šå¸®åŠ©æˆ‘ä»¬è¾¾åˆ°ä¸‰é«˜çš„ä¸€ç§æŠ€æœ¯ã€‚ æˆ‘ä»¬å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢ï¼Œå¹¶ä¸”å¾ˆå°‘å‘ç”Ÿæ”¹å˜çš„æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œå½“ç”¨æˆ·ä¸‹ä¸€æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼Œå°±ä¸ç”¨å†å»è¿æ¥æ•°æ®åº“æŸ¥è¯¢æ•°æ®äº†ï¼Œå‡å°‘äº†è®¿é—®æ•°æ®åº“çš„æ¬¡æ•°ï¼Œå‡å°‘äº†ç³»ç»Ÿå¼€é”€ï¼Œä»è€Œæé«˜äº†æ€§èƒ½ã€‚ åœ¨mybatisä¸­ï¼Œå­˜åœ¨ç€ä¸¤ç§ç¼“å­˜æœºåˆ¶ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ ä¸€çº§ç¼“å­˜è¯¥çº§åˆ«çš„ç¼“å­˜ï¼Œmybatisæ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¹¶ä¸”æ— æ³•å…³é—­ã€‚ è¯¥ç¼“å­˜æ˜¯sqlSessionçº§åˆ«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œç”¨åŸŸå’Œæˆ‘ä»¬ä¹‹å‰è°ˆè¿‡çš„sqlSessionçš„ä½œç”¨åŸŸä¸€è‡´ å› ä¸ºç”¨æˆ·å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯æŸ¥è¯¢ï¼Œä½†æ˜¯å¦‚æœå‡ºç°äº†DMLè¯­å¥ï¼ˆå³å¢åˆ æ”¹ï¼‰çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¹ç¼“å­˜ä¸­çš„æ•°æ®é€ æˆäº†ä¿®æ”¹ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œå½“å‘ç”Ÿå¢åˆ æ”¹æ“ä½œçš„æ—¶å€™ï¼Œä¸€çº§ç¼“å­˜å³åˆ»å¤±æ•ˆã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ äºŒçº§ç¼“å­˜è¯¥çº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯é»˜è®¤å…³é—­çš„ï¼Œéœ€æ‰‹åŠ¨æ‰“å¼€ åœ¨mapperæ˜ å°„å™¨æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¸€è¡Œä»£ç  1234567&lt;cache/&gt;//æˆ–è€…åŠ ä¸€äº›é…ç½®&lt;cache eviction=&quot;FIFO&quot; flushInterval=&quot;60000&quot; size=&quot;512&quot; readOnly=&quot;true&quot;/&gt; åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­ 123//å¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¼šè¯´ï¼Œè¯¥è®¾ç½®é»˜è®¤å°±æ˜¯trueï¼Œä¸éœ€è¦å†™è¿™ä¸€è¡Œä»£ç //ä½†æ˜¯ï¼Œä¸ºäº†æ˜¾å¼è¯´æ˜æˆ‘ä»¬å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæœ€å¥½è¿˜æ˜¯æ ‡æ³¨å‡ºæ¥&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; æ³¨ï¼šå¦‚æœåœ¨cacheæ ‡ç­¾ä¸­æ²¡æœ‰åŠ å…¥readOnly&#x3D;â€œtrueâ€ï¼Œåˆ™éœ€è¦å°†æ¨¡å‹ç±»å®ç°åºåˆ—åŒ–æ¥å£ï¼ˆSerializableï¼‰ è¯¥ç¼“å­˜æ˜¯namespaceçº§åˆ«çš„ï¼Œä¹Ÿå°±æ˜¯å’Œåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ é™„ä¸Šä¸€å¼ å…³äºmybatisçš„åŸç†å›¾ï¼Œä»…ä¾›å‚è€ƒ","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"https://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"Spring-aop","slug":"Spring-aop","date":"2022-01-27T08:25:19.000Z","updated":"2022-10-04T13:55:04.331Z","comments":true,"path":"javaEE/Spring/2022/01/27/Spring-aop/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Spring/2022/01/27/Spring-aop/","excerpt":"","text":"AOPAOPä¸ºAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„æ€æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚ Springæ¡†æ¶ä¸¤å¤§é‡ç‚¹ï¼ŒAOPå’ŒIOC(Inversion Of Control)æ§åˆ¶åè½¬ AOPæ˜¯OOPçš„å»¶ç»­,æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹, ä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚ åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œè§£è€¦åˆ,ä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½,æé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ ä½œç”¨åŠä¼˜åŠ¿ ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹è¿›è¡ŒåŠŸèƒ½å¢å¼º ä¼˜åŠ¿ï¼šå‡å°‘ä»£ç é‡å¤æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤ åº•å±‚åŸç†å®é™…ä¸Šï¼ŒAOPçš„åº•å±‚æ˜¯é€šè¿‡Springæä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚ åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚ å¸¸ç”¨ä»£ç†æŠ€æœ¯ JDKä»£ç†ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ Adivce.java 12345678public class Advice &#123; public void before()&#123; System.out.println(&quot;å‰ç½®å¢å¼º&quot;); &#125; public void after()&#123; System.out.println(&quot;åç½®å¢å¼º&quot;); &#125;&#125; TargetInterface.java 123public interface TargetInterface &#123; void save();&#125; Target.java 123456public class Target implements TargetInterface &#123; @Override public void save()&#123; System.out.println(&quot;saving running......&quot;); &#125;&#125; ProxyTest.java 1234567891011121314151617181920public class ProxyTest &#123; public static void main(String[] args) &#123; final Target = new Target(); final Adivice = new Advice(); TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance( target.getClass().getClassLoader(), target.getClass().getInterfaces(), new InvocationHandle()&#123; public Object invoke(Object proxy,Method method,Object[] args) throws Throwable &#123; advice.before(); Object invoke = method.invoke(target,args); advice.after(); return invoke; &#125; &#125; ); proxy.save(); &#125;&#125; cglibä»£ç†ï¼šåŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ ProxyTest.java 123456789101112131415161718192021222324public class ProxyTest &#123; public static void main(String[] args) &#123; Target target = new Target(); Enhance enhance = new Enhance(); //åˆ›å»ºå¢å¼ºå…¶ Enhancer enhancer = new Enhancer(); //è®¾ç½®çˆ¶ç±» enhancer.setSuperclass(Target.class); //è®¾ç½®å›è°ƒ enhancer.setCallback(new MethodInterceptor() &#123; @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; enhance.before(); Object invoke = method.invoke(target, args); enhance.after(); return invoke; &#125; &#125;); //åˆ›å»ºä»£ç†å¯¹è±¡ Target proxy = (Target) enhancer.create(); proxy.save(); &#125;&#125; AOPç›¸å…³æœ¯è¯­Springçš„AOPå®ç°åº•å±‚å°±æ˜¯å¯¹ä¸Šé¢çš„åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£…,å°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™,å¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚ Target (ç›®æ ‡å¯¹è±¡) :ä»£ç†çš„ç›®æ ‡å¯¹è±¡ Proxy (ä»£ç†) :ä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºå,å°±äº§ç”Ÿä¸€ ä¸ªç»“æœä»£ç†ç±» Joinpoint (è¿æ¥ç‚¹) :æ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ Pointcut (åˆ‡å…¥ç‚¹) :æ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªçš„å®šä¹‰ Advice (é€šçŸ¥&#x2F;å¢å¼·) :æ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥ Aspect (åˆ‡é¢) :æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥(å¼•ä»‹)çš„ç»“åˆ Weaving (ç»‡å…¥) :æ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥,è€ŒAspecté‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥ å¼€å‘æ˜ç¡®äº‹é¡¹ éœ€è¦ç¼–å†™çš„å†…å®¹ ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç (ç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•) ç¼–å†™åˆ‡é¢ç±»,åˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥(å¢å¼ºåŠŸèƒ½æ–¹æ³•) åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»,å³å°†å“ªäº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ AOPæŠ€æœ¯å®ç°çš„å†…å®¹ Springæ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®,å°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚ åŸºäºXMLçš„AOPå¼€å‘ æ­¥éª¤ å¯¼å…¥AOPåæ ‡ 123456789101112&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.2.2.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.9.8.M1&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; åˆ›å»ºç›®æ ‡ç±»å’Œç›®æ ‡æ¥å£ åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰ å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™Spring åœ¨applicationContext.xmlä¸­é…ç½®ä¸­ç»‡å…¥å…³ç³» æµ‹è¯• åˆ‡ç‚¹è¡¨è¾¾å¼1execution([ä¿®é¥°ç¬¦]è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)) è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥ è¿”å›å€¼ç±»å‹ã€ åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå·*ä»£è¡¨ä»»æ„ åŒ…åä¸ç±»åä¹‹é—´ä¸€ ä¸ªç‚¹.ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»,ä¸¤ä¸ªç‚¹.. è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±» å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºä»»æ„ä¸ªæ•°,ä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨ 1234567891011121314//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aop.Targetç±»çš„è¿”å›voidçš„methodçš„æ— å‚æ•°æ–¹æ³•execution (public void com.itheima.aop.Target.method() )//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aop.Targetç±»çš„è¿”å›voidçš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution (void com.itheima.aop.Target.*(.. ))//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aopåŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution(* com.lizhi.aop.*.*(..))//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aopåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution(* com.lizhi.aop..*.* (..) )//ä»£è¡¨åˆ‡å£æ˜¯é¡¹ç›®ä¸‹çš„æ‰€æœ‰åŒ…çš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ºä»»æ„å‚æ•°execution(* *..*.*(..) ) é€šçŸ¥ç±»å‹ åç§° é€šçŸ¥ç±»å‹ è¯´æ˜ å‰ç½®é€šçŸ¥ aop:before æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹å‰æ‰§è¡Œ åç½®é€šçŸ¥ aop:after-returning æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹åæ‰§è¡Œ ç¯ç»•é€šçŸ¥ aop:around æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹å‰å’Œä¹‹åéƒ½ä¼šæ‰§è¡Œ å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ aop:throwing æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨å‡ºç°åˆ‡ç‚¹å¼‚å¸¸æ—¶æ‰§è¡Œ æœ€ç»ˆé€šçŸ¥ aop:after æ— è®ºå¢å¼ºæ–¹å¼æ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ around 1234567//ProceedingJoinPointæŒ‡çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è¿æ¥ç‚¹==åˆ‡ç‚¹public Object around(ProceedingJoinPoint pjp) throws Throwable &#123; System.out.println(&quot;ç¯ç»•å‰å¢å¼ºã€‚ã€‚ã€‚ã€‚ã€‚&quot;); Object obj = pjp.proceed();//åˆ‡ç‚¹æ–¹æ³• System.out.println(&quot;ç¯ç»•åå¢å¼ºã€‚ã€‚ã€‚ã€‚ã€‚&quot;); return obj;&#125; åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å– 123456&lt;apo:config&gt; &lt;aop:aspect&gt; &lt;apo:pointcut id=&quot;myPointcut&quot; expression=&quot;excution( * com.lizhi.apo.*.*(..))&quot;&gt;&lt;/apo:pointcut&gt; &lt;apo:before method=&quot;before&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/apo:before&gt; &lt;/aop:aspect&gt;&lt;/apo:config&gt; åŸºäºæ³¨è§£çš„AOPå¼€å‘ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»(å†…éƒ¨æœ‰åˆ‡ç‚¹) åˆ›å»ºåˆ‡é¢ç±»(å†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•) å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³» åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’ŒAOPçš„è‡ªåŠ¨ä»£ç† æµ‹è¯•","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Spring","slug":"javaEE/Spring","permalink":"https://li-zhi.net.cn/categories/javaEE/Spring/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://li-zhi.net.cn/tags/Spring/"}]},{"title":"é¢å‘æ¥å£ç¼–ç¨‹","slug":"é¢å‘æ¥å£ç¼–ç¨‹","date":"2022-01-27T08:21:11.000Z","updated":"2022-09-27T13:57:24.767Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/01/27/é¢å‘æ¥å£ç¼–ç¨‹/","link":"","permalink":"https://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/01/27/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B/","excerpt":"","text":"é¢å‘æ¥å£ç¼–ç¨‹æ˜¯ä»€ä¹ˆå¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹ æ ¹æœ¬åŸå› :è§£è€¦ï¼Œå¯æ‹“å±•ï¼Œæé«˜å¤ç”¨ï¼Œåˆ†å±‚å¼€å‘ä¸­ï¼Œä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç°ï¼Œå¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡†ï¼Œä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ï¼Œè§„èŒƒæ€§æ›´å¥½ åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†: è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚ å…³äºæ¥å£çš„ç†è§£æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰(è§„èŒƒï¼Œçº¦æŸ)ä¸å®ç°(åå®åˆ†ç¦»çš„åŸåˆ™)çš„åˆ†ç¦»ã€‚ æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚æ¥å£åº”æœ‰ä¸¤ç±»: ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class) ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢(interface) ä¸€ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚ ä¸‰ä¸ªé¢å‘çš„åŒºåˆ«é¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜çš„æ—¶å€™ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§å’Œæ–¹æ³• é¢å‘è¿‡ç¨‹ç¼–ç¨‹æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜çš„æ—¶å€™ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯å±‚é¢çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"MyBatisçš„xmlé…ç½®","slug":"MyBatisé…ç½®","date":"2022-01-26T15:44:33.000Z","updated":"2022-10-04T13:54:05.280Z","comments":true,"path":"javaEE/MyBatis/2022/01/26/MyBatisé…ç½®/","link":"","permalink":"https://li-zhi.net.cn/javaEE/MyBatis/2022/01/26/MyBatis%E9%85%8D%E7%BD%AE/","excerpt":"","text":"é…ç½®Configurationåœ¨MyBatisä¸­ï¼Œé…ç½®æ–‡ä»¶çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ Configuration properties settings typeAliases typeHandlers objectFactory plugins environments environment dataSource transactionManager databaseIdProvider mappers å±æ€§properties123&lt;properties resource=&quot;db.properties&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;&lt;/properties&gt; resourceå±æ€§å¯ä»¥å¯¼å…¥åœ¨å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§åˆ°propertiesæ ‡ç­¾ä¸­ propertyæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ é…ç½®å¥½çš„å±æ€§å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨${}æ¥æ›¿æ¢éœ€è¦åŠ¨æ€é…ç½®çš„å±æ€§å€¼ 123456&lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;&lt;/dataSource&gt; æ¯”å¦‚ä¸Šæ–¹çš„driverçš„å€¼ä¼šç”±db.propertiesæ–‡ä»¶ä¸­å¯¹åº”çš„å€¼æ¥æ›¿æ¢ å¦‚æœåœ¨å¤šä¸ªåœ°æ–¹è¿›è¡Œäº†é…ç½®Javaä»£ç ï¼Œå¤–éƒ¨æ–‡ä»¶ï¼Œpropertiesæ ‡ç­¾ï¼Œåˆ™æŒ‰ç…§ä»¥ä¸‹é¡ºåºåŠ è½½ å…ˆåŠ è½½propertiesæ ‡ç­¾ä¸­çš„å±æ€§ å†åŠ è½½å¤–éƒ¨æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§ï¼Œå¦‚æœæœ‰é‡å¤çš„å±æ€§ï¼Œåˆ™è¦†ç›–æ—§çš„å±æ€§ æœ€ååŠ è½½Javaä»£ç ä¸­çš„å±æ€§ï¼Œå¦‚æœæœ‰é‡å¤çš„å±æ€§ï¼Œè¦†ç›–æ—§çš„å±æ€§ å› æ­¤ï¼Œé€šè¿‡javaæ–¹æ³•ä¼ å…¥çš„å±æ€§å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œå¤–éƒ¨æ–‡ä»¶ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼Œpropertiesæ ‡ç­¾ä¸­çš„å±æ€§ä¼˜å…ˆçº§æœ€ä¸ºä½ è®¾ç½®settingsä»¥ä¸‹ä¸ºé‡è¦çš„å‡ ä¸ªé…ç½®ï¼Œéœ€è¦æŒæ¡ è®¾ç½®å æè¿° æœ‰æ•ˆå€¼ é»˜è®¤å€¼ cacheEnabled å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚ true | false true lazyLoadingEnabled å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® fetchType å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚ true | false false useGeneratedKeys å…è®¸ JDBC æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œå°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›æ•°æ®åº“é©±åŠ¨ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½†ä»å¯æ­£å¸¸å·¥ä½œï¼ˆå¦‚ Derbyï¼‰ã€‚ true | false False mapUnderscoreToCamelCase æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚ true | false False logImpl æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚ SLF4J | LOG4J(deprecated since 3.5.9) | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING æœªè®¾ç½® ç±»å‹åˆ«åtypeAliasesåœ¨æ˜ å°„å™¨XMLæ–‡ä»¶ä¸­ï¼ŒresultTypeå±æ€§åœ¨é…ç½®äº†ç±»å‹åˆ«ååï¼Œå¯ä»¥ä¸éœ€è¦å†™å…¨é™å®šåï¼Œå¯ä»¥å†™åœ¨è¿™é‡Œèµ·çš„åˆ«å åœ¨æ­¤åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½è¢«é»˜è®¤èµ·åˆ«åä¸ºç±»åå¼€å¤´å°å†™ï¼Œè¯¥é»˜è®¤å€¼è¢«æ³¨è§£@Alias()è¦†ç›– 123&lt;typeAliases&gt; &lt;package name=&quot;com.lizhi.pojo&quot;/&gt;&lt;/typeAliases&gt; å¯ä»¥å•ç‹¬ä¸ºä¸€ä¸ªç±»èµ·åˆ«åï¼Œ 123&lt;typeAliases&gt; &lt;typeAlias type=&quot;com.lizhi.pojo.Teacher&quot; alias=&quot;teacher&quot;/&gt;&lt;/typeAliases&gt; ä¸‹é¢ä¸ºä¸€äº›å¸¸è§çš„javaç±»å‹å†…å»ºçš„ç±»å‹åˆ«å åˆ«å æ˜ å°„çš„ç±»å‹ _byte byte _long long _short short _int int _integer int _double double _float float _boolean boolean string String byte Byte long Long short Short int Integer integer Integer double Double float Float boolean Boolean date Date map Map ç¯å¢ƒé…ç½®Environmentsmybatiså¯ä»¥é…ç½®å¤šå¥—ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åˆ©äºå°†SQLæ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­ã€‚å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿæˆç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ã€‚ 1234567891011&lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt;&lt;/environments&gt; æ³¨æ„ä¸€äº›å…³é”®ç‚¹ environmentçš„idå±æ€§ï¼Œè¯¥å±æ€§æ˜¯å”¯ä¸€æ€§æ ‡è¯†ç¯å¢ƒçš„å€¼ åœ¨environmentsçš„defaultå±æ€§ä¸­é€šè¿‡idæŒ‡å®šç¯å¢ƒé…ç½® äº‹åŠ¡ç®¡ç†å™¨transactionManagertypeæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨ mybatisä¸­æœ‰ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯type &#x3D; â€œJDBC|MANAGEDâ€ï¼‰ JDBC-è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº†JDBCçš„æäº¤å’Œå›æ»šæœºåˆ¶ï¼Œä¾èµ–äºæ•°æ®æºçš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ç®¡ç†ä½œç”¨åŸŸ MANAGED-è¿™ä¸ªé…ç½®å‡ ä¹ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸€èˆ¬ä¸é€‰ç”¨ å¦‚æœä½¿ç”¨mybatis+Spring åˆ™æ²¡æœ‰å¿…è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå› ä¸ºSpringæ¨¡å—ä¼šä½¿ç”¨è‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨æ¥è¦†ç›–æ­¤é…ç½® æ•°æ®æºdataSourcetypeæŒ‡å®šæ•°æ®æºç±»å‹ dataSourceå…ƒç´ ä½¿ç”¨æ ‡å‡†çš„JDBCæ•°æ®æºæ¥å£æ¥é…ç½®JDBCè¿æ¥å¯¹è±¡çš„èµ„æº æœ‰ä¸‰ç§å†…ç½®çš„æ•°æ®æºæ ¼å¼ UNPOOLEDè¿™ä¸ªæ•°æ®æºçš„å®ç°æ¯æ¬¡è¿æ¥ä¼šæ‰“å¼€å’Œå…³é—­è¿æ¥ä¼šæœ‰ç‚¹æ…¢ï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å‹åº”ç”¨å·²ç»è¶³å¤Ÿäº†ï¼Œ æ­¤ç±»å‹çš„æ•°æ®æºåªéœ€è¦é…ç½®ä»¥ä¸‹å‡ ç§å±æ€§ driver â€“ è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåï¼ˆå¹¶ä¸æ˜¯ JDBC é©±åŠ¨ä¸­å¯èƒ½åŒ…å«çš„æ•°æ®æºç±»ï¼‰ã€‚ url â€“ è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚ username â€“ ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€‚ password â€“ ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚ defaultTransactionIsolationLevel â€“ é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ defaultNetworkTimeout â€“ ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ POOLEDè¿™ä¸ªæ•°æ®æºçš„å®ç°åˆ©ç”¨äº†æ± çš„æ¦‚å¿µå°†JDBCçš„è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹çš„æ—¶å€™æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ï¼Œå¯ä»¥ä½¿webåº”ç”¨å“åº”é€Ÿåº¦å˜å¿«ï¼Œè¯¥ç±»å‹çš„æ•°æ®æºé™¤äº†ä»¥ä¸ŠUNPOOLEDçš„å±æ€§å¤–è¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨é…ç½® poolMaximumActiveConnections â€“ åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10 poolMaximumIdleConnections â€“ ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚ poolTimeToWait â€“ è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚ JNDI(ç”¨å¾—å°‘ï¼Œç•¥)","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"https://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"MyBatiså…¥é—¨","slug":"MyBatiså…¥é—¨","date":"2022-01-26T15:43:33.000Z","updated":"2022-10-04T13:54:08.504Z","comments":true,"path":"javaEE/MyBatis/2022/01/26/MyBatiså…¥é—¨/","link":"","permalink":"https://li-zhi.net.cn/javaEE/MyBatis/2022/01/26/MyBatis%E5%85%A5%E9%97%A8/","excerpt":"","text":"MyBatiså›é¡¾JDBC æ³¨å†Œé©±åŠ¨ è·å–è¿æ¥ è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡ æ‰§è¡ŒSQLï¼Œæ“ä½œæ•°æ®åº“ å¤„ç†ç»“æœé›† å…³é—­è¿æ¥ Connectionå¯ä»¥è·å¾—PreparedStatementæˆ–è€…Statement ResultSetæ˜¯SQLè¯­å¥æ‰§è¡Œåè¿”å›çš„å¯¹è±¡ PreparedStatementå’ŒStatementæ˜¯ç”¨æ¥æ‰§è¡ŒSQLè¯­å¥çš„å¯¹è±¡ ä¸¤è€…çš„åŒºåˆ«ï¼š PreparedStatementå¯¹SQLè¯­å¥åšäº†é¢„ç¼–è¯‘ï¼Œå¾ˆå¥½çš„è§£å†³äº†SQLæ³¨å…¥çš„é—®é¢˜ã€‚ Statementæ˜¯å•çº¯çš„å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œä¼šäº§ç”ŸSQLæ³¨å…¥çš„é—®é¢˜ ç®€ä»‹Defï¼š MyBatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚çš„æ¡†æ¶ï¼Œæ”¯æŒå®šåˆ¶åŒ–SQLè¯­å¥ï¼Œå­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ï¼Œå¤§å¤§ç®€åŒ–äº†JDBCçš„ç¬¨é‡çš„ä»£ç ã€‚ MyBatiså¯ä»¥ä½¿ç”¨XMLé…ç½®æ–‡ä»¶æˆ–è€…æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œpojoï¼ˆPlain Object Java Objectï¼‰ æŒä¹…å±‚æ˜¯ä»€ä¹ˆï¼ŸæŒä¹…å±‚æ˜¯ä¸€ä¸ªå°†åº”ç”¨ä¸­äº§ç”Ÿçš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“çš„è¿‡ç¨‹ æ€è·¯ï¼šå¯¼å…¥ä¾èµ–â€”ã€‹ç¼–å†™ä»£ç â€”ã€‹æµ‹è¯• 12345&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.7&lt;/version&gt;&lt;/dependency&gt; å…¥é—¨MyBatisä¸­æœ€é‡è¦çš„ä¸‰ä¸ªç±» SqlSessionFactoryBuilder SqlSessionFactory SqlSession æ¯ä¸ªåŸºäºMyBatisçš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ªSqlSessionFactoryå®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚è¿™ä¸ªå®ä¾‹éœ€è¦é€šè¿‡SqlSessionFactoryBuilderåŠ è½½é…ç½®æ–‡ä»¶è·å¾—ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è·å¾—ï¼Œç¬¬ä¸€ç§æ˜¯ä»¥XMLæ–‡ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œç¬¬äºŒç§æ˜¯åœ¨javaä»£ç å¯¹è±¡çš„å½¢å¼å­˜åœ¨ æ„å»ºSqlSessionFactory mybatis-config.xmlé…ç½®æ„å»ºSqlSessionFactoryæ‰€éœ€è¦çš„å‚æ•° 1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt;&lt;/configuration&gt; åœ¨javaä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡SqlSessionFactoryBuilderæ„å»ºSqlSessionFactoryå®ä¾‹ 123String resource=&quot;mybatis-config.xml&quot;;InputStream inputStream = Resources.getResourceAsStream(resource);SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); é€šè¿‡javaä»£ç é…ç½®ä¸æ¨èï¼Œç•¥ æ„å»ºSqlSessionSqlSessionï¼Œé€šè¿‡æ­¤å¯¹è±¡è·å¾—æ¥å£çš„æ˜ å°„å™¨å®ä¾‹ï¼Œè¯¥æ˜ å°„å¯¹è±¡å¯¹æ ‡JDBCä¸­æ¥å£çš„å®ç°ç±» 123456//å¼€å¯ä¸€ä¸ªsqlSessionå¯¹è±¡ï¼Œé»˜è®¤å…³é—­è‡ªåŠ¨æäº¤äº‹åŠ¡SqlSession sqlSession = sqlSessionFactory.openSession();//å¼€å¯è‡ªåŠ¨æäº¤äº‹åŠ¡SqlSession sqlSession = sqlSessionFactory.openSession(true);TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class); æ˜ å°„SQLè¯­å¥ é€šè¿‡XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼å’Œæ¥å£åšç»‘å®šï¼Œå®ç°æ¥å£æ–¹æ³• 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lizhi.mapper.TeacherMapper&quot;&gt; &lt;select id=&quot;listTeachers&quot; resultType=&quot;com.lizhi.pojo.Teacher&quot;&gt; SELECT * FROM teacher &lt;/select&gt;&lt;/mapper&gt; mapperæ ‡ç­¾çš„namespaceå±æ€§æŒ‡å‘è¢«ç»‘å®šçš„æ¥å£ æ ‡ç­¾å†…ä¹¦å†™SQLè¯­å¥ï¼Œidä¸ºæ¥å£ä¸­çš„æ–¹æ³•å selectæ ‡ç­¾å®ç°selectæ–¹æ³• insertæ ‡ç­¾å®ç°insertæ–¹æ³• updateæ ‡ç­¾å®ç°updateæ–¹æ³• deleteæ ‡ç­¾å®ç°deleteæ–¹æ³• é€šè¿‡æ³¨è§£çš„æ–¹å¼å®ç°SQLæ˜ å°„ 12@Select(&quot;SELECT * FROM teacher WHERE id = #&#123;id&#125;&quot;)Teacher getTeacherById(int id); é€‰æ‹©ä½•ç§æ–¹å¼å®ç°SQLæ˜ å°„ï¼Œå–å†³äºè‡ªèº«ã€‚ ä½†æ˜¯å¦‚æœSQLå¤æ‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¸è¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œä½¿ç”¨XMLçš„æ–¹å¼å»åšSQLæ˜ å°„ ä¸‰ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸï¼ˆScopeï¼‰ SqlSessionFactoryBuilder è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡è¯»å–ä¸€äº›é…ç½®è·å–SqlSessionFactoryå®ä¾‹å¯¹è±¡ã€‚ æˆ‘ä»¬æ²¡æœ‰ç†ç”±ä¸€ç›´ä¿ç•™å®ƒï¼Œå› ä¸ºSqlSessionFactoryå°†è¢«ä¿å­˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä»¥ä¿è¯æ‰€æœ‰çš„XMLè§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™åšå…¶ä»–äº‹æƒ…ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸŸåº”è¯¥æ˜¯å±€éƒ¨å˜é‡ SqlSession è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡getMapperæ–¹æ³•è·å–æ˜ å°„å™¨å®ä¾‹ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„SqlSessionå¯¹è±¡ï¼Œå› ä¸ºè¯¥å¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤å®ƒæ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³ä½œç”¨åŸŸæ˜¯å±€éƒ¨å˜é‡ã€‚ åœ¨webæ¡†æ¶ä¸­ï¼Œå¯ä»¥å°†å…¶æ”¾åˆ°requestçš„ä½œç”¨åŸŸä¸­ï¼Œè¿”å›ä¸€ä¸ªå“åº”å‰ï¼Œå…³é—­SqlSessionå¯¹è±¡ï¼Œè¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ SqlSessionFactory è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡openSessionæ–¹æ³•è·å–SqlSessionå¯¹è±¡ã€‚ å› ä¸ºSqlSessionå¯¹è±¡æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“éƒ½éœ€è¦ä¸€ä¸ªæ–°çš„SqlSessionå¯¹è±¡ï¼Œæ—¢ç„¶SqlSessionFactoryBuilderçš„ä½œç”¨åŸŸä¸ºå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡åˆ›å»ºå‡ºæ¥SqlSessionFactoryå¯¹è±¡çš„æ—¶å€™ï¼Œå°±å¯ä»¥å°†å…¶ä¿å­˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä¸‹æ¬¡å°±ä¸éœ€è¦å†åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡äº†ï¼Œæ‰€ä»¥SqlSessionFactoryçš„æœ€ä½³ä½œç”¨åŸŸæ˜¯å…¨å±€å”¯ä¸€å˜é‡ã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"https://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"Maven","slug":"Maven","date":"2022-01-26T15:36:37.000Z","updated":"2022-10-04T13:54:01.800Z","comments":true,"path":"javaEE/Maven/2022/01/26/Maven/","link":"","permalink":"https://li-zhi.net.cn/javaEE/Maven/2022/01/26/Maven/","excerpt":"","text":"MavenMavenç®€ä»‹å­¦mavené¦–å…ˆè®°ä½ä¸€å¥è¯ï¼Œçº¦å®šå¤§äºé…ç½® Mavenæ˜¯ä»€ä¹ˆ æœ¬è´¨æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå°†é¡¹ç›®å¼€å‘å’Œç®¡ç†è¿‡ç¨‹æŠ½è±¡æˆä¸€ä¸ªé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆpomï¼‰ POM(Project Object Model)ï¼šé¡¹ç›®å¯¹è±¡æ¨¡å‹ pom.xmlâ€”&gt;é¡¹ç›®ç®¡ç†æ¨¡å‹â€”â€”&gt;ä¾èµ–ç®¡ç†ï¼ˆDependencyï¼‰â€”&gt;æœ¬åœ°ä»“åº“â€”&gt;ç§æœä»“åº“â€”&gt;ä¸­å¤® Mavenæœ‰ä»€ä¹ˆç”¨ é¡¹ç›®æ„å»ºï¼šæä¾›æ ‡å‡†åŒ–ï¼Œè·¨å¹³å°çš„è‡ªåŠ¨åŒ–é¡¹ç›®æ„å»ºæ–¹å¼ ä¾èµ–ç®¡ç†ï¼šæ–¹ä¾¿å¿«æ·çš„ç®¡ç†é¡¹ç›®ä¾èµ–çš„èµ„æºåŒ…ï¼Œé¿å…èµ„æºé—´çš„ç‰ˆæœ¬å†²çªé—®é¢˜ ç»Ÿä¸€å¼€å‘ç»“æ„ï¼šæä¾›æ ‡å‡†çš„ï¼Œç»Ÿä¸€çš„é¡¹ç›®ç»“æ„ ä¸‹è½½ä¸å®‰è£… å®˜ç½‘ï¼šhttp://maven.apache.org/ ä¸‹è½½åœ°å€ï¼šhttp://maven.apache.org/download.cgi Mavenç¯å¢ƒé…ç½® ä¾èµ–javaï¼Œæ‰€ä»¥éœ€è¦JAVA_HOME è®¾ç½®Mavenè‡ªèº«çš„è¿è¡Œç¯å¢ƒï¼Œéœ€è¦é…ç½®MAVEN_HOME MavenåŸºç¡€æ¦‚è¦ä»“åº“ä»“åº“ï¼šç”¨äºå­˜å‚¨èµ„æºï¼ŒåŒ…å«å„ç§jaråŒ… ä»“åº“åˆ†ç±» æœ¬åœ°ä»“åº“ï¼šè‡ªå·±ç”µè„‘ä¸Šçš„å­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œè¿æ¥è¿œç¨‹ä»“åº“è·å–èµ„æº è¿œç¨‹ä»“åº“ï¼šéæœ¬æœºä¸Šçš„ä»“åº“ï¼Œä¸ºæœ¬åœ°ä»“åº“æä¾›èµ„æº ä¸­å¤®ä»“åº“ï¼šç”±Mavenå›¢é˜Ÿç»´æŠ¤ï¼Œå­˜å‚¨æ‰€æœ‰å¼€æºèµ„æºçš„ä»“åº“ ç§æœï¼šéƒ¨é—¨&#x2F;å…¬å¸èŒƒå›´å†…å­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œä»ä¸­å¤®ä»“åº“ä¸­è·å–èµ„æº ç§æœçš„ä½œç”¨ ä¿æŠ¤å…·æœ‰ç‰ˆæƒçš„èµ„æºï¼ŒåŒ…å«è´­ä¹°æˆ–è€…è‡ªä¸»ç ”å‘çš„jar ä¸­å¤®ä»“åº“ä¸­çš„jaréƒ½æ˜¯å¼€æºçš„ï¼Œä¸èƒ½å­˜å‚¨å…·æœ‰ç‰ˆæƒçš„èµ„æº ä¸€å®šèŒƒå›´å†…å…±äº«èµ„æºï¼Œå°±å¯¹å†…å¼€æ”¾ï¼Œä¸å¯¹å¤–å¼€æ”¾ åæ ‡GAV åæ ‡ï¼šMavenä¸­çš„åæ ‡ä¸»è¦ç”¨äºæè¿°ä»“åº“ä¸­èµ„æºçš„ä½ç½®ï¼Œè®°ä½è¿™ä¸ªç½‘ç«™ https://mvnrepository.com/ Mavenä¸»è¦ç»„æˆéƒ¨åˆ† groupIdï¼šå®šä¹‰å½“å‰é¡¹ç›®éš¶å±çš„ç»„ç»‡åç§°ï¼ˆé€šå¸¸æ˜¯åŸŸååå†™ org.mybatisï¼‰ artifactIdï¼šå®šä¹‰è¯¥é¡¹ç›®çš„é¡¹ç›®åç§°ï¼ˆé€šå¸¸æ˜¯æ¨¡å—åç§°ï¼‰ versionï¼šå®šä¹‰å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å· packagingï¼šå®šä¹‰è¯¥é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ ä½œç”¨ï¼šä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼Œå”¯ä¸€æ€§å®šä½èµ„æºä½ç½®ï¼Œé€šè¿‡è¯¥æ ‡è¯†å¯ä»¥å°†èµ„æºçš„è¯†åˆ«ä¸ä¸‹è½½å·¥ä½œäº¤ç”±æœºå™¨å®Œæˆ æœ¬åœ°ä»“åº“é…ç½®mavené»˜è®¤çš„æœ¬åœ°ä»“åº“ç›®å½•åœ¨cç›˜ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹çš„.m2æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœ‰éœ€è¦ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªè¡Œé…ç½®ã€‚ åœ¨è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘éœ€è¦å°†D:\\APP\\Maven\\mvn-repoè¯¥ç›®å½•ä½œä¸ºæˆ‘çš„mavenæœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚ åˆ›å»ºmvn-repoæ–‡ä»¶å¤¹ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­åˆ›å»ºrepositoryç›®å½• åœ¨mavenå®‰è£…æ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°settings.xmlæ‰¾åˆ°ä»¥ä¸‹é…ç½®æ‰€åœ¨ï¼Œç…§ç€ä»¥ä¸‹é…ç½®ä¿®æ”¹ 12345678910//è¿™é‡Œæ”¹æˆè‡ªå·±éœ€è¦é…ç½®çš„ä»“åº“ç›®å½•&lt;localRepository&gt;D:\\APP\\Maven\\mvn-repo\\repository&lt;/localRepository&gt;//é˜¿é‡Œäº‘çš„é•œåƒæœåŠ¡å™¨ï¼Œä¼šåŠ å¿«jaråŒ…çš„ä¸‹è½½é€Ÿåº¦ï¼Œç›´æ¥å¤åˆ¶å³å¯&lt;mirrors&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirrors&gt; å°†æ­¤ä»½é…ç½®æ–‡ä»¶ä¿å­˜å¹¶å¤åˆ¶åˆ°mvn-repoæ–‡ä»¶å¤¹ä¸­ å…¨å±€settingï¼ˆmavençš„configä¸­çš„settingæ–‡ä»¶ï¼‰å’Œç”¨æˆ·settingï¼ˆå°½é‡å’Œå…¨å±€settingä¸€æ ·ï¼‰åŒºåˆ« å…¨å±€settingå®šä¹‰äº†å½“å‰è®¡ç®—æœºä¸­Mavençš„å…¬å…±é…ç½® ç”¨æˆ·settingå®šä¹‰äº†å½“å‰ç”¨æˆ·çš„é…ç½® åˆ›å»ºmavené¡¹ç›®æ‰‹å·¥æ™®é€šmavenå·¥ç¨‹ 123456mvn archetype:generate -DgroupId = com.lizhi -DartifactId = project -DarchetypeArtifactId = maven-archetype-quickstart -Dversion = 0.0.1-snapshot -DinteractiveMode = false webå·¥ç¨‹ 123456mvn archetype:generate -DgroupId = com.lizhi -DartifactId = project -DarchetypeArtifactId = maven-archetype-webapp -Dversion = 0.0.1-snapshot -DinteractiveMode = false ä¾èµ–ç®¡ç†ä¾èµ–é…ç½®123456789101112&lt;!--è®¾ç½®å½“å‰é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–--&gt;&lt;dependencies&gt; &lt;!--è®¾ç½®å…·ä½“çš„ä¾èµ–--&gt; &lt;dependency&gt; &lt;!--ä¾èµ–æ‰€å±çš„ç¾¤ç»„id--&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;!--ä¾èµ–æ‰€å±çš„é¡¹ç›®id--&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;!--ä¾èµ–çš„ç‰ˆæœ¬å·--&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä¾èµ–ä¼ é€’ä¾èµ–å…·æœ‰ä¼ é€’æ€§ ç›´æ¥ä¼ é€’ï¼šåœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œé€šè¿‡ä¾èµ–é…ç½®å»ºç«‹çš„ä¾èµ–å…³ç³» é—´æ¥å…³ç³»ï¼šè¢«ä¾èµ–çš„èµ„æºå¦‚æœä¾èµ–å…¶ä»–çš„èµ„æºï¼Œå½“å‰é¡¹ç›®é—´æ¥ä¾èµ–å…¶ä»–é¡¹ç›® ä¾èµ–å†²çª è·¯å¾„ä¼˜å…ˆï¼šå½“ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„èµ„æºæ—¶ï¼Œå±‚æ¬¡è¶Šæ·±ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå±‚æ¬¡è¶Šæµ…ï¼Œä¼˜å…ˆçº§è¶Šé«˜ å£°æ˜ä¼˜å…ˆï¼šå½“èµ„æºåœ¨ç›¸åŒå±‚æ¬¡è¢«ä¾èµ–æ—¶ï¼Œé…ç½®é¡ºåºé å‰çš„è¦†ç›–é¡ºåºé åçš„ ç‰¹æ®Šä¼˜å…ˆï¼šå½“åŒçº§é…ç½®äº†ç›¸åŒèµ„æºçš„ä¸åŒç‰ˆæœ¬ï¼Œåé…ç½®çš„è¦†ç›–å…ˆé…ç½®çš„ å¯é€‰ä¾èµ–ï¼ˆä¸»åŠ¨è¡¨ç¤ºæ–­å¼€ï¼‰123456789&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;!--ä¸é€æ˜--&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt; æ’é™¤ä¾èµ–ï¼ˆä¸»åŠ¨æ–­å¼€ï¼‰ æ’é™¤ä¾èµ–æŒ‡çš„æ˜¯ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æºï¼Œè¢«æ’é™¤çš„èµ„æºæ— éœ€æŒ‡å®šç‰ˆæœ¬â€”ä¸éœ€è¦ 12345678910111213&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.hamcrest&lt;/groupId&gt; &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä¾èµ–èŒƒå›´12345678&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies ä¾èµ–çš„jaråŒ…é»˜è®¤æƒ…å†µä¸‹å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡scopeæ ‡ç­¾è®¾å®šèµ·ä½œç”¨èŒƒå›´ ä½œç”¨èŒƒå›´ ä¸»ç¨‹åºèŒƒå›´æœ‰æ•ˆï¼ˆmainæ–‡ä»¶èŒƒå›´å†…ï¼‰ æµ‹è¯•èŒƒå›´æœ‰æ•ˆï¼ˆtestæ–‡ä»¶å¤¹èŒƒå›´ï¼‰ æ˜¯å¦å‚ä¸æ‰“åŒ…ï¼ˆpackageæŒ‡ä»¤èŒƒå›´å†…ï¼‰ scope ä¸»ä»£ç  æµ‹è¯•ä»£ç  æ‰“åŒ… ç¤ºä¾‹ compile Y Y Y log4j test Y junit provided Y Y servlet-api runtime Y jdbc ä¾èµ–èŒƒå›´çš„ä¼ é€’æ€§ å¸¦æœ‰ä¾èµ–èŒƒå›´çš„èµ„æºåœ¨è¿›è¡Œä¼ é€’çš„æ—¶å€™ï¼Œä½œç”¨èŒƒå›´å°†ä¼šå—åˆ°å½±å“ è¡Œæ˜¯ç›´æ¥ä¾èµ–ï¼Œåˆ—æ˜¯é—´æ¥ä¾èµ– compile test provided runtime compile compile test provided runtime test provided runtime runtime test provided runtime ç”Ÿå‘½å‘¨æœŸä»¥åŠæ’ä»¶ç”Ÿå‘½å‘¨æœŸ Mavenå¯¹é¡¹ç›®æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ä¸º3å¥— cleanï¼šæ¸…ç†å·¥ä½œ defaultï¼šæ ¸å¿ƒå·¥ä½œï¼Œä¾‹å¦‚ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰ siteï¼šäº§ç”ŸæŠ¥å‘Šï¼Œå‘å¸ƒç«™ç‚¹ç­‰ cleanç”Ÿå‘½å‘¨æœŸ pre-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹å‰ç«‹å³å®Œæˆçš„å·¥ä½œ clean ç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„ä»¶ç”Ÿæˆçš„æ–‡ä»¶ post-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹åç«‹å³å®Œæˆçš„å·¥ä½œ defaultç”Ÿå‘½å‘¨æœŸ siteç”Ÿå‘½å‘¨æœŸ pre-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ site ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ post-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡å·¥ä½œ site-deploy å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šæœåŠ¡å™¨ä¸Šé¢å» æ’ä»¶ æ’ä»¶ä¸ç”Ÿå‘½å‘¨æœŸå†…çš„é˜¶æ®µç»‘å®šï¼Œåœ¨æ‰§è¡Œåˆ°å¯¹åº”ç”Ÿå‘½å‘¨æœŸæ—¶æ‰§è¡Œå¯¹åº”çš„æ’ä»¶åŠŸèƒ½ é»˜è®¤mavenåœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸Šç»‘å®šæœ‰é¢„è®¾çš„åŠŸèƒ½ é€šè¿‡æ’ä»¶å¯ä»¥è‡ªå®šä¹‰å…¶ä»–åŠŸèƒ½","categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Maven","slug":"javaEE/Maven","permalink":"https://li-zhi.net.cn/categories/javaEE/Maven/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://li-zhi.net.cn/tags/Maven/"}]},{"title":"first","slug":"first","date":"2022-01-16T10:39:26.000Z","updated":"2022-10-04T13:52:45.460Z","comments":true,"path":"uncategorized/2022/01/16/first/","link":"","permalink":"https://li-zhi.net.cn/uncategorized/2022/01/16/first/","excerpt":"","text":"æµ‹è¯•åšå®¢çš„å‘å¸ƒ","categories":[],"tags":[]}],"categories":[{"name":"javaEE","slug":"javaEE","permalink":"https://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"https://li-zhi.net.cn/categories/javaEE/Linux/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"æŠ€å·§ç¯‡","slug":"ç®—æ³•/æŠ€å·§ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E6%8A%80%E5%B7%A7%E7%AF%87/"},{"name":"åˆ·é¢˜ç¯‡","slug":"ç®—æ³•/åˆ·é¢˜ç¯‡","permalink":"https://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E7%AF%87/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"https://li-zhi.net.cn/categories/javaEE/JUC/"},{"name":"Docker","slug":"javaEE/Docker","permalink":"https://li-zhi.net.cn/categories/javaEE/Docker/"},{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"https://li-zhi.net.cn/categories/javaEE/JVM/"},{"name":"JavaScript","slug":"å‰ç«¯/JavaScript","permalink":"https://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"https://li-zhi.net.cn/categories/javaEE/Redis/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringBoot/"},{"name":"å¤šçº¿ç¨‹","slug":"javaEE/å¤šçº¿ç¨‹","permalink":"https://li-zhi.net.cn/categories/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"https://li-zhi.net.cn/categories/javaEE/SpringMVC/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"https://li-zhi.net.cn/categories/javaEE/MyBatis/"},{"name":"Spring","slug":"javaEE/Spring","permalink":"https://li-zhi.net.cn/categories/javaEE/Spring/"},{"name":"Maven","slug":"javaEE/Maven","permalink":"https://li-zhi.net.cn/categories/javaEE/Maven/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://li-zhi.net.cn/tags/Linux/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"},{"name":"å¹¶å‘","slug":"å¹¶å‘","permalink":"https://li-zhi.net.cn/tags/%E5%B9%B6%E5%8F%91/"},{"name":"Docker","slug":"Docker","permalink":"https://li-zhi.net.cn/tags/Docker/"},{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"https://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"Vue","slug":"Vue","permalink":"https://li-zhi.net.cn/tags/Vue/"},{"name":"JVM","slug":"JVM","permalink":"https://li-zhi.net.cn/tags/JVM/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://li-zhi.net.cn/tags/JavaScript/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Redis","slug":"Redis","permalink":"https://li-zhi.net.cn/tags/Redis/"},{"name":"JUC","slug":"JUC","permalink":"https://li-zhi.net.cn/tags/JUC/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://li-zhi.net.cn/tags/SpringBoot/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://li-zhi.net.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://li-zhi.net.cn/tags/SpringMVC/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://li-zhi.net.cn/tags/MyBatis/"},{"name":"Spring","slug":"Spring","permalink":"https://li-zhi.net.cn/tags/Spring/"},{"name":"Maven","slug":"Maven","permalink":"https://li-zhi.net.cn/tags/Maven/"}]}