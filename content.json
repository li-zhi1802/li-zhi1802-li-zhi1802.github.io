{"meta":{"title":"èŠéº»çš„blog","subtitle":"ç™¾ äº‹ å¯ ä¹","description":"èŠéº»çš„blog","author":"èŠéº»","url":"http://li-zhi.net.cn","root":"/"},"pages":[{"title":"about","date":"2022-01-26T14:34:59.000Z","updated":"2022-01-26T14:35:42.811Z","comments":true,"path":"about/index.html","permalink":"http://li-zhi.net.cn/about/index.html","excerpt":"","text":"è¿™ä¸ªæ˜¯abouté¡µé¢"},{"title":"æœ‰æ–™","date":"2022-01-26T14:36:13.000Z","updated":"2022-06-11T06:16:04.478Z","comments":true,"path":"sometips/index.html","permalink":"http://li-zhi.net.cn/sometips/index.html","excerpt":"","text":"Springæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ¨¡æ¿1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt; SpringMVCçš„web.xmlæ¨¡æ¿123456789101112131415161718192021222324252627282930313233&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; æ•°æ®åº“æ¨¡æ¿é…ç½®æ–‡ä»¶123spring.datasource.url=jdbc:mysql://locoalhost:3306/dbname?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf8spring.datasource.username=rootspring.datasource.password=123456 MyBatisé…ç½®æ–‡ä»¶çš„æ¨¡æ¿æ ¸å¿ƒé…ç½®æ–‡ä»¶1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;/configuration&gt; æ˜ å°„å™¨xmlæ–‡ä»¶123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.youkeda.comment.dao.UserDAO&quot;&gt;&lt;/mapper&gt; druidè¿æ¥æ± é…ç½®æ–‡ä»¶mavenåæ ‡12345678910&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.2.8&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.2.8&lt;/version&gt;&lt;/dependency&gt; ä¸€éƒ¨åˆ†æ ¸å¿ƒé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334spring: datasource: username: root password: 123456 url: jdbc:mysql://localhost:3306/dbName?serverTimezone=UTC&amp;useUnicodestrue&amp;characterEncoding=utf-8 driver-class-name: com.mysql.cj.jdbc.Driver type: com.alibaba.druid.pool.DruidDataSource #Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š #druid druidç‰¹æœ‰é…ç½® druid: initialSize: 5 minIdle: 5 maxActive: 20 maxwait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true #é…ç½®ç›‘æ§ç»Ÿè®¡æ æˆªçš„filtersï¼Œstat: ç›‘æ§ç»Ÿè®¡ã€Log4j: æ—¥å¿—è®°å½•ã€wall: é˜²å¾¡sqLæ³¨å…¥ #å¦‚æœå…è®¸æ—¶æŠ¥å€Ÿ java.Lang.CLassNotFoundException: org.apache.Log4j.Priority filters: stat,wall,log4j maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourcestat: true connectionProperties: druid.stat.mergesqletrue;druid.stat.slowSq1Millis=500 stat-view-servlet: enabled: true url-pattern: /druid/* login-password: admin login-username: 123456 allow: deny: åå°ç›‘æ§é¡µé¢ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½® 12345678910@Beanpublic ServletRegistrationBean statViewServlet()&#123; ServletRegistrationBean&lt;Servlet&gt; bean = new ServletRegistrationBean&lt;&gt;(new StatViewServlet(),&quot;/druid/*&quot;); Map&lt;String, String&gt; params = new HashMap&lt;&gt;(); params.put(&quot;loginUserName&quot;,&quot;admin&quot;); params.put(&quot;loginPassword&quot;,&quot;123456&quot;); params.put(&quot;allow&quot;,&quot;localhost&quot;); bean.setInitParameters(params); return bean;&#125; å»é™¤druidçš„å¹¿å‘Š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package com.lizhi.springbootdata;import com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure;import com.alibaba.druid.spring.boot.autoconfigure.properties.DruidStatProperties;import com.alibaba.druid.util.Utils;import org.springframework.boot.autoconfigure.AutoConfigureAfter;import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import javax.servlet.FilterConfig;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;import javax.servlet.*;import java.io.IOException;@Configuration@ConditionalOnWebApplication@AutoConfigureAfter(DruidDataSourceAutoConfigure.class)@ConditionalOnProperty(name = &quot;spring.datasource.druid.stat-view-servlet.enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)public class RemoveDruidAdConfig &#123; /** * æ–¹æ³•å: removeDruidAdFilterRegistrationBean * æ–¹æ³•æè¿°: é™¤å»é¡µé¢åº•éƒ¨çš„å¹¿å‘Š * @param properties * @return org.springframework.boot.web.servlet.FilterRegistrationBean * @throws */ @Bean public FilterRegistrationBean removeDruidAdFilterRegistrationBean(DruidStatProperties properties) &#123; // è·å–webç›‘æ§é¡µé¢çš„å‚æ•° DruidStatProperties.StatViewServlet config = properties.getStatViewServlet(); // æå–common.jsçš„é…ç½®è·¯å¾„ String pattern = config.getUrlPattern() != null ? config.getUrlPattern() : &quot;/druid/*&quot;; String commonJsPattern = pattern.replaceAll(&quot;\\\\*&quot;, &quot;js/common.js&quot;); final String filePath = &quot;support/http/resources/js/common.js&quot;; //åˆ›å»ºfilterè¿›è¡Œè¿‡æ»¤ Filter filter = new Filter() &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; chain.doFilter(request, response); // é‡ç½®ç¼“å†²åŒºï¼Œå“åº”å¤´ä¸ä¼šè¢«é‡ç½® response.resetBuffer(); // è·å–common.js String text = Utils.readFromResource(filePath); // æ­£åˆ™æ›¿æ¢banner, é™¤å»åº•éƒ¨çš„å¹¿å‘Šä¿¡æ¯ text = text.replaceAll(&quot;&lt;a.*?banner\\&quot;&gt;&lt;/a&gt;&lt;br/&gt;&quot;, &quot;&quot;); text = text.replaceAll(&quot;powered.*?shrek.wang&lt;/a&gt;&quot;, &quot;&quot;); response.getWriter().write(text); &#125; @Override public void destroy() &#123; &#125; &#125;; FilterRegistrationBean registrationBean = new FilterRegistrationBean(); registrationBean.setFilter(filter); registrationBean.addUrlPatterns(commonJsPattern); return registrationBean; &#125;&#125; GitHubåŠ é€Ÿhttps://gitee.com/docmirror/dev-sidecar?_from=gitee_search é«˜è´¨é‡é¡¹ç›®https://github.com/kon9chunkit/Github-Chinese-Top-Charts#%E7%9B%AE%E5%BD%95 å®˜æ–¹æ–‡æ¡£https://docs.github.com/cn mavenä¸­èµ„æºå¯¼å‡ºå‡ºç°é—®é¢˜123456789101112131415161718192021&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå‡ºç°çš„é—®é¢˜--&gt;&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; CORSè·¨åŸŸè¯·æ±‚çš„é…ç½®1234567891011121314151617import org.springframework.context.annotation.Configuration;import org.springframework.web.servlet.config.annotation.CorsRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;@Configurationpublic class CorsConfig implements WebMvcConfigurer &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;) .allowedHeaders(&quot;*&quot;) .allowedMethods(&quot;*&quot;) .allowCredentials(true) .allowedOriginPatterns(&quot;*&quot;) .maxAge(2000); &#125;&#125; 12345678910111213141516171819202122232425import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.cors.CorsConfiguration;import org.springframework.web.cors.UrlBasedCorsConfigurationSource;import org.springframework.web.filter.CorsFilter;@Configurationpublic class CorsConfig1 &#123; private static final long MAX_AGE=24*60*60; private CorsConfiguration buildConfig()&#123; CorsConfiguration corsConfiguration = new CorsConfiguration(); corsConfiguration.addAllowedOrigin(&quot;*&quot;); corsConfiguration.addAllowedHeader(&quot;*&quot;); corsConfiguration.addAllowedMethod(&quot;*&quot;); corsConfiguration.setMaxAge(MAX_AGE); return corsConfiguration; &#125; @Bean public CorsFilter corsFilter()&#123; UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration(&quot;/**&quot;,buildConfig()); return new CorsFilter(source); &#125;&#125; SpringSessionçš„é…ç½®123456789101112131415161718192021222324252627282930import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.session.MapSessionRepository;import org.springframework.session.config.annotation.web.http.EnableSpringHttpSession;import org.springframework.session.web.http.CookieSerializer;import org.springframework.session.web.http.DefaultCookieSerializer;import java.util.concurrent.ConcurrentHashMap;@Configuration@EnableSpringHttpSessionpublic class SpringHttpSessionConfig &#123; @Bean public CookieSerializer cookieSerializer() &#123; DefaultCookieSerializer serializer = new DefaultCookieSerializer(); serializer.setCookieName(&quot;JSESSIONID&quot;); // ç”¨æ­£åˆ™è¡¨è¾¾å¼é…ç½®åŒ¹é…çš„åŸŸåï¼Œå¯ä»¥å…¼å®¹ localhostã€127.0.0.1 ç­‰å„ç§åœºæ™¯ serializer.setDomainNamePattern(&quot;^.+?\\\\.(\\\\w+\\\\.[a-z]+)$&quot;); serializer.setCookiePath(&quot;/&quot;); serializer.setUseHttpOnlyCookie(false); // æœ€å¤§ç”Ÿå‘½å‘¨æœŸçš„å•ä½æ˜¯ç§’ serializer.setCookieMaxAge(48 * 60 * 60); return serializer; &#125; @Bean public MapSessionRepository sessionRepository() &#123; return new MapSessionRepository(new ConcurrentHashMap&lt;&gt;()); &#125;&#125; Log4j æ ¸å¿ƒé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425#å°†ç­‰çº§ä¸ºDEBUGçš„å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ã€‚consoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç log4j.rootLogger=DEBUG,console,file#èŒƒåˆ¶å°å·å‡ºçš„ç›¸å…³è®¾ç½®log4j.appender.console =org.apache.log4j.ConsoleAppenderlog4j.appender.console.Target=System.outlog4j.appender.console.Threshold=DEBUglog4j.appender.console.layout =org.apache.log4j.PatternLayoutlog4j.appender.console.layout.ConversionPattern=[%c]-%m%n#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®log4j.appender.file =org.apache.log4j.RollingFileAppender#æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„ç£ç›˜è·¯å¾„log4j.appender.file.File=./log/lizhi.loglog4j.appender.file.MaxFileSize=10mblog4j.appender.file.Threshold=DEBUGlog4j.appender.file.layout=org.apache.log4j.PatternLayoutlog4j.appender.file.layout.ConversionPattern=[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n#æ—¥å»è¾“å‡ºçº§åˆ«log4j.logger.org.mybatis=DEBUGlog4j.logger.java.sql=DEBUGlog4j.logger.java.sql.Statement=DEBUGlog4j.logger.java.sql.ResultSet=DEBUGlog4j.logger.java.sql.Preparedstatement=DEBUG å­—ä½“å›¾æ ‡çš„ä½¿ç”¨ä½¿ç”¨å­—ä½“å›¾æ ‡å‰ï¼Œæ·»åŠ å­—ä½“ç”³æ˜ï¼Œå‚è€ƒå¦‚ä¸‹æˆ–è€…ç›´æ¥åœ¨style.cssæ–‡ä»¶ä¸­å¤åˆ¶ 1234567891011@font-face &#123; font-family: &#x27;icomoon&#x27;; src: url(&#x27;fonts/icomoon.eot?suef9x&#x27;); src: url(&#x27;fonts/icomoon.eot?suef9x#iefix&#x27;) format(&#x27;embedded-opentype&#x27;), url(&#x27;fonts/icomoon.ttf?suef9x&#x27;) format(&#x27;truetype&#x27;), url(&#x27;fonts/icomoon.woff?suef9x&#x27;) format(&#x27;woff&#x27;), url(&#x27;fonts/icomoon.svg?suef9x#icomoon&#x27;) format(&#x27;svg&#x27;); font-weight: normal; font-style: normal; font-display: block;&#125; è®°å¾—ä¿®æ”¹å­—ä½“ï¼ˆfont-familyï¼‰ä¸ºicomoon"},{"title":"æ ‡ç­¾","date":"2022-01-27T03:32:41.000Z","updated":"2022-06-11T06:15:58.150Z","comments":false,"path":"tags/index.html","permalink":"http://li-zhi.net.cn/tags/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2022-01-27T03:28:29.000Z","updated":"2022-06-11T06:16:15.381Z","comments":false,"path":"categories/index.html","permalink":"http://li-zhi.net.cn/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Vue2-åŸºç¡€ç¯‡1","slug":"Vue2-åŸºç¡€ç¯‡1","date":"2022-06-20T13:54:45.000Z","updated":"2022-06-21T03:34:09.579Z","comments":true,"path":"javaEE/2022/06/20/Vue2-åŸºç¡€ç¯‡1/","link":"","permalink":"http://li-zhi.net.cn/javaEE/2022/06/20/Vue2-%E5%9F%BA%E7%A1%80%E7%AF%871/","excerpt":"","text":"Vue2åŸºç¡€1å®˜ç½‘åœ°å€ï¼šhttps://cn.vuejs.org/ ç›¸ä¿¡å¤§å®¶å­¦ä¹ ä»€ä¹ˆéƒ½æ˜¯ä»¥HelloWorldå¼€å¤´çš„ï¼Œé‚£æˆ‘ä»¬å°±ä»¥ä¸€ä¸ªHelloWorldçš„æ —å­å¼€å¯æˆ‘ä»¬çš„Vueå­¦ä¹ å§ HelloWorldæ¡ˆä¾‹ä¸€ã€å®‰è£…Vue è¿™é‡Œå¤§å®¶è¦æ³¨æ„ï¼Œä¸è¦ä½¿ç”¨CLIåˆ›å»ºVueé¡¹ç›® æ–°æ‰‹é˜¶æ®µæœ€å¥½ä½¿ç”¨æ ‡ç­¾é™æ€å¼•å…¥CDNçš„æ–¹å¼æ¥å®‰è£…Vue è¿™é‡Œè¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š scriptæ ‡ç­¾çš„srcå±æ€§å¯ä»¥å†™æˆ./???.jsçš„å½¢å¼ ä¹Ÿå¯ä»¥å†™æˆä¸€ä¸ªç½‘å€ï¼Œä¸ºäº†ä½¿ç”¨è¿™ç§æ–¹å¼å¼•å…¥çš„åŠ è½½é€Ÿåº¦æ›´å¿«ä¸€ç‚¹ï¼Œæ‰€ä»¥ä½¿ç”¨äº†CDNåŠ é€Ÿ è¿™æ˜¯å®˜ç½‘æä¾›çš„ä¸¤ç§Vue.jsï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å¼€å‘ç‰ˆæœ¬çš„ä½“ç§¯æ¯”ç”Ÿäº§ç‰ˆæœ¬çš„ä½“ç§¯å¤§ï¼Œå…¶ä¸­åŒ…å«äº†å®Œæ•´çš„è­¦å‘Šå’Œè°ƒè¯•æ¨¡å¼ï¼Œåœ¨å­¦ä¹ é˜¶æ®µï¼Œæˆ‘ä»¬ä½¿ç”¨å¼€å‘ç‰ˆæœ¬çš„å³å¯ å¼•å…¥Vue.js 1&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;&gt;&lt;/script&gt; äºŒã€å®‰è£…å¼€å‘è€…å·¥å…·å®ƒæ˜¯ä¸€ä¸ªè°·æ­Œæ’ä»¶ï¼Œå¦‚æœä½ å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œå¯ä»¥ç›´æ¥åœ¨è°·æ­Œæ’ä»¶å•†åœºç›´æ¥æœç´¢ä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œæˆ‘ä¹Ÿåœ¨è¿™é‡Œæä¾›æ’ä»¶çš„æ–‡ä»¶ï¼Œ 12é“¾æ¥ï¼šhttps://pan.baidu.com/s/18AFI8MpW397L6obmKnAZCw æå–ç ï¼šiupu ç‚¹å‡»å¼€å‘è€…æ¨¡å¼ å¦‚æœä½¿ç”¨çš„æ˜¯æˆ‘æä¾›çš„æ–‡ä»¶çš„è¯ï¼Œç›´æ¥å°†crxæ–‡ä»¶æ‹–å…¥è¯¥é¡µé¢å³å¯å®‰è£…å¼€å‘è€…å·¥å…· ä¸‰ã€ä½¿ç”¨Vue123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªVueé¡µé¢&lt;/title&gt; &lt;!-- å¼•å…¥Vue --&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --&gt; &lt;div id=&quot;app&quot;&gt; &lt;!--è¿™é‡Œçš„&#123;&#123;&#125;&#125;æ˜¯Vueä¸­çš„æ’å€¼è¯­æ³•ï¼Œå¯ä»¥è¯»å–dataé…ç½®é¡¹ä¸­é…ç½®çš„æ•°æ®--&gt; &#123;&#123;msg&#125;&#125; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot; &gt; Vue.config.productionTip = false //å…³é—­vueçš„ç”Ÿäº§æç¤ºã€‚ //åˆ›å»ºVueå®ä¾‹ new Vue(&#123; el:&#x27;#app&#x27;, //elç”¨äºæŒ‡å®šå½“å‰åˆ›å»ºçš„Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼ä¸ºcssé€‰æ‹©å™¨ã€‚ data:&#123; //dataä¸­ç”¨äºå­˜å‚¨æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ•°æ®ï¼Œæ•°æ®ä¾›elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨ï¼Œå€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ msg:&#x27;Hello World&#x27; &#125; &#125;) &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; è§£é‡Šï¼š 1234567891011121314151617181920212223242526272829303132333435361ã€&#123;&#123;xxx&#125;&#125;ä¸­çš„xxxè¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”xxxå¯ä»¥è‡ªåŠ¨è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ jsè¡¨è¾¾å¼ VS jsè¯­å¥ (1)jsè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå€¼ (2)jsè¯­å¥æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œæ§åˆ¶ä»£ç èµ°å‘ if()&#123;&#125; for()&#123;&#125; switch()&#123;&#125;2ã€å®¹å™¨å’ŒVueå®ä¾‹çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„3ã€idä¸ºappçš„å®¹å™¨å†…éƒ¨çš„ä»£ç å°±æ˜¯æ¨¡æ¿4ã€ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé¡µé¢ä¸­ä½¿ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹éƒ½ä¼šè‡ªåŠ¨æ›´æ–°5ã€elçš„ä¸¤ç§å†™æ³•ï¼Œè¯¥é…ç½®çš„ä½œç”¨å«æŒ‚è½½ï¼Œå°±æ˜¯å°†åˆ›å»ºçš„Vueå®ä¾‹ä¸HTMLå…ƒç´ ç»‘å®šåœ¨ä¸€èµ· (1) el:&#x27;#app&#x27; (2) new Vue(&#123; data:&#123; msg:&#x27;Hello World&#x27; &#125; &#125;).$mount(&#x27;#app&#x27;) è¿™ä¸ª$mountæ˜¯VueåŸå‹å¯¹è±¡ä¸Šæä¾›çš„6ã€dataçš„ä¸¤ç§å†™æ³• (1) å¯¹è±¡å¼ï¼Œdataæ˜¯ä¸€ä¸ªå¯¹è±¡ data:&#123; msg:&#x27;Hello World&#x27; &#125; (2) å‡½æ•°å¼ï¼Œdataæ˜¯ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ data()&#123; return &#123; msg: &#x27;Hello World&#x27; &#125; &#125; (3) åªè¦æ˜¯Vueç®¡ç†çš„å‡½æ•°ï¼Œå…¶ä¸­çš„thiså¯¹è±¡éƒ½æ˜¯è‡ªå·±åˆ›å»ºçš„Vueå®ä¾‹å¯¹è±¡ (4) æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ˜¯å‡½æ•°å¼çš„ï¼Œå¤§å®¶è¦å¤šå†™è¿™ç§å½¢å¼çš„ï¼Œå…·ä½“åŸå› çš„è¯ï¼Œè¿™é‡ŒåŸ‹ä¸ªä¼ç¬”ï¼Œä»¥ååœ¨è®²ç»„ä»¶çš„æ—¶å€™è§£é‡Š å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨newå…³é”®è¯åˆ›å»ºVueå¯¹è±¡çš„è¯ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ æ§åˆ¶å°å°±ä¼šå‡ºç°æŠ¥é”™ å¼€å‘ç‰ˆ ç”Ÿäº§ç‰ˆ è¿™é‡Œå¯ä»¥ä½“ç°ç”Ÿäº§ç‰ˆæœ¬å’Œå¼€å‘ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ« æˆ‘ä»¬æ¥çœ‹ä¸‹Vueçš„æ„é€ å‡½æ•° 1234567function Vue (options) &#123; //å…ˆåˆ¤æ–­å½“å‰è°ƒç”¨å‡½æ•°çš„æ˜¯å¦æ˜¯Vueçš„å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™åœ¨æ§åˆ¶å°æŠ¥é”™ if (!(this instanceof Vue)) &#123; warn(&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;); &#125; this._init(options);&#125; æ¨¡æ¿è¯­æ³•åˆšåˆšæˆ‘ä»¬åœ¨å†™HelloWorldæ¡ˆä¾‹çš„æ—¶å€™ä½¿ç”¨çš„&#123;&#123;&#125;&#125;å«æ’å€¼è¯­æ³• æ¨¡æ¿è¯­æ³•ä¸€å…±ä¸¤ç§ï¼Œæ’å€¼è¯­æ³•å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œå¦ä¸€ç§æ¨¡æ¿è¯­æ³•å«æŒ‡ä»¤è¯­æ³• 1234567æ’å€¼è¯­æ³•ï¼š ä½œç”¨ï¼šè§£ææ ‡ç­¾ä½“å†…çš„å†…å®¹ å†™æ³•ï¼š&#123;&#123;xxx&#125;&#125;åŒæ‹¬å·å†…æ˜¯jsè¡¨è¾¾å¼ï¼Œå¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚ æŒ‡ä»¤è¯­æ³•ï¼š åŠŸèƒ½ï¼šè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶.....ï¼‰ã€‚ å†™æ³•ï¼šv-xxx(xxxä¸ºå…·ä½“æŒ‡ä»¤) æˆ‘ä»¬æ¥çœ‹çœ‹æŒ‡ä»¤è¯­æ³•æ˜¯ä¸ªä»€ä¹ˆä¸œä¸œ ä¸ºäº†èŠ‚çœä»£ç é‡ï¼Œè¿™é‡Œåªå†™æ ¸å¿ƒä»£ç  ä¸€ã€v-textè¿™ä¸ªæœ€ç®€å•ï¼Œå…¶ä½œç”¨å°±æ˜¯æ’å€¼è¯­æ³•ï¼Œå°†å…¶æŒ‡å®šçš„å†…å®¹æ›¿æ¢æ ‡ç­¾ä½“å†…çš„æ‰€æœ‰å†…å®¹ï¼Œä¸è§£æHTML ä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæŒ‡ä»¤v-htmlï¼Œé‚£è¿™ä¸ªæŒ‡ä»¤å°±æ˜¯å°†å†…å®¹æ”¾å…¥æ ‡ç­¾ä½“å†…åï¼Œå¦‚æœå†…å®¹æœ‰HTMLå…ƒç´ ï¼Œå®ƒä¹Ÿä¼šè§£æ äºŒã€v-bindä¸»è¦ä½¿ç”¨åœ¨ç»™HTMLå…ƒç´ å±æ€§åŠ¨æ€èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨ HTML 12345&lt;div id=&quot;app&quot;&gt; &lt;a v-bind:href=&quot;url&quot;&gt;ç‚¹æˆ‘å»&#123;&#123;name&#125;&#125;å­¦ä¹ 1&lt;/a&gt; &lt;!--è¿™æ˜¯v-bindçš„ç®€å†™æ¨¡å¼--&gt; &lt;a :href=&quot;url&quot;&gt;ç‚¹æˆ‘å»&#123;&#123;name&#125;&#125;å­¦ä¹ 2&lt;/a&gt;&lt;/div&gt; JavaScript 1234567new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; name:&#x27;ç™¾åº¦&#x27;, url:&#x27;http://www.baidu.com&#x27;, &#125;&#125;) bindçš„è‹±æ–‡æ„æ€æ˜¯ç»‘å®šï¼Œè¿™é‡Œå…ˆç†è§£ä¸€ä¸‹è¿™ä¸ªåè¯çš„æ„æ€ï¼Œè¿™é‡Œçš„v-bindæ˜¯å•å‘ç»‘å®š ä»€ä¹ˆå«å•å‘ç»‘å®šï¼Ÿ å°±æ˜¯æˆ‘åœ¨Vueå®ä¾‹ä¸­çš„dataä¸­çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œé¡µé¢ä¸­çš„æ•°æ®å°±ä¼šè·Ÿç€æ›´æ–°ï¼Œ ä½†æ˜¯é¡µé¢ä¸­çš„æ•°æ®å‘é€äº†æ”¹å˜ï¼Œdataä¸­çš„æ•°æ®ä¸ä¼šå‘ç”Ÿæ”¹å˜ è¯æ˜ï¼š å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å­¦å…¶ä»–å¯ä»¥ä¿®æ”¹dataä¸­çš„æ•°æ®çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨å¼€å‘è€…å·¥å…·å¼€å¸®æˆ‘ä»¬å®Œæˆè¯¥ä»»åŠ¡ ä¿®æ”¹dataä¸­æ•°æ®ï¼Œé¡µé¢æ›´æ–° ä¿®æ”¹é¡µé¢æ•°æ®ï¼Œdataä¸æ›´æ–° 1document.getElementById(&#x27;app&#x27;).children[0].href=&#x27;https://juejin.cn/&#x27; è¿™å°±æ˜¯å•å‘ç»‘å®šäº† æ—¢ç„¶æœ‰å•å‘ç»‘å®šï¼Œé‚£è‚¯å®šä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªåŒå‘ç»‘å®šå•¦ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹åŒå‘ç»‘å®š ä¸‰ã€v-modelåªä½¿ç”¨åœ¨ä¸€äº›è¡¨å•ç±»çš„HTMLæ ‡ç­¾ è¿™ä¸ªæŒ‡ä»¤ååˆ†ååˆ†ååˆ†çš„é‡è¦ï¼Œè¯·ä¸€å®šè¦ç†è§£è¿™ä¸ªæŒ‡ä»¤åŒå‘ç»‘å®šçš„ä½œç”¨ HTML 1234&lt;div id=&quot;app&quot;&gt; &lt;!--å°†inputçš„valueå±æ€§å’Œdataä¸­çš„nameå±æ€§åŒå‘ç»‘å®šèµ·æ¥--&gt; åŒå‘æ•°æ®ç»‘å®šï¼š&lt;input type=&quot;text&quot; v-model:value=&quot;name&quot;&gt;&lt;/div&gt; JavaScript 123456new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; name:&#x27;èŠéº»èŠéº»&#x27; &#125;&#125;) å•å‘ç»‘å®šï¼Œæ˜¯é¡µé¢ä¸­çš„æ•°æ®ä¿®æ”¹åï¼Œdataä¸­çš„æ•°æ®ä¸ä¼šæ›´æ–° é‚£åŒå‘ç»‘å®šçš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸æ˜¯å°±ä¼šæ›´æ–°äº†ï¼Ÿæ˜¯çš„ æˆ‘ä»¬æ¥è¯æ˜ä¸€ä¸‹è¿™ä¸€ç‚¹ è¯´æ˜ï¼š 12341ã€ç®€å†™æ¨¡å¼ &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;2ã€ä½œç”¨èŒƒå›´ åªå¯ä»¥ä½œç”¨åœ¨è¡¨å•å…ƒç´ ä¸Š MVVMæ¨¡å‹123M: æ¨¡å‹(Model)å¯¹åº”dataä¸­çš„æ•°æ®V: è§†å›¾/æ¨¡æ¿(View)HTMLå…ƒç´ VM: è§†å›¾æ¨¡å‹(ViewModel)æ‰˜ç®¡æ•°æ®çš„Vueå®ä¾‹ï¼Œæ‰€ä»¥ä»¥åæˆ‘ä»¬å«Vueçš„å®ä¾‹å¯¹è±¡å°±å«vmå¯¹è±¡ æˆ‘ä»¬æ¥è¾“å‡ºä¸€ä¸‹vmæ¥çœ‹çœ‹å®ƒé•¿å•¥æ · æˆ‘ä»¬å‘ç°ï¼Œæ©™è‰²æ¡†ä¸­å°±æ˜¯æˆ‘ä»¬dataä¸­é…ç½®çš„æ•°æ®ï¼Œå¥‡æ€ªçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸‰ä¸ªç‚¹ï¼Œä½†æ˜¯ç‚¹å¼€çœ‹ç¡®å®æ˜¯æˆ‘ä»¬åˆšåˆšé…ç½®çš„æ•°æ® Vueç»è¿‡ä¸€äº›æ“ä½œï¼ˆæˆ‘å¯ä¸ä¼šå‘Šè¯‰ä½ è¿™å«æ•°æ®ä»£ç†ï¼‰ï¼Œå°†å’±ä»¬åœ¨dataä¸­é…ç½®çš„æ•°æ®ç›´æ¥æ”¾åˆ°äº†vmå®ä¾‹å¯¹è±¡ä¸Š å…¶å®æ’å€¼è¯­æ³•ä¸­å¯ä»¥çœ‹åˆ°vmèº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å†™æˆ‘ä»¬åœ¨dataä¸­é…ç½®çš„å±æ€§ æ•°æ®ä»£ç†å›é¡¾Object.defineProperty()åœ¨è¯´è¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹Objectä¸Šçš„ä¸€ä¸ªæ–¹æ³•defineProperty 123let person=&#123; name: &#x27;lisi&#x27;&#125; ç°åœ¨æˆ‘è¦ç»™personå¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§age ç¬¬ä¸€ç§å†™æ³• 1person.age=18 ç¬¬äºŒç§å†™æ³• 123Object.defineProperty(person,&#x27;age&#x27;,&#123; value: 18&#125;) é‚£æœ‰äººå°±è¦è¯´äº†ï¼Œè°é€‰ç¬¬äºŒç§æ–¹å¼å•Šï¼Œç¬¬ä¸€ç§æ–¹å¼é‚£ä¹ˆç®€å•ï¼Œæ­¤è¨€å·®çŸ£ ç¬¬äºŒç§å†™çš„æ–¹å¼å®šä¹‰çš„ageå±æ€§æœ‰ä¸¤ä¸ªç‰¹æ€§ ç¬¬ä¸€ä¸ªï¼Œä»–æ— æ³•è¢«éå†ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ æ— æ³•è¢«éå†ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ 1234567891011121314151617// éå†personä¸­çš„æ‰€æœ‰å±æ€§for(p in person)&#123; console.log(p)&#125;// æ‹¿åˆ°personä¸­çš„å±æ€§æ•°ç»„console.log(Object.keys(person))// é™¤äº†ageå±æ€§ï¼Œå…¶ä»–çš„å±æ€§éƒ½å¯ä»¥è¢«éå†åˆ°//ç”¨Object.definePropertyå®šä¹‰çš„æ•°æ®æœ‰å¾ˆå¤šé™åˆ¶ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›é…ç½®é¡¹æ¥ä½¿å…¶è§£é™¤é™åˆ¶Object.defineProperty(person,&#x27;age&#x27;,&#123; value: 18, enumerable: true,//å¯è¢«éå†ï¼Œé»˜è®¤å€¼æ˜¯false writable:true, //å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤å€¼æ˜¯false configurable:true //å¯ä»¥è¢«åˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯false &#125;&#125;) ç¬¬äºŒä¸ªï¼Œå®ƒå¯ä»¥åšæ•°æ®åŠ«æŒ è¿™å°±éœ€è¦ä¸€äº›å…¶ä»–çš„é…ç½®é¡¹äº†ï¼Œå³getå’Œset 1234567891011121314let number = 18;Object.defineProperty(person,&#x27;age&#x27;,&#123; // å½“æœ‰äººè¯»å–personçš„ageçš„æ—¶å€™ï¼Œå³ç‚¹äº†é‚£ä¸‰ä¸ªç‚¹çš„æ—¶å€™ // å°±ä¼šå°†è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºperson.ageçš„å€¼å±•ç¤ºå‡ºæ¥ get()&#123; console.log(&#x27;å˜¿å˜¿ï¼Œæ—§æ•°æ®è¢«æˆ‘åŠ«æŒäº†ï¼ï¼&#x27;) return number &#125;, // å½“æœ‰äººä¿®æ”¹personçš„ageçš„æ—¶å€™ set(newValue)&#123; console.log(&#x27;å˜¿å˜¿ï¼Œæ–°æ•°æ®è¢«æˆ‘åŠ«æŒäº†ï¼ï¼æˆ‘è¦åšåäº‹äº†&#x27;) number = newValue; &#125;&#125;) å®šä¹‰ç»™æ•°æ®ä»£ç†ä¸‹ä¸ªå®šä¹‰ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆR&#x2F;Wï¼‰ æˆ‘ä»¬çœ‹ä¸€ä¸‹Vueä¸­çš„æ•°æ®ä»£ç† vmå®ä¾‹å¯¹è±¡ä»£ç†äº†dataä¸­é…ç½®çš„å±æ€§ æˆ‘ä»¬å…ˆæ¥è¯æ˜ä¸€ä¸ªäº‹æƒ…ï¼šæˆ‘ä»¬ä¼ å…¥çš„dataé…ç½®é¡¹å’Œvmèº«ä¸Šçš„_dataæ˜¯åŒä¸€ä¸ªå¯¹è±¡ 1234567let data = &#123; name:&#x27;èŠéº»èŠéº»&#x27;&#125;let vm = new Vue(&#123; el:&#x27;#app&#x27;, data&#125;) è¿™é‡Œæˆ‘ä»¬è§‚å¯Ÿåˆ°dataå·²ç»ä¸æ˜¯åŸæ¥çš„é‚£ä¸ªå¯¹è±¡äº†ï¼Œå®ƒå·²ç»è¢«VueåŠ å·¥è¿‡äº† é‚£ä¹ˆVueä¸­çš„æ•°æ®ä»£ç†å°±æ˜¯vmä»£ç†äº†_dataä¸­çš„æ•°æ®ä¿®æ”¹ å½“_dataä¸­çš„æ•°æ®å‘ç”Ÿäº†ä¿®æ”¹ï¼Œ_dataå°±ä¼šæ£€æµ‹åˆ°è¿™æ¬¡çš„ä¿®æ”¹ï¼ˆæ•°æ®åŠ«æŒï¼‰ï¼Œé¡µé¢ä¸­ä½¿ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹éƒ½ä¼šå‘ç”Ÿæ›´æ–° æ¨¡æ‹ŸVueä¸­çš„æ•°æ®ä»£ç†å’Œæ•°æ®åŠ«æŒ123456789101112131415161718192021222324252627282930313233343536373839404142&lt;script type=&quot;text/javascript&quot;&gt; // æˆ‘çš„Vueçš„æ„é€ å‡½æ•° function MyVue(options)&#123; // æ‹¿åˆ°é…ç½®é¡¹ä¼ å…¥çš„data let data = options[&#x27;data&#x27;]; // æ•°æ®ä»£ç†ï¼Œå°†dataä¸­å‡ºç°çš„å±æ€§ä»£ç†ç»™å®ä¾‹å¯¹è±¡ Object.keys(data).forEach((p)=&gt;&#123; Object.defineProperty(this,p,&#123; get()&#123; return data[p]; &#125;, set(newValue)&#123; data[p] = newValue; &#125; &#125;) &#125;) // æ•°æ®åŠ«æŒ // å°†dataè¿›è¡Œä¸€äº›åŠ å·¥ï¼Œä½¿å…¶å¯ä»¥æ£€æµ‹å±æ€§çš„å˜åŒ–ï¼Œå½“å±æ€§å˜åŒ–çš„æ—¶å€™ï¼Œå¯¹é¡µé¢åšå‡ºæ›´æ–° function Observer(data)&#123; Object.keys(data).forEach((p)=&gt;&#123; Object.defineProperty(this,p,&#123; get()&#123; console.log(&#x27;æœ‰äººè¯»å–é…ç½®é¡¹ä¸­çš„æ•°æ®&#x27;); return data[p]; &#125;, set(newValue)&#123; console.log(&#x27;æœ‰äººä¿®æ”¹é…ç½®é¡¹ä¸­çš„æ•°æ®ï¼Œæˆ‘è¦æ›´æ–°é¡µé¢äº†&#x27;); data[p]=newValue; &#125; &#125;) &#125;) &#125; // å¯¹ä¼ å…¥çš„dataæ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™_data this._data=new Observer(data); options.data=this._data &#125; const vm = new MyVue(&#123; data: &#123; name: &#x27;zhima&#x27; &#125; &#125;)&lt;/script&gt; è¯æ˜ï¼š 1234567891011// è¿™é‡Œçš„_dataå¯¹è±¡å’Œä¼ å…¥çš„dataå¯¹è±¡æ˜¯ä¸ä¸€è‡´çš„// è¿™é‡Œæˆ‘ä¸çŸ¥é“æ€ä¹ˆå®ç°è¿™ä¸€ç‚¹ï¼Œæœ‰ä¼šçš„å¤§ä½¬å¯ä»¥å‘ä¸€ä¸‹è¯„è®ºåŒº let data = &#123; name: &#x27;zhima&#x27;&#125;const vm = new MyVue(&#123; data&#125;)//consolevm._data===datafalse è¿™é‡Œçš„ä»£ç çœ‹ä¸æ‡‚ä¸è¦ç´§å“¦ï¼Œæˆ‘æ¥ä¸‹æ¥è¿˜ä¼šå†æä¸€éçš„ï¼Œæ…¢æ…¢åœ°ä¼šæ‡‚çš„ åŠ æ²¹åŠ æ²¹ğŸ’ª","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://li-zhi.net.cn/tags/Vue/"}]},{"title":"Vue2-å¯¼è¨€","slug":"Vue2-å¯¼è¨€","date":"2022-06-18T13:17:13.000Z","updated":"2022-06-20T13:57:49.675Z","comments":true,"path":"å‰ç«¯/Vue2/2022/06/18/Vue2-å¯¼è¨€/","link":"","permalink":"http://li-zhi.net.cn/%E5%89%8D%E7%AB%AF/Vue2/2022/06/18/Vue2-%E5%AF%BC%E8%A8%80/","excerpt":"","text":"Vueå­¦ä¹ ä¸€æ ·Vueä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‰ä¸ªé—®é¢˜ å¯¼è¨€ä»€ä¹ˆæ˜¯Vueè¿™æ˜¯å®˜ç½‘çš„ä»‹ç» æ„å»ºç”¨æˆ·ç•Œé¢ å³å°†æ•°æ®å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼Œç»™ç”¨æˆ·çœ‹ æ¸è¿›å¼æ¡†æ¶ æ¸è¿›å³é€æ¸é€’è¿›ï¼Œç®€å•æ¥è¯´å°±æ˜¯ åœ¨ç®€å•åº”ç”¨ä¸­ï¼Œå¯ä»¥åªéœ€è¦ä¸€ä¸ªå°å·§çš„åº“ åœ¨å¤æ‚åº”ç”¨ä¸­ï¼Œå¯ä»¥å¼•å…¥å„ç§å„æ ·å¤æ‚çš„ç»„ä»¶ å°±æ˜¯ä¸€ç§å¯ä»¥ä»æ˜“åˆ°éš¾å¼€å‘çš„ä¸€ç§æ¡†æ¶ è°å¼€å‘çš„ å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹Angular.jsçš„ç‰¹ç‚¹æ˜¯æ¨¡å—åŒ–å¼€å‘ React.jsçš„ç‰¹ç‚¹æ˜¯è™šæ‹ŸDOM Vueåˆ™æ˜¯é›†ä¸¤å®¶ä¹‹é•¿ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ ç»„ä»¶åŒ–å¼€å‘æé«˜ä»£ç å¤ç”¨ç‡å’Œç»´æŠ¤æ€§ æ¯ä¸€ä¸ªæ¡†å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ å½“æˆ‘éœ€è¦ä¿®æ”¹å“ªä¸€å—çš„ç•Œé¢ï¼Œæˆ‘åªéœ€è¦åˆ°å“ªä¸ªæ–‡ä»¶å»ä¿®æ”¹å³å¯ å£°æ˜å¼ç¼–ç¨‹è®©ç¼–ç äººå‘˜æ— éœ€ç›´æ¥æ“ä½œDOMï¼Œæé«˜å¼€å‘æ•ˆç‡ éœ€æ±‚ï¼šå°†ä¸‹åˆ—æ•°æ®æ˜¾ç¤ºåœ¨ä¸€ä¸ªåˆ—è¡¨(&lt;ul id=&quot;container&quot;&gt;&lt;/ul&gt;)ä¸­ 123456789101112131415let persons = [ &#123; id: &#x27;1&#x27;, name: &#x27;zhima&#x27; &#125;, &#123; id: &#x27;2&#x27;, name: &#x27;lizhi&#x27; &#125;, &#123; id: &#x27;3&#x27;, name: &#x27;kerwin&#x27; &#125;] å‘½ä»¤å¼ç¼–ç¨‹ 123456let list = document.getElementById(&#x27;container&#x27;)persons.forEach(p=&gt;&#123; let li=document.createElement(&#x27;li&#x27;); li.innerHtml=`id:$&#123;p.id&#125;-name:$&#123;name&#125;` list.append(li);&#125;) å£°æ˜å¼ç¼–ç¨‹ 12345&lt;ul id=&quot;container&quot;&gt; &lt;li v-for=&quot;p in persons&quot;&gt; id:&#123;&#123;p.id&#125;&#125;-name:&#123;&#123;p.name&#125;&#125; &lt;/li&gt;&lt;/ul&gt; è™šæ‹ŸDOMä¼˜ç§€çš„DIFFç®—æ³•ï¼Œæé«˜DOMçš„å¤ç”¨ç‡ è¿™å°±æœ‰ç‚¹è®©äººæ‘¸ä¸ç€å¤´è„‘äº†ï¼ŒDOMè¿˜æœ‰å¤ç”¨ç‡ï¼Ÿ è¿˜æ˜¯åˆšæ‰é‚£ä¸ªæ¡ˆä¾‹ï¼Œå¦‚æœæˆ‘çš„æ•°æ®å˜æˆäº†è¿™æ · 123456789101112131415let persons = [ &#123; id: &#x27;1&#x27;, name: &#x27;zhima&#x27; &#125;, &#123; id: &#x27;2&#x27;, name: &#x27;lizhi&#x27; &#125;, &#123; id: &#x27;4&#x27;, name: &#x27;txy&#x27; &#125;] ä¼ ç»Ÿçš„ä½¿ç”¨JavaScriptè¿›è¡Œå‘½ä»¤å¼æ“ä½œçš„è¯ï¼Œç›´æ¥å°†æ•°æ®è½¬åŒ–ä¸ºé¡µé¢çœŸå®DOMï¼ˆReal-DOMï¼‰ï¼Œç¡®å®å’ŒDOMçš„å¤ç”¨ç‡æ²¡æœ‰å•¥å…³ç³» ä½†æ˜¯åœ¨Vueé‡Œé¢ï¼Œåœ¨æ•°æ®å˜æˆé¡µé¢ä¸Šçš„DOMèŠ‚ç‚¹çš„ä¹‹å‰ï¼Œå®ƒä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆè™šæ‹ŸDOMï¼ˆVirtual-DOMï¼‰ ç„¶åä½¿ç”¨DIFFç®—æ³•ï¼Œæ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOMï¼Œå¦‚æœæœ‰ä¸€æ ·çš„ï¼Œåˆ™ç›´æ¥å¤ç”¨ä¹‹å‰å·²ç»ç”Ÿæˆå¥½çš„è™šæ‹ŸDOMï¼Œä»è€Œæé«˜äº†DOMçš„å¤ç”¨ç‡ã€‚ é‚£ä¹ˆé€šè¿‡ä»€ä¹ˆæ¥åˆ¤æ–­ä¸¤ä¸ªè™šæ‹ŸDOMæ˜¯å¦ç›¸åŒå‘¢ï¼Ÿ è¿™å°±è¦è¯´è¯´åˆšåˆšå†™çš„ä»£ç çš„ä¸€å¤„é”™è¯¯äº†ï¼Œä¸‹é¢çœ‹æ­£ç¡®çš„ä»£ç  12345&lt;ul id=&quot;container&quot;&gt; &lt;li v-for=&quot;p in persons&quot; :key=&quot;p.id&quot;&gt; id:&#123;&#123;p.id&#125;&#125;-name:&#123;&#123;p.name&#125;&#125; &lt;/li&gt;&lt;/ul&gt; æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç å°±æ˜¯åŠ äº†ä¸€å¤„åœ°æ–¹ï¼Œå°±æ˜¯:key=&quot;p.id&quot;ï¼Œå°±æ˜¯ç»™æ¯ä¸€ä¸ªéå†çš„å…ƒç´ åŠ ä¸Šäº†å”¯ä¸€æ€§æ ‡è¯† å…·ä½“çš„DIFFç®—æ³•ï¼Œæˆ‘ä»¬åé¢è®²åˆ°è™šæ‹ŸDOM çš„æ—¶å€™å†è¯´ å­¦ä¹‹å‰è¦æŒæ¡ä»€ä¹ˆçŸ¥è¯† ES6æ¨¡å—åŒ–å¼€å‘è§„èŒƒ åŒ…ç®¡ç†å™¨NPM æ•°ç»„å¸¸ç”¨æ–¹æ³• axios promise","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"http://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://li-zhi.net.cn/tags/Vue/"}]},{"title":"ç®—æ³•-äºŒå‰æ ‘ï¼ˆçº²é¢†ï¼‰","slug":"ç®—æ³•-äºŒå‰æ ‘ï¼ˆçº²é¢†ï¼‰","date":"2022-05-07T00:24:28.000Z","updated":"2022-06-18T12:26:31.959Z","comments":true,"path":"ç®—æ³•/2022/05/07/ç®—æ³•-äºŒå‰æ ‘ï¼ˆçº²é¢†ï¼‰/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/05/07/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%88%E7%BA%B2%E9%A2%86%EF%BC%89/","excerpt":"","text":"äºŒå‰æ ‘ï¼ˆçº²é¢†ï¼‰äºŒå‰æ ‘çš„è§£é¢˜æ€è·¯æœ‰ä¸¤ä¸ªæ–¹å‘ é€šè¿‡éå†ä¸€æ£µæ ‘å¾—åˆ°ç­”æ¡ˆï¼Œå³éå†çš„æ€æƒ³ é€šè¿‡é€’å½’ï¼Œå°†æ•´ä¸ªé—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜æ¨å¯¼å‡ºé—®é¢˜çš„ç­”æ¡ˆï¼Œå³åˆ†è§£çš„æ€æƒ³ é¦–å…ˆæˆ‘ä»¬æ¥å›é¡¾ä»¥ä¸‹äºŒå‰æ ‘çš„å‡ ç§éå†æ–¹å¼ å‰åºéå† ä¸­åºéå† ååºéå† å±‚æ¬¡éå† å¤§å®¶åœ¨è¯¾å†…å­¦ä¹ çš„æ—¶å€™ï¼Œåº”è¯¥æ˜¯è¿™ä¹ˆèƒŒçš„ å‰åºæ˜¯æ ¹å·¦å³ï¼Œä¸­åºæ˜¯å·¦æ ¹å³ï¼Œååºæ˜¯å·¦å³æ ¹ï¼Œå±‚æ¬¡éå†å°±æ˜¯ä¸€å±‚ä¸€å±‚å†™ å‰åºéå†é›†åˆï¼šABDHIECFG ä¸­åºéå†é›†åˆï¼šHDIBEAFCG ååºéå†é›†åˆï¼šHIDEBFGCA å±‚æ¬¡éå†é›†åˆï¼šABCDEFGHI ç›¸ä¿¡è¿™ä¸ªå¯¹äºå¤§å®¶æ¥è¯´éƒ½æ²¡æœ‰éš¾åº¦ï¼Œç†è§£å‰ä¸­ååºå¯¹äºåšäºŒå‰æ ‘é—®é¢˜ååˆ†é‡è¦ï¼Œè¿™é‡Œç»™å‡ºéå†äºŒå‰æ ‘çš„æ¨¡æ¿ä»£ç ã€‚ 12345678910public void traverse(TreeNode root)&#123; if(root==null)&#123; return; &#125; // å‰åºä½ç½® traverse(root.left); // ä¸­åºä½ç½® traverse(root.right); // ååºä½ç½®&#125; ä¸‹é¢è¯·ä½ å¯¹ç…§è¿™æ®µæ¨¡æ¿ï¼Œçœ‹ä¸‹é¢è¿™å¼ å›¾ ä½ ä¼šå‘ç°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰å”¯ä¸€å±äºè‡ªå·±çš„å‰ä¸­ååºä½ç½®ï¼Œå‰ä¸­ååºå…¶å®å¯¹åº”å°±æ˜¯å¤„ç†æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‰ä¸ªç‰¹æ®Šæ—¶é—´ç‚¹ã€‚ äºŒå‰æ ‘çš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯åœ¨è¿™ä¸‰ä¸ªæ—¶é—´ç‚¹æ³¨å…¥è‡ªå·±çš„ä»£ç é€»è¾‘ï¼Œåªéœ€è¦å•ç‹¬è€ƒè™‘æ¯ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ¯ä¸ªæ—¶é—´ç‚¹è¯¥åšäº›ä»€ä¹ˆï¼Œå…¶ä»–çš„äº¤ç»™äºŒå‰æ ‘éå†æ¡†æ¶å³å¯ã€‚ å‰åºè¾“å‡ºé›†åˆæˆ‘ä»¬æ¥å†™ä¸€ä¸‹å‰åºéå†ï¼Œæ–¹æ³•ç­¾åå¦‚ä¸‹public List&lt;TreeNOde&gt; getPreorderList(TreeNOde root)&#123;&#125; ä¸€ã€éå†å€ŸåŠ©traverseå‡½æ•°å’Œä¸€ä¸ªå¤–éƒ¨å˜é‡å³å¯å®Œæˆ åœ¨è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™å°†å…¶åŠ å…¥åˆ°ç»“æœé›†ä¸­å»ï¼Œæœ€åå°†ç»“æœé›†è¿”å› 12345678910111213List&lt;TreeNode&gt; res = new ArrayList&lt;&gt;();public List&lt;TreeNOde&gt; getPreorderList(TreeNOde root)&#123; traverse(root); return res;&#125;public void traverse(TreeNode root)&#123; if(root==null)&#123; return; &#125; res.add(root); traverse(root.left); traverse(root.right); &#125; äºŒã€åˆ†è§£é—®é¢˜æ±‚ä¸€æ•´ä¸ªæ ‘çš„å‰åºéå†å³æ±‚å…¶å­æ ‘çš„å‰åºéå†é›†åˆ 1234567891011121314public List&lt;TreeNode&gt; getPreorderList(TreeNode root)&#123; List&lt;TreeNode&gt; res = new ArrayList&lt;&gt;(); if(root==null)&#123; return res; &#125; // å°†å½“å‰èŠ‚ç‚¹æ”¾å…¥é›†åˆ res.add(root); // å°†å·¦èŠ‚ç‚¹çš„å‰åºéå†æ”¾å…¥é›†åˆ res.addAll(getPreorderList(root.left)); // å°†å³èŠ‚ç‚¹çš„å‰åºéå†æ”¾å…¥é›†åˆ res.addAll(getPreorderList(root.right)); // è®²ç»“æœé›†è¿”å› return res;&#125; 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚ äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚ è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚ ç¤ºä¾‹ï¼š ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7] 3 / \\ 9 20 / \\ 15 7 è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚ æˆ‘ä»¬æ¥ä½¿ç”¨ä¸¤ç§ä¸Šè¿°æ€ç»´æ¥çœ‹è¿™é“é¢˜ ä¸€ã€éå†å¦‚ä½•å¾—åˆ°æœ€å¤§æ·±åº¦ï¼Œå³å¾—åˆ°æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ï¼Œåœ¨å¶å­èŠ‚ç‚¹å¤„å°†å½“å‰æ·±åº¦å’Œå½“å‰æœ€å¤§æ·±åº¦å–æœ€å¤§ï¼Œç„¶åå°†æœ€å¤§çš„æ·±åº¦è¿”å›å³å¯ 12345678910111213141516171819202122232425class Solution &#123; int depth=0; int max=0; public int maxDepth(TreeNode root) &#123; traverse(root); return max; &#125; public void traverse(TreeNode root)&#123; if(root==null)&#123; return; &#125; // å‰åºä½ç½® depth++; // åœ¨å¶å­èŠ‚ç‚¹å¤„æ›´æ–°æœ€å¤§æ·±åº¦ if(root.left==null&amp;&amp;root.right==null)&#123; max=Math.max(max,depth); &#125; traverse(root.left); // ä¸­åºä½ç½® traverse(root.right); // ååºä½ç½® depth--; &#125;&#125; å‰åºä½ç½®æ˜¯è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸­åºä½ç½®æ˜¯ä»å·¦å­æ ‘åˆ‡åˆ°å³å­æ ‘çš„æ—¶å€™ï¼Œååºä½ç½®æ˜¯ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹è¿”å›å…¶çˆ¶æ¯èŠ‚ç‚¹çš„æ—¶å€™ depthè®°å½•ç€å½“å‰æ·±åº¦ï¼Œmaxè®°å½•ç€æœ€å¤§æ·±åº¦ åœ¨è¿›å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹çš„æ—¶å€™ï¼Œdepthè‡ªå¢1ï¼Œåœ¨ç¦»å¼€è¿™ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œdepthè‡ªå‡1 äºŒã€åˆ†è§£é—®é¢˜æ±‚æ ‘çš„æœ€å¤§æ·±åº¦å³æ±‚æ ‘çš„é«˜åº¦ æ±‚æ ‘çš„é«˜åº¦å³å¯åˆ†è§£é—®é¢˜ï¼Œåˆ†è§£åˆ°ç”±å­æ ‘é«˜åº¦æ¨å¯¼å‡ºå®Œæ•´çš„æ ‘çš„é«˜åº¦ 123456789101112public int maxDepth(TreeNode root)&#123; if(root==null)&#123; return 0; &#125; // å·¦å­æ ‘çš„é«˜åº¦ int left = maxDepth(root.left); // å³å­æ ‘çš„é«˜åº¦ int right = maxDepth(root.right); // è¿”å›è‡ªèº«é«˜åº¦ int max = Math.max(left,right)+1; return max;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","slug":"ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","date":"2022-05-01T05:16:28.000Z","updated":"2022-06-11T04:48:02.482Z","comments":true,"path":"ç®—æ³•/2022/05/01/ã€19-Mediumã€‘åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/05/01/%E3%80%9019-Medium%E3%80%91%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9/","excerpt":"","text":"åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2è¾“å‡ºï¼š[1,2,3,5] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šhead = [1], n = 1è¾“å‡ºï¼š[] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šhead = [1,2], n = 1è¾“å‡ºï¼š[1] æç¤ºï¼š é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º sz 1 &lt;= sz &lt;= 30 0 &lt;= Node.val &lt;= 100 1 &lt;= n &lt;= sz è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ åˆ†æè¿™é“é¢˜ç›®æš´åŠ›è§£æ³•å°±æ˜¯ï¼Œå…ˆè¿›è¡Œä¸€ä¸ªå¾ªç¯ç”¨ä¸€ä¸ªæ•°å­—å°†æ€»é•¿åº¦sizeç®—å‡ºæ¥ï¼Œç„¶åå–size-n-1ä¸ªèŠ‚ç‚¹ï¼Œè¿›è¡Œåˆ é™¤æ“ä½œ è¿™é‡Œæˆ‘ä»¬ä¸ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ³•ã€‚ å…ˆå°†fastæŒ‡é’ˆå¾€åèµ°næ­¥ ç„¶åä¸¤è€…é½å¤´å¹¶è¿›ï¼Œå½“fast.nextä¸ºnullçš„æ—¶å€™ï¼Œslowå·²ç»åœ¨å€’æ•°ç¬¬n-1ä¸ªèŠ‚ç‚¹çš„ä½ç½®äº†ï¼Œæ­¤æ—¶è¿›è¡Œåˆ é™¤æ“ä½œã€‚ è¯¥æ–¹æ³•çš„åŸç†æ˜¯åˆ©ç”¨æ­¥é•¿ï¼Œfastå…ˆèµ°çš„é‚£å‡ æ­¥ï¼Œåœ¨faståˆ°äº†é“¾è¡¨æœ«å°¾çš„nullçš„æ—¶å€™ï¼Œslowåˆ™è¡¨ç¤ºçš„æ˜¯å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œ å› ä¸ºè¿™é‡Œéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæ‰€ä»¥éœ€è¦å°†fastèµ°åˆ°é“¾è¡¨æœ«å°¾å³å¯ ä»£ç ï¼š 123456789101112131415161718class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode slow = head; ListNode fast = head; for (int i = 0; i &lt; n; i++) &#123; fast = fast.next; &#125; if(fast == null)&#123; return head.next; &#125; while(fast.next != null)&#123; slow = slow.next; fast = fast.next; &#125; slow.next = slow.next.next; return head; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-é€’å½’ç®—æ³•","slug":"ç®—æ³•-é€’å½’ç®—æ³•","date":"2022-04-30T04:12:07.000Z","updated":"2022-05-02T08:09:23.643Z","comments":true,"path":"ç®—æ³•/2022/04/30/ç®—æ³•-é€’å½’ç®—æ³•/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/04/30/%E7%AE%97%E6%B3%95-%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95/","excerpt":"","text":"Chapter 2å•é¡¹é€’å½’å¾ªç¯ä¸é€’å½’å¯¹æ¯”å›é¡¾1ã€å‚æ•°ä¼ é€’ å€¼ä¼ é€’ å¼•ç”¨ä¼ é€’ 2ã€é€’å½’ä¸‰è¦ç´  é€’å½’å®šä¹‰ é€’å½’æ‹†è§£s é€’å½’å‡ºå£ 3ã€å°¾é€’å½’ â€‹ ç‰¹ç‚¹ï¼š * å‡½æ•°ä¸­æ‰€æœ‰çš„é€’å½’å½¢å¼çš„è°ƒç”¨éƒ½å‡ºç°åœ¨å‡½æ•°çš„æœ«å°¾ * é€’å½’è°ƒç”¨ä¸å±äºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ† â€‹ ä½œç”¨ï¼š * ä¸ä¼šåœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆ * è¦†ç›–å½“å‰æ´»åŠ¨è®°å½• ä¾‹é¢˜ä¾‹ä¸€ï¼šäºŒé˜¶é˜¶ä¹˜ é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•°nï¼Œè¿”å›è¯¥æ•°çš„äºŒé˜¶é˜¶ä¹˜ã€‚åœ¨æ•°å­¦ä¸­ï¼Œæ­£æ•´æ•°çš„äºŒé˜¶é˜¶ä¹˜è¡¨ç¤ºä¸è¶…è¿‡è¿™ä¸ªæ­£æ•´æ•°ä¸”ä¸å®ƒæœ‰ç›¸åŒå¥‡å¶æ€§çš„æ‰€æœ‰æ­£æ•´æ•°ä¹˜ç§¯ã€‚ 1234è¾“å…¥: n = 5è¾“å‡º: 15è§£é‡Š:5!! = 5 * 3 * 1 = 15 æ™®é€šé€’å½’123456789101112131415// æ™®é€šé€’å½’ @Testpublic void example1OrdinaryWay()&#123; System.out.println(example1_ordinaryWay(5));&#125;public long example1_ordinaryWay(int n)&#123; return example1_recursion(n);&#125;public long example1_recursion(int n)&#123; if(n==2||n==1)&#123; return n; &#125; return n * example1_recursion(n-2);&#125; å°¾é€’å½’123456789101112131415// å°¾é€’å½’ @Testpublic void example1TailRecursion()&#123; System.out.println(example1_tailRecursion(5));&#125;private long example1_tailRecursion(int n)&#123; return example1_tailRecursion(n, 1);&#125;private long example1_tailRecursion(int n,int res)&#123; res*=n; if(n==1||n==2)&#123; return res; &#125; return example1_tailRecursion(n-2,res);&#125; è¿­ä»£12345678910111213// è¿­ä»£@Testpublic void example2Iterate()&#123; System.out.println(example1_iterate(5));&#125;private long example1_iterate(int n)&#123; long res =1; while(n!=1&amp;&amp;n!=2)&#123; res*=n; n-=2; &#125; return res;&#125; æ¨¡æ¿ 1234567private returnType function(parameters)&#123; while(true)&#123; dosomething... get new parameters parameters = new parameters &#125;&#125; æŒ‰ç…§æ¨¡æ¿ 1234567891011121314151617// è¿­ä»£@Testpublic void example2Iterate()&#123; System.out.println(example1_iterate(5));&#125;private long example1_iterate(int n)&#123; return example1_iterate(n,1);&#125;private long example1_iterate(int n,int res)&#123; while(true)&#123; res*=n; if(n==1||n==2)&#123; return res; &#125; n-=2; &#125;&#125; ä¾‹ä¸€ï¼š2. ä¸¤æ•°ç›¸åŠ  1234567891011121314151617181920212223class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; return add(l1,l2,0); &#125; public ListNode add(ListNode l1, ListNode l2, int bit) &#123; if (l1 == null &amp;&amp; l2 == null &amp;&amp; bit == 0) &#123; return null; &#125; int val = bit; // bitå°±æ˜¯è¡¨ç¤ºæ¯æ¬¡æ˜¯å¦è¿›ä½ if (l1 != null) &#123; val += l1.val; l1 = l1.next; &#125; if (l2 != null) &#123; val += l2.val; l2 = l2.next; &#125; ListNode node = new ListNode(val % 10); node.next = add(l1, l2, val / 10); return node; &#125;&#125; ä¾‹äºŒï¼š21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ 12345678910111213public ListNode mergeTwoLists(ListNode list1, ListNode list2) &#123; if(list1==null)&#123; return list2; &#125;else if(list2==null)&#123; return list1; &#125;else if(list1.val &lt;= list2.val)&#123; list1.next=mergeTwoLists(list1.next,list2); return list1; &#125;else &#123; list2.next = mergeTwoLists(list1, list2.next); return list2; &#125;&#125; ä¾‹ä¸‰ï¼šä¸¤ä¸¤äº¤æ¢èŠ‚ç‚¹ 12345678910public ListNode swapTwoAsGroup(ListNode head)&#123; if(head==null||head.next==null)&#123; return head; &#125; ListNode newHead = head.next; ListNode tail=head.next.next; head.next.next=head; head.next=swapTwoAsGroup(tail); return newHead;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Linux-å¸¸ç”¨å‘½ä»¤","slug":"Linux-å¸¸ç”¨å‘½ä»¤","date":"2022-04-24T07:57:17.000Z","updated":"2022-04-26T02:59:39.732Z","comments":true,"path":"uncategorized/2022/04/24/Linux-å¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://li-zhi.net.cn/uncategorized/2022/04/24/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹123cat fileName# -n æ˜¾ç¤ºè¡Œå·cat -n fileName åˆ†é…æŸ¥çœ‹å™¨1more fileName æ“ä½œ åŠŸèƒ½ ç©ºç™½é”® å‘ä¸‹ç¿»ä¸€é¡µ enter å‘ä¸‹ç¿»ä¸€é¡µ q ç¦»å¼€ Ctrl+F å‘ä¸‹æ»šåŠ¨ä¸€å± Ctrl+B è¿”å›ä¸Šä¸€å± &#x3D; è¾“å‡ºå½“å‰è¡Œå· :f è¾“å‡ºæ–‡ä»¶åå’Œå½“å‰è¡Œçš„è¡Œå· lessæŒ‡ä»¤ç”¨æ¥åˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œä»–çš„åŠŸèƒ½å’ŒmoreæŒ‡ä»¤ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”moreæŒ‡ä»¤æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚lessæŒ‡ä»¤åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ—¶å€™ï¼Œä¸ä¼šä¸€æ¬¡åŠ è½½æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½å†…å®¹ï¼Œå¯¹äºæ˜¾ç¤ºå¤§å‹æ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ 1less fileName æ“ä½œ åŠŸèƒ½è¯´æ˜ ç©ºç™½é”®ã€pagedown å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ pageup å‘ä¸Šç¿»åŠ¨ä¸€é¡µ &#x2F;å­—ç¬¦ä¸² å‘ä¸‹æœå¯»å­—ç¬¦ä¸²çš„åŠŸèƒ½ ?å­—ç¬¦ä¸² å‘ä¸Šæœå¯»å­—ç¬¦ä¸²çš„åŠŸèƒ½ q é€€å‡º è¾“å‡ºå†…å®¹123echo &quot;hello\\tworld&quot;# -e æ”¯æŒæ§åˆ¶å­—ç¬¦echo -e &quot;hello\\tworld&quot; æ§åˆ¶å­—ç¬¦ ä½œç”¨ \\ \\ è¾“å‡º\\æœ¬èº« \\n æ¢è¡Œç¬¦ \\t åˆ¶è¡¨ç¬¦ æ˜¾ç¤ºå¤´éƒ¨æ–‡ä»¶1234head fileName# -n æ˜¾ç¤ºå‰å¤šå°‘è¡Œï¼Œä¸å†™çš„è¯é»˜è®¤10è¡Œhead -n 5 fileName æ˜¾ç¤ºå°¾éƒ¨æ–‡ä»¶1234tail fileName# -n æ˜¾ç¤ºå°¾éƒ¨å‰å¤šå°‘è¡Œï¼Œä¸å†™çš„è¯é»˜è®¤10è¡Œ# -f å®æ—¶æ›´æ–° è¾“å‡ºé‡å®šå‘&gt;å’Œ&gt;&gt;è¿½åŠ &gt;æ˜¯è¦†ç›– &gt;&gt;æ˜¯è¿½åŠ  12ls -ll &gt; fileName cat fileName &gt; fileName2 æŸ¥çœ‹å†å²æ“ä½œè®°å½•1history æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦å­˜åœ¨1id userName æŸ¥æ‰¾æ–‡ä»¶å’Œç›®å½•12345find [æœç´¢èŒƒå›´] [é€‰é¡¹] -name æŒ‰ç…§æŒ‡å®šçš„æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶ -user æŸ¥æ‰¾æŒ‡å®šç”¨æˆ·åæŸ¥æ‰¾æ–‡ä»¶ -size æŒ‰ç…§æŒ‡å®šçš„æ–‡ä»¶å¤§å°æŸ¥æ‰¾æ–‡ä»¶ (+å¤§äºï¼Œ-å°äºï¼Œ) å¿«é€Ÿå®šä½è·¯å¾„locateå‘½ä»¤åˆ©ç”¨äº‹å…ˆå»ºç«‹çš„ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶åç§°åŠè·¯å¾„çš„locateæ•°æ®åº“å®ç°å¿«é€Ÿå®šä½ç»™å®šçš„æ–‡ä»¶ã€‚locateæŒ‡ä»¤æ— éœ€éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ŒæŸ¥æ‰¾é€Ÿåº¦è¾ƒå¿«ï¼Œä¸ºäº†ä¿è¯æŸ¥è¯¢ç»“æœçš„å‡†ç¡®åº¦ï¼Œç®¡ç†å‘˜éœ€è¦å®šæ—¶ä½¿ç”¨updatedbå‘½ä»¤æ›´æ–°db 1locate å‹ç¼©å’Œè§£å‹gzip&#x2F;gunzipå‹ç¼©gzipåªèƒ½å°†æ–‡ä»¶å‹ç¼©ä¸º.gzæ–‡ä»¶ ç‰¹ç‚¹ï¼š 1ã€åªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¸èƒ½å‹ç¼©ç›®å½• 2ã€ä¸èƒ½ä¿ç•™åŸæ¥çš„æ–‡ä»¶ 3ã€åŒæ—¶å¤šä¸ªæ–‡ä»¶ä¼šäº§ç”Ÿå¤šä¸ªå‹ç¼©åŒ… zip&#x2F;unzipå‹ç¼© zipå¯é€‰é¡¹ ä½œç”¨ -r å‹ç¼©ç›®å½• unzipå¯é€‰é¡¹ ä½œç”¨ -d æŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ä½ç½® tar å¯é€‰é¡¹ åŠŸèƒ½ -c äº§ç”Ÿtaræ‰“åŒ…æ–‡ä»¶ -v æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ -f æŒ‡å®šå‹ç¼©åçš„æ–‡ä»¶å -z æ‰“åŒ…åŒæ—¶å‹ç¼© -x è§£åŒ… -C è§£å‹åˆ°æŒ‡å®šç›®å½• 12345# å¸¸ç”¨è§£å‹ç¼©å‘½ä»¤tar -zxvf# å¸¸ç”¨å‹ç¼©å‘½ä»¤tar -zcvf æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿›ç¨‹çŠ¶æ€12345# æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ps aux# æŸ¥çœ‹å­çˆ¶è¿›ç¨‹ä¹‹é—´çš„å…³ç³»ps -ef ç‰¹ç‚¹ï¼š 1ã€æŸ¥çœ‹è¿›ç¨‹çš„CPUå ç”¨ç‡å’Œå†…å­˜å ç”¨ç‡ï¼Œå¯ä»¥ä½¿ç”¨aux 2ã€æƒ³æŸ¥çœ‹è¿›ç¨‹çš„çˆ¶è¿›ç¨‹IDå¯ä»¥ä½¿ç”¨-ef æ˜¾ç¤ºç½‘ç»œçŠ¶æ€å’Œç«¯å£å ç”¨ä¿¡æ¯123netstat -anp |grep è¿›ç¨‹å·netstat -anp |grep è¿›ç¨‹å· é€‰é¡¹ åŠŸèƒ½ -a æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨ç›‘å¬å’Œæœªç›‘å¬çš„å¥—æ¥å­— -n æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å°±æ˜¾ç¤ºæ•°å­— -l ä»…åˆ—å‡ºåœ¨ç›‘å¬çš„æœåŠ¡çŠ¶æ€ -p è¡¨ç¤ºæ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨ è®¾ç½®å®šæ—¶ä»»åŠ¡1crontab [é€‰é¡¹] é€‰é¡¹ åŠŸèƒ½ -e ç¼–è¾‘crontabä»»åŠ¡ -l æŸ¥è¯¢crontabä»»åŠ¡ -r åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabä»»åŠ¡","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"},{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/tags/javaEE/"}]},{"title":"Linux-ç³»ç»Ÿç®¡ç†","slug":"Linux-ç³»ç»Ÿç®¡ç†","date":"2022-04-24T03:02:23.000Z","updated":"2022-04-24T05:40:07.586Z","comments":true,"path":"uncategorized/2022/04/24/Linux-ç³»ç»Ÿç®¡ç†/","link":"","permalink":"http://li-zhi.net.cn/uncategorized/2022/04/24/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/","excerpt":"","text":"ç³»ç»ŸæœåŠ¡ç®¡ç†å¼€å¯æœåŠ¡ 1systemctl start servieName é‡å¯æœåŠ¡ 1systemctl restart servieName å…³é—­æœåŠ¡ 1systemctl stop servieName æŸ¥çœ‹æœåŠ¡çŠ¶æ€ 1systemctl status servieName æŸ¥çœ‹æ‰€æœ‰åå°æœåŠ¡çŠ¶æ€ 1systemctl list-units --type service --all å…³é—­åå°æœåŠ¡è‡ªå¯åŠ¨ 1systemctl disable name.service å¼€å¯åå°æœåŠ¡è‡ªå¯åŠ¨ 1systemctl enable name.service","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"},{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/tags/javaEE/"}]},{"title":"JVM-å†…å­˜åˆ†åŒº","slug":"JVM-å†…å­˜åˆ†åŒº","date":"2022-03-18T09:27:35.000Z","updated":"2022-04-03T08:57:11.608Z","comments":true,"path":"javaEE/JVM/2022/03/18/JVM-å†…å­˜åˆ†åŒº/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JVM/2022/03/18/JVM-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/","excerpt":"","text":"JVMå†…å­˜åˆ†åŒºå†…å­˜åˆ†åŒºå’Œå†…å­˜æ¨¡å‹æ˜¯ä¸¤ä¸ªæ¦‚å¿µ æ“ä½œç³»ç»Ÿå†…å­˜åˆ†åŒº æ ˆï¼ˆStackï¼‰ å †ï¼ˆHeapï¼‰ æœªåˆå§‹åŒ–æ•°æ®æ®µï¼ˆBSSï¼‰ æ•°æ®æ®µï¼ˆData Segmentï¼‰ æ–‡æœ¬æ®µï¼ˆLiteral Segmentï¼‰ ä»£ç æ®µï¼ˆCode Segmentï¼‰ JVMå†…å­˜åˆ†åŒº ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stackï¼‰ æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ å †ï¼ˆHeapï¼‰ æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ æ©™è‰²è™šçº¿åŒ…è£¹çš„å°±æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œè¢«çº¢è‰²å®ç°åŒ…è£¹çš„æ˜¯çº¿ç¨‹éš”ç¦»çš„ ç¨‹åºè®¡æ•°å™¨åœ¨ç¡¬ä»¶å±‚é¢ï¼Œç¨‹åºè®¡æ•°å™¨æ˜¯å¯„å­˜å™¨ï¼Œæ˜¯ç”¨æ¥å­˜å‚¨æŒ‡ä»¤åœ°å€ç»™å¤„ç†å™¨æ‰§è¡Œï¼Œ åœ¨JVMä¸­ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨æ¥å­˜å‚¨å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼Œæä¾›ç»™æ‰§è¡Œå¼•æ“å»æ‰§è¡Œ è¿™é‡Œæˆ‘ä»¬ä»ä¾§é¢å»æŸ¥çœ‹è¯¥ç‰¹æ–° 1234567public class Demo &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.println(i); &#125; &#125;&#125; ç„¶åå…ˆç¼–è¯‘javac Demo.javaåç¼–è¯‘javap -l -c Demo.class å¾—åˆ°ä»¥ä¸‹å­—èŠ‚ç  123456789101112131415161718192021222324252627282930313233Compiled from &quot;Demo.java&quot;public class com.lizhi.Demo &#123; public com.lizhi.Demo(); descriptor: ()V Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 3: 0 public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V Code: // è¿™é‡Œçš„æ•°å­—å°±æ˜¯å­—èŠ‚ç æŒ‡ä»¤çš„åç§»é‡ 0: iconst_0 1: istore_1 2: iload_1 3: bipush 10 5: if_icmpge 21 8: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 11: iload_1 12: invokevirtual #3 // Method java/io/PrintStream.println:(I)V 15: iinc 1, 1 18: goto 2 21: return // è¿™é‡Œå¯ä»¥è§£é‡Šæ–­ç‚¹çš„åŸç†ï¼Œå°†æºç è¡Œæ•°å’Œå­—èŠ‚ç è¡Œæ•°è¿›è¡Œæ˜ å°„ LineNumberTable: line 5: 0 line 6: 8 line 5: 15 line 8: 21&#125; è™šæ‹Ÿæœºæ ˆä¹Ÿå«javaæ–¹æ³•æ ˆï¼Œjavaæ–¹æ³•çš„è°ƒç”¨å¯¹åº”ç€æ ˆå¸§çš„å…¥æ ˆä¸å‡ºæ ˆã€‚ 3ä¸ªé‡ç‚¹ï¼š æ ˆå¸§ æ ˆå¸§å‡ºç°æ—¶æœº æ ˆå¸§çš„æ„æˆ æ ˆå¸§æ ˆå¸§ä¸»è¦æœ‰å››éƒ¨åˆ†ç»„æˆï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€è¿”å›åœ°å€ å±€éƒ¨å˜é‡è¡¨ ä¸»è¦å­˜å‚¨æ–¹æ³•çš„å‚æ•°ã€å®šä¹‰åœ¨æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ8å¤§ï¼‰å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿”å›å€¼åœ°å€ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­å­˜å‚¨çš„åŸºæœ¬å•å…ƒä¸ºå˜é‡æ§½ï¼ˆSlotï¼‰ï¼Œ32ä½ï¼ˆ4å­—èŠ‚ï¼‰ä»¥å†…çš„æ•°æ®ç±»å‹å ä¸€ä¸ªslotï¼Œ64ä½ï¼ˆlongï¼Œdoubleï¼‰çš„å ä¸¤ä¸ªslotã€‚ å±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œbyteã€shortã€charéƒ½ä¼šè¢«è½¬åŒ–ä¸ºint,booleanç±»å‹ä¹Ÿä¼šè¢«è½¬åŒ–ä¸ºintï¼ŒOä»£è¡¨falseã€é0ä»£è¡¨trueã€‚å±€éƒ¨å˜é‡è¡¨çš„å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸé—´å†³å®šä¸‹æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶å®ƒçš„å¤§å°æ˜¯ä¸ä¼šå˜çš„ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­å«æœ‰ç›´æ¥æˆ–è€…é—´æ¥æŒ‡å‘çš„å¼•ç”¨ç±»å‹å˜é‡æ—¶ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶å¤„ç†ã€‚ æ“ä½œæ•°æ ˆ å°±æ˜¯ç”¨æ¥å­˜å‚¨æ“ä½œæ•°çš„æ ˆï¼Œè¿™é‡Œçš„æ“ä½œæ•°å¤§éƒ¨åˆ†å°±æ˜¯æ–¹æ³•å†…çš„å˜é‡ ä½œç”¨ï¼š å­˜å‚¨æ“ä½œæ•° æ“ä½œæ•°æ ˆå¯ä»¥æ–¹ä¾¿æŒ‡ä»¤é¡ºåºè¯»å–æ“ä½œæ•° æŒ‡ä»¤ å«ä¹‰ iload intå‹å˜é‡å…¥æ ˆ istore æ ˆé¡¶æ•°å€¼å­˜å…¥å±€éƒ¨å˜é‡ iadd å¼¹å‡ºæ ˆé¡¶ä¸¤ä¸ªæ“ä½œæ•°ï¼Œå¹¶å°†æ±‚å’Œçš„intå€¼å‹å…¥æ ˆä¸­ åŠ¨æ€è¿æ¥ javaä¸­çš„å¤šæ€å°±æ˜¯é€šè¿‡åŠ¨æ€è¿æ¥å®ç°çš„ æ¯ä¸ªæ ˆå¸§éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨ï¼ŒæŒæœ‰è¿™ä¸ªå¼•ç”¨éƒ½æ˜¯ä¸ºäº†æ”¯æŒæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­çš„åŠ¨æ€è¿æ¥ è¿æ¥æ˜¯å°†éƒ¨åˆ†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œå¯¹äºæœ‰äº›æ–¹æ³•ï¼ŒJVMå¹¶ä¸èƒ½åˆ¤æ–­å®ƒä»¬çš„å…·ä½“å®ç°ï¼Œåªæœ‰åœ¨çœŸæ­£è¿è¡Œçš„æ—¶å€™ï¼Œæ‰å¯ä»¥æ ¹æ®å®é™…ç±»å‹è¿›è¡Œè¿æ¥ï¼Œè¿™å°±æ˜¯åŠ¨æ€è¿æ¥ æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ˜¯ç”±éjavaè¯­è¨€å®ç°çš„å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›å’Œæ“ä½œç³»ç»Ÿåº•å±‚ç›¸å…³çš„å‡½æ•°","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"http://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"http://li-zhi.net.cn/tags/JVM/"}]},{"title":"JavaScript-æ¨¡å—åŒ–å¼€å‘","slug":"JavaScript-æ¨¡å—åŒ–å¼€å‘","date":"2022-03-16T12:34:07.000Z","updated":"2022-06-11T06:49:13.733Z","comments":true,"path":"javaEE/JavaScript/2022/03/16/JavaScript-æ¨¡å—åŒ–å¼€å‘/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JavaScript/2022/03/16/JavaScript-%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91/","excerpt":"","text":"javaScriptæ¨¡å—åŒ– ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Ÿ å³å°†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºä¾æ®ä¸€å®šçš„è§„åˆ™(è§„èŒƒ)å°è£…æˆå‡ ä¸ªå—(æ–‡ä»¶)ï¼Œå¹¶ç”¨è§„å®šè¯­æ³•å°†å…¶ç»„åˆåœ¨ä¸€èµ·ï¼Œå—çš„å†…éƒ¨æ•°æ®&#x2F;å®ç°æ˜¯ç§æœ‰çš„,åªæ˜¯å‘å¤–éƒ¨æš´éœ²ä¸€äº›æ¥å£(æ–¹æ³•)ä¸å¤–éƒ¨å…¶ä»–æ¨¡å—é€šä¿¡ ä»¥å‰çš„ä»£ç  å…¨å±€æ¨¡å¼ 123456function foo()&#123; &#125;function abc()&#123; &#125; é—®é¢˜ï¼šæ‰€æœ‰çš„å‡½æ•°éƒ½è¢«ç»‘å®šåœ¨äº†windowä¸Šï¼Œå®¹æ˜“äº§ç”Ÿå‘½åå†²çªå’Œäº§ç”Ÿå¯¹windowçš„æ±¡æŸ“ namespaceæ¨¡å¼ å°†å‡½æ•°æˆ–è€…æ•°æ®ç»‘å®šåœ¨å¯¹è±¡ä¸Š 123456789let obj = &#123; k: &#x27;asd&#x27;, foo()&#123; console.log(this.k) &#125;, abc()&#123; &#125;&#125; é—®é¢˜ï¼šå¯¹è±¡ä¸­çš„æ•°æ®å¯ä»¥éšæ„è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°æ®ä¸å®‰å…¨ IIFE(Immedicately-invoked-function-expression) è¯¥æ–¹æ³•å°±æ˜¯åˆ©ç”¨å‡½æ•°çš„ä½œç”¨åŸŸå’Œå³ä½¿å‡½æ•°çš„ç‰¹æ€§ 12345678(function(window)&#123; function foo()&#123; console.log(&#x27;ooo&#x27;) &#125; window.module=&#123;foo&#125;&#125;)(window);-----------------------------module.foo(); æˆ–è€… 12345678(function(window)&#123; function foo()&#123; console.log(&#x27;ooo&#x27;) &#125; window.module=foo&#125;)(window);-----------------------------module(); IIFEå°±æ˜¯ç°ä»£åŒ–æ¨¡å—åŒ–çš„åŸºçŸ³ æ¨¡å—åŒ–çš„å¥½å¤„ é¿å…å‘½åå†²çª æ ¹æ®åŠŸèƒ½ç‚¹è¿›è¡Œæ›´å¥½çš„åˆ†ç¦» æ›´é«˜çš„å¤ç”¨æ€§ é«˜å¯ç»´æŠ¤æ€§ ä½†æ˜¯ä»¥æ­¤åŒæ—¶å°±å‡ºç°äº†é—®é¢˜ ä¸€ä¸ªé¡µé¢éœ€è¦å¼•å…¥å¤šä¸ªjsæ–‡ä»¶ï¼Œå¦‚æœå¤šä¸ªæ–‡ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œå…ˆåé¡ºåºçš„é”™è¯¯å°±ä¼šå¯¼è‡´æŠ¥é”™ è¯·æ±‚è¿‡å¤š ä¾èµ–æ¨¡ç³Š éš¾ä»¥ç»´æŠ¤ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä¸€ç§æ¨¡å—åŒ–çš„è§„èŒƒæ¥é¿å…è¿™ç§é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ¨¡å—åŒ–è§„èŒƒ æ¨¡å—åŒ–çš„è§„èŒƒ CommonJSï¼ˆnodejså°±æ˜¯åŸºäºè¿™ç§è§„èŒƒï¼‰ AMD ï¼ˆç”¨çš„å°‘ï¼‰ CMDï¼ˆé˜¿é‡Œçš„äººå†™çš„ã€‚ç”¨çš„å°‘ï¼‰ ES6 CommonJSè¯´æ˜ï¼š æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å— æœåŠ¡å™¨ç«¯ï¼šæ¨¡å—çš„åŠ è½½æ˜¯è¿è¡Œæ—¶åŒæ­¥åŠ è½½çš„ æµè§ˆå™¨ç«¯ï¼šéœ€è¦è‡ªå·±ç¼–è¯‘æ‰“åŒ…å°†æ‰€æœ‰çš„æ¨¡å—jsåˆå¹¶åˆ°ä¸€ä¸ªjsä¸­ å®šä¹‰æ¨¡å—ï¼š 123456module.exports=&#123;&#125;---expoets.foo = function()&#123; &#125;exports.n = 2 å¼•å…¥æ¨¡å—ï¼š 1234let module1 = require(..)// è¿™é‡Œçš„..// å¼•å…¥ç¬¬ä¸‰æ–¹çš„åŒ… ç›´æ¥å†™åŒ…å// å¼•å…¥è‡ªå·±å†™çš„js å†™è·¯å¾„ æœåŠ¡å™¨ç«¯ä¾‹å­ï¼š å…ˆåˆ›å»ºé¡¹ç›®ç»“æ„ 123456-modules --module1.js --module2.js --module3.js-app.js-package.json module1.js 12345module.exports = &#123; foo()&#123; console.log(`&#x27;module1&#x27;s foo()`) &#125;&#125; module2.js 123456exports.foo = function()&#123; console.log(`&#x27;module2&#x27;s foo()`)&#125;exports.abc = function()&#123; console.log(`&#x27;module2&#x27;s abc()`)&#125; module3.js 123module.exports = function()&#123; console.log(`&#x27;module3&#x27;s foo()`)&#125; app.js 12345678let module1 = require(&#x27;./modules/module1.js&#x27;)let module2 = require(&#x27;./modules/module2.js&#x27;)let module3 = require(&#x27;./modules/module3.js&#x27;)module1.foo()module2.foo()module2.abc()module3() package.json 1234&#123; name: &#x27;applicationname&#x27;,// è¿™é‡Œå†™é¡¹ç›®åå­—ï¼Œä¸èƒ½æœ‰å¤§å†™å­—æ¯ï¼Œä¸èƒ½æœ‰ä¸­æ–‡ version: &#x27;1.0.0&#x27;&#125; å¯ä»¥ä½¿ç”¨npm initç”Ÿæˆè¯¥æ–‡ä»¶ å®¢æˆ·ç«¯ä¾‹å­ï¼š ç»“æ„æ ‘å¦‚ä¸‹ 123456789-test --dist --src ---module1.js ---module2.js ---module3.js ---app.js --index.html --package.json jsä»£ç å¦‚ä¸Š ä¸‹è½½ç¼–è¯‘å·¥å…· 12npm install browserify -g # å…¨å±€å®‰è£…npm install browserify --save-dev # å¼€å‘ä¾èµ–ï¼Œåœ¨ä¸Šçº¿é˜¶æ®µä¸éœ€è¦æ­¤å·¥å…·äº† ä½¿ç”¨è¯¥å·¥å…· 1browserify src/app.js -o dist/budle.js index.html 1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script src=&#x27;./dist/budle.js&#x27;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; AMDè¯´æ˜ï¼šAMD(ï¼ˆAsynchronous Module Definitionï¼‰)ä¸“é—¨ç”¨æˆ·æµè§ˆå™¨ç«¯ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯å¼‚æ­¥çš„ æ­¤è§„èŒƒä¾èµ–äºä¸€ä¸ªRequire.js åŸºæœ¬è¯­æ³•ï¼š å®šä¹‰æ¨¡å—ï¼š 12345678// æ²¡æœ‰ä¾èµ–å…¶ä»–æ¨¡å—define(function()&#123; return æ¨¡å—&#125;)// å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—define([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; return æ¨¡å—&#125;) å¼•å…¥æ¨¡å— 123456require([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; ä½¿ç”¨m1/m2&#125;)requirejs([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; ä½¿ç”¨m1/m2&#125;) ä¾‹å­ï¼š ç›®å½•ç»“æ„ 12345678910-test --js ---libs ----require.js//è¿™æ˜¯å¼•å…¥çš„ç¬¬ä¸‰æ–¹js ---modules ----module1.js ----module2.js ----modlue3.js ---main.js --index.html mudule1.js 1234567define(function()&#123; lett msg = &#x27;module1&#x27;; function foo()&#123; console.log(msg) &#125; return &#123;foo&#125;&#125;) module2.js 1234567define([&#x27;module1&#x27;],function(m1)&#123; let msg = &#x27;module2.js&#x27; function foo()&#123; console.lopg(msg,m1.foo()) &#125; return &#123;foo&#125;&#125;) main.js 12345678910111213(function()&#123; require.config(&#123; baseUrl: &#x27;js/&#x27;, path: &#123; module1: &#x27;./modules/module1.js&#x27;, module2: &#x27;./modules/module2.js&#x27; jquery: &#x27;./libs/jquery.js&#x27;//å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œä¸æ˜¯æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“éƒ½æ”¯æŒAMDè¯­æ³• &#125; &#125;) requirejs([&#x27;module1&#x27;,&#x27;module2&#x27;],function(m1,m2)&#123; m1.foo(); &#125;)&#125;)() é¡µé¢ä¸­åªè¦å¼•å…¥è¯¥æ ‡ç­¾å³å¯ 1&lt;script data-main=&quot;js/main.js&quot; src=js/libs/require.js&gt;&lt;/script&gt; ES6è§„èŒƒè¯´æ˜ï¼šè¯¥è§„èŒƒä¹Ÿéœ€è¦ç¼–è¯‘æ‰“åŒ…å¤„ç†ï¼Œå…ˆä½¿ç”¨babelå°†ES6è½¬åŒ–ä¸ºES5ï¼Œç„¶åä½¿ç”¨browserifyå°†å…¶å¹¶ä¸ºä¸€ä¸ªjsæ–‡ä»¶ åŸºæœ¬è¯­æ³•ï¼š å¯¼å‡ºæ¨¡æ¿ï¼š 1234567891011121314151617181920212223export function foo()&#123; &#125;export function abc()&#123; &#125;------------------------------------------------------------------------------------------------------function foo()&#123; &#125;function abc()&#123; &#125;export &#123;foo,abc&#125;------------------------------------------------------------------------------------------------------export default &#123; function foo()&#123; &#125; function abc()&#123; &#125;&#125; å¼•å…¥æ¨¡å—ï¼š 12345// å¸¸è§„å¯¼å‡ºï¼Œè¿™è¾¹ç”¨å¯¹è±¡æ¥import &#123;&#125; from &#x27;è·¯å¾„&#x27; //è‡ªå·±çš„js// é»˜è®¤å¯¼å‡ºï¼Œè¿™è¾¹ç”¨å˜é‡æ¥æ¥impoet module from &#x27;è·¯å¾„&#x27; ä¾‹å­ï¼š é¡¹ç›®ç»“æ„ 123456789101112-test --js ---dist ---build ---src ----module1.js ----module2.js ----module3.js ----main.js --index.html --.babelrc --package.json å®‰è£…ä¾èµ– 12345npm install browserify --save-devnpm install babel-cli -gnpm install babel-preset-es2015 --save-dev åˆ›å»º.babelrc rcå°±æ˜¯run controlè¿è¡Œæ—¶æ§åˆ¶æ–‡ä»¶ 123&#123; &quot;presets&quot;:[&quot;es2015&quot;]&#125; module1.js 123456export function foo()&#123; &#125;export function abc()&#123; &#125; module2.js 1234567function f1()&#123; &#125;function f2()&#123; &#125;export &#123;f1,f2&#125; module3.js 12345678export default &#123; function d1()&#123; &#125; function d2()&#123; &#125;&#125; main.js 123456789import &#123;foo,abc&#125; from &#x27;./module1.js&#x27;import &#123;f1,f2&#125; from &#x27;./module2.js&#x27;import module3 from &#x27;./module3.js&#x27;foo();abc();f1();module3.d1();module3.d2(); es6è½¬es5 1babel js/src -d js/build è¿™é‡Œå¦‚æœå‡ºç°è¿™ä¸ªé”™è¯¯ï¼š 1babel : æ— æ³•åŠ è½½æ–‡ä»¶ C:\\Users\\win\\AppData\\Roaming\\npm\\babel.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… https:/ go.micros é‚£ä¹ˆä½ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä¸€å®šæ˜¯è¿™æ ·çš„ 12get-ExecutionPolicy# restricted è¿™æ—¶å€™ï¼Œå…ˆä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€Windows Powershellç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ 12set-ExecutionPolicy RemoteSignedç„¶åè¾“å…¥yå›è½¦ åˆå¹¶æ–‡ä»¶ 1browserify js/build/main.js -o js/dist/bundle.js index.htmlå¯¼å…¥js 1&lt;script src=&quot;js/src/dist/bundle.js&quot;&gt;&lt;/script&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JavaScript","slug":"javaEE/JavaScript","permalink":"http://li-zhi.net.cn/categories/javaEE/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://li-zhi.net.cn/tags/JavaScript/"}]},{"title":"JVM-å†…å­˜æ¨¡å‹","slug":"JVM-å†…å­˜æ¨¡å‹","date":"2022-03-12T02:41:34.000Z","updated":"2022-04-08T12:23:37.059Z","comments":true,"path":"javaEE/JVM/2022/03/12/JVM-å†…å­˜æ¨¡å‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JVM/2022/03/12/JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/","excerpt":"","text":"å†…å­˜æ¨¡å‹ç¡¬ä»¶çš„å†…å­˜æ¨¡å‹åœ¨è®²javaå†…å­˜æ¨¡å‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ç¡¬ä»¶çš„å†…å­˜æ¨¡å‹ CPUçš„å¤„ç†é€Ÿåº¦å’Œå†…å­˜çš„è¯»å†™ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§çš„ï¼Œæ‰€ä»¥åœ¨CPUå’Œä¸»å­˜ä¹‹é—´åŠ ä¸Šäº†ä¸€å±‚ç¼“å­˜ è¿™ç§ç»“æ„åœ¨å•CPUçš„æ—¶å€™ï¼Œå¤„ç†çš„å¾ˆå¥½ ä½†æ˜¯å½“å¤šCPUçš„æ—¶å€™ï¼Œ è¿™æ—¶å€™å°±ä¼šå‡ºç°ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ å½“CPUAè¯»å–ä¸»å­˜ä¸­çš„æ•°æ®ä¹‹åï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œåœ¨å°†å…¶åˆ·æ–°å›ä¸»å­˜çš„ä¹‹å‰ï¼ŒCPUBè¯»å–ä¸»å­˜ä¸­çš„æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå°†å…¶åˆ·æ–°å›ä¸»å­˜ï¼Œè¿™æ—¶å€™CPUAä¹ŸåŒæ—¶å°†å…¶ä¿®æ”¹åçš„æ•°æ®åˆ·æ–°å›ä¸»å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®åˆ°åº•ä»¥å“ªä¸€ä¸ªä¸ºå‡†ï¼Œè¿™ä¸ªå°±æ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå°±å‡ºç°äº†ç¼“å­˜ä¸€è‡´æ€§åè®® 1ã€çª¥æ¢æ€§ 2ã€ç›®å½•å‹ æœ‰äº†è¿™ä¸€å±‚åè®®ï¼Œåœ¨ç¡¬ä»¶å±‚é¢ï¼Œå°±è§£å†³äº†ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œå³æ±‡ç¼–è¯­è¨€èƒ½å¤Ÿè¿è¡Œåœ¨ä¸€ä¸ªå…·æœ‰ç¼“å­˜ä¸€è‡´æ€§çš„å†…å­˜è§†å›¾ä¸­ Javaçš„å†…å­˜æ¨¡å‹è®¾è®¡ç¼–ç¨‹è¯­è¨€çš„å†…å­˜æ¨¡å‹æ˜¯ä¸ºäº†èƒ½å¤Ÿè¯¥è¯­è¨€ä¹Ÿå¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå†…å­˜ä¸€è‡´æ€§çš„è§†å›¾ï¼Œäºæ˜¯åœ¨ç¡¬ä»¶å†…å­˜æ¨¡å‹ä¹‹ä¸Šï¼Œå°±æœ‰äº†é«˜çº§è¯­è¨€çš„å†…å­˜æ¨¡å‹ Javaå†…å­˜æ¨¡å‹å°±å±è”½äº†å„ç§ç¡¬ä»¶çš„æ“ä½œç³»ç»Ÿçš„å†…å­˜å·®å¼‚ï¼Œä½¿å¾—javaå¯ä»¥æ­£å¸¸çš„è¿è¡Œåœ¨å„å¤§æ“ä½œç³»ç»Ÿä¸Š è™šæ‹Ÿæœºæ ˆä¹Ÿå¯ä»¥å«åšjavaæ–¹æ³•æ ˆï¼Œè¯¥æ ˆä¸­å­˜æ”¾8å¤§åŸºç¡€ç±»å‹çš„æ•°æ®å’Œå¯¹è±¡çš„å¼•ç”¨ å †ä¸­å­˜æ”¾ç€æ‰€æœ‰çš„javaå¯¹è±¡ å†…å­˜è¯»å†™æŒ‡ä»¤ ä½œç”¨äºä¸»å­˜ ä½œç”¨äºå·¥ä½œå†…å­˜ lockï¼šé”å®š loadï¼šåŠ è½½æ•°æ® unlockï¼šè§£é” storeï¼šå­˜å‚¨æ•°æ® readï¼šè¯»å– useï¼šä½¿ç”¨æ•°æ® writeï¼šå†™å…¥ assignï¼šèµ‹å€¼ ä¸Šé¢çš„å›¾åªæ˜¯ä¸€ç§ç†æƒ³çŠ¶æ€ï¼Œä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§é—®é¢˜ 1ã€å¯è§æ€§ å½“çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜ä¸­çš„æ•°æ®ä¿®æ”¹åï¼Œåˆ·æ–°å›ä¸»å­˜åï¼Œçº¿ç¨‹Bç›´æ¥ä½¿ç”¨æœ¬åœ°å†…å­˜ä¸­çš„æ•°æ®ï¼Œæ²¡æœ‰ä½¿ç”¨åˆ·æ–°åçš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ 2ã€åŸå­æ€§ å½“çº¿ç¨‹Aä¿®æ”¹äº†æ•°æ®ï¼Œè¿˜æ²¡åˆ·æ–°å›ä¸»å­˜ï¼Œçº¿ç¨‹Bä¹Ÿä¿®æ”¹äº†æ•°æ®ï¼Œä¹Ÿè¦åˆ·æ–°å›ä¸»å­˜ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä¸»å­˜ä¸­åº”è¯¥åˆ·æ–°æˆå“ªä¸ªçº¿ç¨‹ä¿®æ”¹åçš„å€¼å‘¢ çº¿ç¨‹é€šä¿¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨å¹¶å‘æ“ä½œåŒä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œä¼šå¼•å‘å¾ˆå¤šçš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜è¢«æ€»ç»“ä¸ºå¹¶å‘ä¸‰è¦ç´  1ã€å¯è§æ€§ 2ã€åŸå­æ€§ 3ã€æœ‰åºæ€§ å¯è§æ€§å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ä¹‹åï¼Œå…¶ä»–æ‰€æœ‰ä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹éƒ½åº”è¯¥ç«‹åˆ»å¾—çŸ¥æ­¤ä¿®æ”¹ ä¸¤å±‚å«ä¹‰ ç¬¬ä¸€ç§å«ä¹‰ çº¿ç¨‹Aä¿®æ”¹äº†æ•°æ®Xï¼Œçº¿ç¨‹Béœ€è¦ä½¿ç”¨åˆ°æœ€æ–°çš„æ•°æ®Xï¼ˆè¿™æ˜¯çº¿ç¨‹Bæ²¡æœ‰é‡æ–°è¯»å–ä¸»å­˜å¯¼è‡´çš„ï¼‰ 12345678910111213141516public class Demo &#123; static int a =1; public static void main(String[] args) throws InterruptedException &#123; Thread thread1 = new Thread(() -&gt; &#123; while (a == 1) &#123; &#125; &#125;); Thread thread2 = new Thread(() -&gt; &#123; a = 0; &#125;); thread1.start(); TimeUnit.SECONDS.sleep(1); thread2.start(); &#125;&#125; æ§åˆ¶å°ä¸ä¼šè¿”å›å“åº”ç ï¼Œè€Œæ˜¯ä¸€ç›´æ­»å¾ªç¯ã€‚ å½“thread1å¼€å§‹å¾ªç¯çš„æ—¶å€™ï¼Œæœ¬åœ°å†…å­˜ä¸­a=1ï¼Œå½“thread2ä¿®æ”¹äº†aä¸º0çš„æ—¶å€™ï¼Œthread1å¹¶ä¸çŸ¥é“ï¼Œè€Œæ˜¯ä¸€ç›´ä½¿ç”¨ç€a=1ï¼Œæ‰€ä»¥ä¼šä¸€ç›´å¾ªç¯ ä¸¤ç§è§£å†³æ–¹æ³• 1ã€å°†aå˜é‡åŠ ä¸€ä¸ªä¿®é¥°è¯volatile å¦‚æœä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥å…±äº«å˜é‡è¢«ä¿®æ”¹åï¼Œå°†ä¼šç›´æ¥å†™å…¥ä¸»å­˜ï¼Œå½“å…¶ä»–çº¿ç¨‹è¯»å–è¯¥å…±äº«å˜é‡çš„æ—¶å€™ï¼Œä¹Ÿä¼šç›´æ¥ä»ä¸»å­˜ä¸­è¯»å– 2ã€ä½¿ç”¨synchronizedåŒ…è£¹ï¼Œå¹¶ä½¿ç”¨è¯¥æ•°æ® synchronizedå—ä¸­è¯»å†™å˜é‡ä¼šéšå¼è°ƒç”¨lockå’ŒunlockæŒ‡ä»¤ 123456789101112131415161718public class Demo &#123; static int a =1; public static void main(String[] args) throws InterruptedException &#123; Thread thread1 = new Thread(() -&gt; &#123; while (a == 1) &#123; synchronized(this)&#123; int b = a + 1; &#125; &#125; &#125;); Thread thread2 = new Thread(() -&gt; &#123; a = 0; &#125;); thread1.start(); TimeUnit.SECONDS.sleep(1); thread2.start(); &#125;&#125; ç¬¬äºŒå±‚å«ä¹‰ çº¿ç¨‹Béœ€è¦è¯»å–åˆ°çº¿ç¨‹Aä¿®æ”¹åçš„æ•°æ®xï¼Œä½†æ˜¯å› ä¸ºæŒ‡ä»¤é‡æ’ï¼Œåœ¨çº¿ç¨‹Aæœªä¿®æ”¹æ•°æ®xä¹‹å‰ï¼Œçº¿ç¨‹Bè¯»åˆ°äº†æ•°æ®x 123456789101112131415161718public class Demo2 &#123; static int a =0; static boolean b =false; public static void main(String[] args) &#123; Thread thread1 = new Thread(() -&gt; &#123; a = 1;//1 b = true;//2 &#125;); Thread thread2 = new Thread(() -&gt; &#123; if (b) &#123;//3 int x = a;// 4 // è¿™ä¸ªxä¸€å®šæ˜¯1å—? System.out.println(x); // 5 &#125; &#125;); thread1.start(); thread2.start(); &#125;&#125; åœ¨ç¡¬ä»¶å†…å­˜æ¨¡å‹çš„æ—¶å€™å°±è¯´è¿‡ï¼Œåœ¨åº•å±‚ä¼šå­˜åœ¨æŒ‡ä»¤é‡æ’çš„æƒ…å†µï¼Œ æˆ‘ä»¬è§‰å¾—çš„é¡ºåºåº”è¯¥æ˜¯ 1-&gt;2-&gt;3-&gt;4 ä½†æ˜¯åœ¨ç¼–è¯‘åé¡ºåºæœ‰å¯èƒ½å°±å˜æˆäº† 2-&gt;3-&gt;4-&gt;1 è¿™ä¹Ÿæ˜¯ä¸€ç§å¯è§æ€§çš„é—®é¢˜ åŒæ ·çš„è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šè¿°ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ç§é—®é¢˜ volatileæ˜¯ç¦æ­¢äº†å½“å‰å˜é‡ä¸ä¹‹å‰çš„ä»£ç è¯­å¥è¿›è¡ŒæŒ‡ä»¤é‡æ’ synchronizedå°±æ˜¯å°†ä¸¤æ®µä»£ç åˆ†åˆ«æ†ç»‘åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆæ— è®ºåœ¨thread1ä¸­æ€ä¹ˆæŒ‡ä»¤é‡æ’ï¼Œéƒ½ä¸ä¼šå½±å“thread2å¯¹äºå˜é‡çš„è¯»å– Happens-BeforeåŸåˆ™æˆ‘ä»¬å¹³æ—¶å¾ˆå°‘é‡åˆ°å¯è§æ€§é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ç«™åœ¨äº†å‰äººçš„è‚©è†€ä¸Šï¼Œè®¾è®¡å†…å­˜æ¨¡å‹çš„å‰è¾ˆå·²ç»å¸®æˆ‘ä»¬è§£å†³äº†æ­¤é—®é¢˜ï¼Œè¿™å°±æ˜¯Happens-BeforeåŸåˆ™ å®šä¹‰ï¼šå¯¹äºä¸¤ä¸ªæ“ä½œAå’Œæ“ä½œBï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æœA Happens-Before Bï¼ˆå³Aå…ˆäºBæ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä¿è¯å½“Aæ“ä½œæ‰§è¡Œå®Œåï¼ŒAæ“ä½œçš„æ‰§è¡Œç»“æœå¯¹Bæ“ä½œæ˜¯å¯è§çš„ ç¨‹åºé¡ºåºåŸåˆ™ é”å®šåŸåˆ™ volatileåŸåˆ™ çº¿ç¨‹å¯åŠ¨åŸåˆ™ çº¿ç¨‹ç»“æŸåŸåˆ™ ä¸­æ–­è§„åˆ™ ç»ˆç»“å™¨è§„åˆ™ ä¼ é€’æ€§åŸåˆ™ åŸå­æ€§ä¸€ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ 1ã€å•æŒ‡ä»¤åŸå­æ“ä½œ 2ã€åˆ©ç”¨é”çš„ç»„åˆæŒ‡ä»¤åŸå­æ“ä½œ æœ‰åºæ€§æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½å¯¼è‡´æœ‰çš„ä»£ç æ‰§è¡Œé¡ºåºä¿®æ”¹åå¯èƒ½ä¼šå¯¼è‡´ä¸é¡ºåºæ‰§è¡Œçš„ç»“æœä¸åŒ è¿™é‡Œå¯ä»¥ä½¿ç”¨Happens-BeforeåŸåˆ™æ¥è§£å†³é—®é¢˜","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"http://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"http://li-zhi.net.cn/tags/JVM/"}]},{"title":"JVM-ç±»åŠ è½½å™¨","slug":"JVM-ç±»åŠ è½½å™¨","date":"2022-03-11T14:47:01.000Z","updated":"2022-03-18T10:13:35.202Z","comments":true,"path":"javaEE/JVM/2022/03/11/JVM-ç±»åŠ è½½å™¨/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JVM/2022/03/11/JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/","excerpt":"","text":"ç±»çš„åŠ è½½è¿‡ç¨‹ç±»çš„åŠ è½½è¿‡ç¨‹åˆ†ä¸‰ä¸ªé˜¶æ®µ ç±»çš„åŠ è½½ &#x3D;&#x3D;ã€‹ç±»çš„é“¾æ¥ &#x3D;&#x3D;ã€‹ç±»çš„åˆå§‹åŒ– ç±»çš„åŠ è½½ï¼šå°†Classæ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨å †ä¸­ï¼ˆæ–¹æ³•åŒºï¼‰ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–è¯¥ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ ç±»çš„é“¾æ¥ï¼šå°†Javaç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JVMä¸­ éªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ç¬¦åˆJVMè§„èŒƒ å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®æˆå‘˜å˜é‡çš„é»˜è®¤å€¼ è§£æï¼šJVMå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ ç±»çš„åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»æ„é€ å™¨&lt; clinit &gt;()æ–¹æ³•çš„è¿‡ç¨‹ ç±»æ„é€ å™¨æ–¹æ³•æ˜¯ç”±ç¼–è¯‘æœŸæŒ‰é¡ºåºæ”¶é›†ç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæˆçš„ï¼ˆç±»æ„é€ å™¨æ˜¯æ„é€ ç±»ä¿¡æ¯çš„ï¼Œä¸æ˜¯å¯¹è±¡æ„é€ å™¨ï¼‰ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå…¶çˆ¶ç±»ä¸ºåˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» JVMä¼šä¿è¯ç±»æ„é€ å™¨åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¢«æ­£ç¡®åŠ é” ç±»çš„é“¾æ¥ä¸ºé»‘ç›’å®ç° ç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼ˆä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ å½“JVMå¯åŠ¨çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–mainæ–¹æ³•æ‰€åœ¨çš„ç±» new ä¸€ä¸ªç±»çš„å¯¹è±¡ è°ƒç”¨è¯¥ç±»çš„é™æ€æˆå‘˜ï¼ˆé™¤äº†finalï¼‰å’Œé™æ€æ–¹æ³• ä½¿ç”¨åå°„å¯¹å…¶ç±»è¿›è¡Œåå°„è°ƒç”¨ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå…¶çˆ¶ç±»è‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» ç±»çš„è¢«åŠ¨å¼•ç”¨ï¼ˆä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ å½“è®¿é—®ä¸€ä¸ªé™æ€åŸŸçš„æ—¶å€™ï¼Œåªæœ‰çœŸæ­£å£°æ˜è¯¥åŸŸçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–ã€‚ä¸¾ä¸ªæ —å­ï¼šå½“é€šè¿‡å­ç±»è°ƒç”¨çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œè¯¥å­ç±»æ˜¯ä¸ä¼šè¢«åˆå§‹åŒ–çš„ é€šè¿‡æ•°ç»„å®šä¹‰ç±»å¼•ç”¨ï¼Œä¸ä¼šå¯¼è‡´åˆå§‹åŒ– å¼•ç”¨å¸¸é‡ä¸ä¼šå¯¼è‡´åˆå§‹åŒ– ç±»åŠ è½½å™¨å¸‚é¢ä¸Šæœ‰ä¸‰ç§JVMï¼Œä¸åŒçš„JVMå¯¹ç±»åŠ è½½å™¨çš„å®ç°æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„å¹¶ä¸”ä½¿ç”¨çš„æ˜¯Sunå…¬å¸çš„HotSpot ç±»åŠ è½½å™¨çš„ä½œç”¨å°±æ˜¯å°†ç±»ï¼ˆclassï¼‰è£…è¿›å†…å­˜çš„ JVMè§„å®šäº†ä»¥ä¸‹ç±»å‹çš„åŠ è½½å™¨ å¼•å¯¼ç±»åŠ è½½å™¨ï¼šç”¨C++ç¼–å†™çš„ï¼Œæ˜¯JVMè‡ªå¸¦çš„ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£javaå¹³å°çš„æ ¸å¿ƒåº“ï¼Œç”¨æ¥è£…è½½æ ¸å¿ƒç±»åº“ï¼Œè¯¥åŠ è½½å™¨æ— æ³•ç›´æ¥è·å–ï¼ˆè·å–çš„æ—¶å€™ä¼šæ˜¯nullï¼‰ æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtClassLoaderï¼‰ï¼šè´Ÿè´£**&#x2F;lib&#x2F;etc**ç›®å½•ä¸‹çš„jaråŒ…æˆ·æˆ–è€… -d java.ext.dirsæŒ‡å®šç›®å½•ä¸‹çš„jaråŒ…è£…å…¥å·¥ä½œåº“ ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ï¼šè´Ÿè´£java -classpathæˆ–è€…java.class.pathæŒ‡å®šç›®å½•ä¸‹çš„ç±»ä¸jaråŒ… ç”¨æˆ·åŠ è½½å™¨ï¼ˆUser ClassLoaderï¼‰ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„åŠ è½½å™¨ æ‰©å±•ç±»åŠ è½½å™¨ã€ç³»ç»Ÿç±»åŠ è½½å™¨ã€ç”¨æˆ·åŠ è½½å™¨éƒ½æ˜¯ç»§æ‰¿è‡ªjava.lang.ClassLoader JVMè§„èŒƒï¼šæ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰å±äºè‡ªå·±çš„å‘½åç©ºé—´ åŒäº²å§”æ´¾æœºåˆ¶æ£€æŸ¥é¡ºåºä»ä¸‹è‡³ä¸Šï¼ŒåŠ è½½é¡ºåºä»é¡¶è‡³ä¸‹ ä¸¾ä¸ªæ —å­ï¼šæˆ‘å†™äº†ä¸€ä¸ªStudentç±»ï¼Œæˆ‘è¦åŠ è½½å®ƒéœ€è¦ç»è¿‡ä»¥ä¸‹è¿‡ç¨‹ å…ˆå°†è¯¥ä»»åŠ¡å§”æ‰˜ç»™AppClassLoader AppClassLoaderå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œå°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™ExtClassLoader ExtClassLoaderä¹Ÿå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œç»§ç»­å°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™BootStrapClassLoader BootStrapClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½è‡ªå·±åŠ è½½ï¼Œä½†æ˜¯åœ¨è‡ªå·±ç®¡ç†çš„libç›®å½•ä¸‹å¹¶æ²¡æœ‰æ‰¾åˆ°è¯¥ç±»ï¼Œåªèƒ½å°†ä»»åŠ¡å†æ¬¡äº¤ç»™ExtClassLoaderå»åŠ è½½ é‚£ExtClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½åœ¨è‡ªå·±ç®¡ç†çš„extç›®å½•ä¸‹æ‰¾è¯¥ç±»ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œåªèƒ½å°†ä»»åŠ¡ç»§ç»­å‘ä¸‹è½¬äº¤ç»™AppClassLoader AppClassLoaderä¸å¾—ä¸è‡ªå·±å»å°è¯•åŠ è½½è¯¥ç±»ï¼Œäºæ˜¯åŠ è½½æˆåŠŸ æ—¢ç„¶æœ€åè¿˜æ˜¯AppClassLoaderå»åŠ è½½Studentç±»ä½•å¿…ç»•ä¸€ä¸ªå¤§åœˆå­å‘¢ï¼Ÿ è¿™æ˜¯ä¸ºäº†é˜²æ­¢åŸå§‹ç±»è¢«ç”¨æˆ·å†™çš„ç±»æ‰€è¦†ç›–ã€‚ å†ä¸¾ä¸ªæ —å­ï¼šæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªStringç±»ï¼Œæˆ‘è¦åŠ è½½å®ƒä¼šç»å†ä»¥ä¸‹è¿‡ç¨‹ å…ˆå°†è¯¥ä»»åŠ¡å§”æ‰˜ç»™AppClassLoader ExtClassLoaderä¹Ÿå¾ˆæ‡’ï¼Œå®ƒä¸æƒ³åŠ è½½ï¼Œç»§ç»­å°†ä»»åŠ¡å‘ä¸Šå§”æ‰˜ç»™BootStrapClassLoader BootStrapClassLoaderæ²¡æ³•å·æ‡’äº†ï¼Œåªèƒ½è‡ªå·±åŠ è½½ï¼Œäºæ˜¯åœ¨è‡ªå·±ç®¡ç†çš„libç›®å½•ä¸‹æ‰¾åˆ°è¯¥ç±»å¹¶åŠ è½½ï¼Œå°†åŠ è½½ç»“æœå‘ä¸‹ä¸€ç›´ä¼ é€’åˆ°ç”¨æˆ· å¯¹åŒäº²å§”æ´¾æ¨¡å‹çš„ç ´å1ã€è‡ªå®šä¹‰ç±»åŠ è½½å™¨ æˆ‘ä»¬å†™ä¸€ä¸ªç±»ç»§æ‰¿java.lang.ClassLoaderï¼Œé‡å†™loadClassæ–¹æ³•ï¼ŒåŒäº²å§”æ´¾çš„é€»è¾‘å°±åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½†æ˜¯æˆ‘è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨å¯ä»¥ä¸è¿™ä¹ˆå†™ï¼Œä¹Ÿå°±ç ´åäº†åŒäº²å§”æ´¾ã€‚åœ¨jdk1.2ä¹‹åï¼Œjdkå¢åŠ äº†ä¸€ä¸ªfindClassæ–¹æ³•æä¾›ç»™ä¸Šå±‚é‡å†™ï¼Œä¹Ÿå°±æœ‰æ•ˆåœ°é˜²æ­¢äº†åŒäº²å§”æ´¾è¢«ç ´å 1234567891011121314151617181920212223public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException &#123; ClassLoader myClassLoader = new ClassLoader()&#123; @Override public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException &#123; try&#123; String fileName = name.substring(name.lastIndexOf(&quot;.&quot;)+1)+&quot;.class&quot;; InputStream is = getClass().getResourceAsStream(fileName); if(is==null)&#123; return super.loadClass(name); &#125; byte[] buffer = new byte[is.available()]; is.read(buffer); return defineClass(name,buffer,0, buffer.length); &#125;catch (Exception e)&#123; e.printStackTrace(); throw new ClassNotFoundException(name); &#125; &#125; &#125;; Object o = myClassLoader.loadClass(&quot;com.test.A&quot;).newInstance(); System.out.println(o.getClass()); System.out.println(o instanceof com.test.A);&#125; æ§åˆ¶å°è¾“å‡º 12class com.test.Afalse è¿™ä¸ä»…ç ´åäº†åŒäº²å§”æ´¾ï¼Œå¹¶ä¸”è¯æ˜äº†æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ 2ã€SPIï¼ˆService Provider Interfaceï¼‰æœåŠ¡å‘ç°æœºåˆ¶ JDKä¸­å®šä¹‰äº†JDBCçš„æ¥å£ï¼Œè§„èŒƒå„å¤§å‚å®¶ã€‚å¯¹äºJDKä¸­çš„æ¥å£ï¼Œä½¿ç”¨çš„æ˜¯BootstrapClassLoaderä½†æ˜¯å¯¹äºå„å¤§å‚å®¶çš„å®ç°ç±»ï¼Œä½¿ç”¨çš„æ˜¯ApplClassLoader 1234567891011121314151617181920212223242526272829303132333435@CallerSensitivepublic static Driver getDriver(String url) throws SQLException &#123; println(&quot;DriverManager.getDriver(\\&quot;&quot; + url + &quot;\\&quot;)&quot;); ensureDriversInitialized(); Class&lt;?&gt; callerClass = Reflection.getCallerClass(); // Walk through the loaded registeredDrivers attempting to locate someone // who understands the given URL. for (DriverInfo aDriver : registeredDrivers) &#123; // If the caller does not have permission to load the driver then // skip it. if (isDriverAllowed(aDriver.driver, callerClass)) &#123; try &#123; if (aDriver.driver.acceptsURL(url)) &#123; // Success! println(&quot;getDriver returning &quot; + aDriver.driver.getClass().getName()); return (aDriver.driver); &#125; &#125; catch(SQLException sqe) &#123; // Drop through and try the next driver. &#125; &#125; else &#123; println(&quot; skipping: &quot; + aDriver.driver.getClass().getName()); &#125; &#125; println(&quot;getDriver: no suitable driver&quot;); throw new SQLException(&quot;No suitable driver&quot;, &quot;08001&quot;);&#125; 123456@CallerSensitivepublic static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service) &#123; // å½“å‰çº¿ç¨‹çš„ClassLoaderé»˜è®¤ä¸ºAppClassLoader ClassLoader cl = Thread.currentThread().getContextClassLoader(); return new ServiceLoader&lt;&gt;(Reflection.getCallerClass(), service, cl);&#125; 3ã€çƒ­éƒ¨ç½²","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"http://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"http://li-zhi.net.cn/tags/JVM/"}]},{"title":"ç®—æ³•-å·®åˆ†æ•°ç»„","slug":"ç®—æ³•-å·®åˆ†æ•°ç»„","date":"2022-03-11T04:45:24.000Z","updated":"2022-06-18T13:18:41.138Z","comments":true,"path":"ç®—æ³•/2022/03/11/ç®—æ³•-å·®åˆ†æ•°ç»„/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/11/%E7%AE%97%E6%B3%95-%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84/","excerpt":"","text":"å·®åˆ†æ•°ç»„è¯¥æŠ€å·§å’Œå‰ç¼€å’Œæ•°ç»„ä¸€æ ·éƒ½æ˜¯ç”¨åœ¨æ•°ç»„ä¸Šçš„ï¼Œ å‰ç¼€å’Œæ•°ç»„æ˜¯ç”¨æ¥ç®€åŒ– ä»»æ„åŒºé—´çš„å…ƒç´ ä¹‹å’Œçš„ï¼Œ å·®åˆ†æ•°ç»„æ˜¯ç”¨æ¥ç®€åŒ– é¢‘ç¹åœ¨ä»»æ„åŒºé—´å‡å»æŸä¸ªå€¼æˆ–è€…åœ¨ä»»æ„åŒºé—´åŠ ä¸ŠæŸä¸ªå€¼ï¼Œæœ€åè¾“å‡ºæœ€åçš„æ•°ç»„ç»“æœçš„ æ¯”å¦‚ï¼Œç»™ä½ ä¸€ä¸ªæ•°ç»„nums[2,4,1,45,21,54,12,43]ï¼Œæˆ‘éœ€è¦å…ˆå°†[2,4]éƒ½åŠ 3ï¼Œå†å°†[3,6]éƒ½å‡1ï¼Œå†â€¦..ï¼Œæœ€åè¾“å‡ºæœ€åçš„æ•°ç»„ç»“æœ å¦‚æœæ²¡å­¦è¿‡å·®åˆ†æ•°ç»„ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ä½¿ç”¨forå¾ªç¯å°†èŒƒå›´å†…çš„æ•°éƒ½è¿›è¡Œæ“ä½œï¼Œæœ€åè¾“å‡ºæ•°ç»„ï¼Œ å¯¹numsçš„æ“ä½œååˆ†é¢‘ç¹ï¼Œè¿™æ ·çš„æ•ˆç‡ååˆ†ä½ä¸‹ è¿™é‡Œæˆ‘ä»¬å°±ä½¿ç”¨å·®åˆ†æ•°ç»„æ¥æé«˜æˆ‘ä»¬çš„æ•ˆç‡ 12345int[] diff = new int[nums.length];diff[0] = nums[0];for (int i = 1; i &lt; nums.length; i++) &#123; diff[i] = nums[i] - nums[i-1];&#125; å½“i!=0çš„æ—¶å€™diff[i]ä»£è¡¨nums[i]-nums[i-1]çš„å€¼ï¼Œå³å½“å‰å€¼ä¸å‰ä¸€ä¸ªå€¼çš„å·® é‚£æœ‰äº†è¿™ä¸ªå·®åˆ†æ•°ç»„ï¼Œæˆ‘ä»¬æ€ä¹ˆå°†æ•°ç»„è¿˜åŸå‘¢ï¼Ÿ 12345int[] res = new int[diff.length];res[0] = diff[0];for (int i = 1; i &lt; diff.length; i++) &#123; res[i] = res[i-1] + diff[i];&#125; diffçš„è¿˜åŸæ˜¯å…ˆnewä¸€ä¸ªæ–°çš„æ•°ç»„æ¥å­˜æ”¾æœ€åçš„ç»“æœï¼Œå¯¹äº0ä¹‹åçš„å…ƒç´ ï¼Œres[i]ç­‰äºå‰ä¸€ä¸ªå…ƒç´ åŠ ä¸Šå½“å‰ç´¢å¼•çš„diff å¦‚æœæˆ‘è¦å°†[i,j]åŒºé—´åŠ 2ï¼Œé‚£ä¹ˆå°±å°†diff[i]+=2;diff[j+1]-=2å³å¯ æˆ‘å°†diff[i]+=2ï¼Œå³è¾¾åˆ°res[i]åˆ°æœ€åéƒ½ä¼šè¢«åŠ ä¸Š2çš„æ•ˆæœ æˆ‘å°†diff[j+1]-=2ï¼Œå³è¾¾åˆ°res[j+1]ä¹‹åï¼Œä¼šå°†å‰é¢çš„åŠ 2æŠµæ¶ˆï¼Œæ‰€ä»¥jä¹‹åçš„å…ƒç´ å°±ä¸ä¼šè¢«å½±å“äº† æˆ‘ä»¬æ¥å’Œä¹‹å‰çš„é‚£é“å‰ç¼€å’Œæ•°ç»„ä¸€æ ·ï¼ŒæŠ½è±¡å‡ºæ¥ä¸€ä¸ªç±»æ¥å¤„ç†æ•°ç»„ 123456789101112class Diff&#123; private int[] diff; public Diff(int[] nums)&#123; &#125; public void increase(int left, int right, int step)&#123; &#125; public int[] getResult()&#123; &#125;&#125; å¤§å®¶å¯ä»¥å…ˆè‡ªå·±å†™ä¸€ä¸‹ è¿™æ˜¯å®ç°ï¼š 123456789101112131415161718192021222324class Diff&#123; private int[] diff; public Diff(int[] nums)&#123; diff = new int[nums.length]; diff[0] = nums[0]; for (int i = 1; i &lt; nums.length; i++) &#123; diff[i] = nums[i]-nums[i-1]; &#125; &#125; public void increase(int left, int right, int step)&#123; diff[left]+=step; if(right&lt;diff.length-1)&#123; diff[right+1]-=step; &#125; &#125; public int[] getResult()&#123; int[] result = new int[diff.length]; result[0]=diff[0]; for (int i = 1; i &lt; diff.length; i++) &#123; result[i] = result[i-1]+diff[i]; &#125; return result; &#125;&#125; æ¥ä¸‹æ¥å°±è¦å®è·µå‡ºçœŸçŸ¥ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™é“åŠ›æ‰£é¢˜ï¼Œè¿™é“é¢˜åœ¨åŠ›æ‰£ä¸Šæ˜¯plusä¼šå‘˜æ‰å¯ä»¥æŸ¥çœ‹ï¼Œè¿™é‡Œç›´æ¥å°†é¢˜ç›®ç®€è¿°ç»™å¤§å®¶ åŠ›æ‰£370ï¼šåŒºé—´åŠ æ³• 12345678910111213141516# 370.åŒºé—´åŠ æ³•å‡è®¾ä½ æœ‰ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„numsï¼Œåˆå§‹æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°å­—å‡ä¸º 0ï¼Œä½ å°†ä¼šè¢«ç»™å‡º k ä¸ªæ›´æ–°çš„æ“ä½œã€‚å…¶ä¸­ï¼Œæ¯ä¸ªæ“ä½œä¼šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰å…ƒç»„ï¼š[left,right,step]ï¼Œä½ éœ€è¦è¯¥åŒºé—´[left,right] (åŒ…æ‹¬leftå’Œright)å¢åŠ stepã€‚è¯·ä½ è¿”å› k æ¬¡æ“ä½œåçš„æ•°ç»„ã€‚# ç¤ºä¾‹len=5,updates=[[1,3,3],[2,4,-5],[0,3,4]]åŸæ•°ç»„å˜ä¸º [0,0,0,0,0]åŸæ•°ç»„å˜ä¸º [0,3,3,3,0]åŸæ•°ç»„å˜ä¸º [0,3,-2,-2,-5]åŸæ•°ç»„å˜ä¸º [4,7,2,2,-5]result: [4,7,2,2,-5]# æ–¹æ³•ç­¾åpublic int[] getModifiedArray(int[] nums, int[][] updates) &#123; &#125; åªè¦æ‡‚äº†ä¸Šé¢çš„Diffç±»çš„å†™æ³•ï¼Œè¿™é¢˜è½»è½»æ¾æ¾æ‹¿ä¸‹ï¼ ä»£ç ï¼š 12345678910111213141516171819public int[] getModifiedArray(int[] nums, int[][] updates) &#123; int[] diff = new int[nums.length]; diff[0]=nums[0]; for (int i = 1; i &lt; diff.length; i++) &#123; diff[i] = nums[i]-nums[i-1]; &#125; for (int[] update : updates) &#123; diff[update[0]]+=update[2]; if(update[1]+1&lt;diff.length)&#123; diff[update[1]+1]-=update[2]; &#125; &#125; int[] result = new int[diff.length]; result[0]=diff[0]; for (int i = 1; i &lt; result.length; i++) &#123; result[i] = result[i-1]+diff[i]; &#125; return result;&#125; æ—¢ç„¶æˆ‘ä»¬ä¹‹å‰å†™äº†Diffé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒ 1234567public int[] getModifiedArray1(int[] nums, int[][] updates) &#123; Diff diff = new Diff(nums); for (int[] update : updates) &#123; diff.increase(update[0],update[1],update[2]); &#125; return diff.getResult();&#125; æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹è¿™é“å®é™…åº”ç”¨é¢˜åŠ›æ‰£1109ï¼šèˆªç­é¢„è®¢ç»Ÿè®¡ æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™è¾¹éœ€è¦æ³¨æ„ä¸€ä¸‹ç´¢å¼•å’Œç¼–å·çš„å¯¹åº”å…³ç³»ï¼Œ 1234567891011121314151617class Solution &#123; public int[] corpFlightBookings(int[][] bookings, int n) &#123; int[] diff = new int[n]; for (int[] booking : bookings) &#123; diff[booking[0]-1]+=booking[2]; if(booking[1]&lt;n)&#123; diff[booking[1]]-=booking[2]; &#125; &#125; int[] answer = new int[diff.length]; answer[0]= diff[0]; for (int i = 1; i &lt; answer.length; i++) &#123; answer[i] = answer[i-1]+ diff[i]; &#125; return answer; &#125;&#125; ç›¸ä¿¡å­¦å®Œè¿™äº›ï¼Œä½ å¯¹å·®åˆ†æ•°ç»„çš„ç†è§£ä¹Ÿæ¯”è¾ƒæ·±åˆ»äº†","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-å‰ç¼€å’Œæ•°ç»„","slug":"ç®—æ³•-å‰ç¼€å’Œæ•°ç»„","date":"2022-03-10T10:01:29.000Z","updated":"2022-03-11T07:22:36.237Z","comments":true,"path":"ç®—æ³•/2022/03/10/ç®—æ³•-å‰ç¼€å’Œæ•°ç»„/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/10/%E7%AE%97%E6%B3%95-%E5%89%8D%E7%BC%80%E5%92%8C%E6%95%B0%E7%BB%84/","excerpt":"","text":"å‰ç¼€å’Œæ•°ç»„åŠ›æ‰£303ï¼šåŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ è¿™æ˜¯ä¸€é“å¾ˆå…¸å‹çš„ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„çš„é¢˜ç›®ã€‚ å¯¹äºé¢‘ç¹è®¡ç®—æ•°ç»„çš„ä¸€ä¸ªèŒƒå›´çš„å’Œï¼Œå­¦æ²¡è¿‡å‰ç¼€å’Œæ•°ç»„çš„ä¼šè¿™æ ·åšï¼Œ 1234567public int sumRange(int[] sums, int left, int right) &#123; int sum = 0; for(int i = left ;i &lt;= right;i++)&#123; sum += nums[i]; &#125; return sum;&#125; è¿™æ ·ç¡®å®å¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯é¢‘ç¹è¿™æ ·æ“ä½œï¼Œæ•ˆç‡ä¸æ˜¯å¾ˆé«˜ã€‚ æ‰€ä»¥å­¦è¿‡å‰ç¼€å’Œçš„ä¼šè¿™ä¹ˆå†™ä»è€Œæé«˜æ•ˆç‡ 1234567public int sumRange(int[] sums, int left, int right) &#123; int[] preSum = new int[nums.length + 1]; for (int i = 1; i &lt;= nums.length ; i++) &#123; preSum[i] = preSum[i-1] + nums[i-1]; &#125; return preSum[right+1] - preSum[left];&#125; æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªpreSum å®ƒçš„é•¿åº¦æ˜¯åŸæ•°ç»„çš„é•¿åº¦åŠ ä¸€ preSum[0]ç½®ä¸ºnumsæ•°ç»„å‰0ä¸ªçš„å’Œ preSum[1]ç½®ä¸ºnumsæ•°ç»„å‰1ä¸ªçš„å’Œ preSum[2]ç½®ä¸ºnumsæ•°ç»„å‰2ä¸ªçš„å’Œ æ‰€ä»¥æˆ‘å¦‚æœéœ€è¦[0,1]åŒºé—´çš„å’Œï¼Œåˆ™è¿”å›preSum[2]-preSum[0]ï¼ˆå‰2ä¸ªæ•°çš„å’Œå‡å»å‰0ä¸ªæ•°çš„å’Œï¼‰ æ‰€ä»¥æˆ‘å¦‚æœéœ€è¦[3,5]åŒºé—´çš„å’Œï¼Œåˆ™è¿”å›preSum[6]-preSum[3]ï¼ˆå‰6ä¸ªæ•°çš„å’Œå‡å»å‰3ä¸ªæ•°çš„å’Œï¼‰ æ‰€ä»¥è¿™é“åŠ›æ‰£303é¢˜çš„ä»£ç ä¸ºï¼š 1234567891011121314class NumArray &#123; private int[] preSum; public NumArray(int[] nums) &#123; preSum = new int[nums.length+1]; for (int i = 1; i &lt;= nums.length; i++) &#123; preSum[i]=preSum[i-1]+nums[i-1]; &#125; &#125; public int sumRange(int left, int right) &#123; return preSum[right+1]-preSum[left]; &#125;&#125; å°è¯•èº«æ‰‹ï¼šåˆä¸‰ä¸€ç­çš„æ•°å­¦æœŸæœ«æˆç»©(æ»¡åˆ†120åˆ†)å‡ºæ¥äº†ï¼Œç°å°†æˆç»©ä¹±åºåˆ—è¡¨å‘äºä½ ï¼Œè¯·ä½ ç»Ÿè®¡åœ¨[min,max]èŒƒå›´å†…çš„å­¦ç”Ÿäººæ•° æ–¹æ³•ç­¾åï¼špublic int scoreRange(List&lt;Integer&gt; scores, int fullMarks, int min, int max) åœ¨å­¦å‰ç¼€å’Œæ•°ç»„ä¹‹å‰ å…ˆå°†scoresæŒ‰å‡åºæ’åº ç„¶åä½¿ç”¨äºŒåˆ†æœç´¢ä¸¤ä¸ªç«¯ç‚¹ï¼Œå°†é•¿åº¦è¿”å› è¿™æ ·çš„æ€è·¯ç¡®å®æ²¡æ¯›ç—…ï¼Œä½†æ˜¯å¦‚æœé¢‘ç¹éœ€è¦æŸ¥è¯¢ï¼Œ å°±ç®—æ˜¯å¼ºå¦‚äºŒåˆ†æŸ¥æ‰¾ï¼Œä¹Ÿä¼šæ¶ˆè€—å¾ˆå¤šèµ„æº å­¦äº†å‰ç¼€å’Œæ•°ç»„ä¹‹å æ—¢ç„¶å­¦äº†å‰ç¼€å’Œæ•°ç»„ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¯¥æŠ€å·§å»ä¼˜åŒ– 1234567891011121314151617181920/** * è¿”å›æˆç»©èŒƒå›´å†…çš„å­¦ç”Ÿæ•° * @param scores å­¦ç”Ÿæˆç»©åˆ—è¡¨ * @param fullMarks è¿™é—¨æˆç»©çš„æ»¡åˆ† * @param min æœ€å°å€¼ * @param max æœ€å¤§å€¼ * @return æ»¡è¶³æˆç»©åŒºé—´çš„ä¸ªæ•° */public int scoreRange(List&lt;Integer&gt; scores, int fullMarks, int min, int max)&#123; int[] counts = new int[fullMarks+1]; int[] preSums = new int[fullMarks+2]; for (Integer score : scores) &#123; counts[score]++; &#125; preSums[0]=0; for (int i = 1; i &lt;= counts.length; i++) &#123; preSums[i] = preSums[i-1]+counts[i-1]; &#125; return preSums[max+1]-preSums[min];&#125; ç°åœ¨æˆ‘ä»¬æ¥è§£å†³åŠ›æ‰£304ï¼šäºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜ æœ¬è´¨å’Œä¸€ç»´çš„æ—¶å€™æ˜¯ä¸€æ ·çš„åªä¸è¿‡å˜æˆäº†äºŒç»´ï¼Œéœ€è¦é¢„å¤„ç†ä¸€ä¸ªäºŒç»´å‰ç¼€å’Œæ•°ç»„è€Œå·² 1234567891011121314151617181920class NumMatrix &#123; private int[][] preSums; public NumMatrix(int[][] matrix) &#123; preSums = new int[matrix.length][matrix[0].length+1]; for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 1; j &lt;= matrix[i].length; j++) &#123; preSums[i][j] = preSums[i][j-1] + matrix[i][j-1]; &#125; &#125; &#125; public int sumRegion(int row1, int col1, int row2, int col2) &#123; int sum = 0; for (int i = row1; i &lt;= row2; i++) &#123; sum+=preSums[i][col2+1]-preSums[i][col1]; &#125; return sum; &#125;&#125; è¿™æ˜¯å¤§ä½¬çš„è§£æ³• 1234567891011121314151617181920212223class NumMatrix &#123; // å®šä¹‰ï¼špreSum[i][j] è®°å½• matrix ä¸­å­çŸ©é˜µ [0, 0, i-1, j-1] çš„å…ƒç´ å’Œ private int[][] preSum; public NumMatrix(int[][] matrix) &#123; int m = matrix.length, n = matrix[0].length; if (m == 0 || n == 0) return; // æ„é€ å‰ç¼€å’ŒçŸ©é˜µ preSum = new int[m + 1][n + 1]; for (int i = 1; i &lt;= m; i++) &#123; for (int j = 1; j &lt;= n; j++) &#123; // è®¡ç®—æ¯ä¸ªçŸ©é˜µ [0, 0, i, j] çš„å…ƒç´ å’Œ preSum[i][j] = preSum[i-1][j] + preSum[i][j-1] + matrix[i - 1][j - 1] - preSum[i-1][j-1]; &#125; &#125; &#125; // è®¡ç®—å­çŸ©é˜µ [x1, y1, x2, y2] çš„å…ƒç´ å’Œ public int sumRegion(int x1, int y1, int x2, int y2) &#123; // ç›®æ ‡çŸ©é˜µä¹‹å’Œç”±å››ä¸ªç›¸é‚»çŸ©é˜µè¿ç®—è·å¾— return preSum[x2+1][y2+1] - preSum[x1][y2+1] - preSum[x2+1][y1] + preSum[x1][y1]; &#125;&#125; å†æ¥çœ‹çœ‹è¿™é“é¢˜åŠ›æ‰£560ï¼š å’Œä¸º K çš„å­æ•°ç»„ åªè¦å‰xæ€»å’Œä¹‹å·®ä¸ºkï¼Œåˆ™è¯´æ˜å­˜åœ¨ä¸€ä¸ªå­æ•°ç»„çš„å’Œä¸ºk ä»£ç ï¼š 1234567891011121314151617class Solution &#123; public int subarraySum(int[] nums, int k) &#123; int[] preSums = new int[nums.length+1]; for (int i = 1; i &lt;= nums.length; i++) &#123; preSums[i]=preSums[i-1]+nums[i-1]; &#125; int counter = 0; for (int i = 1; i &lt; preSums.length; i++) &#123; for (int j = 0; j &lt; i; j++) &#123; if(preSums[i]- preSums[j]==k)&#123; counter++; &#125; &#125; &#125; return counter; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨","slug":"ç®—æ³•-ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨","date":"2022-03-08T07:00:11.000Z","updated":"2022-06-18T13:18:36.401Z","comments":true,"path":"ç®—æ³•/2022/03/08/ç®—æ³•-ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/08/%E7%AE%97%E6%B3%95-%E4%BB%A5k%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%BA%E4%B8%80%E7%BB%84%E9%80%86%E8%BD%AC%E5%8D%95%E9%93%BE%E8%A1%A8/","excerpt":"","text":"ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨åŠ›æ‰£25ï¼šK ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é“é¢˜ç›®ï¼Œé¢˜ç›®ä¸éš¾ç†è§£ï¼Œå°±æ˜¯ä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„é€†è½¬å•é“¾è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨é€’å½’çš„æ€æƒ³æ¥æ€è€ƒä¸€ä¸‹è¿™é“é¢˜ é¦–å…ˆéœ€è¦ä¸€ä¸ªé€†è½¬å‰nä¸ªèŠ‚ç‚¹çš„æ–¹æ³• æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,int k) è¿­ä»£å®ç°ï¼š 123456789101112public ListNode reverseKNode(ListNode head,int k)&#123; ListNode prev = null; ListNode cur = head; ListNode suffix; while(cur!=null &amp;&amp; k--!=0)&#123; suffix = cur.next; cur.next = prev; prev = cur; cur = suffix; &#125; return prev;&#125; é€’å½’å®ç°ï¼š 123456789101112ListNode processor;// è¿™é‡Œçš„kè¦ä¿è¯ä¸è¶…è¿‡é“¾è¡¨é•¿åº¦public ListNode reverseKNode(ListNode head,int k)&#123; if(k == 1)&#123; processor = head.next; return head; &#125; ListNode node = reverseKNode1(head.next, k-1); head.next.next = head; head.next = processor; return node;&#125; æ–¹æ³•ç­¾åï¼špublic ListNode reverseKNode(ListNode head,ListNode end) é€’å½’å®ç°ï¼š 123456789101112ListNode processor;// [head,end)public ListNode reverseKNode(ListNode head,ListNode end)&#123; if(head.next == end)&#123; processor = head.next; return head; &#125; ListNode node = reverseKNode(head.next, end); head.next.next = head; head.next = processor; return node;&#125; è¿­ä»£å®ç°ï¼š 12345678910111213public ListNode reverseKNode(ListNode head,ListNode end)&#123; ListNode prev = null; ListNode cur = head; ListNode suffix; while(cur != end)&#123; suffix = cur.next; cur.next = prev; prev = cur; cur = suffix; &#125; return prev;&#125; kä¸ªä¸€ç»„é€†è½¬å•é“¾è¡¨123456789101112131415161718192021222324252627class Solution &#123; public ListNode reverseKGroup(ListNode head, int k) &#123; ListNode end = head; for (int i = 0; i &lt; k; i++) &#123; // å¦‚æœé•¿åº¦ä¸è¶³kï¼Œåˆ™ç›´æ¥è¿”å›å¤´éƒ¨ï¼Œä¸ç”¨é€†è½¬ if(end==null)&#123; return head; &#125; end = end.next; &#125; ListNode newHead = reverseKNode(head, k); head.next = reverseKGroup(end, k); return newHead; &#125; public ListNode reverseKNode(ListNode head, int k)&#123; ListNode prev=null; ListNode cur=head; ListNode suffix; while(cur!=null&amp;&amp;k--!=0)&#123; suffix=cur.next; cur.next=prev; prev=cur; cur=suffix; &#125; return prev; &#125;&#125; ç¬¬äºŒæ¬¡å†™ 12345678910111213141516171819202122public ListNode reverseKGroup(ListNode head, int k)&#123; ListNode node = head; for (int i = 0; i &lt; k; i++) &#123; if(node==null)&#123; return head; &#125; node=node.next; &#125; ListNode newHead = reverseKNode(head,k,node); head.next=reverseKGroup(node,k); return newHead;&#125;private ListNode reverseKNode(ListNode head,int k,ListNode tail)&#123; if(k==1)&#123; return head; &#125; ListNode newHead=reverseKNode(head.next,k-1,tail); head.next.next=head; head.next=tail; return newHead;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-é€†è½¬å•é“¾è¡¨","slug":"ç®—æ³•-é€†è½¬å•é“¾è¡¨","date":"2022-03-08T01:31:19.000Z","updated":"2022-03-10T12:53:22.956Z","comments":true,"path":"ç®—æ³•/2022/03/08/ç®—æ³•-é€†è½¬å•é“¾è¡¨/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/08/%E7%AE%97%E6%B3%95-%E9%80%86%E8%BD%AC%E5%8D%95%E9%93%BE%E8%A1%A8/","excerpt":"","text":"é€†è½¬å•é“¾è¡¨é€†è½¬å•é“¾è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å•é“¾è¡¨é—®é¢˜ æœ¬èŠ‚ä¸ä»…è®²å¦‚ä½•è¿­ä»£å»é€†è½¬å•é“¾è¡¨ è¿˜è®²å¦‚ä½•ä½¿ç”¨é€’å½’å»é€†è½¬ä¸€éƒ¨åˆ†å•é“¾è¡¨æˆ–è€…æ•´ä¸ªå•é“¾è¡¨ 1234567public class ListNode &#123; int val; ListNode next; ListNode() &#123;&#125; ListNode(int val) &#123; this.val = val; &#125; ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;&#125; åè½¬é“¾è¡¨åŠ›æ‰£206ï¼šåè½¬é“¾è¡¨ è¿­ä»£å®ç° 1ã€åˆå§‹åŒ–ä¸‰ä¸ªèŠ‚ç‚¹prev = nullï¼ˆä½œä¸ºå‰ç½®èŠ‚ç‚¹ï¼‰ã€cur = headï¼ˆä½œä¸ºå½“å‰èŠ‚ç‚¹ï¼‰ã€suffixï¼ˆä½œä¸ºåç½®èŠ‚ç‚¹ï¼‰ 2ã€å¼€å§‹å¾ªç¯æ¡ä»¶ä¸ºcur!=nullçš„å¾ªç¯ï¼Œcurå°†ä¸€ç›´èµ°åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnullçš„åœ°æ–¹ 3ã€å…ˆå°†suffixæŒ‡å‘curçš„nextï¼Œç„¶åå°†curçš„nextæŒ‡å‘å‰ä¸€ä¸ªæŒ‡é’ˆprevï¼Œç„¶åprevå˜ä¸ºcurï¼Œcurå˜ä¸ºsuffix 4ã€è¿”å›prevèŠ‚ç‚¹ åˆå§‹åŒ– å¼€å§‹å¾ªç¯ 1234567891011121314151617class Solution &#123; public ListNode reverseList(ListNode head) &#123; if(head==null)&#123; return head; &#125; ListNode prev=null; ListNode cur=head; ListNode suffix; while(cur!=null)&#123; suffix=cur.next; cur.next=prev; prev = cur; cur=suffix; &#125; return prev; &#125;&#125; é€’å½’å®ç° æˆ‘ä»¬çš„ reverseList å‡½æ•°å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š è¾“å…¥ä¸€ä¸ªèŠ‚ç‚¹ headï¼Œå°†ã€Œä»¥ head ä¸ºèµ·ç‚¹ã€çš„é“¾è¡¨åè½¬ï¼Œå¹¶è¿”å›åè½¬ä¹‹åçš„å¤´ç»“ç‚¹ã€‚ å…ˆé€’å½’åˆ°æºé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ ç„¶åå½“å‰çš„headèŠ‚ç‚¹å°±æ˜¯éœ€è¦åŠ å…¥åˆ°åè½¬å¥½çš„é“¾è¡¨ä¸­ï¼Œ headçš„nextæŒ‡é’ˆæ˜¯é€†è½¬åçš„é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ 1234567891011class Solution &#123; public ListNode reverseList(ListNode head) &#123; if(head==null||head.next==null)&#123; return head; &#125; ListNode cur = reverseList(head.next); head.next.next=head; head.next=null; return cur; &#125;&#125; åè½¬å‰nä¸ªèŠ‚ç‚¹n&lt;&#x3D;é“¾è¡¨é•¿åº¦ 12345678910111213class Solution &#123; ListNode end = null; public ListNode reverseList(ListNode head,int n) &#123; if(n==1)&#123; end = head.next; return head; &#125; ListNode node = reverseList(head.next,n-1); head.next.next=head; head.next=end; return node; &#125;&#125; åè½¬æŒ‡å®šç´¢å¼•èŒƒå›´çš„é“¾è¡¨åŠ›æ‰£92ï¼šåè½¬é“¾è¡¨ II åè½¬leftåˆ°rightéƒ¨åˆ†çš„é“¾è¡¨ å¦‚æœå½“leftä¸º1ï¼Œé‚£ä¸å°±å›åˆ°ä¸Šé¢çš„é‚£ä¸ªé—®é¢˜äº† æ‰€ä»¥åªéœ€è¦åœ¨reverseBetweenä¸­ä¸æ–­é€’å½’ç›´åˆ°leftçš„æ—¶å€™ï¼Œrightä¹Ÿå°±å˜æˆäº†åŒºé—´é•¿åº¦ 1234567891011121314151617181920class Solution &#123; public ListNode reverseBetween(ListNode head, int left, int right) &#123; if(left==1)&#123; return reverseList(head,right); &#125; head.next=reverseBetween(head.next,left-1,right-1); return head; &#125; ListNode end = null; public ListNode reverseList(ListNode head, int n) &#123; if(n==1)&#123; end = head.next; return head; &#125; ListNode node = reverseList(head.next,n-1); head.next.next=head; head.next=end; return node; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-è§£å†³å•é“¾è¡¨é—®é¢˜","slug":"ç®—æ³•-è§£å†³å•é“¾è¡¨é—®é¢˜","date":"2022-03-07T09:05:29.000Z","updated":"2022-03-08T01:30:57.834Z","comments":true,"path":"ç®—æ³•/2022/03/07/ç®—æ³•-è§£å†³å•é“¾è¡¨é—®é¢˜/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/07/%E7%AE%97%E6%B3%95-%E8%A7%A3%E5%86%B3%E5%8D%95%E9%93%BE%E8%A1%A8%E9%97%AE%E9%A2%98/","excerpt":"","text":"å•é“¾è¡¨å¯¹äºå•é“¾è¡¨çš„æ“ä½œï¼Œæœ‰å¾ˆå¤šæŠ€å·§æ€§çš„ä¸œè¥¿ã€‚ ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å…­é“é¢˜æ¥ä»¥é¢˜æ˜æŠ€å·§ åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨åŠ›æ‰£21ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ 123456789101112131415161718192021222324252627282930class Solution &#123; public ListNode mergeTwoLists(ListNode list1, ListNode list2) &#123; // è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè™šèŠ‚ç‚¹æ¥å……å½“å¤´éƒ¨å­˜æ”¾èŠ‚ç‚¹ ListNode virtual = new ListNode(-1); ListNode temp=virtual; ListNode l1 = list1; ListNode l2 = list2; // è¿™é‡Œå¾ªç¯é€€å‡ºæ¡ä»¶æ˜¯ä¸¤è€…éƒ½ä¸ä¸ºnullï¼Œå› ä¸ºå…¶ä¸­åªè¦æœ‰ä¸€è€…ä¸ºnullï¼ŒAå¤„ä»£ç å°±ä¼šçˆ†ç©ºæŒ‡é’ˆå¼‚å¸¸ while(l1!=null&amp;&amp;l2!=null)&#123; // å°†è¾ƒå°çš„é‚£ä¸€ä¸ªæ”¾å…¥virtualé“¾è¡¨ä¸­ if(l1.val&gt;l2.val)&#123;// A temp.next=l2; l2=l2.next; &#125;else&#123; temp.next=l1; l1=l1.next; &#125; temp = temp.next; &#125; // è¿™é‡Œæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°ä¸¤è€…é•¿åº¦ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¿™é‡Œä¸éœ€è¦éå†ï¼Œç›´æ¥å°†temp.nextæŒ‡å‘è¿˜ä¸ä¸ºç©ºçš„é‚£ä¸ªæŒ‡é’ˆ if(l1!=null)&#123; temp.next=l1; &#125; if(l2!=null)&#123; temp.next=l2; &#125; // æœ€åè¿”å›è™šèŠ‚ç‚¹çš„next return virtual.next; &#125;&#125; åˆå¹¶ k ä¸ªæœ‰åºé“¾è¡¨åŠ›æ‰£23ï¼šåˆå¹¶kä¸ªæœ‰åºé“¾è¡¨ ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€æ•°ç»„å­˜å‚¨æ‰€æœ‰çš„é“¾è¡¨çš„å¤´ç»“ç‚¹ 1234567891011121314151617181920212223class Solution &#123; public ListNode mergeKLists(ListNode[] lists) &#123; ListNode virtual = new ListNode(-1); ListNode temp = virtual; List&lt;ListNode&gt; nodes = new ArrayList&lt;&gt;(); for (ListNode list : lists) &#123; if(list!=null)&#123; nodes.add(list); &#125; &#125; while(!nodes.isEmpty())&#123; nodes.sort((a,b)-&gt; a.val-b.val); temp.next = nodes.get(0); temp=temp.next; if(nodes.get(0).next==null)&#123; nodes.remove(0); &#125;else &#123; nodes.set(0,nodes.get(0).next); &#125; &#125; return virtual.next; &#125;&#125; å¯»æ‰¾å•é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹åŠ›æ‰£19ï¼šåˆ é™¤å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ 123456789101112131415161718192021class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode slow = head; ListNode fast = head; // fastæŒ‡é’ˆå…ˆèµ°næ­¥ while(n--&gt;0)&#123; fast=fast.next; &#125; // å¦‚æœfastå˜ä¸ºäº†nullè¯´æ˜æ˜¯èµ°åˆ°äº†å°¾éƒ¨ï¼Œåˆ™è¯´æ˜å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹å°±æ˜¯å¤´ç»“ç‚¹ // åˆ é™¤å¤´ç»“ç‚¹ï¼Œé‚£å°±æ˜¯ç›´æ¥è¿”å›å¤´ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå¤´ç»“ç‚¹ if(fast==null)&#123; return head.next; &#125; while(fast.next!=null)&#123; slow=slow.next; fast=fast.next; &#125; slow.next=slow.next.next; return head; &#125;&#125; å¯»æ‰¾å•é“¾è¡¨çš„ä¸­ç‚¹åŠ›æ‰£876ï¼šå¯»æ‰¾å•é“¾è¡¨çš„ä¸­ç‚¹ ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ³•ï¼Œslowèµ°ä¸€æ­¥ï¼Œfastèµ°ä¸¤æ­¥ï¼Œå½“fastèµ°åˆ°æœ€åçš„æ—¶å€™ï¼Œslowè‡ªç„¶å°±åœ¨ä¸­é—´äº† 1234567891011class Solution &#123; public ListNode middleNode(ListNode head) &#123; ListNode slow=head; ListNode fast=head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; &#125; return slow; &#125;&#125; å½“å•é“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¥‡æ•°çš„æ—¶å€™ï¼ŒslowæŒ‡å‘çš„æ˜¯æ­£ä¸­é—´çš„ä½ç½® å½“å•é“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¶æ•°çš„æ—¶å€™ï¼ŒslowæŒ‡å‘çš„æ˜¯ä¸­é—´é å³çš„ä½ç½® åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦åŒ…å«ç¯åŠ›æ‰£141ï¼šåˆ¤æ–­å•é“¾è¡¨æ˜¯å¦æˆç¯ 1234567891011121314151617public class Solution &#123; public boolean hasCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; if(fast==null)&#123; return false; &#125; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; if(slow==fast)&#123; return true; &#125; &#125; return false; &#125;&#125; è¿›é˜¶ï¼šæ‰¾åˆ°æˆç¯çš„èµ·ç‚¹ 12345678910111213141516171819202122public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; if(slow==fast)&#123; break; &#125; &#125; if(fast==null||fast.next==null)&#123; return null; &#125; slow=head; while(slow!=fast)&#123; slow=slow.next; fast=fast.next; &#125; return fast; &#125;&#125; åˆ¤æ–­ä¸¤ä¸ªå•é“¾è¡¨æ˜¯å¦ç›¸äº¤å¹¶æ‰¾å‡ºäº¤ç‚¹1ã€å°†ç¬¬ä¸€æ¡é“¾è¡¨çš„å°¾éƒ¨çš„nextæŒ‡å‘ç¬¬äºŒæ¡é“¾è¡¨çš„å¤´éƒ¨ï¼Œç„¶åè¿”å›æˆç¯çš„é‚£ä¸ªèµ·ç‚¹ æ³¨æ„ï¼šæ­¤æ³•åªæ˜¯ä¸€ä¸ªæ€è·¯ï¼Œä½†æ˜¯åŠ›æ‰£ä¸­è¿™é“é¢˜çš„æ ¡éªŒæ˜¯ä¸å…è®¸ä¿®æ”¹åŸæ¥çš„é“¾è¡¨çš„ 123456789101112131415161718192021222324252627282930public class Solution &#123; public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; ListNode ha=headA; while(ha.next!=null)&#123; ha=ha.next; &#125; ha.next=headB; return detectCycle(headA); &#125; public ListNode detectCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; if(slow==fast)&#123; break; &#125; &#125; if(fast==null||fast.next==null)&#123; return null; &#125; slow=head; while(slow!=fast)&#123; slow=slow.next; fast=fast.next; &#125; return fast; &#125;&#125; 2ã€ä½¿ç”¨æŠ€å·§ç›´æ¥æ‰¾åˆ°ç›¸äº¤ç‚¹ 12345678910111213141516171819public class Solution &#123; public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; ListNode ha = headA; ListNode hb = headB; while(ha!=hb)&#123; if(ha==null)&#123; ha=headB; &#125;else&#123; ha=ha.next; &#125; if(hb==null)&#123; hb=headA; &#125;else&#123; hb=hb.next; &#125; &#125; return ha; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"JavaScript-åŸå‹å’ŒåŸå‹é“¾","slug":"JavaScript-åŸå‹å’ŒåŸå‹é“¾","date":"2022-03-05T12:18:26.000Z","updated":"2022-03-05T13:01:09.564Z","comments":true,"path":"javaEE/JavaScript/2022/03/05/JavaScript-åŸå‹å’ŒåŸå‹é“¾/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JavaScript/2022/03/05/JavaScript-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"","text":"åŸå‹å’ŒåŸå‹é“¾prototypeåœ¨JavaScriptä¸­ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å‡½æ•°çš„åŸå‹å¯¹è±¡ 12345678function Person(name)&#123; this.name = name;&#125;Person.prototype.name = &#x27;kerwin&#x27;;let p1 = new Person();let p2 = new Person();console.log(p1.name);// kerwinconsole.log(p2.name);// kerwin å‡½æ•°çš„prototypeæŒ‡å‘çš„å°±æ˜¯å¯¹è±¡åŸå‹ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯è°ƒç”¨æ„é€ å‡½æ•°æ—¶åˆ›å»ºå®ä¾‹çš„åŸå‹å¯¹è±¡ï¼Œå°±æ˜¯è¯´p1å’Œp2çš„åŸå‹å¯¹è±¡æ˜¯åŒä¸€ä¸ª _proto_æ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åš_proto_ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„åŸå‹å±æ€§æŒ‡å‘çš„å¯¹è±¡ constructoræ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•° 12345678910function Person()&#123; &#125;let person = new Person();console.log(Person.prototype._proto_ ==== Person);// trueconsole.log(person._proto_ === Person.prototype);// true// åœ¨personä¸­æ‰¾ä¸åˆ°constructorå±æ€§ï¼Œæ‰€ä»¥å‘ä¸Šåœ¨åŸå‹ä¸­æ‰¾åˆ°è¯¥å±æ€§console.log(person.constructor === Person);// trueconsole.log(person.constructor === Person.prototype.constructor);console.log(person.constructor === person._proto_.constructor) å®ä¾‹ä¸åŸå‹å½“è¯»å–å®ä¾‹ä¸­çš„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥å±æ€§ï¼Œåˆ™ä¼šå»æŸ¥æ‰¾è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶éƒ¨ä¸ºæ­¢ 12345678910function Person(age)&#123; this.age = age;&#125;Person.prototype.name = &#x27;zhima&#x27;;let p1 = new Person();person.name = &#x27;kerwin&#x27;console.log(p1.name);// kerwin// åˆ é™¤personå¯¹è±¡ä¸­çš„nameå±æ€§delete person.nameconsole.log(p1.name);// zhima å¯ä»¥çœ‹åˆ°p1çš„nameå±æ€§ æ˜¾ç¤ºè¾“å‡ºäº†è‡ªèº«çš„å±æ€§å€¼kerwin å½“åˆ é™¤äº†å¯¹è±¡ä¸­nameå±æ€§ä¹‹åï¼Œè¾“å‡ºçš„æ˜¯åŸå‹ä¸­çš„æ•°æ® åŸå› æ˜¯å½“å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¯¥å±æ€§çš„æ—¶å€™ï¼Œä¼šå‘ä¸Šåœ¨åŸå‹ä¸­æ‰¾å±æ€§ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºkerwin åŸå‹çš„åŸå‹åŸå‹æ˜¯éšç€ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œç”Ÿæˆçš„ä¸€ä¸ªå¯¹è±¡ã€‚ é‚£ä¹ˆåŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸€å®šä¹Ÿæœ‰åŸå‹ å®ƒçš„åŸå‹å…¶å®æ˜¯é€šè¿‡Objectå¯¹è±¡çš„æ„é€ å‡½æ•°åˆ›å»ºçš„ åŸå‹é“¾ç®€å•å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„çŸ¥è¯†ç‚¹ï¼Œ prototypeæ˜¯æ¯ä¸ªå‡½æ•°çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ _proto_æ˜¯æ¯ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ constructoræ˜¯æ¯ä¸€ä¸ªåŸå‹å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘å…¶ç»‘å®šçš„æ„é€ å‡½æ•° 1æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆã€‚é‚£ä¹ˆå‡å¦‚æˆ‘ä»¬è®©åŸå‹å¯¹è±¡ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œç»“æœä¼šæ€ä¹ˆæ ·ï¼Ÿæ˜¾ç„¶ï¼Œæ­¤æ—¶çš„åŸå‹å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªåŸå‹çš„æŒ‡é’ˆï¼Œç›¸åº”çš„ï¼Œå¦ä¸€ä¸ªåŸå‹ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„æŒ‡é’ˆã€‚å‡å¦‚å¦ä¸€ä¸ªåŸå‹åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ã€‚å¦‚æ­¤å±‚æ¬¡é€’è¿›ï¼Œå°±æ„æˆäº†åŸå‹å’Œå®ä¾‹çš„é“¾æ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŸå‹é“¾çš„æ¦‚å¿µ ----------ã€Šæ‘˜è‡ªJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ é‚£Object.prototypeçš„åŸå‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯null å›¾ä¸­è“è‰²çš„çº¿å°±æ˜¯åŸå‹é“¾","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JavaScript","slug":"javaEE/JavaScript","permalink":"http://li-zhi.net.cn/categories/javaEE/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://li-zhi.net.cn/tags/JavaScript/"}]},{"title":"ç®—æ³•-æ»‘åŠ¨çª—å£","slug":"ç®—æ³•-æ»‘åŠ¨çª—å£","date":"2022-03-05T12:13:46.000Z","updated":"2022-03-07T09:04:15.961Z","comments":true,"path":"ç®—æ³•/2022/03/05/ç®—æ³•-æ»‘åŠ¨çª—å£/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/05/%E7%AE%97%E6%B3%95-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/","excerpt":"","text":"æ»‘åŠ¨çª—å£æ»‘åŠ¨çª—å£çš„æ€è·¯éå¸¸ç®€å•ï¼Œ å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªçª—å£ï¼Œ ä¸æ–­æ»‘åŠ¨ï¼Œ ç„¶åæ›´æ–°ç­”æ¡ˆ æ»‘åŠ¨çª—å£çš„éª¨æ¶1234567891011121314151617181920public void slidingWindow(String s1, String s2) &#123; int left = 0; int right = 0; char now; Map&lt;Character, Integer&gt; needs = new HashMap&lt;&gt;(); for (char c : s1.toCharArray()) &#123; needs.merge(c,1, Integer::sum); &#125; Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); // å½“å‰ç¬¦åˆneedsæ¡ä»¶çš„æ¡æ•° int valid=0; while(right &lt; s2.length())&#123; now = s2.charAt(right++); // çª—å£å†…çš„æ•°æ®æ›´æ–° while(// å·¦çª—å£æ”¶ç¼©æ¡ä»¶)&#123; // æ”¶ç¼©å·¦çª—å£ &#125; &#125;&#125; çœ‹å®Œäº†éª¨æ¶ï¼Œç›´æ¥ä¸Šå››ä¸ªé¢˜ç›® æœ€å°è¦†ç›–å­ä¸²åŠ›æ‰£76ï¼šæœ€å°è¦†ç›–å­ä¸² 1ã€æˆ‘ä»¬å…ˆåˆå§‹åŒ– left = right = 0ï¼ŒæŠŠç´¢å¼•åŒºé—´ [left, right) ä¸­çš„å†…å®¹ç§°ä¸ºçª—å£ã€‚ 2ã€ä¸æ–­åœ°å¢åŠ  right æŒ‡é’ˆæ‰©å¤§çª—å£ [left, right)ï¼Œç›´åˆ°çª—å£ä¸­çš„å­—ç¬¦ä¸²ç¬¦åˆè¦æ±‚ï¼ˆå³çª—å£ä¸­çš„å†…å®¹åŒ…å«äº† t ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼‰ã€‚ 3ã€æ­¤æ—¶ï¼Œæˆ‘ä»¬åœæ­¢å¢åŠ  rightï¼Œå¼€å§‹ä¸æ–­å¢åŠ  left æŒ‡é’ˆç¼©å°çª—å£ [left, right)ï¼Œç›´åˆ°çª—å£ä¸­çš„å­—ç¬¦ä¸²ä¸å†ç¬¦åˆè¦æ±‚ã€‚åŒæ—¶ï¼Œæ¯æ¬¡å¢åŠ  leftï¼Œæˆ‘ä»¬éƒ½è¦æ›´æ–°ç»“æœã€‚ 4ã€é‡å¤ç¬¬ 2 å’Œç¬¬ 3 æ­¥ï¼Œç›´åˆ° right åˆ°è¾¾å­—ç¬¦ä¸² S çš„å°½å¤´ã€‚ è¿™æ—¶å€™leftå¼€å§‹å‘å³ç§»åŠ¨ï¼Œç›´åˆ°windowä¸­çš„å­—ç¬¦ä¸æ»¡è¶³targetçš„å­—ç¬¦ï¼Œå³validä¸ç­‰äºneedsçš„size() è¿™æ—¶å€™leftå¼€å§‹å‘å³ç§»åŠ¨ï¼Œç›´åˆ°windowä¸­çš„å­—ç¬¦ä¸æ»¡è¶³targetçš„å­—ç¬¦ï¼Œå³validä¸ç­‰äºneedsçš„size() è¿™æ—¶å€™leftå¼€å§‹å‘å³ç§»åŠ¨ï¼Œç›´åˆ°windowä¸­çš„å­—ç¬¦ä¸æ»¡è¶³targetçš„å­—ç¬¦ï¼Œå³validä¸ç­‰äºneedsçš„size() ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class Solution &#123; public String minWindow(String s, String t) &#123; if(t.length()&gt;s.length())&#123; return &quot;&quot;; &#125; int len = s.length(); int left = 0; int right = 0; char now; char[] chars = s.toCharArray(); Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); // validæŒ‡çš„æ˜¯needä¸­çš„æ‰€æœ‰æ¡ä»¶çš„æ»¡è¶³ä¸ªæ•° int valid = 0; Map&lt;Character, Integer&gt; needs = new HashMap&lt;&gt;(); for (char c : t.toCharArray()) &#123; // è¿™ä¸ªæ˜¯java8çš„mapæ–°ç‰¹æ€§ï¼Œå½“mapä¸­ä¸å­˜åœ¨è¯¥å€¼ï¼Œè‡ªåŠ¨åˆ›å»ºå€¼å¹¶èµ‹å€¼ä¸º1ï¼Œå½“è¯¥å€¼å­˜åœ¨çš„æ—¶å€™ï¼Œå°†å…¶åŠ 1 needs.merge(c, 1, Integer::sum); &#125; int start=0; int minLength = Integer.MAX_VALUE; while(right&lt;len)&#123; now = chars[right++]; // åªæœ‰å½“å‰è¿™ä¸ªå­—ç¬¦æ˜¯té‡Œé¢çš„ï¼Œæˆ‘å†å»å°†å…¶æ”¾å…¥çª—å£ä¸­ // å¦‚æœè¿™æ—¶å€™çª—å£ä¸­çš„è¯¥å­—ç¬¦æ•°é‡è¾¾åˆ°äº†needsä¸­çš„ï¼Œåˆ™validè‡ªå¢ if(needs.get(now)!=null)&#123; window.merge(now,1, Integer::sum); if(window.get(now).equals(needs.get(now)))&#123; valid++; &#125; &#125; // å¦‚æœneedsä¸­çš„æ¡ä»¶éƒ½æ»¡è¶³äº†ï¼Œåˆ™leftè¦è‡ªå¢ while(valid==needs.size())&#123; // è¿™é‡Œä½¿ç”¨right-leftå……å½“å­—ç¬¦ä¸²é•¿åº¦ï¼Œå› ä¸ºnow = chars[right++];è¿™é‡Œrightå·²ç»è‡ªå¢äº† if(right-left&lt;minLength)&#123; start=left; minLength = right-left; &#125; now = chars[left++]; if(window.get(now)!=null)&#123; // è¿™ä¸ªæ˜¯java8çš„mapæ–°ç‰¹æ€§ï¼Œå½“mapä¸­å­˜åœ¨è¯¥å€¼ï¼Œåˆ™å°†å…¶åŠ ä¸Š-1 window.merge(now,-1,Integer::sum); if(window.get(now)&lt;needs.get(now))&#123; valid--; &#125; &#125; &#125; &#125; return minLength==Integer.MAX_VALUE?&quot;&quot;:s.substring(start,start+minLength); &#125;&#125; å­—ç¬¦ä¸²æ’åºåŠ›æ‰£567ï¼šå­—ç¬¦ä¸²æ’åº 1ã€å…ˆåˆå§‹åŒ–leftå’Œrightä¸º0ï¼ŒæŠŠ[left,right)èŒƒå›´çš„æ•°æ®å«åšçª—å£ 2ã€å°†éœ€è¦ç¬¦åˆçš„å­—ç¬¦ä¸²æ¡ä»¶åˆå§‹åŒ–åˆ°needsä¸­ 3ã€ä¸æ–­æ‰©å¤§rightï¼Œä½¿çª—å£é€æ¸å˜å¤§ 4ã€ç›´åˆ°çª—å£é•¿åº¦ç­‰äºs1çš„é•¿åº¦ï¼Œå¦‚æœè¿™æ—¶å€™å·²ç»å‡ºç°äº†ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ç›´æ¥è¿”å›trueï¼Œåä¹‹ï¼Œå°†leftå‘å³èµ°ï¼Œç¼©å°çª—å£ 5ã€é‡å¤3ã€4ï¼Œç›´åˆ°rightèµ°åˆ°æœ€å 1234567891011121314151617181920212223242526272829303132333435class Solution &#123; public boolean checkInclusion(String s1, String s2) &#123; int left = 0; int right = 0; char now; Map&lt;Character, Integer&gt; needs = new HashMap&lt;&gt;(); for (char c : s1.toCharArray()) &#123; needs.merge(c,1, Integer::sum); &#125; Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); int valid=0; while(right &lt; s2.length())&#123; now = s2.charAt(right++); if(needs.get(now)!=null)&#123; window.merge(now,1, Integer::sum); if(window.get(now).equals(needs.get(now)))&#123; valid++; &#125; &#125; if(right-left == s1.length())&#123; now = s2.charAt(left++); if(valid == needs.size())&#123; return true; &#125; if(window.get(now)!=null)&#123; if(window.get(now).equals(needs.get(now)))&#123; valid--; &#125; window.merge(now,-1, Integer::sum); &#125; &#125; &#125; return false; &#125;&#125; æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯åŠ›æ‰£438ï¼šæ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ å…¶å®æœ¬é¢˜å°±æ˜¯ä¸Šé¢é‚£ä¸€é¢˜ï¼Œåªä¸è¿‡è¿™ä¸€é¢˜éœ€è¦å°†æ‰€æœ‰çš„å¼‚ä½è¯å‡ºç°çš„åœ°æ–¹éƒ½æ”¾åˆ°ä¸€ä¸ªListä¸­ ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637class Solution &#123; public List&lt;Integer&gt; findAnagrams(String s, String p) &#123; List&lt;Integer&gt; result = new ArrayList&lt;&gt;(); int left = 0; int right = 0; int valid = 0; char now; Map&lt;Character, Integer&gt; needs = new HashMap&lt;&gt;(); for (char c : p.toCharArray()) &#123; needs.merge(c,1, Integer::sum); &#125; Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); char[] chars = s.toCharArray(); while(right&lt;s.length())&#123; now = chars[right++]; if(needs.get(now)!=null)&#123; window.merge(now,1, Integer::sum); if(window.get(now).equals(needs.get(now)))&#123; valid++; &#125; &#125; if(right-left == p.length())&#123; if(valid==needs.size())&#123; result.add(left); &#125; now = chars[left++]; if(window.get(now)!=null)&#123; if(window.get(now).equals(needs.get(now)))&#123; valid--; &#125; window.merge(now,-1, Integer::sum); &#125; &#125; &#125; return result; &#125;&#125; æ— é‡å¤æœ€é•¿å­ä¸²åŠ›æ‰£3ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² 1ã€åˆå§‹åŒ–leftå’Œrightä¸º0ï¼Œwindowä½œä¸ºçª—å£ 2ã€å°†å½“å‰rightå¤„çš„å­—ç¬¦åœ¨windowä¸­çš„æ•°ç›®åŠ ä¸€ 3ã€å¦‚æœå½“å‰rightå¤„çš„å­—ç¬¦åœ¨windowä¸­çš„æ•°ç›®å·²ç»å¤§äº1äº†ã€‚è¯´æ˜æœ‰äº†é‡å¤å…ƒç´ ï¼Œéœ€è¦å°†leftä¸æ–­å·¦ç§»ï¼Œç›´åˆ°å½“å‰rightå¤„çš„å­—ç¬¦åœ¨windowä¸­çš„æ•°ç›®ä¸å¤§äº1 4ã€é‡å¤2ã€3æ“ä½œ ä»£ç ï¼š 12345678910111213141516171819202122class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len&lt;2)&#123; return len; &#125; int left = 0; int right = 0; int maxLength=1; char now; Map&lt;Character, Integer&gt; window = new HashMap&lt;&gt;(); while(right&lt;len)&#123; now = s.charAt(right++); window.merge(now,1, Integer::sum); while(window.get(now)&gt;1)&#123; window.merge(s.charAt(left++),-1, Integer::sum); &#125; maxLength = Math.max(right-left,maxLength); &#125; return maxLength; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-åŒæŒ‡é’ˆæŠ€å·§","slug":"ç®—æ³•-åŒæŒ‡é’ˆæŠ€å·§","date":"2022-03-04T23:49:11.000Z","updated":"2022-03-07T08:58:09.285Z","comments":true,"path":"ç®—æ³•/2022/03/05/ç®—æ³•-åŒæŒ‡é’ˆæŠ€å·§/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/05/%E7%AE%97%E6%B3%95-%E5%8F%8C%E6%8C%87%E9%92%88%E6%8A%80%E5%B7%A7/","excerpt":"","text":"åŒæŒ‡é’ˆæŠ€å·§å¯¹äºåŒæŒ‡é’ˆï¼Œä¸€èˆ¬åˆ†ä¸ºå¿«æ…¢æŒ‡é’ˆå’Œå‰åæŒ‡é’ˆ å‰è€…ä¸€èˆ¬ä½¿ç”¨åœ¨é“¾è¡¨ä¸­ï¼Œåè€…ä¸€èˆ¬ä½¿ç”¨åœ¨æ•°ç»„ä¸­ã€‚ 123456789101112class ListNode &#123; int val; ListNode next; ListNode(int val) &#123; this.val = val; this.next = null; &#125; ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;&#125; å¿«æ…¢æŒ‡é’ˆå¿«æ…¢æŒ‡é’ˆä¸€èˆ¬åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘é“¾è¡¨çš„å¤´ç»“ç‚¹ head å‰è¿›æ—¶å¿«æŒ‡é’ˆ fast åœ¨å‰ æ…¢æŒ‡é’ˆ slow åœ¨å è¿™å°±æ˜¯å¿«æ…¢æŒ‡é’ˆçš„æ ¸å¿ƒ åˆ¤æ–­é“¾è¡¨æ˜¯å¦æˆç¯åŠ›æ‰£141é¢˜ï¼šç¯å½¢é“¾è¡¨ å•é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹åªçŸ¥é“åç½®èŠ‚ç‚¹ï¼Œä¸çŸ¥é“å‰ç½®èŠ‚ç‚¹ã€‚å¦‚æœæˆ‘ä½¿ç”¨å•æŒ‡é’ˆæƒ³å»è§£å†³è¿™ä¸ªåˆ¤æ–­æˆç¯ 123456789public class Solution &#123; public boolean hasCycle(ListNode head) &#123; ListNode temp = head; while(temp!=null)&#123; temp = temp.next; &#125; return false; &#125;&#125; å½“é“¾è¡¨æˆç¯çš„æ—¶å€™ï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹ä¸ºnullï¼Œæ‰€ä»¥è¯¥æ–¹æ³•ä¸€å®šæ˜¯æ­»å¾ªç¯ï¼Œæ— æ³•é€€å‡ºã€‚ ç»å…¸è§£æ³•å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼ŒfastæŒ‡é’ˆè·‘å¾—å¿«ï¼ŒslowæŒ‡é’ˆè·‘å¾—æ…¢ã€‚ å¦‚æœé“¾è¡¨æ²¡æœ‰ç¯ï¼Œè·‘å¾—å¿«çš„é‚£ä¸ªæŒ‡é’ˆæœ€ç»ˆä¼šé‡åˆ° nullï¼Œè¯´æ˜é“¾è¡¨ä¸å«ç¯ï¼› å¦‚æœé“¾è¡¨æœ‰ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¶…æ…¢æŒ‡é’ˆä¸€åœˆï¼Œå’Œæ…¢æŒ‡é’ˆç›¸ç­‰ï¼Œè¯´æ˜é“¾è¡¨å«æœ‰ç¯ã€‚ ä»¥ä¸‹æ˜¯è§£æ³• 1234567891011121314public class Solution &#123; public boolean hasCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; if(slow==fast)&#123; return true; &#125; &#125; return false; &#125;&#125; å·²çŸ¥é“¾è¡¨æœ‰ç¯ï¼Œè¿”å›ç¯å¼€å§‹çš„åœ°æ–¹åŠ›æ‰£142é¢˜ï¼šç¯å½¢é“¾è¡¨ II 5å°±æ˜¯é‚£ä¸ªç¯å¼€å§‹çš„åœ°æ–¹ å‡è®¾å¿«æŒ‡é’ˆèµ°äº†2kæ­¥ï¼Œåˆ™æ…¢æŒ‡é’ˆå°±ä¸€å®šèµ°äº†kæ­¥ï¼Œé‚£ä¹ˆkå…¶å®å°±æ˜¯ç¯èŠ‚ç‚¹ä¸ªæ•°çš„æ•´æ•°å€ é»„è‰²çš„çº¿å°±æ˜¯å¿«æŒ‡é’ˆæ¯”æ…¢æŒ‡é’ˆå¤šèµ°çš„æ­¥æ•°ï¼Œå³k,å›¾ä¸Šåªç”»äº†ä¸€åœˆï¼Œä½†æ˜¯å®é™…å¯èƒ½ä¸æ­¢ä¸€åœˆ è®¾æ…¢æŒ‡é’ˆåœ¨ç¯ä¸­èµ°äº†mä¸ªèŠ‚ç‚¹ã€‚ åˆ™è¯´æ˜åœ¨ç¯èŠ‚ç‚¹ä¹‹å‰ï¼Œä¸€å…±æœ‰k-mä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯è¯´æˆ‘å¯ä»¥ä»å¤´ç»“ç‚¹å¾€åèµ°k-mæ¬¡å°±å¯ä»¥æ‰¾åˆ°è¯¥ç¯å¼€å§‹çš„åœ°æ–¹äº†ã€‚ ä½†æ˜¯å¦‚æœæƒ³ç€å¦‚ä½•æŠŠk-mæ±‚å‡ºæ¥çš„è¯æ˜¯æœ‰ç‚¹å›°éš¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹å…³äºå¿«æŒ‡é’ˆçš„è·¯å¾„ä¸­å¯ä¸å¯ä»¥å‡ºç°k-m æˆ‘ä»¬ç°åœ¨æ¥çœ‹çœ‹å¿«æŒ‡é’ˆèµ°çš„2ké•¿åº¦çš„è·¯å¾„ï¼Œå®ƒåœ¨ç¯é‡Œé¢èµ°è¿‡çš„è·¯å¾„é•¿åº¦æ˜¯k+mï¼Œä»ç›¸é‡ç‚¹åˆ°ç›¸é‡ç‚¹çš„è·ç¦»æ˜¯k é‚£ä¹ˆå°±æ˜¯è¯´å¿«æŒ‡é’ˆä»ç›¸é‡ç‚¹åœ¨ç¯ä¸­èµ°k-mæ­¥å°±å¯ä»¥èµ°åˆ°ç¯å¼€å§‹çš„èŠ‚ç‚¹ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†slowç½®äºheadï¼Œä¸faståŒæ­¥å‰è¿›ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆç›¸åŒæ—¶ï¼Œè¿”å›è¯¥å€¼ ä»£ç ï¼š 12345678910111213141516171819202122public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow=slow.next; fast=fast.next.next; if(slow==fast)&#123; break; &#125; &#125; if(fast==null||fast.next==null)&#123; return null; &#125; slow=head; while(slow!=fast)&#123; slow=slow.next; fast=fast.next; &#125; return fast; &#125;&#125; å¯»æ‰¾é“¾è¡¨çš„ä¸­ç‚¹åŠ›æ‰£876ï¼šé“¾è¡¨çš„ä¸­å¿ƒèŠ‚ç‚¹ ç»™å‡ºä¸€ä¸ªæ— ç¯çš„é“¾è¡¨ï¼Œè¦æ±‚è¿”å›è¯¥é“¾è¡¨çš„ä¸­ç‚¹ ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå½“fastæŒ‡é’ˆèµ°åˆ°å°¾éƒ¨çš„æ—¶å€™ï¼Œslowå°±åœ¨é“¾è¡¨ä¸­é—´ä½ç½®äº† ä»¥ä¸‹æ˜¯èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¥‡æ•°çš„æƒ…å†µ ä»¥ä¸‹æ˜¯èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¶æ•°çš„ç»“æœ å¯ä»¥å‘ç°ï¼Œå½“ä¸ªæ•°ä¸ºå¥‡æ•°çš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨ä¸­å¿ƒä½ç½®ï¼Œ å½“ä¸ªæ•°ä¸ºå¶æ•°çš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆåœ¨ä¸­å¿ƒåå³çš„ä½ç½® è¿™ä¸ªç®—æ³•åœ¨é“¾è¡¨çš„å½’å¹¶ç®—æ³•ä¸­å¸¸å¸¸è¢«ç”¨åˆ° ä»£ç ï¼š 123456789public ListNode middleNode(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast != null &amp;&amp; fast.next != null)&#123; slow = slow.next; fast = fast.next.next; &#125; return slow;&#125; è¿™æ˜¯hashå®ç° 12345678910public ListNode middleNode(ListNode head) &#123; Map&lt;Integer, ListNode&gt; map = new HashMap&lt;&gt;(); ListNode curr = head; int i = 0; while(curr != null)&#123; map.put(i++,curr); curr = curr.next; &#125; return map.get(i/2);&#125; åˆ é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹åŠ›æ‰£19é¢˜ï¼šåˆ é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ æ€è·¯å°±æ˜¯å¿«æŒ‡é’ˆå…ˆèµ°næ­¥ï¼Œç„¶åæ…¢æŒ‡é’ˆå’Œå¿«æŒ‡é’ˆåŒæ­¥å‘å‰ï¼Œå½“å¿«æŒ‡é’ˆçš„nextæ˜¯nullçš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆçš„ä¸‹ä¸€ä¸ªå°±æ˜¯å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ 123456789101112131415161718class Solution &#123; public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode slow = head; ListNode fast = head; while(n--&gt;0)&#123; fast=fast.next; &#125; if(fast==null)&#123; return head.next; &#125; while(fast.next!=null)&#123; slow=slow.next; fast=fast.next; &#125; slow.next=slow.next.next; return head; &#125;&#125; å·¦å³æŒ‡é’ˆå·¦å³æŒ‡é’ˆä¸€èˆ¬åˆå§‹åŒ–left rightä¸¤ä¸ªå˜é‡æ¥è¡¨ç¤ºå·¦è¾¹ç•Œå’Œå³è¾¹ç•Œ äºŒåˆ†æŸ¥æ‰¾è¿™é‡Œå°±ä¸èµ˜è¿°äºŒåˆ†æŸ¥æ‰¾çš„ç»†èŠ‚äº†ï¼Œä¹‹å‰æœ‰å†™ï¼Œè¿™é‡Œå°±å†™ä¸€ç§æœ€å¸¸è§çš„ æŸ¥æ‰¾targetæ‰¾åˆ°åˆ™è¿”å›ç´¢å¼•ï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›-1 123456789101112131415161718int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; int mid; while(left &lt;= right) &#123; mid = (right + left) / 2; if(nums[mid] == target)&#123; return mid; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid - 1; &#125; &#125; return -1;&#125; ä¸¤æ•°ä¹‹å’Œ é¢˜ç›®ä¸­è¯´ï¼Œè¯¥æ•°ç»„æ˜¯é€’å¢çš„ï¼Œ é€šè¿‡leftå’Œrightæ¥è°ƒæ•´å¤§å°ä»è€Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªæ•°ä½¿å¾—å’Œä¸ºtarget 12345678910111213141516171819202122class Solution &#123; public int[] twoSum(int[] numbers, int target) &#123; int left = 0; int right = numbers.length-1; int mid; int sum; while(left&lt;right)&#123; mid=(left+right)&gt;&gt;1; sum=numbers[left]+ numbers[right]; if(sum==target)&#123; return new int[]&#123;left+1,right+1&#125;; &#125;else if(sum&gt;target)&#123; // ä½¿å¤§çš„å€¼å˜å° right--; &#125;else &#123; // ä½¿å°çš„å€¼å˜å¤§ left++; &#125; &#125; return new int[]&#123;-1,-1&#125;; &#125;&#125; åè½¬æ•°ç»„è¿™ä¸ªå°±å¾ˆç®€å•äº†ï¼Œç›´æ¥ä¸Šä»£ç  12345678910void reverseString(int[] arr) &#123; int left = 0; int right = arr.length - 1; while (left &lt; right) &#123; // äº¤æ¢ arr[left] å’Œ arr[right] int temp = arr[left]; arr[left++] = arr[right]; arr[right--] = temp; &#125;&#125; æ»‘åŠ¨çª—å£è¿™ä¸ªå°±æ˜¯å·¦å³æŒ‡é’ˆçš„é‡å¤´æˆäº†ï¼ŒæŒæ¡äº†è¿™ä¸ªæ–¹æ³•åï¼Œå¯ä»¥è§£å†³ä¸€å¤§ç±»å­å­—ç¬¦ä¸²åŒ¹é…çš„é—®é¢˜ï¼ è¿™ä¸ªæ”¾åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è¯¦è§£","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼","date":"2022-03-02T10:06:48.000Z","updated":"2022-03-02T10:41:36.988Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…ç›‘å¬åŒä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºï¼Œå½“è¯¥è¡Œä¸ºå‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ™åšå‡ºä¸€å®šçš„åŠ¨ä½œ å¤©æ°”å˜åŒ–äº†ï¼Œå‘å‡ºæç¤º å¤©æ°”æ¨¡å‹ 1234567891011121314151617181920@Data@NoArgsConstructor@AllArgsConstructorpublic class Weather &#123; private String address; private Integer temperature; private List&lt;Observer&gt; observers; public void addObserver(Observer observer)&#123; observers.add(observer); &#125; public void removeObserver(Observer observer)&#123; observers.remove(observer); &#125; public void changeTemperature(int temperature)&#123; this.temperature=temperature; for (Observer observer : observers) &#123; observer.update(temperature); &#125; &#125;&#125; è§‚å¯Ÿè€…çš„æ¥å£ 123public interface Observer &#123; void update(Integer temperature);&#125; é‚®ä»¶çš„è§‚å¯Ÿè€… 1234567public class EmailObserver implements Observer &#123; @Override public void update(Integer temperature) &#123; System.out.println(&quot;å‘é‚®ä»¶å‘Šè¯‰ç”¨æˆ·å¤©æ°”æ”¹å˜äº†ï¼Œå˜ä¸ºäº†&quot;+temperature); &#125;&#125; çŸ­ä¿¡è§‚å¯Ÿè€… 123456public class MsgObserver implements Observer&#123; @Override public void update(Integer temperature) &#123; System.out.println(&quot;å‘çŸ­ä¿¡å‘Šè¯‰ç”¨æˆ·æ°”æ¸©æ”¹å˜äº†ï¼Œå˜ä¸ºäº†&quot;+temperature); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼","date":"2022-03-02T09:24:31.000Z","updated":"2022-03-02T10:06:27.982Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œçš„ç®—æ³•éª¨æ¶ï¼Œå°†ä¸€äº›æ“ä½œå»¶è¿Ÿåˆ°å­ç±»å®ç°ã€‚Template Methodä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„åŸºç¡€ä¸Šå³å¯é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ å…¶å®è¯¥æ¨¡å¼å¾ˆç®€å•ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ç»™å­ç±»å»å®ç°ã€‚ å¤„ç†å™¨ 12345678910public abstract class Handler &#123; public void operation()&#123; System.out.println(&quot;åšå‰æœŸå‡†å¤‡&quot;); System.out.println(&quot;å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹å¤„ç†&quot;); doHandler(); System.out.println(&quot;å¤„ç†å®Œæ¯•&quot;); &#125; abstract void doHandler();&#125; å­—ç¬¦å¤„ç†å™¨ 123456public class CharHandler extends Handler&#123; @Override void doHandler() &#123; System.out.println(&quot;å°†å­—ç¬¦ä¸²è½¬åŒ–&quot;); &#125;&#125; å­—ç¬¦ä¸²å¤„ç†å™¨ 123456public class StringHandler extends Handler&#123; @Override void doHandler() &#123; System.out.println(&quot;å­—ç¬¦ä¸²è½¬åŒ–&quot;); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼","date":"2022-03-02T04:11:02.000Z","updated":"2022-03-02T10:19:04.792Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/02/è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç­–ç•¥æ¨¡å¼å®šä¹‰ï¼šå®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼çš„å˜åŒ–ç‹¬ç«‹äºç®—æ³•çš„ä½¿ç”¨è€… æœ‰ä¸€ä¸ªç”µå•†å¹³å°ï¼Œå½“ç”¨æˆ·æ¶ˆè´¹æ»¡1000å…ƒï¼Œæ ¹æ®vipç­‰çº§å¯äº«å—ä¼˜æƒ  æ™®é€šä¼šå‘˜ ä¸æ‰“æŠ˜ ç™½é“¶ä¼šå‘˜ ä¼˜æƒ 50å…ƒ é»„é‡‘ä¼šå‘˜ æ‰“8æŠ˜ ç™½é‡‘ä¼šå‘˜ ä¼˜æƒ 50å…ƒï¼Œå†æ‰“ä¸ƒæŠ˜ Version 1.0ä¼šå‘˜ç±»å‹æšä¸¾ 1234567891011121314151617181920public enum UserType &#123; /** * ORDINARY_VIP: æ™®é€šä¼šå‘˜ * SILVER_VIP: ç™½é“¶ä¼šå‘˜ * GOLD_VIPï¼š é»„é‡‘ä¼šå‘˜ * PLATINUM_VIPï¼šç™½é‡‘ä¼šå‘˜ */ ORDINARY_VIP(1), SILVER_VIP(2), GOLD_VIP(3), PLATINUM_VIP(4); private int code; UserType(int code) &#123; this.code = code; &#125; public int getCode() &#123; return code; &#125;&#125; 12345678910111213private static double getResult(long money, int type)&#123; double result = money; if(money &gt;= 1000)&#123; if(type == UserType.SILVER_VIP.getCode())&#123; result = money - 50; &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = money * 0.8; &#125;else if(type == UserType.PLATNUM_VIP.getCode())&#123; result = (money - 50)*0.7; &#125; &#125; return result;&#125; ä¸‹é¢ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ä¼˜åŒ– Version 1.2ç­–ç•¥æ¥å£ 123public interface Strategy &#123; double compute(long money);&#125; æ™®é€šä¼šå‘˜ 123456public class OrdinaryStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money; &#125;&#125; é»„é‡‘ä¼šå‘˜ 123456public class GoldStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money*0.8; &#125;&#125; ç™½é‡‘ä¼šå‘˜ 123456public class PlatinumStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125;&#125; ç™½é“¶ä¼šå‘˜ 123456public class SilverStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money-50; &#125;&#125; 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.112345678910111213public class StrategyFactory &#123; public static Map&lt;Integer,Strategy&gt; map; private StrategyFactory()&#123; map = new HashMap&lt;&gt;(); init(); &#125; private void init()&#123; map.put(UserType.ORDINARY_VIP.getCode(), new OrdinaryStrategy()); map.put(UserType.SILVER_VIP.getCode(), new SilverStrategy()); map.put(UserType.GOLD_VIP.getCode(),new GoldStrategy()); map.put(UserType.PLATINUM_VIP.getCode(),new PlatinumStrategy()); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125; è¿™é‡Œçš„å·¥å‚è¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç° Version 2.2ç­–ç•¥æ¥å£ 1234public interface Strategy &#123; double compute(long money); int getType();&#125; é»„é‡‘ä¼šå‘˜ 123456789101112public class GoldStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money*0.8; &#125; @Override public int getType() &#123; return UserType.GOLD_VIP.getCode(); &#125;&#125; æ™®é€šä¼šå‘˜ 1234567891011public class OrdinaryStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money; &#125; @Override public int getType() &#123; return UserType.ORDINARY_VIP.getCode(); &#125;&#125; ç™½é‡‘ä¼šå‘˜ 1234567891011public class PlatinumStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125; @Override public int getType() &#123; return UserType.PLATINUM_VIP.getCode(); &#125;&#125; ç™½é“¶ä¼šå‘˜ 1234567891011public class SilverStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money-50; &#125; @Override public int getType() &#123; return UserType.SILVER_VIP.getCode(); &#125;&#125; ç­–ç•¥å·¥å‚ 12345678910111213141516public class StrategyFactory &#123; private static Map&lt;Integer, Strategy&gt; map; public StrategyFactory() &#123; map=new HashMap&lt;&gt;(); init(); &#125; private void init() &#123; List&lt;Strategy&gt; strategies=new ArrayList&lt;&gt;(); strategies.add(new GoldStrategy()); strategies.add(new OrdinaryStrategy()); strategies.add(new PlatinumStrategy()); strategies.add(new SilverStrategy()); map=strategies.stream().collect(Collectors.toMap(Strategy::getType,strategy -&gt; strategy)); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç®—æ³•-äºŒåˆ†æŸ¥æ‰¾çš„å¤šç§å†™æ³•","slug":"ç®—æ³•-äºŒåˆ†æŸ¥æ‰¾çš„é­”é¬¼ç»†èŠ‚æ¢ç©¶","date":"2022-03-02T01:07:03.000Z","updated":"2022-03-07T08:58:25.708Z","comments":true,"path":"ç®—æ³•/2022/03/02/ç®—æ³•-äºŒåˆ†æŸ¥æ‰¾çš„é­”é¬¼ç»†èŠ‚æ¢ç©¶/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/02/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E9%AD%94%E9%AC%BC%E7%BB%86%E8%8A%82%E6%8E%A2%E7%A9%B6/","excerpt":"","text":"äºŒåˆ†æŸ¥æ‰¾äºŒåˆ†æŸ¥æ‰¾ä½œä¸ºæ•°ç»„çš„åŸºæ“ï¼Œè‚¯å®šæ˜¯è¦ç‰¢ç‰¢æŒæ¡çš„ï¼Œå…¶æ€æƒ³ååˆ†ç®€å•ï¼Œä½†æ˜¯å¯¹äºç»†èŠ‚çš„å¤„ç†ï¼Œå°±å¯ä»¥çœ‹å‡ºä½ å¯¹äºŒåˆ†ç®—æ³•çš„ç†è§£æ·±åˆ»ä¸å¦ã€‚ å¦‚æœæ²¡æœ‰çœŸæ­£çš„ç†è§£ç»†èŠ‚å¤„çš„å†…æ¶µï¼ŒäºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„ç¼–å†™å°±æ˜¯ç„å­¦ç¼–å†™ï¼Œè¿™é‡ŒåŠ ä¸åŠ ç­‰å·å‘¢ï¼Ÿè¿™é‡Œæ˜¯+1è¿˜æ˜¯ä¸å˜å‘¢ï¼Ÿæœ€åè¯¥è¿”å›å•¥å‘¢ï¼Ÿ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™äº›ç»†èŠ‚è¯¥å¦‚ä½•å¤„ç† ä¸‹é¢ä½¿ç”¨ä¸‰ä¸ªäºŒåˆ†æŸ¥æ‰¾ä½¿ç”¨çš„åœºæ™¯åšå‡ºåˆ†æï¼šå¯»æ‰¾ä¸€ä¸ªæ•°ã€å¯»æ‰¾å·¦ä¾§è¾¹ç•Œã€å¯»æ‰¾å³ä¾§è¾¹ç•Œ äºŒåˆ†æŸ¥æ‰¾çš„éª¨æ¶12345678910111213141516public int binarySearch(int[] nums, int target) &#123; int left=0; int right=..;// nums.length-1è¿˜æ˜¯nums.length int mid; while(left..right)&#123;// &lt;=è¿˜æ˜¯&lt; mid = (left+right)&gt;&gt;1;// (right-left)/2+leftè¿˜æ˜¯(left+right)&gt;&gt;1è¿˜æ˜¯(right+left)/2 if(nums[mid]==target)&#123; ..=..; // rightè¿˜æ˜¯left mid-1è¿˜æ˜¯mid &#125;else if(target&lt;nums[mid])&#123; right=..; // mid-1è¿˜æ˜¯mid &#125;else &#123; left=..;// mid+1 &#125; &#125; return ..;// leftæˆ–è€…è¦åšä»€ä¹ˆå¤„ç†&#125; æˆ–è®¸ä½ ç»å¸¸çœ‹è§ä¸€äº›ä»£ç ä¸ä¼šå°†ç­‰äºçš„æƒ…å†µå•ç‹¬åˆ—å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å¯¹äºäºŒåˆ†æŸ¥æ‰¾çš„åˆ†æï¼Œå°†ç­‰äºçš„æƒ…å†µå•ç‹¬åˆ†ç¦»å‡ºæ¥ï¼Œä¼šæ›´æœ‰åˆ©äºç†è§£ï¼Œç­‰åˆ°å½»åº•ç†è§£åï¼Œéšä¾¿æ€ä¹ˆå†™éƒ½ä¸ä¼šå°‘æœç´¢åŒºé—´çš„æ—¶å€™ï¼Œé‚£å°±éšä¾¿åˆå¹¶è¯­å¥äº†ã€‚ ä¸Šè¿°éª¨æ¶ä¸­..å‡ºç°çš„åœ°æ–¹å°±æ˜¯æˆ‘ä»¬éœ€è¦å»ç¢ç£¨çš„ç»†èŠ‚ä¹‹å¤„äº†ï¼Œä¹ä¸€çœ‹ï¼Œå…¨æ˜¯ç»†èŠ‚ï¼Œæ‰€ä»¥å«é­”é¬¼ç»†èŠ‚æ¢ç©¶ã€‚ å…ˆè§£å†³æœ€å¥½è§£å†³çš„ä¸€ä¸ªç»†èŠ‚ï¼Œå¾ˆå¤šäººéƒ½åœ¨LeetCodeå®˜ç½‘ä¸­çœ‹åˆ°æœ‰æ—¶å€™å®˜ç½‘å¯¹äºä¸­é—´å€¼çš„å–å€¼ä¼šä½¿ç”¨(right-left)/2+leftæœ‰æ—¶å€™ä¼šä½¿ç”¨(left+right)&gt;&gt;1æœ‰æ—¶å€™çœ‹è§åˆ«äººå†™çš„ä»£ç ä¸­åˆæ˜¯(right+left)/2ï¼Œè‚¯å®šä¼šå¾ˆè¿·ç³Šï¼Œè¿™ä¸‰è€…çš„è®¡ç®—åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„å‘¢ï¼Ÿ (right-left)/2+leftè¿™ç§å†™æ³•æ˜¯ä¸ºäº†é˜²æ­¢(left+right)å› ä¸ºæ•°æ®è¿‡å¤§å¯¼è‡´æº¢å‡ºï¼Œå¯¼è‡´midè®¡ç®—é”™è¯¯ï¼Œ (left+right)&gt;&gt;1è¿™æ˜¯ä½è¿ç®—ï¼Œå¯èƒ½å¤„ç†æ•ˆç‡ä¼šé«˜ä¸€ç‚¹ (right+left)/2è¿™å°±æ˜¯æ­£å¸¸å†™æ³•ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šå‡ºé”™ æ¥ä¸‹æ¥æŒ‰ç…§äºŒåˆ†æŸ¥æ‰¾çš„å¸¸è§ä½¿ç”¨åœºæ™¯æ¥é€ä¸ªåšå‡ºåˆ†æ æŸ¥æ‰¾ä¸€ä¸ªæ•°åœºæ™¯1ï¼šæŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œå­˜åœ¨è¿”å›ç´¢å¼•ï¼Œä¸å­˜åœ¨è¿”å›-1 123456789101112131415161718int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; int mid; while(left &lt;= right) &#123; mid = left + (right - left) / 2; if(nums[mid] == target)&#123; return mid; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid - 1; &#125; &#125; return -1;&#125; å¾ªç¯æ¡ä»¶æ˜¯left &lt;= rightè€Œä¸æ˜¯left &lt; rightï¼Ÿ è¿™é‡Œæˆ‘ä»¬è¦è¯´ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™åº”è¯¥é€€å‡ºå¾ªç¯ï¼Œå°±æ˜¯å½“æˆ‘æ‰€æœ‰çš„å…ƒç´ éƒ½æœç´¢å®Œæˆä¹‹åï¼ˆå³æœç´¢åŒºé—´é‡Œé¢æ²¡æœ‰å…ƒç´ çš„æ—¶å€™ï¼‰ï¼Œæˆ–è€…æ˜¯æ‰¾åˆ°äº†ç›®æ ‡å€¼çš„æ—¶å€™å¯ä»¥ç›´æ¥ç»ˆæ­¢ï¼Œè¿”å›ç»“æœã€‚ å½“rightèµ‹å€¼ä¸ºnums.length - 1ï¼Œåˆ™æœç´¢åŒºé—´ä¸º[left,right]ï¼Œæ‰€æœ‰å…ƒç´ æœç´¢å®Œæˆçš„æ¡ä»¶åº”è¯¥æ˜¯left==right+1ï¼Œå³æœç´¢åŒºé—´ä¸º[right+1,right]ï¼Œç¬¦åˆè¦æ±‚ã€‚å¦‚æœå¾ªç¯é€€å‡ºæ¡ä»¶æ”¹ä¸º left&lt;rightï¼Œåˆ™é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´ä¸º[left,right]ï¼Œä¼šç¼ºå°‘æœç´¢ç¬¬leftä¸ªå…ƒç´ ã€‚ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚ å¦‚æœ**rightèµ‹å€¼ä¸ºnums.length**ï¼Œåˆ™æœç´¢åŒºé—´ä¸º[left,right)ï¼Œæ‰€æœ‰å…ƒç´ æœç´¢å®Œæˆçš„æ¡ä»¶åº”è¯¥æ˜¯left==rightï¼Œå³æœç´¢åŒºé—´ä¸º[left,right) å½“nums[mid] &gt; targetçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæ˜¯right = mid - 1; è€Œä¸æ˜¯right = mid; ï¼Ÿ è¿˜æ˜¯å›åˆ°æœç´¢åŒºé—´çš„é—®é¢˜ä¸Šï¼Œå½“æˆ‘å‘ç°å½“å‰è¿™ä¸ªå…ƒç´ ä¸targetä¸ç­‰è€Œæ˜¯å¤§äºtargetï¼Œé‚£ä¹ˆæˆ‘åªéœ€è¦æœç´¢å·¦è¾¹åŒºé—´ï¼Œå³å°†[left,right]åˆ†å‰²ä¸ºå·¦è¾¹åŒºé—´[left,mid-1]å’Œå³è¾¹åŒºé—´[mid+1,right]ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥åº”è¯¥å°†mid-1èµ‹å€¼ç»™right æ­¤ç®—æ³•çš„ç”¨é€” è¿™ç§æ–¹æ³•åªå¯ä»¥åœ¨æ‰¾åˆ°ç›®æ ‡å€¼çš„æƒ…å†µä¸‹è¿”å›ç´¢å¼•ï¼Œä½†æ˜¯å½“numsä¸º[1,2,2,2,4]çš„æ—¶å€™ï¼Œè¿”å›çš„å€¼æ˜¯2ï¼Œæ²¡é”™ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½å°±æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼Œåªèƒ½åœ¨æ•°ç»„æ˜¯ä¸¥æ ¼é€’å¢çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ å¦‚æœåœºæ™¯å˜ä¸ºï¼šæŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›ç´¢å¼•ä½ç½®ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å›ç›®æ ‡å€¼æ’å…¥æ•°ç»„çš„ä½ç½®ã€‚ è¿™ä¸ªæ—¶å€™å…¶å®åªè¦æœ€åè¿”å›leftå³å¯ã€‚ è¿”å›å·¦è¾¹ç•Œ123456789101112131415161718192021int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; int mid; while(left &lt;= right) &#123; mid = left + (right - left) / 2; if(nums[mid] == target)&#123; right= mid - 1; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid - 1; &#125; &#125; if(left&gt;=nums.length||nums[left]!=target)&#123; return -1; &#125; return left;&#125; ä¸ºä»€ä¹ˆæœ€åè¿”å›çš„æ—¶å€™è¦åšå‡ºåˆ¤æ–­ï¼Ÿ å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å°çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œright = mid - 1ï¼Œleftæ­¤æ—¶ä¸º0ï¼Œä½†æ˜¯æ— æ³•ç¡®å®šè¯¥å…ƒç´ æ˜¯å¦ä¸ºç›®æ ‡å…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦åšå‡ºåˆ¤æ–­ï¼Œ å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å¤§çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œleft= mid + 1ï¼Œleftæ­¤æ—¶ä¸ºæ•°ç»„é•¿åº¦ï¼Œè¿™æ—¶å€™åˆ™è¯´æ˜ï¼Œè¯¥å…ƒç´ åœ¨æ­¤æ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œä¹Ÿè¦åšå‡ºåˆ¤æ–­ ä¸ºä»€ä¹ˆæ‰¾åˆ°çš„ä¸€å®šæ˜¯å·¦è¾¹ç•Œï¼Ÿ å› ä¸ºè¿™ä¸€æ®µä»£ç ï¼Œ 123if(nums[mid] == target)&#123; right= mid - 1;&#125; å½“æ•°ç»„å…ƒç´ ç­‰äºç›®æ ‡å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç€æ€¥è¿”å›ï¼Œè€Œæ˜¯ç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚å› ä¸ºéœ€è¦æŸ¥æ‰¾å·¦è¾¹ç•Œï¼Œæ‰€ä»¥éœ€è¦å‘å·¦è¾¹æ”¶ç¼©åŒºé—´ è¿™é‡Œé¢whileçš„å¾ªç¯æ¡ä»¶å¯ä»¥æ”¹ä¸ºleft &lt; rightå—ï¼Ÿ å½“ç„¶å¯ä»¥ï¼Œåªè¦ç†è§£äº†æœç´¢åŒºé—´ï¼Œåªè¦èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„å…ƒç´ éƒ½è¢«æŸ¥æ‰¾äº†ï¼Œæ€ä¹ˆå†™éƒ½å¯ä»¥ã€‚ 123456789101112131415161718192021222324int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length; int mid; while(left &lt; right) &#123; mid = left + (right - left) / 2; if(nums[mid] == target)&#123; right= mid; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid; &#125; &#125; if(left==nums.length)&#123; return -1; &#125; if(nums[left]!=target)&#123; return -1; &#125; return left;&#125; å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å¤§çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œleft= mid + 1ï¼Œleftæ­¤æ—¶ä¸ºæ•°ç»„é•¿åº¦ï¼Œè¿™æ—¶å€™åˆ™è¯´æ˜ï¼Œè¯¥å…ƒç´ åœ¨æ­¤æ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œéœ€è¦å•ç‹¬åšå‡ºåˆ¤æ–­ å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å°çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œright = mid ï¼Œleftæ­¤æ—¶ä¸º0ï¼Œä½†æ˜¯æ— æ³•ç¡®å®šè¯¥å…ƒç´ æ˜¯å¦ä¸ºç›®æ ‡å…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦åšå‡ºåˆ¤æ–­ï¼Œ è¿”å›å³è¾¹ç•Œ123456789101112131415161718192021222324int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; int mid; while(left &lt;= right) &#123; mid = left + (right - left) / 2; if(nums[mid] == target)&#123; left = mid + 1; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid - 1; &#125; &#125; if(left==nums.length)&#123; return -1; &#125; if(nums[left]!=target)&#123; return -1; &#125; return left;&#125; ä¸ºä»€ä¹ˆæœ€åè¿”å›çš„æ—¶å€™è¦åšå‡ºåˆ¤æ–­ï¼Ÿ å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å¤§çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œleft= mid + 1ï¼Œleftæ­¤æ—¶ä¸ºæ•°ç»„é•¿åº¦ï¼Œè¿™æ—¶å€™åˆ™è¯´æ˜ï¼Œè¯¥å…ƒç´ åœ¨æ­¤æ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œä¹Ÿè¦åšå‡ºåˆ¤æ–­ å½“ç›®æ ‡å…ƒç´ æ¯”æ‰€æœ‰çš„å€¼éƒ½å°çš„æ—¶å€™ï¼Œåœ¨æœ€åä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œright = mid - 1ï¼Œleftæ­¤æ—¶ä¸º0ï¼Œä½†æ˜¯æ— æ³•ç¡®å®šè¯¥å…ƒç´ æ˜¯å¦ä¸ºç›®æ ‡å…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦åšå‡ºåˆ¤æ–­ï¼Œ ä¸ºä»€ä¹ˆæ‰¾åˆ°çš„ä¸€å®šæ˜¯å³è¾¹ç•Œï¼Ÿ å› ä¸ºè¿™ä¸€æ®µä»£ç ï¼Œ 123if(nums[mid] == target)&#123; left = mid + 1;&#125; å½“æ•°ç»„å…ƒç´ ç­‰äºç›®æ ‡å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç€æ€¥è¿”å›ï¼Œè€Œæ˜¯ç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚å› ä¸ºéœ€è¦æŸ¥æ‰¾å³è¾¹ç•Œï¼Œæ‰€ä»¥éœ€è¦å‘å³è¾¹æ”¶ç¼©åŒºé—´ å¦‚ä½•ä¿®æ”¹å¾ªç¯æ¡ä»¶ä¸ºleft &lt; rightï¼Ÿ 12345678910111213141516171819202122232425262728int binarySearch(int[] nums, int target) &#123; int left = 0; int right = nums.length; int mid; while(left &lt; right) &#123; mid = left + (right - left) / 2; if(nums[mid] == target)&#123; left = mid + 1; &#125; else if (nums[mid] &lt; target)&#123; left = mid + 1; &#125; else if (nums[mid] &gt; target)&#123; right = mid; &#125; &#125; // å½“targetæ¯”æ•°ç»„æ‰€æœ‰å…ƒç´ éƒ½å¤§çš„æ—¶å€™ï¼Œrightå’Œleftéƒ½èµ°åˆ°äº†æ•°ç»„é•¿åº¦çš„ä½ç½®ï¼Œ // å¦‚æœæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ä¸æ˜¯è¿™è¯´æ˜æ•°ç»„ä¸­æ²¡æœ‰targetå…ƒç´  if(nums[left-1]!=target)&#123; return -1; &#125; // å½“targetæ¯”æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å°çš„æ—¶å€™ï¼Œrightå’Œleftéƒ½èµ°åˆ°äº†-1çš„ä½ç½®ï¼Œ // è¿™æ—¶å€™è¿™è¯´æ˜ï¼Œæ•°ç»„ä¸­ä¸å­˜åœ¨targetå…ƒç´ ï¼Œç›´æ¥è¿”å›-1 if(left&lt;0)&#123; return -1; &#125; return left - 1;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€704-Easyã€‘äºŒåˆ†æŸ¥æ‰¾","slug":"ã€704-Easyã€‘äºŒåˆ†æŸ¥æ‰¾","date":"2022-03-02T00:40:52.000Z","updated":"2022-03-02T14:07:21.630Z","comments":true,"path":"ç®—æ³•/2022/03/02/ã€704-Easyã€‘äºŒåˆ†æŸ¥æ‰¾/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/02/%E3%80%90704-Easy%E3%80%91%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","excerpt":"","text":"äºŒåˆ†æŸ¥æ‰¾ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9è¾“å‡º: 4è§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4 ç¤ºä¾‹ 2: 123è¾“å…¥: nums = [-1,0,3,5,9,12], target = 2è¾“å‡º: -1è§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1 æç¤ºï¼š ä½ å¯ä»¥å‡è®¾ nums ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯ä¸é‡å¤çš„ã€‚ n å°†åœ¨ [1, 10000]ä¹‹é—´ã€‚ nums çš„æ¯ä¸ªå…ƒç´ éƒ½å°†åœ¨ [-9999, 9999]ä¹‹é—´ã€‚ Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾123456789101112131415161718class Solution &#123; public int search(int[] nums, int target) &#123; int left=0; int right=nums.length-1; int mid; while(left&lt;=right)&#123; mid=(left+right)&gt;&gt;1; if(target&lt;nums[mid])&#123; right=mid-1; &#125;else if(target&gt;nums[mid])&#123; left=mid+1; &#125;else &#123; return mid; &#125; &#125; return -1; &#125;&#125; å®˜æ–¹ä»£ç ä¸­ left + (right - left) &#x2F; 2 å°±å’Œ (left + right) &#x2F; 2 çš„ç»“æœç›¸åŒï¼Œä½†æ˜¯æœ‰æ•ˆé˜²æ­¢äº† left å’Œ right å¤ªå¤§ç›´æ¥ç›¸åŠ å¯¼è‡´æº¢å‡ºã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€74-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µ","slug":"ã€74-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µ","date":"2022-03-01T10:49:43.000Z","updated":"2022-03-02T04:00:39.375Z","comments":true,"path":"ç®—æ³•/2022/03/01/ã€74-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µ/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/01/%E3%80%9074-Medium%E3%80%91%E6%90%9C%E7%B4%A2%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5/","excerpt":"","text":"æœç´¢äºŒç»´çŸ©é˜µç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥åˆ¤æ–­ m x n çŸ©é˜µä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ã€‚è¯¥çŸ©é˜µå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰å‡åºæ’åˆ—ã€‚ æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 3è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13è¾“å‡ºï¼šfalse æç¤ºï¼š m == matrix.length n == matrix[i].length 1 &lt;= m, n &lt;= 100 -104 &lt;= matrix[i][j], target &lt;= 104 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ çŸ©é˜µ æ³•ä¸€ï¼šäºŒç»´çœ‹æˆä¸€ç»´æ ¹æ®é¢˜ç›®æ‰€ç»™çš„çŸ©é˜µæ€§è´¨ï¼Œ å¯ä»¥å¾—çŸ¥è¯¥äºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œé¡ºæ¬¡æ’ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªä¸€ç»´çš„å‡åºæ•°ç»„ï¼Œ é‚£æˆ‘ä»¬å¯ä»¥ä¾èµ–ä¸‹æ ‡å’Œä¸€ç»´ç´¢å¼•çš„å…³ç³»æ¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ 12345678910111213141516171819202122class Solution &#123; public boolean searchMatrix(int[][] matrix, int target) &#123; int m=matrix.length; int n=matrix[0].length; int left=0; int right=m*n-1; int mid; int value; while(left&lt;=right)&#123; mid=(right+left)&gt;&gt;1; value=matrix[mid/n][mid%n]; if(value&gt;target)&#123; right=mid-1; &#125;else if(value&lt;target)&#123; left=mid+1; &#125;else &#123; return true; &#125; &#125; return false; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€240-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µII","slug":"ã€240-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µII","date":"2022-03-01T08:51:22.000Z","updated":"2022-03-01T10:54:05.281Z","comments":true,"path":"ç®—æ³•/2022/03/01/ã€240-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µII/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/01/%E3%80%90240-Medium%E3%80%91%E6%90%9C%E7%B4%A2%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5II/","excerpt":"","text":"æœç´¢äºŒç»´çŸ©é˜µIIç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥æœç´¢ *m* x *n* çŸ©é˜µ matrix ä¸­çš„ä¸€ä¸ªç›®æ ‡å€¼ target ã€‚è¯¥çŸ©é˜µå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š æ¯è¡Œçš„å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—ã€‚ æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 5è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 20è¾“å‡ºï¼šfalse æç¤ºï¼š m == matrix.length n == matrix[i].length 1 &lt;= n, m &lt;= 300 -109 &lt;= matrix[i][j] &lt;= 109 æ¯è¡Œçš„æ‰€æœ‰å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ— æ¯åˆ—çš„æ‰€æœ‰å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ— -109 &lt;= target &lt;= 109 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²» çŸ©é˜µ æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾12345678910111213141516public boolean searchMatrix(int[][] matrix, int target) &#123; int m=matrix.length; int n=matrix[0].length; int i=m-1; int j=0; while(i&gt;=0&amp;&amp;j&lt;n)&#123; if(matrix[i][j]==target)&#123; return true; &#125;else if(matrix[i][j]&gt;target)&#123; i--; &#125;else &#123; j++; &#125; &#125; return false;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®","slug":"ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®","date":"2022-03-01T08:49:22.000Z","updated":"2022-03-02T13:57:44.328Z","comments":true,"path":"ç®—æ³•/2022/03/01/ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/01/%E3%80%9034-Medium%E3%80%91%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE/","excerpt":"","text":"åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚ è¿›é˜¶ï¼š ä½ å¯ä»¥è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8è¾“å‡ºï¼š[3,4] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6è¾“å‡ºï¼š[-1,-1] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [], target = 0è¾“å‡ºï¼š[-1,-1] æç¤ºï¼š 0 &lt;= nums.length &lt;= 105 -109 &lt;= nums[i] &lt;= 109 nums æ˜¯ä¸€ä¸ªéé€’å‡æ•°ç»„ -109 &lt;= target &lt;= 109 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾123456789101112131415161718192021222324252627282930class Solution &#123; public int[] searchRange(int[] nums, int target) &#123; int first = binarySearch(nums,target); if(first==-1)&#123; return new int[]&#123;-1,-1&#125;; &#125; int end=binarySearch(nums,target+1); if(end&lt;=first)&#123; return new int[]&#123;-1,-1&#125;; &#125; return new int[]&#123;first,end-1&#125;; &#125; private int binarySearch(int[] nums, int target) &#123; int left=0; int right=nums.length-1; int mid; while(left&lt;=right)&#123; mid = (left+right)&gt;&gt;1; if(nums[mid]==target)&#123; right=mid-1; &#125;else if(target&lt;nums[mid])&#123; right=mid-1; &#125;else &#123; left=mid+1; &#125; &#125; return left; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€378ã€‘æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ ","slug":"ã€378-Mediumã€‘æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ ","date":"2022-03-01T04:57:57.000Z","updated":"2022-03-01T10:49:47.152Z","comments":true,"path":"ç®—æ³•/2022/03/01/ã€378-Mediumã€‘æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ /","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/03/01/%E3%80%90378-Medium%E3%80%91%E6%9C%89%E5%BA%8F%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%AC%ACk%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/","excerpt":"","text":"æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´  åœ¨åšè¿™é“é¢˜ä¹‹å‰æœ€å¥½æŠŠè¿™å‡ é¢˜åšäº† ã€74-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µ ã€240-Mediumã€‘æœç´¢äºŒç»´çŸ©é˜µII ç»™ä½ ä¸€ä¸ª n x n çŸ©é˜µ matrix ï¼Œå…¶ä¸­æ¯è¡Œå’Œæ¯åˆ—å…ƒç´ å‡æŒ‰å‡åºæ’åºï¼Œæ‰¾åˆ°çŸ©é˜µä¸­ç¬¬ k å°çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œå®ƒæ˜¯ æ’åºå çš„ç¬¬ k å°å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ª ä¸åŒ çš„å…ƒç´ ã€‚ ä½ å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªå†…å­˜å¤æ‚åº¦ä¼˜äº O(n2) çš„è§£å†³æ–¹æ¡ˆã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šmatrix = [[1,5,9],[10,11,13],[12,13,15]], k = 8è¾“å‡ºï¼š13è§£é‡Šï¼šçŸ©é˜µä¸­çš„å…ƒç´ ä¸º [1,5,9,10,11,12,13,13,15]ï¼Œç¬¬ 8 å°å…ƒç´ æ˜¯ 13 ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šmatrix = [[-5]], k = 1è¾“å‡ºï¼š-5 æç¤ºï¼š n == matrix.length n == matrix[i].length 1 &lt;= n &lt;= 300 -109 &lt;= matrix[i][j] &lt;= 109 é¢˜ç›®æ•°æ® ä¿è¯ matrix ä¸­çš„æ‰€æœ‰è¡Œå’Œåˆ—éƒ½æŒ‰ éé€’å‡é¡ºåº æ’åˆ— 1 &lt;= k &lt;= n^2 è¿›é˜¶ï¼š ä½ èƒ½å¦ç”¨ä¸€ä¸ªæ’å®šçš„å†…å­˜(å³ O(1) å†…å­˜å¤æ‚åº¦)æ¥è§£å†³è¿™ä¸ªé—®é¢˜? ä½ èƒ½åœ¨ O(n) çš„æ—¶é—´å¤æ‚åº¦ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜å—?è¿™ä¸ªæ–¹æ³•å¯¹äºé¢è¯•æ¥è¯´å¯èƒ½å¤ªè¶…å‰äº†ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼ˆ this paper ï¼‰å¾ˆæœ‰è¶£ã€‚ Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ çŸ©é˜µ æ’åº å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ æ³•ä¸€ï¼šæš´åŠ›æšä¸¾å…ˆå°†æ‰€æœ‰çš„æ•°æ®æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œç„¶åç›´æ¥æ’åºï¼Œå–å‡ºè¦æ±‚çš„å…ƒç´  123456789101112class Solution &#123; public int kthSmallest(int[][] matrix, int k) &#123; List&lt;Integer&gt; list=new ArrayList(); for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[i].length; j++) &#123; list.add(matrix[i][j]); &#125; &#125; list.sort((a,b)-&gt;a-b); return list.get(k-1); &#125;&#125; æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾è¯¥çŸ©é˜µæ˜¯ä¸€ä¸ªè¡Œæ˜¯é€’å¢çš„ï¼Œåˆ—æ˜¯é€’å¢çš„ï¼Œåˆ™è¯´æ˜å·¦ä¸Šè§’matrix[0][0]æ˜¯æœ€å°å€¼å³ä¸‹è§’matrix[len-1][len-1]æ˜¯æœ€å¤§å€¼ å½“midä¸º15çš„æ—¶å€™å¯ä»¥å°†å…¶åˆ’åˆ†ä¸ºè¿™æ ·çš„ä¸¤ä¸ªåŒºåŸŸï¼Œå·¦ä¸Šéƒ¨åˆ†å’Œå³ä¸‹éƒ¨åˆ†ï¼Œ å·¦ä¸Šéƒ¨åˆ†ä¸ºå°äºç­‰äºmidçš„æ‰€æœ‰å…ƒç´  å³ä¸‹éƒ¨åˆ†ä¸ºå¤§äºmidçš„æ‰€æœ‰å…ƒç´  å¦‚æœå·¦ä¸Šéƒ¨åˆ†å…ƒç´ çš„ä¸ªæ•°æ¯”kå¤§ï¼Œ è¿™è¯´æ˜midä¸æ˜¯ç¬¬kä¸ªæœ€å°å…ƒç´  å°†åŒºåŸŸå‡åŠï¼Œç»§ç»­ä»¥ä¸Šçš„è¿‡ç¨‹ æµç¨‹å›¾ï¼šç²‰è‰²ä»£è¡¨leftå…ƒç´ ï¼Œç»¿è‰²ä»£è¡¨rightå…ƒç´ ï¼Œæ©™è‰²ä»£è¡¨å½“å‰è¦æ£€æŸ¥çš„å…ƒç´  è¿™æ¬¡ç¤ºä¾‹æ˜¯kç­‰äº8çš„æƒ…å†µ 123456789101112131415161718192021222324252627282930313233class Solution &#123; public int kthSmallest(int[][] matrix, int k) &#123; int len=matrix.length; int left=matrix[0][0]; int right = matrix[len-1][len-1]; int mid; while(left&lt;right)&#123; // å°±æ˜¯è‡ªå·±é™¤ä»¥2ï¼Œåªæ˜¯è¿™æ ·å†™çš„è¯æ›´è£…Bä¸€ç‚¹ mid=(left+right)&gt;&gt;1; if(check(matrix,mid,k))&#123; right = mid; &#125;else &#123; // è¿™ä¸ªåŠ ä¸€æ˜¯å› ä¸ºcheckä¸­å°†å°äºå’Œç­‰äºmidçš„å…ƒç´ éƒ½åˆ’åˆ†åˆ°å·¦ä¸Šéƒ¨åˆ†äº†ï¼Œæ‰€ä»¥leftå¿…é¡»è¦åŠ ä¸€ left = mid+1; &#125; &#125; return left; &#125; private boolean check(int[][] matrix, int mid, int k) &#123; int i=0; int j=matrix.length-1; int nums=0; while(i&lt;matrix.length&amp;&amp;j&gt;=0)&#123; if(matrix[i][j]&lt;=mid)&#123; nums+=j+1; i++; &#125;else &#123; j--; &#125; &#125; return nums&gt;=k; &#125;&#125; å…³äºè¿™ä¸ªleft+1ä¸€å®šåœ¨çŸ©é˜µä¸­çš„è®ºè¯ å¯ä»¥å…ˆæŠŠè¿™ä¸€é¢˜åšäº† ã€34-Mediumã€‘åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® æˆ‘æ‰¾äº†å®˜ç½‘è¯„è®ºåŒºçš„å‡ ä¸ªè¯„è®º 1234æˆ‘ä»¬å…ˆçœ‹checkå‡½æ•°.checkå‡½æ•°çš„ç›®çš„æ˜¯ç»Ÿè®¡çŸ©é˜µé‡Œå°ç­‰äºmidçš„å…ƒç´ æ•°ç›®count. å†åˆ¤æ–­countå’Œkçš„å…³ç³».å› ä¸ºmid = (l + r) / 2è¿™ç§åˆ’åˆ†æ–¹æ³•æ˜¯æŠŠçŸ©é˜µåˆ’åˆ†æˆäº†[left , mid] ä¸[mid + 1, right]ä¸¤éƒ¨åˆ†. å½“ count &lt; k æ—¶, è¯´æ˜midå¤ªå°äº†, æˆ‘ä»¬åº”è¯¥åœ¨[mid + 1, right] è¿™ä¸ªèŒƒå›´é‡ŒæŸ¥æ‰¾. å¦åˆ™åœ¨[left, mid]èŒƒå›´é‡ŒæŸ¥æ‰¾.å¦‚æœå­˜åœ¨ä¸€ä¸ªä¸åœ¨çŸ©é˜µä¸­çš„æ•°aæ»¡è¶³æ¡ä»¶, å› ä¸ºaä¸åœ¨çŸ©é˜µä¸­,é‚£countç»Ÿè®¡çš„å…ƒç´ è‚¯å®šéƒ½æ˜¯å°äºaçš„, é‚£ä¸€å®šå­˜åœ¨ä¸€ä¸ªæ¯”aå°ä¸”åœ¨çŸ©é˜µä¸­çš„æ•°bæ»¡è¶³æ¡ä»¶,å³ä»å°äºaçš„æ•°å˜æˆäº†å°äºç­‰äºbçš„æ•° .ç­‰ç”¨é¢˜ç›®ä¸­çš„ä¾‹å­,x = 13 å’Œx = 14 éƒ½æ»¡è¶³å°äºç­‰äºxçš„å…ƒç´ æ•°ç›®ç­‰äº8, å¯¹14æ¥è¯´ç»Ÿè®¡çš„éƒ½æ˜¯å°äºå®ƒçš„æ•°, è€Œå¯¹13æ¥è¯´ç»Ÿè®¡çš„éƒ½æ˜¯å°äºç­‰äºå®ƒçš„æ•°. é—®é¢˜æ¥äº†, é‚£ä¸ºä½•å–åˆ°çš„ä¸æ˜¯14è€Œæ˜¯13å‘¢?å› ä¸ºæˆ‘ä»¬å–midçš„å–æ³•æ˜¯ mid = (left + right) / 2, å½“left &lt; rightæ—¶, mid æ°¸è¿œ å–ä¸åˆ°right, æƒ³è¦midå–åˆ°right ,åªæœ‰left == right. ä½†å¾ªç¯æ¡ä»¶æ˜¯ while(left &lt; right),å½“ left == rightæ—¶å¾ªç¯å·²ç»ç»ˆæ­¢. æ‰€ä»¥æˆ‘ä»¬å¾—åˆ°ä¼šæ˜¯ä¸€ä¸ªå·¦è¾¹ç•Œ. è¿˜æ˜¯ç”¨é¢˜ç›®ä¸­çš„ä¾‹å­, å‡è®¾left = 13, right = 14 åˆ™ mid = (13 + 14) / 2 = 13 1äºŒåˆ†æ³•çš„ç²¾é«“æ˜¯ï¼Œä¸æ–­æ’é™¤é”™è¯¯ç­”æ¡ˆï¼Œæœ€åå‰©ä¸‹çš„å°±æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚å…ˆè®°ä½è¿™å¥è¯ï¼Œæˆ‘ä»¬å†æ¥çœ‹é¢˜ç›®ï¼Œå¦‚æœ æˆ‘ä»¬ä» äºŒåˆ†å–å‡ºæ¥çš„ midï¼Œæ°å¥½ä¸åœ¨çŸ©é˜µä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ï¼Œæ˜¯æ— æ³• å·¦å³ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³çš„ï¼Œå¦åˆ™çŸ©é˜µå°±å°‘ä¸€ä¸ªæ•°äº†ã€‚æ‰€ä»¥åœ¨å·¦å³æ’é™¤çš„è¿‡ç¨‹ä¸­ï¼Œä¸€å®šä¼šå°†å…¶æ’é™¤æ‰çš„ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼Œ ä¸€ä¸ª 3*3 çš„çŸ©é˜µï¼Œå–ç¬¬ 3 å°çš„å…ƒç´ aï¼Œé‚£ä¹ˆåœ¨çŸ©é˜µä¸­ï¼Œä¸€å®šæ˜¯æœ‰ 2ä¸ª å°äºç­‰äº açš„å…ƒç´ ï¼Œä»¥åŠ6ä¸ªå¤§äºç­‰äºaçš„å…ƒç´ ã€‚å¦‚æœå…ƒç´ bä¸åœ¨çŸ©é˜µä¸­ï¼Œä¸”æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆçŸ©é˜µä¸€å…±ï¼Œåªèƒ½æœ‰ 2+6 = 8ä¸ªå…ƒç´ äº†ï¼Œæ‰€ä»¥æ˜¯ä¸å¯èƒ½çš„ã€‚ 1ç»¼åˆå‰å‡ ä½å¤§ä½¬çš„æ€è·¯ï¼Œè°ˆè°ˆå¦‚ä½•è¯æ˜è§£æ³•ä¸‰ä¸­çš„leftå¿…å‡ºç°åœ¨çŸ©é˜µä¸­ã€‚è§£æ³•ä¸‰ä¸­äºŒåˆ†æŸ¥æ‰¾åé€€å‡ºå¾ªç¯åï¼Œleftä¸ºmin&#123;x|çŸ©é˜µä¸­å°äºç­‰äºxçš„å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºk&#125;ã€‚å‡è®¾leftä¸å‡ºç°åœ¨çŸ©é˜µä¸­ï¼Œé‚£ä¹ˆçŸ©é˜µä¸­å°äºç­‰äºleftçš„å…ƒç´ é›†åˆå®åˆ™ä¸ºçŸ©é˜µä¸­å°äºleftçš„å…ƒç´ é›†åˆã€‚ä»çŸ©é˜µä¸­å°äºleftçš„å…ƒç´ é›†åˆä¸­é€‰æ‹©æœ€å¤§å€¼ï¼Œè®°ä¸ºbã€‚é‚£ä¹ˆçŸ©é˜µä¸­å°äºç­‰äºbçš„å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºkï¼Œä½†b&lt;leftä¸left=min&#123;x|çŸ©é˜µä¸­å°äºç­‰äºxçš„å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºk&#125;çŸ›ç›¾ï¼Œæ‰€ä»¥leftå¿…å‡ºç°åœ¨çŸ©é˜µä¸­ã€‚ 1ä¹‹å‰è€ƒè™‘æ€ä¹ˆä¿è¯ç®—å‡ºå€¼ä¸€å®šåœ¨çŸ©é˜µé‡Œå‘¢ï¼Œæˆ‘æ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œå‡è®¾ç­”æ¡ˆåº”è¯¥æ˜¯mä¸ºç¬¬kä¸ªå…ƒç´ ï¼Œsä¸ºç¬¬ï¼ˆk+1ï¼‰ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä½¿å¾—çŸ©é˜µä¸­æœ‰kä¸ªæ¯”midå°äºç­‰äºçš„å…ƒç´ ï¼Œmidä¸€å®šä¼šåœ¨mä¸sä¹‹é—´ï¼Œè€Œç®—æ³•ä¸­æ‰¾åˆ°çš„æ˜¯leftï¼Œä»”ç»†æƒ³ï¼Œå…¶å®å°±æ˜¯ç¬¬ä¸€ä¸ªæ»¡è¶³æœ‰kä¸ªæ¯”è‡ªèº«å°äºç­‰äºçš„å…ƒç´ ï¼Œæ— ç–‘mæ˜¯ç¬¬ä¸€ä¸ªï¼Œæ‰€ä»¥æ‰¾åˆ°çš„leftä¸€å®šæ˜¯åœ¨çŸ©é˜µä¸­çš„","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼","date":"2022-03-01T03:31:14.000Z","updated":"2022-03-01T03:48:31.941Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/01/è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è£…é¥°è€…æ¨¡å¼å®šä¹‰ï¼šåœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œå°†åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Š è¿™ä¸ªå…¶å®å¤§å®¶åœ¨å¹³æ—¶å†™ä»£ç çš„æ—¶å€™å°±å·²ç»ç”¨è¿‡äº†ï¼Œåªæ˜¯ä¸çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæ¨¡å¼ ä¸‹é¢çœ‹ä¸€ä¸ªæ¡ˆä¾‹ æœ‰ä¸€ä¸ªç»„ä»¶çš„æ¥å£ï¼Œç„¶åæˆ‘æœ‰ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œç°åœ¨æˆ‘éœ€è¦åœ¨è¿™ä¸ªå…·ä½“å®ç°ç±»çš„åŸºç¡€ä¸Šè¿›è¡ŒåŠŸèƒ½æ‹“å±• ç»„ä»¶æ¥å£ 123public interface Component &#123; void operation();&#125; å…·ä½“æ¥å£å®ç° 123456public class ConcreteComponent implements Component&#123; @Override public void operation() &#123; System.out.println(&quot;å®ç°ç»„ä»¶åŠŸèƒ½&quot;); &#125;&#125; æ‹“å±•åŠŸèƒ½æŠ½è±¡ç±» 12345678public abstract class EnhanceComponent implements Component&#123; protected Component component; public EnhanceComponent(Component component) &#123; this.component = component; &#125;&#125; å…·ä½“å¢å¼ºç±» 1234567891011public class ConcreteEnhanceComponent extends EnhanceComponent&#123; public ConcreteEnhanceComponent(Component component) &#123; super(component); &#125; @Override public void operation() &#123; component.operation(); System.out.println(&quot;æ‹“å±•åŠŸèƒ½ä¸€&quot;); &#125;&#125; ä¼˜ç‚¹ï¼š ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹åŸæ¥çš„ç±»è¿›è¡Œå¢å¼º ä½¿ç”¨ä¸åŒçš„ç»„åˆå¯ä»¥å®ç°ä¸åŒçš„äººæ•ˆæœ ç¬¦åˆå¼€é—­åŸåˆ™","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼","date":"2022-03-01T03:10:43.000Z","updated":"2022-03-01T03:30:45.584Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/03/01/è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/03/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é€‚é…å™¨æ¨¡å¼å®šä¹‰ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºç”¨æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚è¿™ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å°±å¯ä»¥ä¸€èµ·å·¥ä½œäº† æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¨¡æ‹ŸUSBè½¬æ¥ç½‘çº¿å£ï¼Œä»è€Œä½¿ç”µè„‘ä¸Šç½‘çš„æ¡ˆä¾‹ ç½‘çº¿æ¥å£ 123public interface NetWorkThread &#123; void connectNetWork();&#125; åä¸ºçš„ç½‘çº¿ 123456public class HuaWeiNetWorkThread implements NetWorkThread&#123; @Override public void connectNetWork() &#123; System.out.println(&quot;åä¸ºç½‘çº¿è¿æ¥ç½‘ç»œï¼Œå¯ä»¥ä¸Šç½‘äº†&quot;); &#125;&#125; è‡ªåˆ¶çš„ç½‘çº¿ 123456public class CustomerNetWorkThread implements NetWorkThread&#123; @Override public void connectNetWork() &#123; System.out.println(&quot;è‡ªåˆ¶ç½‘çº¿ï¼Œå¯ä»¥ä¸Šç½‘äº†&quot;); &#125;&#125; é€‚é…å™¨ï¼ˆç½‘çº¿å£å˜ä¸ºUSBå£ï¼‰ 123public interface Adapter &#123; void netWorkToUSB();&#125; åä¸ºçš„é€‚é…å™¨ï¼ˆè½¬æ¥å£ï¼‰ 1234567891011121314151617public class HuaWeiAdapter implements Adapter&#123; private NetWorkThread netWorkThread; public void setNetWorkThread(NetWorkThread netWorkThread) &#123; this.netWorkThread = netWorkThread; &#125; @Override public void netWorkToUSB() &#123; if(netWorkThread==null)&#123; System.out.println(&quot;é€‚é…å™¨æ²¡æœ‰ç½‘çº¿æ’å…¥ï¼&quot;); return; &#125; System.out.println(&quot;åä¸ºé€‚é…å™¨é€‚é…äº†ç½‘çº¿&quot;); netWorkThread.connectNetWork(); &#125;&#125; ç”µè„‘ 123456789101112131415public class Computer &#123; private Adapter adapter; public void setAdapter(Adapter adapter) &#123; this.adapter = adapter; &#125; public void connectToNetWork()&#123; if(adapter!=null)&#123; adapter.netWorkToUSB(); &#125;else &#123; System.out.println(&quot;æ²¡æœ‰æ’ç½‘çº¿ï¼&quot;); &#125; &#125;&#125; å®¢æˆ·ç«¯ 12345678910111213public class Client &#123; public static void main(String[] args) &#123; Computer computer = new Computer(); computer.connectToNetWork(); System.out.println(&quot;===================&quot;); HuaWeiAdapter huaWeiAdapter = new HuaWeiAdapter(); computer.setAdapter(huaWeiAdapter); computer.connectToNetWork(); System.out.println(&quot;===================&quot;); huaWeiAdapter.setNetWorkThread(new HuaWeiNetWorkThread()); computer.connectToNetWork(); &#125;&#125; æ§åˆ¶å°è¾“å‡º 123456æ²¡æœ‰æ’ç½‘çº¿ï¼===================é€‚é…å™¨æ²¡æœ‰ç½‘çº¿æ’å…¥ï¼===================åä¸ºé€‚é…å™¨é€‚é…äº†ç½‘çº¿åä¸ºç½‘çº¿è¿æ¥ç½‘ç»œï¼Œå¯ä»¥ä¸Šç½‘äº†","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°","slug":"ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°","date":"2022-02-28T13:24:51.000Z","updated":"2022-03-09T07:45:13.643Z","comments":true,"path":"ç®—æ³•/2022/02/28/ã€5-Mediumã€‘æœ€é•¿å›æ–‡æ•°/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/28/%E3%80%905-Medium%E3%80%91%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E6%95%B0/","excerpt":"","text":"æœ€é•¿å›æ–‡æ•°ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šs = &quot;babad&quot;è¾“å‡ºï¼š&quot;bab&quot;è§£é‡Šï¼š&quot;aba&quot; åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šs = &quot;cbbd&quot;è¾“å‡ºï¼š&quot;bb&quot; æç¤ºï¼š 1 &lt;= s.length &lt;= 1000 s ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ç»„æˆ Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ æ³•ä¸€ï¼šæš´åŠ›æšä¸¾123456789101112131415161718192021222324252627282930class Solution &#123; public String longestPalindrome(String s) &#123; if(s.length() &lt; 2)&#123; return s; &#125; char[] chars = s.toCharArray(); int begin = 0; int end = 0; for (int i = 0; i &lt; s.length() - 1; i++) &#123; for (int j = i+1 ; j &lt; s.length(); j++) &#123; if((j - i + 1) &gt; (end - begin + 1) &amp;&amp; isValid(chars,i,j))&#123; begin = i; end = j; &#125; &#125; &#125; return s.substring(begin, end+1); &#125; private boolean isValid(char[] chars, int left, int right) &#123; while(left &lt; right)&#123; if(chars[left] != chars[right])&#123; return false; &#125; left++; right--; &#125; return true; &#125;&#125; æ³•äºŒï¼šä¸­å¿ƒæ‰©æ•£å°†æ¯â€ä¸€ä½â€ä½œä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ’’ï¼Œ æ¯æ¬¡æ‰©æ•£åˆ†ä¸¤ç§æƒ…å†µï¼Œ ç¬¬ä¸€ç§æƒ…å†µæ˜¯ä»¥å½“å‰é‚£ä¸€ä½ä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ•£ ç¬¬äºŒç§æƒ…å†µæ˜¯ä»¥å½“å‰é‚£ä¸€ä½å’Œä¸‹ä¸€ä½ä¸ºä¸­å¿ƒå‘ä¸¤è¾¹æ‰©æ•£ å–è¿™ä¸¤ç§æƒ…å†µçš„æœ€å€¼max å¦‚æœmaxæ¯”maxLenå¤§çš„è¯ï¼Œè®¡ç®—å¾—å‡ºbeginâ€˜ æœ€åç›´æ¥è¿”å›æˆªå–çš„å­—ç¬¦ä¸² è¿™æ˜¯æˆ‘çš„è§£æ³• 12345678910111213141516171819202122232425class Solution &#123; public String longestPalindrome(String s)&#123; if (s.length() &lt; 2) &#123; return s; &#125; int begin = 0; int maxLen = 1; for (int i = 0; i &lt; s.length(); i++) &#123; int max = Math.max(expand(s,i,i),expand(s,i,i+1)); if(max &gt; maxLen)&#123; maxLen = max; begin = i - (max - 1)/2; &#125; &#125; return s.substring(begin, maxLen+begin); &#125; public int expand(String s, int left, int right) &#123; while(left&gt;=0 &amp;&amp; right&lt;s.length() &amp;&amp; s.charAt(left) == s.charAt(right))&#123; left--; right++; &#125; return right - left - 1; &#125;&#125; è¿™æ˜¯å®˜æ–¹çš„è§£æ³• 1234567891011121314151617181920212223242526class Solution &#123; public String longestPalindrome(String s) &#123; if (s == null || s.length() &lt; 1) &#123; return &quot;&quot;; &#125; int start = 0, end = 0; for (int i = 0; i &lt; s.length(); i++) &#123; int len1 = expandAroundCenter(s, i, i); int len2 = expandAroundCenter(s, i, i + 1); int len = Math.max(len1, len2); if (len &gt; end - start) &#123; start = i - (len - 1) / 2; end = i + len / 2; &#125; &#125; return s.substring(start, end + 1); &#125; public int expandAroundCenter(String s, int left, int right) &#123; while (left &gt;= 0 &amp;&amp; right &lt; s.length() &amp;&amp; s.charAt(left) == s.charAt(right)) &#123; --left; ++right; &#125; return right - left - 1; &#125;&#125; æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’å¯¹äºä¸€ä¸ªå­ä¸²è€Œè¨€ï¼Œå¦‚æœå®ƒæ˜¯å›æ–‡ä¸²ï¼Œå¹¶ä¸”é•¿åº¦å¤§äº 2ï¼Œé‚£ä¹ˆå°†å®ƒé¦–å°¾çš„ä¸¤ä¸ªå­—æ¯å»é™¤ä¹‹åï¼Œå®ƒä»ç„¶æ˜¯ä¸ªå›æ–‡ä¸²ã€‚ ä¾‹å¦‚å¯¹äºå­—ç¬¦ä¸² â€œababaâ€™â€ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“ â€œbabâ€ æ˜¯å›æ–‡ä¸²è¿™å±‚å…³ç³»ï¼Œé‚£ä¹ˆ â€œababaâ€ ä¸€å®šæ˜¯å›æ–‡ä¸²ï¼Œè¿™æ˜¯å› ä¸ºå®ƒçš„é¦–å°¾ä¸¤ä¸ªå­—æ¯éƒ½æ˜¯a ä½¿ç”¨dp[][]äºŒä½æ•°ç»„æ¥å­˜å‚¨è¿™å±‚å…³ç³» å³ä½¿ç”¨dp[i][j]æ¥è¡¨ç¤ºså­—ç¬¦ä¸²çš„iåˆ°jæ˜¯å¦æ˜¯å›æ–‡æ•° å¦‚æœå½“å‰è¦åˆ¤æ–­çš„èŒƒå›´æ˜¯dp[left][right]ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸ºx ç¬¬ä¸€æ­¥å…ˆçœ‹é¦–å°¾æ˜¯å¦ä¸€è‡´ï¼Œ å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™dp[left][right]ç›´æ¥ä¸ºfalseï¼Œ å¦‚æœä¸€è‡´ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥åˆ¤æ–­ å¦‚æœå½“å‰åˆ¤æ–­çš„å­—ç¬¦ä¸²é•¿åº¦å°äº3 ä¸ºä»€ä¹ˆæ˜¯3å‘¢ï¼Ÿ å¦‚æœé•¿åº¦ä¸º1ï¼Œåˆ™æœ¬èº«å°±æ˜¯å­—ç¬¦ä¸²ï¼Œå½¢æˆè‡ªå›æ–‡ å¦‚æœé•¿åº¦ä¸º2ï¼Œåˆ™é¦–å°¾ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­ä¸ºå›æ–‡ å¦‚æœé•¿åº¦ä¸º3ï¼Œåˆ™é¦–å°¾ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ¤æ–­å›æ–‡ è¿™ä¸‰ç»„æ•°æ®æ˜¯åé¢åšåˆ¤æ–­çš„æ”¯æ’‘ åˆ™ç›´æ¥å°†dp[left][right]èµ‹å€¼ä¸ºtrue åä¹‹å°†dp[left+1][right-1]ï¼ˆå³å»æ‰é¦–å°¾çš„æ—¶å€™æ˜¯å¦ä¸ºå›æ–‡æ•°ï¼‰çš„å›æ–‡ç»“æ„èµ‹å€¼ç»™dp[i][j] è¿™äº›ç»“æŸåï¼Œå½“dp[left][right]æ˜¯trueæ—¶ï¼Œ åˆ™å°†å½“å‰å¾ªç¯é•¿åº¦å’Œå­˜å‚¨çš„maxLenè¿›è¡Œæ¯”è¾ƒï¼Œ å¦‚æœå½“å‰å¾ªç¯é•¿åº¦è¾ƒå¤§ï¼Œåˆ™å°†å…¶èµ‹å€¼ç»™maxLenï¼Œå°†leftèµ‹å€¼ç»™begin åä¹‹ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ å®˜æ–¹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class Solution &#123; public String longestPalindrome(String s) &#123; int len = s.length(); if (len &lt; 2) &#123; return s; &#125; int maxLen = 1; int begin = 0; // dp[i][j] è¡¨ç¤º s[i..j] æ˜¯å¦æ˜¯å›æ–‡ä¸² boolean[][] dp = new boolean[len][len]; // åˆå§‹åŒ–ï¼šæ‰€æœ‰é•¿åº¦ä¸º 1 çš„å­ä¸²éƒ½æ˜¯å›æ–‡ä¸² for (int i = 0; i &lt; len; i++) &#123; dp[i][i] = true; &#125; char[] charArray = s.toCharArray(); // é€’æ¨å¼€å§‹ // å…ˆæšä¸¾å­ä¸²é•¿åº¦ for (int L = 2; L &lt;= len; L++) &#123; // æšä¸¾å·¦è¾¹ç•Œï¼Œå·¦è¾¹ç•Œçš„ä¸Šé™è®¾ç½®å¯ä»¥å®½æ¾ä¸€äº› for (int i = 0; i &lt; len; i++) &#123; // ç”± L å’Œ i å¯ä»¥ç¡®å®šå³è¾¹ç•Œï¼Œå³ j - i + 1 = L å¾— int j = L + i - 1; // å¦‚æœå³è¾¹ç•Œè¶Šç•Œï¼Œå°±å¯ä»¥é€€å‡ºå½“å‰å¾ªç¯ if (j &gt;= len) &#123; break; &#125; if (charArray[i] != charArray[j]) &#123; dp[i][j] = false; &#125; else &#123; if (j - i &lt; 3) &#123; dp[i][j] = true; &#125; else &#123; dp[i][j] = dp[i + 1][j - 1]; &#125; &#125; // åªè¦ dp[i][L] == true æˆç«‹ï¼Œå°±è¡¨ç¤ºå­ä¸² s[i..L] æ˜¯å›æ–‡ï¼Œæ­¤æ—¶è®°å½•å›æ–‡é•¿åº¦å’Œèµ·å§‹ä½ç½® if (dp[i][j] &amp;&amp; j - i + 1 &gt; maxLen) &#123; maxLen = j - i + 1; begin = i; &#125; &#125; &#125; return s.substring(begin, begin + maxLen); &#125;&#125; ä¸‹é¢æ˜¯æˆ‘ç†è§£æ€è·¯åå†™çš„ å¯¹äºå˜é‡çš„å‘½åæ›´è´´è¿‘å…¶æœ¬èº«çš„å«ä¹‰ å¯èƒ½ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ 1234567891011121314151617181920212223242526272829303132333435363738public String longestPalindrome1(String s) &#123; int len = s.length(); if(len &lt; 2)&#123; return s; &#125; int begin = 0; int maxLen = 1; char[] chars = s.toCharArray(); boolean[][] dp = new boolean[len][len]; // dp[i][j]å³è¡¨ç¤ºs[i..j]æ˜¯å¦ä¸ºå›æ–‡æ•° // å¯¹è§’çº¿å³ä¸ºæ¯ä¸ªå­—ç¬¦æœ¬èº«é‚£å°±å¯ä»¥ç›´æ¥åˆå§‹åŒ–ä¸ºtrue // ä¹Ÿå¯ä»¥ä¸åˆå§‹åŒ–è¿™ä¸ªï¼Œä½†æ˜¯ä¸ºäº†è¯­ä¹‰å®Œæ•´ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Š for (int i = 0; i &lt; len; i++) &#123; dp[i][i] = true; &#125; //xè¡¨ç¤ºé•¿åº¦ï¼Œä»é•¿åº¦ä¸º2å¼€å§‹ï¼Œå› ä¸ºé•¿åº¦ä¸º1çš„æƒ…å†µå¯ä»¥ç›´æ¥åˆ¤æ–­ for (int x = 2 ; x &lt;= len; x++) &#123; //å¾ªç¯æ¬¡æ•°ä¸ºæ€»é•¿åº¦å‡å½“å‰å¾ªç¯çš„é•¿åº¦å†åŠ ä¸€ for (int left = 0; left &lt; len - x + 1; left++) &#123; //x=right-left+1 int right = x + left - 1; if(chars[left] != chars[right])&#123; dp[left][right] = false; &#125;else &#123; if(x &lt; 4)&#123; dp[left][right] = true; &#125;else &#123; dp[left][right] = dp[left+1][right-1]; &#125; &#125; if(dp[left][right] &amp;&amp; x &gt; maxLen)&#123; begin = left; maxLen = x; &#125; &#125; &#125; return s.substring(begin, maxLen+begin);&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å…³äºæƒé™ä¿®é¥°ç¬¦protected","slug":"å…³äºæƒé™ä¿®é¥°ç¬¦protected","date":"2022-02-28T10:05:05.000Z","updated":"2022-02-28T13:14:09.160Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/28/å…³äºæƒé™ä¿®é¥°ç¬¦protected/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/28/%E5%85%B3%E4%BA%8E%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6protected/","excerpt":"","text":"æƒé™ä¿®é¥°ç¬¦æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹javaä¸­çš„æƒé™ä¿®é¥°ç¬¦ æƒé™ä¿®é¥°ç¬¦ åŒç±» åŒåŒ… å­ç±» å…¶ä»–åŒ… public âˆš âˆš âˆš âˆš protected âˆš âˆš âˆš Ã— default âˆš âˆš Ã— Ã— private âˆš Ã— Ã— Ã— å¯¹äºpublicå’Œprivateå¤§å®¶éƒ½å¾ˆäº†è§£äº†ï¼Œä½†æ˜¯å¯¹äºprotectedï¼Œå¤§å®¶å¯èƒ½å¯¹å®ƒçš„æ¦‚å¿µå¯èƒ½å°±ä¸€å¥è¯ï¼šè¢«protectedä¿®é¥°çš„æˆå‘˜å¯¹äºæœ¬åŒ…å’Œå…¶å­ç±»å¯è§ã€‚ è¯¥æƒé™ä¿®é¥°ç¬¦çš„å…³é”®æ˜¯ åŸºç±»çš„protectedæˆå‘˜å±æ€§æ˜¯åŒ…å†…å¯è§çš„ï¼Œå¹¶ä¸”å¯¹æ‰€æœ‰å­ç±»å¯è§ è‹¥å­ç±»ä¸åŸºç±»ä¸åœ¨åŒä¸€åŒ…ä¸‹ï¼Œåˆ™åœ¨å­ç±»ä¸­ï¼Œå­ç±»å®ä¾‹å¯ä»¥è®¿é—®ä»åŸºç±»ç»§æ‰¿æ¥çš„protectedæ–¹æ³•ï¼Œè€Œä¸èƒ½è®¿é—®åŸºç±»å®ä¾‹çš„protectedæ–¹æ³• é‡åˆ°protected é¦–å…ˆæ€è€ƒè¿™ä¸ªprotectedæ¥è‡ªä½•æ–¹ æ¥ç€çœ‹å…¶å’Œè¿™ä¸ªåœ°æ–¹æ˜¯ä¸æ˜¯åŒåŒ… æœ€åçœ‹å…¶æ˜¯å¦æœ‰çˆ¶å­ç±»å…³ç³» å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªTestæ¥æŒæ¡protectedçš„ç”¨æ³• æ³¨æ„ï¼šè§‚å¯ŸåŒ…é™å®šå æ¨¡å‹ 12345678910package com.lizhi.protect.p1;public class Feather1 &#123; protected void f()&#123;&#125; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125;&#125; 1234package com.lizhi.protect.p1;public class Son1 extends Feather1&#123;&#125; 123456package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;public class Son11 extends Feather1 &#123;&#125; æµ‹è¯• 1234567891011121314151617package com.lizhi.protect.p1;import com.lizhi.protect.p11.Son11;public class Test &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ feather1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ feather1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºåŒä¸€åŒ…ä¸‹ &#125;&#125; æµ‹è¯• 12345678910111213141516171819package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;import com.lizhi.protect.p1.Son1;import com.lizhi.protect.p11.Son11;public class Test &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son2.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» son2.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» feather1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» feather1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ï¼Œè¯¥ç±»ä¹Ÿä¸æ˜¯Feather1çš„å­ç±» &#125;&#125; æµ‹è¯• 123456789101112131415161718package com.lizhi.protect.p11;import com.lizhi.protect.p1.Feather1;import com.lizhi.protect.p1.Son1;public class Son11 extends Feather1 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ‰€åœ¨çš„åœ°æ–¹æ˜¯Feather1çš„å­ç±» son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ‰€åœ¨çš„åœ°æ–¹æ˜¯Feather1çš„å­ç±» feather1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ feather1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ son1.f();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ son1.clone();//ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»ä¸Feather1å¤„äºä¸åŒä¸€åŒ…ä¸‹ &#125;&#125; æµ‹è¯• 1234567891011121314151617181920212223package com.lizhi.protect.p1;import com.lizhi.protect.p11.Son11;public class Feather1 &#123; protected void f()&#123;&#125; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125; public static void main(String[] args) throws CloneNotSupportedException &#123; Feather1 feather1 = new Feather1(); Son1 son1 = new Son1(); Son11 son2 = new Son11(); son2.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son2.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» feather1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» feather1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son1.f();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» son1.clone();//ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¯¥æµ‹è¯•ç±»æ˜¯Son1å’ŒSon11çš„çˆ¶ç±» &#125;&#125; æµ‹è¯• 12345678910package com.lizhi.protect.p4;import com.lizhi.protect.p44.Test4;public class MyObject4 extends Test4&#123; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125;&#125; 12345678910package com.lizhi.protect.p44;import com.lizhi.protect.p4.MyObject4;public class Test4 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; MyObject4 myObject4 = new MyObject4(); myObject4.clone();//ç¼–è¯‘ä¸é€šè¿‡ &#125;&#125; è¯´æ˜ï¼šmyobject4çš„cloneç›´æ¥æ¥è‡ªMyObject4ç±»æœ¬èº« å…¶èŒƒå›´æ˜¯MyObjcet4çš„å­ç±»ä¸å…¶åŒåŒ…çš„ç±» Test4éƒ½ä¸æ»¡è¶³ æ‰€ä»¥ç¼–è¯‘ä¸é€šè¿‡ æµ‹è¯• 1234567package com.lizhi.protect.p4;import com.lizhi.protect.p44.Test4;public class MyObject4 extends Test4&#123; &#125; 12345678910package com.lizhi.protect.p44;import com.lizhi.protect.p4.MyObject4;public class Test4 &#123; public static void main(String[] args) throws CloneNotSupportedException &#123; MyObject4 myObject4 = new MyObject4(); myObject4.clone();//ç¼–è¯‘é€šè¿‡ &#125;&#125; è¯´æ˜ï¼šmyobject4çš„cloneç›´æ¥æ¥æºäºTest4 èŒƒå›´æ˜¯Test4å­ç±»åŠå…¶åŒåŒ…çš„ç±» æ»¡è¶³ä¸å…¶åŒåŒ… ç¼–è¯‘é€šè¿‡","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"ç®—æ³•-æ—‹è½¬çš„æ•°å­—","slug":"ç®—æ³•-æ—‹è½¬çš„æ•°å­—","date":"2022-02-28T07:58:54.000Z","updated":"2022-05-07T02:32:22.768Z","comments":true,"path":"ç®—æ³•/2022/02/28/ç®—æ³•-æ—‹è½¬çš„æ•°å­—/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/28/%E7%AE%97%E6%B3%95-%E6%97%8B%E8%BD%AC%E7%9A%84%E6%95%B0%E5%AD%97/","excerpt":"","text":"æ—‹è½¬çš„æ•°å­— è¿™æ˜¯è‡ªå·±èµ·çš„é¢˜ç›®å ç›´æ¥ä¸Š5é˜¶æ—‹è½¬æ•°å­—çš„ç¤ºä¾‹å›¾ åˆ†æè¿™é“é¢˜ä¸€çœ‹å°±çŸ¥é“æ˜¯ä¸å¯èƒ½ä¸€è¡Œä¸€è¡Œè¾“å‡ºçš„ æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªäºŒä½æ•°ç»„å…ˆæ¥è®¡ç®—å‡ºæ¥è¿™ä¸ªçŸ©é˜µçš„æ•°æ® å†éå†è¾“å‡ºè¿™ä¸ªçŸ©é˜µ é‚£ä¹ˆå¦‚ä½•æ“ä½œè¿™ä¸ªäºŒä½çŸ©é˜µå‘¢ï¼Ÿ é€šè¿‡ä¸€ä¸ªå¤§å¾ªç¯é™åˆ¶å¾ªç¯æ¬¡æ•° æœ‰å››ä¸ªå°å¾ªç¯ ç¬¬ä¸€ä¸ªå¾ªç¯ç”¨æ¥å†™å…¥è¿™ä¸€æ¬¡å¾ªç¯ä¸­æ°´å¹³å‘å·¦çš„æ•°æ® ç¬¬äºŒä¸ªå¾ªç¯ç”¨æ¥å†™å…¥è¿™ä¸€æ¬¡å¾ªç¯ä¸­æ°´å¹³å‘ä¸‹çš„æ•°æ® ç¬¬ä¸‰ä¸ªå¾ªç¯ç”¨æ¥å†™å…¥è¿™ä¸€æ¬¡å¾ªç¯ä¸­æ°´å¹³å‘å³çš„æ•°æ® ç¬¬å››ä¸ªå¾ªç¯ç”¨æ¥å†™å…¥è¿™ä¸€æ¬¡å¾ªç¯ä¸­æ°´å¹³å‘ä¸Šçš„æ•°æ® æµç¨‹å›¾ç²‰çº¢è‰²çš„æ˜¯æ ‡æ³¨ä¸ºæ¯æ¬¡å¤§å¾ªç¯çš„å¼€å§‹å¤„ PSï¼šå›¾ç‰‡å¾ˆå¤šï¼Œè¿‡ç¨‹å¾ˆè¯¦ç»† ä»£ç 1234567891011121314151617181920212223242526272829public int[][] rotateNumber(int n)&#123; int[][] matrix = new int[n][n]; int counter=1; int timer; for (int i = 0; i &lt; n / 2; i++) &#123; timer = n - i - 1; //-&gt; for (int j = i; j &lt; timer; j++) &#123; matrix[i][j]=counter++; &#125; //â†“ for (int j = i ; j &lt; timer; j++) &#123; matrix[j][timer]=counter++; &#125; //&lt;- for (int j = timer; j &gt; i ; j--) &#123; matrix[timer][j]=counter++; &#125; //â†‘ for (int j =timer; j &gt; i ; j--) &#123; matrix[j][i]=counter++; &#125; &#125; // å¦‚æœæ˜¯å¥‡æ•°ï¼Œå•ç‹¬å¤„ç†ä¸­é—´é‚£ä¸€æ ¼æ•°æ® if(n%2!=0)&#123; matrix[n/2][n/2]=n*n; &#125; return matrix;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•-èºæ—‹æ•°å­—","slug":"ç®—æ³•-èºæ—‹æ•°å­—","date":"2022-02-28T01:03:17.000Z","updated":"2022-02-28T09:04:59.885Z","comments":true,"path":"ç®—æ³•/2022/02/28/ç®—æ³•-èºæ—‹æ•°å­—/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/28/%E7%AE%97%E6%B3%95-%E8%9E%BA%E6%97%8B%E6%95%B0%E5%AD%97/","excerpt":"","text":"èºæ—‹æ•°å­— è¿™æ˜¯è‡ªå·±èµ·çš„é¢˜ç›®åå­— ç›´æ¥ä¸Š6é˜¶èºæ—‹æ•°å­—çš„ç¤ºä¾‹å›¾ ä¼ å…¥æ•°å­—nï¼Œæœ€åè¾“å‡ºné˜¶çš„èºæ—‹æ•°å­— 123public void spiralNumber(int n)&#123; &#125; æ§åˆ¶å°è¾“å‡º 1234561 2 6 7 15 16 3 5 8 14 17 4 9 13 18 10 12 19 11 20 21 åˆ†æè¿™é“é¢˜ç›®çš„è¯ï¼Œå¾ªç¯å†™çš„ç¨å¾®å¤šç‚¹çš„éƒ½çŸ¥é“ï¼Œæˆ‘ä¸å¯èƒ½ç›´æ¥è¾“å‡º1 2 6 7 15 16è¿™ä¸€è¡Œæ•°æ®çš„ è€Œæ˜¯åº”è¯¥é€šè¿‡ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å…ˆå°†æ•°æ®è®¡ç®—å¥½ï¼Œç„¶åå°†æ­¤äºŒç»´æ•°ç»„è¾“å‡ºï¼Œè¿™æ ·æ‰å¯ä»¥è¾¾åˆ°ç›®çš„ é‚£ä¹ˆå¦‚ä½•é€šè¿‡äºŒç»´æ•°ç»„æ¥è¾¾åˆ°ç›®çš„å‘¢ï¼Ÿ æˆ‘æ˜¯ç”¨ä¸€ä¸ªå¤§å¾ªç¯ä¸­å¥—ä¸¤ä¸ªå°å¾ªç¯æ¥åšçš„ å¤–é¢å¤§å¾ªç¯ç”¨æ¥é™åˆ¶å¾ªç¯æ¬¡æ•°çš„ å†…å±‚ç¬¬ä¸€ä¸ªå¾ªç¯æ˜¯ç”¨æ¥å‘å³ä¸Šæ–¹èµ°çš„ å†…å±‚ç¬¬äºŒä¸ªå¾ªç¯æ˜¯ç”¨æ¥å‘å·¦ä¸‹æ–¹èµ°çš„ æµç¨‹å›¾ç²‰çº¢è‰²çš„æ˜¯æ ‡æ³¨ä¸ºæ¯æ¬¡å¤§å¾ªç¯çš„å¼€å§‹å¤„ æ ‡æ³¨å†…å±‚å¾ªç¯åˆå§‹åŒ–çš„æ˜¯è¯¥å¾ªç¯åˆšè¦å¼€å§‹æ—¶å€™çš„æ•°æ® PSï¼šå›¾ç‰‡å¾ˆå¤šï¼Œè¿‡ç¨‹å¾ˆè¯¦ç»† è¿™æ˜¯ä»£ç  123456789101112131415161718192021public int[][] spiralNumber(int n)&#123; int[][] matrix = new int[n][n]; int counter = 1; int j; int end; for (int i = 0; i &lt; n; i+=2) &#123; j=0; for (int k = i; k &gt;= 0; k--) &#123; matrix[k][j++]=counter++; &#125; end=j; // å¦‚æœnæ˜¯å¥‡æ•°ï¼Œåœ¨æœ€åä¸€æ¬¡å¤§å¾ªç¯ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªå°å¾ªç¯äº† if(j &gt;= n)&#123; break; &#125; for (int k = 0; k &lt;= end; k++) &#123; matrix[k][j--]=counter++; &#125; &#125; return matrix;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼","date":"2022-02-28T00:38:22.000Z","updated":"2022-02-28T00:59:19.367Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/28/è®¾è®¡æ¨¡å¼-é—¨é¢æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é—¨é¢æ¨¡å¼å®šä¹‰ï¼šä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„é«˜å±‚æ¥å£ï¼Œä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ å®ç°å­ç³»ç»Ÿ1 12345public class System1 &#123; public void operateA()&#123; System.out.println(&quot;å­ç³»ç»Ÿ1çš„Aæ“ä½œ&quot;); &#125;&#125; å­ç³»ç»Ÿ2 12345public class System2 &#123; public void operateB()&#123; System.out.println(&quot;å­ç³»ç»Ÿ2çš„Bæ“ä½œ&quot;); &#125;&#125; å­ç³»ç»Ÿ3 12345public class System3 &#123; public void operateC()&#123; System.out.println(&quot;å­ç³»ç»Ÿ3çš„Cæ“ä½œ&quot;); &#125;&#125; ç³»ç»Ÿé—¨é¢ 1234567891011public class SystemFacade &#123; private System1 system1 = new System1(); private System2 system2 = new System2(); private System3 system3 = new System3(); public void operateABC()&#123; system1.operateA(); system2.operateB(); system3.operateC(); &#125;&#125; å®¢æˆ·ç«¯è°ƒç”¨ 12345public class Client &#123; public static void main(String[] args) &#123; new SystemFacade().operateABC(); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€981-Mediumã€‘åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨","slug":"ã€981-Mediumã€‘åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨","date":"2022-02-27T04:15:00.000Z","updated":"2022-02-27T07:06:50.714Z","comments":true,"path":"ç®—æ³•/2022/02/27/ã€981-Mediumã€‘åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/27/%E3%80%90981-Medium%E3%80%91%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84%E9%94%AE%E5%80%BC%E5%AD%98%E5%82%A8/","excerpt":"","text":"åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨è®¾è®¡ä¸€ä¸ªåŸºäºæ—¶é—´çš„é”®å€¼æ•°æ®ç»“æ„ï¼Œè¯¥ç»“æ„å¯ä»¥åœ¨ä¸åŒæ—¶é—´æˆ³å­˜å‚¨å¯¹åº”åŒä¸€ä¸ªé”®çš„å¤šä¸ªå€¼ï¼Œå¹¶é’ˆå¯¹ç‰¹å®šæ—¶é—´æˆ³æ£€ç´¢é”®å¯¹åº”çš„å€¼ã€‚ å®ç° TimeMap ç±»ï¼š TimeMap() åˆå§‹åŒ–æ•°æ®ç»“æ„å¯¹è±¡ void set(String key, String value, int timestamp) å­˜å‚¨é”® keyã€å€¼ valueï¼Œä»¥åŠç»™å®šçš„æ—¶é—´æˆ³ timestampã€‚ &#96;&#96;&#96;String get(String key, int timestamp) 1234567 - è¿”å›å…ˆå‰è°ƒç”¨ `set(key, value, timestamp_prev)` æ‰€å­˜å‚¨çš„å€¼ï¼Œå…¶ä¸­ `timestamp_prev &lt;= timestamp` ã€‚ - å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„å€¼ï¼Œåˆ™è¿”å›å¯¹åº”æœ€å¤§çš„ `timestamp_prev` çš„é‚£ä¸ªå€¼ã€‚ - å¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ï¼ˆ`&quot;&quot;`ï¼‰ã€‚**ç¤ºä¾‹ï¼š** è¾“å…¥ï¼š[â€œTimeMapâ€, â€œsetâ€, â€œgetâ€, â€œgetâ€, â€œsetâ€, â€œgetâ€, â€œgetâ€][[], [â€œfooâ€, â€œbarâ€, 1], [â€œfooâ€, 1], [â€œfooâ€, 3], [â€œfooâ€, â€œbar2â€, 4], [â€œfooâ€, 4], [â€œfooâ€, 5]]è¾“å‡ºï¼š[null, null, â€œbarâ€, â€œbarâ€, null, â€œbar2â€, â€œbar2â€] è§£é‡Šï¼šTimeMap timeMap &#x3D; new TimeMap();timeMap.set(â€œfooâ€, â€œbarâ€, 1); &#x2F;&#x2F; å­˜å‚¨é”® â€œfooâ€ å’Œå€¼ â€œbarâ€ ï¼Œæ—¶é—´æˆ³ timestamp &#x3D; 1timeMap.get(â€œfooâ€, 1); &#x2F;&#x2F; è¿”å› â€œbarâ€timeMap.get(â€œfooâ€, 3); &#x2F;&#x2F; è¿”å› â€œbarâ€, å› ä¸ºåœ¨æ—¶é—´æˆ³ 3 å’Œæ—¶é—´æˆ³ 2 å¤„æ²¡æœ‰å¯¹åº” â€œfooâ€ çš„å€¼ï¼Œæ‰€ä»¥å”¯ä¸€çš„å€¼ä½äºæ—¶é—´æˆ³ 1 å¤„ï¼ˆå³ â€œbarâ€ï¼‰ ã€‚timeMap.set(â€œfooâ€, â€œbar2â€, 4); &#x2F;&#x2F; å­˜å‚¨é”® â€œfooâ€ å’Œå€¼ â€œbar2â€ ï¼Œæ—¶é—´æˆ³ timestamp &#x3D; 4timeMap.get(â€œfooâ€, 4); &#x2F;&#x2F; è¿”å› â€œbar2â€timeMap.get(â€œfooâ€, 5); &#x2F;&#x2F; è¿”å› â€œbar2â€ 12345678```java/** * Your TimeMap object will be instantiated and called as such: * TimeMap obj = new TimeMap(); * obj.set(key,value,timestamp); * String param_2 = obj.get(key,timestamp); */ æç¤ºï¼š 1 &lt;= key.length, value.length &lt;= 100 key å’Œ value ç”±å°å†™è‹±æ–‡å­—æ¯å’Œæ•°å­—ç»„æˆ 1 &lt;= timestamp &lt;= 107 set æ“ä½œä¸­çš„æ—¶é—´æˆ³ timestamp éƒ½æ˜¯ä¸¥æ ¼é€’å¢çš„ æœ€å¤šè°ƒç”¨ set å’Œ get æ“ä½œ 2 * 105 æ¬¡ Related Topics è®¾è®¡ å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² äºŒåˆ†æŸ¥æ‰¾ æ³•ä¸€ï¼šå†…ç½®ç»“æ„Map&lt;Integer,TreeMap&lt;Integer,String&gt;&gt;è¿™æ˜¯è‡ªå·±å†™çš„ï¼Œä½†æ˜¯è¶…æ—¶äº† 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class TimeMap &#123; private Map&lt;String, TreeMap&lt;Integer,String&gt;&gt; map ; public TimeMap() &#123; map = new HashMap(); &#125; public void set(String key, String value, int timestamp) &#123; TreeMap&lt;Integer, String&gt; sm = map.get(key); if(sm==null) &#123; TreeMap&lt;Integer, String&gt; v = new TreeMap&lt;&gt;(); v.put(timestamp, value); map.put(key, v); &#125;else &#123; sm.put(timestamp,value); &#125; &#125; public String get(String key, int timestamp) &#123; TreeMap&lt;Integer, String&gt; sm = map.get(key); if(sm==null)&#123; return null; &#125; int find = binarySearch(sm.keySet().toArray(new Integer[]&#123;&#125;), timestamp); if(find==-1)&#123; return &quot;&quot;; &#125;else &#123; return sm.get(find); &#125; &#125; private int binarySearch(Integer[] nums, int target) &#123; int left = 0; int right = nums.length-1; int mid; while (left&lt;=right) &#123; mid = (left+right)/2; if(nums[mid]==target)&#123; return target; &#125;else if(nums[mid]&gt;target)&#123; right = mid - 1; &#125;else &#123; left = mid + 1; &#125; &#125; if(left==0)&#123; return -1; &#125; return nums[left-1]; &#125;&#125; è¿™æ˜¯æˆ‘çœ‹åˆ°è¯„è®ºåŒºå†™çš„ 123456789101112131415161718192021222324class TimeMap &#123; /** Initialize your data structure here. */ HashMap&lt;String, TreeMap&lt;Integer, String&gt;&gt; map; public TimeMap() &#123; map = new HashMap(); &#125; public void set(String key, String value, int timestamp) &#123; map.computeIfAbsent(key, k-&gt; new TreeMap()).put(timestamp, value); &#125; public String get(String key, int timestamp) &#123; if(!map.containsKey(key)) &#123; return &quot;&quot;; &#125; // è¿™æ˜¯åœ¨å¯¹åº”çš„TreeMapä¸­æ‰¾åˆ°ä»¥timeStampä¸ºå¤©èŠ±æ¿çš„æ•°å­— Integer time = map.get(key).floorKey(timestamp); if(time == null) &#123; return &quot;&quot;; &#125; return map.get(key).get(time); &#125;&#125; computeIfAbsentè¿™æ˜¯java8ä¸­çš„æ“ä½œï¼Œå…³äºjava8æ–°ç‰¹æ€§ï¼Œæˆ‘åé¢ä¼šä¸“é—¨å†™ä¸€ä¸ªä¸“æ çš„","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€å‰‘æŒ‡OfferII68-Easyã€‘æŸ¥æ‰¾æ’å…¥ä½ç½®","slug":"ã€å‰‘æŒ‡OfferII68-Easyã€‘æŸ¥æ‰¾æ’å…¥ä½ç½®","date":"2022-02-27T03:19:03.000Z","updated":"2022-02-27T04:13:26.935Z","comments":true,"path":"uncategorized/2022/02/27/ã€å‰‘æŒ‡OfferII68-Easyã€‘æŸ¥æ‰¾æ’å…¥ä½ç½®/","link":"","permalink":"http://li-zhi.net.cn/uncategorized/2022/02/27/%E3%80%90%E5%89%91%E6%8C%87OfferII68-Easy%E3%80%91%E6%9F%A5%E6%89%BE%E6%8F%92%E5%85%A5%E4%BD%8D%E7%BD%AE/","excerpt":"","text":"æŸ¥æ‰¾æ’å…¥ä½ç½®ç»™å®šä¸€ä¸ªæ’åºçš„æ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ target ï¼Œè¯·åœ¨æ•°ç»„ä¸­æ‰¾åˆ° target ï¼Œå¹¶è¿”å›å…¶ä¸‹æ ‡ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚ è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: nums = [1,3,5,6], target = 5è¾“å‡º: 2 ç¤ºä¾‹ 2: 12è¾“å…¥: nums = [1,3,5,6], target = 2è¾“å‡º: 1 ç¤ºä¾‹ 3: 12è¾“å…¥: nums = [1,3,5,6], target = 7è¾“å‡º: 4 ç¤ºä¾‹ 4: 12è¾“å…¥: nums = [1,3,5,6], target = 0è¾“å‡º: 0 ç¤ºä¾‹ 5: 12è¾“å…¥: nums = [1], target = 0è¾“å‡º: 0 æç¤º: 1 &lt;= nums.length &lt;= 104 -104 &lt;= nums[i] &lt;= 104 nums ä¸ºæ— é‡å¤å…ƒç´ çš„å‡åºæ’åˆ—æ•°ç»„ -104 &lt;= target &lt;= 104 æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 35 é¢˜ç›¸åŒï¼š https://leetcode-cn.com/problems/search-insert-position/ Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾å…ˆè®¾å®šå·¦ä¾§ä¸‹æ ‡ left å’Œå³ä¾§ä¸‹æ ‡ rightï¼Œå†è®¡ç®—ä¸­é—´ä¸‹æ ‡ middle nums[mid] å’Œ target ä¹‹é—´çš„å¤§å°è¿›è¡Œåˆ¤æ–­ï¼Œç›¸ç­‰åˆ™ç›´æ¥è¿”å›ä¸‹æ ‡ nums[mid] &lt; target åˆ™ leftå³ç§» nums[mid] &gt; target åˆ™ right å·¦ç§» æŸ¥æ‰¾ç»“æŸå¦‚æœæ²¡æœ‰ç›¸ç­‰å€¼åˆ™è¿”å›leftï¼Œè¯¥å€¼ä¸ºæ’å…¥ä½ç½® 123456789101112131415161718class Solution &#123; public int searchInsert(int[] nums, int target) &#123; int left = 0; int right = nums.length-1; int mid; while (left&lt;=right) &#123; mid = (left+right)/2; if(nums[mid]==target)&#123; return mid; &#125;else if(nums[mid]&gt;target)&#123; right = mid - 1; &#125;else &#123; left = mid + 1; &#125; &#125; return left; &#125;&#125; æ‹“å±•ï¼šä»¥ä¸‹è¿™ç§é€’å½’æŸ¥æ‰¾åªèƒ½æ‰¾åˆ°ç›®æ ‡å€¼å¹¶è¿”å›ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1ï¼Œå¹¶ä¸èƒ½è¾¾åˆ°æœ¬é¢˜è¦æ±‚ 12345678910111213141516public int binarySearch(int[] nums, int target) &#123; return binarySearch(nums,target,nums.length/2);&#125;public int binarySearch(int[] nums, int target,int binary)&#123; if(binary==0||binary==nums.length)&#123; return -1; &#125; if(nums[binary]==target)&#123; return binary; &#125; if(target&gt;nums[binary])&#123; return binarySearch(nums,target,(binary+nums.length)/2+1); &#125;else&#123; return binarySearch(nums,target,binary/2); &#125;&#125;","categories":[],"tags":[]},{"title":"ã€2016-Easyã€‘å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼","slug":"ã€2016-Easyã€‘å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼","date":"2022-02-27T03:04:08.000Z","updated":"2022-02-27T03:20:06.986Z","comments":true,"path":"ç®—æ³•/2022/02/27/ã€2016-Easyã€‘å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/27/%E3%80%902016-Easy%E3%80%91%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC/","excerpt":"","text":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums ï¼Œè¯¥æ•°ç»„çš„å¤§å°ä¸º n ï¼Œè¯·ä½ è®¡ç®— nums[j] - nums[i] èƒ½æ±‚å¾—çš„ æœ€å¤§å·®å€¼ ï¼Œå…¶ä¸­ 0 &lt;= i &lt; j &lt; n ä¸” nums[i] &lt; nums[j] ã€‚ è¿”å› æœ€å¤§å·®å€¼ ã€‚å¦‚æœä¸å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ i å’Œ j ï¼Œè¿”å› -1 ã€‚ ç¤ºä¾‹ 1ï¼š 12345è¾“å…¥ï¼šnums = [7,1,5,4]è¾“å‡ºï¼š4è§£é‡Šï¼šæœ€å¤§å·®å€¼å‡ºç°åœ¨ i = 1 ä¸” j = 2 æ—¶ï¼Œnums[j] - nums[i] = 5 - 1 = 4 ã€‚æ³¨æ„ï¼Œå°½ç®¡ i = 1 ä¸” j = 0 æ—¶ ï¼Œnums[j] - nums[i] = 7 - 1 = 6 &gt; 4 ï¼Œä½† i &gt; j ä¸æ»¡è¶³é¢˜é¢è¦æ±‚ï¼Œæ‰€ä»¥ 6 ä¸æ˜¯æœ‰æ•ˆçš„ç­”æ¡ˆã€‚ ç¤ºä¾‹ 2ï¼š 1234è¾“å…¥ï¼šnums = [9,4,3,2]è¾“å‡ºï¼š-1è§£é‡Šï¼šä¸å­˜åœ¨åŒæ—¶æ»¡è¶³ i &lt; j å’Œ nums[i] &lt; nums[j] è¿™ä¸¤ä¸ªæ¡ä»¶çš„ i, j ç»„åˆã€‚ ç¤ºä¾‹ 3ï¼š 1234è¾“å…¥ï¼šnums = [1,5,2,10]è¾“å‡ºï¼š9è§£é‡Šï¼šæœ€å¤§å·®å€¼å‡ºç°åœ¨ i = 0 ä¸” j = 3 æ—¶ï¼Œnums[j] - nums[i] = 10 - 1 = 9 ã€‚ æç¤ºï¼š n == nums.length 2 &lt;= n &lt;= 1000 1 &lt;= nums[i] &lt;= 109 Related Topics æ•°ç»„ æ³•ä¸€ï¼šæš´åŠ›æšä¸¾ç›´æ¥éå†ï¼Œç„¶åæ¯”è¾ƒæœ€å€¼ 12345678910111213class Solution &#123; public int maximumDifference(int[] nums) &#123; int max = -1; for (int i = 0; i &lt; nums.length; i++) &#123; for (int j = i + 1; j &lt; nums.length; j++) &#123; if(nums[i]&lt;nums[j])&#123; max = Math.max(nums[j]-nums[i],max); &#125; &#125; &#125; return max; &#125;&#125; æ³•äºŒï¼šæœ€å°å‰ç¼€æ³•0 &lt;= i &lt; j &lt; nï¼Œæ‰€ä»¥jæ˜¯ä»1å¼€å§‹èµ° å°†preminä½œä¸ºjä¹‹å‰çš„æ•°ç»„å†…æœ€å°çš„é‚£ä¸ªå…ƒç´  å¦‚æœnums[j]å¤§äºè¯¥æ•°å­—ï¼Œåˆ™å°†å…¶å‡å»å¹¶æ¯”è¾ƒä¸maxçš„å¤§å°å…³ç³» åä¹‹è¯¥æ•°å­—æ›¿ä»£preminçš„åœ°ä½æˆä¸ºjä¹‹å‰çš„æœ€å°å€¼ ä¸Šä»£ç ï¼š 1234567891011121314class Solution &#123; public int maximumDifference(int[] nums) &#123; int max=-1; int premin = nums[0]; for (int j = 1; j &lt; nums.length; j++) &#123; if(nums[j]&gt;premin)&#123; max=Math.max(nums[j]-premin,max); &#125;else &#123; premin = nums[j]; &#125; &#125; return max; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€206-Easyã€‘åè½¬é“¾è¡¨","slug":"ã€206-Easyã€‘åè½¬é“¾è¡¨","date":"2022-02-26T15:42:36.000Z","updated":"2022-02-27T01:03:10.601Z","comments":true,"path":"ç®—æ³•/2022/02/26/ã€206-Easyã€‘åè½¬é“¾è¡¨/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/26/%E3%80%90206-Easy%E3%80%91%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/","excerpt":"","text":"åè½¬é“¾è¡¨ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šhead = [1,2,3,4,5]è¾“å‡ºï¼š[5,4,3,2,1] ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šhead = [1,2]è¾“å‡ºï¼š[2,1] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šhead = []è¾“å‡ºï¼š[] æç¤ºï¼š é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 5000] -5000 &lt;= Node.val &lt;= 5000 è¿›é˜¶ï¼šé“¾è¡¨å¯ä»¥é€‰ç”¨è¿­ä»£æˆ–é€’å½’æ–¹å¼å®Œæˆåè½¬ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ Related Topics é€’å½’ é“¾è¡¨ æ³•ä¸€ï¼šè¿­ä»£ä½¿ç”¨ä¸‰ä¸ªèŠ‚ç‚¹åˆ†åˆ«å­˜å‚¨å½“å‰èŠ‚ç‚¹ï¼ˆnowï¼‰ï¼Œå‰ç½®èŠ‚ç‚¹ï¼ˆprevï¼‰ï¼Œåç½®èŠ‚ç‚¹ï¼ˆsuffixï¼‰ å°†nowçš„nextæŒ‡å‘å‰ç½®èŠ‚ç‚¹ï¼Œ å°†prevæŒ‡å‘nowï¼Œ å°†nowæŒ‡å‘suffixï¼Œ ç„¶åsuffixå‘åèµ°ä¸€ä½ã€‚ è¿™æ ·ä¸€æ¬¡å¾ªç¯å°±èµ°å®Œäº†ã€‚ 12345678910111213141516171819202122class Solution &#123; public ListNode reverseList(ListNode head) &#123; if(head==null)&#123; return null; &#125; ListNode prev = null; ListNode now = head; if(head.next==null)&#123; return head; &#125; ListNode suffix = now.next; while(now.next!=null)&#123; now.next=prev; prev = now; now = suffix; suffix = suffix.next; &#125; now.next=prev; head = now; return head; &#125;&#125; ä¼˜åŒ–ï¼šå°†è·å–suffixçš„æ­¥éª¤æ”¾åˆ°äº†æ¯æ¬¡å¾ªç¯çš„æœ€å‰é¢ï¼Œæ ¹æ®nowæ¥æ‹¿åˆ°ï¼Œè€Œä¸æ˜¯è‡ªå·±å¾€åèµ°ã€‚ 1234567891011121314151617class Solution &#123; public ListNode reverseList(ListNode head) &#123; if(head==null)&#123; return null; &#125; ListNode prev = null; ListNode now = head; ListNode suffix; while(now!=null)&#123; suffix = now.next; now.next=prev; prev = now; now = suffix; &#125; return prev; &#125;&#125; æ³•äºŒï¼šé€’å½’ä½¿ç”¨é€’å½’çš„ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœé“¾è¡¨è¿‡äºé•¿ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥å¼‚å¸¸StackOverFlowException æ€è·¯å’Œä¹‹å‰æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œç›´æ¥ä¸Šä»£ç ã€‚ 12345678910111213class Solution &#123; public ListNode reverseList(ListNode head) &#123; return reverse(null,head); &#125; public ListNode reverse(ListNode prev, ListNode curr)&#123; if(curr==null)&#123; return prev; &#125; ListNode suffix=curr.next; curr.next = prev; return reverse(curr,suffix); &#125;&#125; æˆ–è€…ä¸æƒ³åœ¨å¤–é¢å®šä¹‰ä¸€ä¸ªé€’å½’ä¹Ÿå¯ä»¥è¿™æ ·å†™ 1234567891011class Solution &#123; public ListNode reverseList(ListNode head) &#123; if (head == null || head.next == null) &#123; return head; &#125; ListNode newHead = reverseList(head.next); head.next.next = head; head.next = null; return newHead; &#125;&#125; è¿™ç§é€’å½’å†™çš„å°±æ¯”è¾ƒçƒ‚äº†ï¼Œçœ‹çœ‹å°±è¿‡å»äº† 12345678910111213141516171819public ListNode reverseList3(ListNode head) &#123; ListNode temp= head; ListNode tail; while(temp.next!=null)&#123; temp = temp.next; &#125; tail = temp; reverse3(head); return tail;&#125;public ListNode reverse3(ListNode head) &#123; if (head == null || head.next == null) &#123; return head; &#125; ListNode suffix = reverse3(head.next); suffix.next = head; head.next = null; return head;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€876-Easyã€‘é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹","slug":"ã€876-Easyã€‘é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹","date":"2022-02-26T15:41:52.000Z","updated":"2022-02-27T03:01:35.452Z","comments":true,"path":"ç®—æ³•/2022/02/26/ã€876-Easyã€‘é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/26/%E3%80%90876-Easy%E3%80%91%E9%93%BE%E8%A1%A8%E7%9A%84%E4%B8%AD%E9%97%B4%E8%8A%82%E7%82%B9/","excerpt":"","text":"é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ç»™å®šä¸€ä¸ªå¤´ç»“ç‚¹ä¸º head çš„éç©ºå•é“¾è¡¨ï¼Œè¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚ å¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚ ç¤ºä¾‹ 1ï¼š 12345è¾“å…¥ï¼š[1,2,3,4,5]è¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 3 (åºåˆ—åŒ–å½¢å¼ï¼š[3,4,5])è¿”å›çš„ç»“ç‚¹å€¼ä¸º 3 ã€‚ (æµ‹è¯„ç³»ç»Ÿå¯¹è¯¥ç»“ç‚¹åºåˆ—åŒ–è¡¨è¿°æ˜¯ [3,4,5])ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬è¿”å›äº†ä¸€ä¸ª ListNode ç±»å‹çš„å¯¹è±¡ ansï¼Œè¿™æ ·ï¼šans.val = 3, ans.next.val = 4, ans.next.next.val = 5, ä»¥åŠ ans.next.next.next = NULL. ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼š[1,2,3,4,5,6]è¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 4 (åºåˆ—åŒ–å½¢å¼ï¼š[4,5,6])ç”±äºè¯¥åˆ—è¡¨æœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼åˆ†åˆ«ä¸º 3 å’Œ 4ï¼Œæˆ‘ä»¬è¿”å›ç¬¬äºŒä¸ªç»“ç‚¹ã€‚ æç¤ºï¼š ç»™å®šé“¾è¡¨çš„ç»“ç‚¹æ•°ä»‹äº 1 å’Œ 100 ä¹‹é—´ã€‚ Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ æ³•ä¸€ï¼šhashæ˜ å°„éå†é“¾è¡¨ å°†ç´¢å¼•å½“åškey ListNodeå½“åšvalue æœ€åè¿”å›ç´¢å¼•ä¸ºé•¿åº¦å‡1çš„é‚£ä¸ªèŠ‚ç‚¹ ä¸Šä»£ç ï¼š 123456789101112class Solution &#123; public ListNode middleNode(ListNode head) &#123; Map&lt;Integer, ListNode&gt; map = new HashMap&lt;&gt;(); ListNode curr=head; int i=0; while(curr!=null)&#123; map.put(i++,curr); curr = curr.next; &#125; return map.get(i/2); &#125;&#125; æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆæ³•ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œslowï¼Œfast slowä¸€æ¬¡èµ°ä¸€æ­¥ fastä¸€æ¬¡èµ°ä¸¤æ­¥ å½“fasfèµ°åˆ°åº•çš„æ—¶å€™slowå°±åœ¨ä¸­é—´ èŠ‚ç‚¹æ•°ç›®ä¸ºå¥‡æ•° èŠ‚ç‚¹æ•°ç›®ä¸ºå¶æ•° ä¸Šä»£ç ï¼š 123456789public ListNode middleNode1(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while(fast!=null&amp;&amp;fast.next!=null)&#123; slow = slow.next; fast = fast.next.next; &#125; return slow;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€å‰‘æŒ‡offerII26-Mediumã€‘é‡æ’é“¾è¡¨","slug":"ã€å‰‘æŒ‡offerII26-Mediumã€‘é‡æ’é“¾è¡¨","date":"2022-02-26T14:04:54.000Z","updated":"2022-02-27T13:41:48.326Z","comments":true,"path":"ç®—æ³•/2022/02/26/ã€å‰‘æŒ‡offerII26-Mediumã€‘é‡æ’é“¾è¡¨/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/26/%E3%80%90%E5%89%91%E6%8C%87offerII26-Medium%E3%80%91%E9%87%8D%E6%8E%92%E9%93%BE%E8%A1%A8/","excerpt":"","text":"é‡æ’é“¾è¡¨ç»™å®šä¸€ä¸ªå•é“¾è¡¨ L çš„å¤´èŠ‚ç‚¹ head ï¼Œå•é“¾è¡¨ L è¡¨ç¤ºä¸ºï¼š L0 â†’ L1 â†’ â€¦ â†’ Ln-1 â†’ Lnè¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š 1L0 â†’ Ln â†’ L1 â†’ Ln-1 â†’ L2 â†’ Ln-2 â†’ â€¦ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: head = [1,2,3,4]è¾“å‡º: [1,4,2,3] ç¤ºä¾‹ 2: 12è¾“å…¥: head = [1,2,3,4,5]è¾“å‡º: [1,5,2,4,3] æç¤ºï¼š é“¾è¡¨çš„é•¿åº¦èŒƒå›´ä¸º [1, 5 * 104] 1 &lt;= node.val &lt;= 1000 æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 143 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/reorder-list/ Related Topics æ ˆ é€’å½’ é“¾è¡¨ åŒæŒ‡é’ˆ 1234567public class ListNode &#123; int val; ListNode next; ListNode() &#123;&#125; ListNode(int val) &#123; this.val = val; &#125; ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;&#125; æ³•ä¸€ï¼šæš´åŠ›åˆ†æï¼šä½¿ç”¨ç¬¨åŠæ³•ï¼Œå¯ä»¥å…ˆéå†é“¾è¡¨å°†æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç”¨lené€’å¢æ¥å¾—åˆ°é“¾è¡¨çš„é•¿åº¦ã€‚ å½“é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼Œæˆ‘éœ€è¦ä¿ç•™åŠæ•°åŠ ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å½“é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œæˆ‘éœ€è¦ä¿ç•™åŠæ•°åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†è¿™ä¸ªæ•°å­—èµ‹ç»™lenï¼ˆè¿™ä¸ªå¯ä»¥è‡ªè¡Œæ¨æ¼”ä¸€ä¸‹ï¼‰ ç„¶åå‡ºé˜Ÿlenä¸ªå…ƒç´ ï¼Œå°†æœ€åä¸€ä¸ªå‡ºé˜Ÿçš„å…ƒç´ çš„nextç½®ç©º è¿™æ—¶å€™éœ€è¦æ’å…¥çš„èŠ‚ç‚¹å°±æŒ‰é¡ºåºä¿å­˜åœ¨é˜Ÿåˆ—ä¸­äº† æ¥ç€æŒ‰é˜Ÿåˆ—å‡ºé˜Ÿé¡ºåºé—´éš”æ’å…¥åˆ°åŸé“¾è¡¨ä¸­ å¯¹äºå®ä¾‹äºŒçš„æµç¨‹å›¾ï¼š 12345678910111213141516171819202122232425class Solution &#123; public void reorderList(ListNode head) &#123; LinkedList&lt;ListNode&gt; nodes = new LinkedList&lt;&gt;(); ListNode temp = head; int len = 0; while(temp!=null)&#123; nodes.add(temp); temp = temp.next; len++; &#125; len = len/2+1; for (int i = 0; i &lt; len; i++) &#123; temp = nodes.poll(); &#125; temp.next=null; temp = head; ListNode now; while(!nodes.isEmpty())&#123; now = nodes.pollLast(); now.next = temp.next; temp.next = now; temp = now.next; &#125; &#125;&#125; ä½¿ç”¨æ ˆä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122class Solution &#123; public void reorderList(ListNode head) &#123; Stack&lt;ListNode&gt; stack = new Stack&lt;&gt;(); int len = 0; ListNode temp = head; while(temp!=null)&#123; len++; stack.push(temp); temp = temp.next; &#125; len = (int) (len/2.0-0.5); temp = head; ListNode now; for (int i = 0; i &lt; len; i++) &#123; now = stack.pop(); now.next = temp.next ; temp.next = now; temp = now.next; &#125; stack.pop().next = null; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼","date":"2022-02-26T05:05:48.000Z","updated":"2022-02-28T00:36:16.964Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/26/è®¾è®¡æ¨¡å¼-äº«å…ƒæ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"äº«å…ƒæ¨¡å¼å®šä¹‰ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ ä¼˜ç‚¹ï¼šå¦‚æœç³»ç»Ÿæœ‰å¤§é‡ç±»ä¼¼çš„å¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„å†…å­˜å’ŒCPUèµ„æº å®ç°åœºæ™¯ï¼šå‡å¦‚æˆ‘è¦å¼€å‘ä¸€æ¬¾æ¸¸æˆï¼Œç„¶åæ¸¸æˆé‡Œé¢çš„åœ°å›¾æœ‰å¾ˆå¤šæ ‘æœ¨ è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åˆ›å»ºå‡ ä¸‡ä¸ªæ ‘çš„å¯¹è±¡ Tree 123456@Data@AllArgsConstructor@ToStringpublic class Tree &#123; private final String name;&#125; TreeNode 1234567@Data@AllArgsConstructorpublic class TreeNode &#123; private final Tree tree; private int x; private int y;&#125; TreeFactory 12345678910111213public class TreeFactory &#123; private static ConcurrentHashMap&lt;String, Tree&gt; map = new ConcurrentHashMap&lt;&gt;(); public static Tree getTree(String name)&#123; if(map.containsKey(name))&#123; return map.get(name); &#125; return null; &#125; public static void addTree(String name)&#123; map.put(name,new Tree(name)); &#125;&#125; ä¸»å‡½æ•° 123456789public static void main(String[] args) &#123; TreeFactory.addTree(&quot;æ¢§æ¡æ ‘&quot;); TreeFactory.addTree(&quot;é¦™æ¨Ÿæ ‘&quot;); TreeFactory.addTree(&quot;é“¶ææ ‘&quot;); TreeFactory.addTree(&quot;é¢åŒ…æ ‘&quot;); TreeNode treeNode1 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,1); TreeNode treeNode2 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,2); TreeNode treeNode3 = new TreeNode(TreeFactory.getTree(&quot;æ¢§æ¡æ ‘&quot;),1,3);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€64-Mediumã€‘æœ€å°è·¯å¾„å’Œ","slug":"ã€64-Mediumã€‘æœ€å°è·¯å¾„å’Œ","date":"2022-02-25T15:03:19.000Z","updated":"2022-02-26T04:03:46.005Z","comments":true,"path":"ç®—æ³•/2022/02/25/ã€64-Mediumã€‘æœ€å°è·¯å¾„å’Œ/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/25/%E3%80%9064-Medium%E3%80%91%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C/","excerpt":"","text":"æœ€å°è·¯å¾„å’Œç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ *m* x *n* ç½‘æ ¼ grid ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚ è¯´æ˜ï¼šæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚ 123è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]è¾“å‡ºï¼š7è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šgrid = [[1,2,3],[4,5,6]]è¾“å‡ºï¼š12 æç¤ºï¼š m == grid.length n == grid[i].length 1 &lt;= m, n &lt;= 200 0 &lt;= grid[i][j] &lt;= 100 åˆ†æï¼šä¸€èˆ¬æ¥è¯´ï¼Œé‡åˆ°è¿™ç§ç»Ÿè®¡å¯è¡Œè·¯å¾„çš„æ•°é‡ï¼Œæˆ–è€…æ±‚æœ€å°è·¯å¾„çš„æ—¶å€™ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’å’Œæœç´¢è¿™ä¸¤ç§æ–¹æ³•ï¼Œä½†æ˜¯æœç´¢æ›´é€‚ç”¨äºæ•°æ®è§„æ¨¡è¾ƒå°çš„é¢˜ç›® æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä»¥ä¸‹ä¸¤ç‚¹ã€‚ çŠ¶æ€çš„è®¾ç½®ã€‚åœ¨è¿™ä¸ªé¢˜ç›®é‡Œï¼Œç”±äºè¦æ±‚æœ€å°è·¯å¾„å’Œï¼Œæˆ‘ä»¬å¯ä»¥ä»¤ dp[ i ] [ j ] ä»£è¡¨ä»ï¼ˆiï¼Œjï¼‰ç‚¹èµ°åˆ°å³ä¸‹è§’ç‚¹çš„æœ€å°è·¯å¾„å’Œã€‚ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æ¥æ±‚å‡º dp [ i] [j]ã€‚ç”±äºæ¯æ¬¡åªèƒ½å¾€å³æˆ–è€…ä¸‹èµ°ï¼Œæ‰€ä»¥ä»ï¼ˆiï¼Œjï¼‰åªèƒ½èµ°åˆ°ï¼ˆi+1ï¼Œjï¼‰æˆ–è€…ï¼ˆiï¼Œj+1)ã€‚æ¢è¨€ä¹‹ï¼Œdp[ i ] [ j ] çš„å‰ç»§çŠ¶æ€åªæœ‰dp[ i+1 ] [ j ], dp[ i ] [ j+1 ], æ‰€ä»¥æˆ‘ä»¬åœ¨ä¸¤è€…å–æœ€å°ï¼Œç„¶ååŠ ä¸Šè¿™ä¸ªæ ¼å­å†…çš„æ•°å³å¯ dp(i,j) &#x3D; grid(i,j) + min(dp(i + 1,j),dp(i,j + 1)) æ˜¯éœ€è¦ç‰¹æ®Šå¤„ç†çš„ï¼Œå½“ç„¶è¿˜æœ‰ç»ˆç‚¹å…ƒç´ ä¹Ÿæ˜¯è¦åšä¸ªæ’é™¤ï¼Œä¸‹é¢å…ˆçœ‹æµç¨‹å›¾ å°±ä»¥æ¡ˆä¾‹ä¸€çš„çŸ©é˜µä¸ºä¾‹å­ï¼š 123è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]è¾“å‡ºï¼š7è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚ æ­£å‘æ€ç»´ä»ç»ˆç‚¹è€ƒè™‘é—®é¢˜ï¼Œæ€è€ƒä¸‹ä¸€ç‚¹åœ¨å“ª åªæœ‰æœ€åä¸€åˆ—æ˜¯åªèƒ½å‘ä¸‹èµ° åªæœ‰æœ€åä¸€è¡Œæ˜¯åªèƒ½å‘å³èµ° ç»ˆç‚¹ä¸åšå¤„ç† ä¸Šä»£ç ï¼š 123456789101112131415161718class Solution &#123; public int minPathSum(int[][] grid) &#123; int height = grid.length; int width = grid[0].length; for (int i = height - 1 ; i &gt;= 0; i--) &#123; for (int j = width - 1 ; j &gt;= 0; j--) &#123; if(i==height-1&amp;&amp;j!=width-1)&#123; grid[i][j]+=grid[i][j+1]; &#125;else if(i!=height-1&amp;&amp;j==width-1)&#123; grid[i][j]+=grid[i+1][j]; &#125;else if(i!=height-1&amp;&amp;j!=width-1)&#123; grid[i][j]+=Math.min(grid[i+1][j],grid[i][j+1]); &#125; &#125; &#125; return grid[0][0]; &#125;&#125; é€†å‘æ€ç»´å³æˆ‘ä»èµ·ç‚¹å‡ºå‘ï¼Œæ€è€ƒä¸Šä¸€ç‚¹åœ¨å“ª åªæœ‰ç¬¬ä¸€è¡Œæ˜¯å¯ä»¥å‘å·¦ åªæœ‰ç¬¬ä¸€åˆ—æ˜¯å¯ä»¥å‘ä¸Š ç¬¬ä¸€ä¸ªå…ƒç´ ä¸åšå¤„ç† ä¸Šä»£ç ï¼š 123456789101112131415161718class Solution &#123; public int minPathSum(int[][] grid) &#123; int rows = grid.length; int columns = grid[0].length; for (int i = 0; i &lt; rows ; i++) &#123; for (int j = 0; j &lt; columns ; j++) &#123; if(i==0&amp;&amp;j!=0)&#123; grid[i][j]+=grid[i][j-1]; &#125;else if(j==0&amp;&amp;i!=0)&#123; grid[i][j]+=grid[i-1][j]; &#125;else if(i!=0) &#123; grid[i][j]+=Math.min(grid[i-1][j],grid[i][j-1]); &#125; &#125; &#125; return grid[rows-1][columns-1]; &#125;&#125; ä¼˜åŒ–è¿™æ˜¯å®˜æ–¹çš„ä¼˜åŒ–è¯´æ˜ï¼š 12345æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„dpæ¥ä»£æ›¿äºŒç»´æ•°ç»„ï¼Œdp æ•°ç»„çš„å¤§å°å’Œgridçš„è¡Œå¤§å°ç›¸åŒã€‚è¿™æ˜¯å› ä¸ºå¯¹äºæŸä¸ªå›ºå®šçŠ¶æ€ï¼Œåªéœ€è¦è€ƒè™‘ä¸‹æ–¹å’Œå³æ–¹çš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬å°±å¯ä»¥ä¸€è¡Œä¸€è¡Œè®¡ç®—ï¼Œæ¥èŠ‚çœç©ºé—´å¤æ‚åº¦ã€‚ è¿™æ˜¯æˆ‘ä¸ªäººçš„è§£è¯»ï¼ˆå¯¹äºé€†å‘æ€ç»´ï¼‰ 123æƒ³è¦å¾—åˆ°æœ€åçš„ç»“æœï¼Œå°±éœ€è¦ä»ç¬¬ä¸€è¡Œå¼€å§‹è®¡ç®—ï¼Œç„¶åè¯¥è¡Œçš„æ•°æ®ä¸ºä¸‹ä¸€è¡Œçš„è®¡ç®—æä¾›æ•°æ®ã€‚è¿™ä¸€è¡Œè®¡ç®—å®Œæˆåï¼Œä¸Šä¸€è¡Œå°±å¤±å»äº†ä½œç”¨ï¼Œè€Œä¸”æˆ‘ä»¬éœ€è¦çš„å°±åªæ˜¯è®¡ç®—å®Œæˆåçš„æœ€åä¸€è¡Œæ•°æ®è¿”å›çš„ä¹Ÿå°±æ˜¯è¿™æœ€åä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•°æ®ä¹Ÿå°±æ˜¯dp[rows-1][colums-1] è¿™é‡Œå°±ä¸ç”»æµç¨‹å›¾äº†ï¼Œç›´æ¥ä¸Šä»£ç  12345678910111213141516class Solution &#123; public int minPathSum(int[][] grid) &#123; int rows = grid.length; int columns = grid[0].length; int[] dp = new int[columns]; Arrays.fill(dp,Integer.MAX_VALUE); dp[0]=0; for (int i = 0; i &lt; rows; i++) &#123; dp[0]=dp[0]+grid[i][0]; for (int j = 1; j &lt; columns; j++) &#123; dp[j]=Math.min(dp[j],dp[j-1])+grid[i][j]; &#125; &#125; return dp[columns-1]; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€537-Easyã€‘å¤æ•°ä¹˜æ³•","slug":"ã€537-Easyã€‘å¤æ•°ä¹˜æ³•","date":"2022-02-25T14:41:15.000Z","updated":"2022-02-25T15:06:52.718Z","comments":true,"path":"ç®—æ³•/2022/02/25/ã€537-Easyã€‘å¤æ•°ä¹˜æ³•/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/25/%E3%80%90537-Easy%E3%80%91%E5%A4%8D%E6%95%B0%E4%B9%98%E6%B3%95/","excerpt":"","text":"å¤æ•°ä¹˜æ³•å¤æ•° å¯ä»¥ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œéµå¾ª &quot;**å®éƒ¨**+**è™šéƒ¨**i&quot; çš„å½¢å¼ï¼Œå¹¶æ»¡è¶³ä¸‹è¿°æ¡ä»¶ï¼š å®éƒ¨ æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå–å€¼èŒƒå›´æ˜¯ [-100, 100] è™šéƒ¨ ä¹Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå–å€¼èŒƒå›´æ˜¯ [-100, 100] i2 == -1 ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºçš„å¤æ•° num1 å’Œ num2 ï¼Œè¯·ä½ éµå¾ªå¤æ•°è¡¨ç¤ºå½¢å¼ï¼Œè¿”å›è¡¨ç¤ºå®ƒä»¬ä¹˜ç§¯çš„å­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnum1 = &quot;1+1i&quot;, num2 = &quot;1+1i&quot;è¾“å‡ºï¼š&quot;0+2i&quot;è§£é‡Šï¼š(1 + i) * (1 + i) = 1 + i2 + 2 * i = 2i ï¼Œä½ éœ€è¦å°†å®ƒè½¬æ¢ä¸º 0+2i çš„å½¢å¼ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šnum1 = &quot;1+-1i&quot;, num2 = &quot;1+-1i&quot;è¾“å‡ºï¼š&quot;0+-2i&quot;è§£é‡Šï¼š(1 - i) * (1 - i) = 1 + i2 - 2 * i = -2i ï¼Œä½ éœ€è¦å°†å®ƒè½¬æ¢ä¸º 0+-2i çš„å½¢å¼ã€‚ æç¤ºï¼š num1 å’Œ num2 éƒ½æ˜¯æœ‰æ•ˆçš„å¤æ•°è¡¨ç¤ºã€‚ Related Topics æ•°å­¦ å­—ç¬¦ä¸² æ¨¡æ‹Ÿ æ³•ä¸€ï¼šåˆ†è§£æ•°å­—æ³•åˆ†æï¼šè¿™é¢˜ç›´æ¥çœ‹è¿™ä¸ªæç¤ºâ†‘æœ‰æ•ˆçš„å¤æ•°è¡¨ç¤ºï¼Œå°±è¯´æ˜æµ‹è¯•ä½¿ç”¨çš„å­—ç¬¦ä¸²éƒ½æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼Œâ€21+-21iâ€,â€12+1iâ€,â€0+1iâ€,â€12+0iâ€ æ‰€ä»¥è¿™å°±å¾ˆç®€å•äº† 123456789public String complexNumberMultiply(String num1, String num2) &#123; String[] complex1 = num1.split(&quot;\\\\+&quot;); String[] complex2 = num2.split(&quot;\\\\+&quot;); int x1 = Integer.parseInt(complex1[0]); int y1 = Integer.parseInt(complex1[1].split(&quot;i&quot;)[0]); int x2 = Integer.parseInt(complex2[0]); int y2 = Integer.parseInt(complex2[1].split(&quot;i&quot;)[0]); return String.format(&quot;%d+%di&quot;,(x1*x2-y1*y2),(x1*y2+x2*y1));&#125; è¿›é˜¶ï¼šé¢˜ç›®ç»™å‡ºçš„å¤æ•°æ²¡æœ‰å›ºå®šçš„è§„èŒƒæœªå®Œå¾…ç»­","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©","slug":"Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©","date":"2022-02-25T13:37:11.000Z","updated":"2022-06-18T13:25:02.333Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E5%92%8C%E9%9B%AA%E5%B4%A9/","excerpt":"","text":"ç¼“å­˜ç©¿é€å’Œé›ªå´©ç¼“å­˜çš„æ—¶å€™ï¼Œå¤§å¤§æé«˜äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯æ•°æ®æŸ¥è¯¢æ–¹é¢ã€‚ä½†åŒæ—¶ï¼Œå®ƒå¸¦æ¥å¥½å¤„çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†é—®é¢˜ã€‚ ç¼“å­˜ç©¿é€å’Œé›ªå´©å°±æ˜¯ä¸¤ä¸ªç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶ä¸šç•Œä¹Ÿå·²ç»æœ‰äº†æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆ ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰æ¦‚å¿µï¼šç¼“å­˜ç©¿é€çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œç”¨æˆ·æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‘ç°Rediså†…å­˜æ•°æ®åº“ä¸­æ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯å»æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ã€‚å‘ç°ä¹Ÿæ²¡æœ‰ï¼Œäºæ˜¯æœ¬æ¬¡æŸ¥è¯¢å¤±è´¥ã€‚å½“è¿™ç§æŸ¥è¯¢æƒ…å†µå¾ˆå¤šçš„æ—¶å€™ï¼Œç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œéƒ½æ—¶å»è¯·æ±‚äº†æŒä¹…å±‚æ•°æ®åº“ã€‚å°±æ˜¯æ„å‘³ç€è¯¥ç¼“å­˜æ— ç”¨ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜ç©¿é€ã€‚ è§£å†³æ–¹æ¡ˆï¼š å¸ƒéš†è¿‡æ»¤å™¨ å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯¹æ‰€æœ‰èƒ½æŸ¥è¯¢åˆ°çš„å‚æ•°ä»¥hashçš„å½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™è¯¥è¯·æ±‚ç›´æ¥ä¸¢å¼ƒï¼Œä»è€Œè§£å†³é—®é¢˜ ç½®ç©ºç¼“å­˜ å½“å­˜å‚¨å±‚æœªå‘½ä¸­çš„æ—¶å€™ï¼ŒåŠæ—¶è¿”å›çš„æ˜¯nullå¯¹è±¡ï¼Œç¼“å­˜ä¹Ÿå°†å…¶å­˜å‚¨èµ·æ¥åŒæ—¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œä¿æŠ¤äº†mysql é—®é¢˜ï¼š æœ‰å¯èƒ½ä¼šå­˜æ”¾å¾ˆå¤šå¾ˆå¤šå€¼ä¸ºç©ºçš„é”®å€¼å¯¹ï¼Œæµªè´¹æ–‡ä»¶ åŠæ—¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯å¦‚æœmysqlåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´è¿˜æ²¡åˆ°çš„æ—¶å€™ï¼Œå·²ç»æœ‰æŸ¥è¯¢ç»“æœäº†ï¼Œä½†æ˜¯å› ä¸ºè¿‡æœŸæ—¶é—´æ²¡åˆ°ï¼Œå´è¿˜æ˜¯è®¿é—®ä¸äº†mysqlï¼Œä»è€ŒæŸ¥è¯¢åˆ°æ•°æ® ç¼“å­˜å‡»ç©¿ï¼ˆæŸ¥å¾—å¤ªå¤šäº†ï¼‰æ¦‚è¿°ï¼šè¿™é‡Œéœ€è¦æ³¨æ„å’Œç¼“å­˜å‡»ç©¿çš„åŒºåˆ«ï¼Œç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡ä¸€ä¸ªkeyåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚å½“æŸä¸ªkeyåœ¨è¿‡æœŸçš„ç¬é—´ï¼Œæœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®ï¼Œè¿™ç±»æ•°æ®ä¸€èˆ¬æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œç”±äºç¼“å­˜è¿‡æœŸï¼Œä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼Œå¹¶ä¸”å›å†™ç¼“å­˜ï¼Œä¼šå¯¼ä½¿æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ã€‚è§£å†³æ–¹æ¡ˆï¼š è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸï¼Œä»ç¼“å­˜å±‚é¢æ¥çœ‹ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°çƒ­ç‚¹ key è¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜ã€‚ åŠ äº’æ–¥é”åˆ†å¸ƒå¼é”ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹äºæ¯ä¸ªkeyåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ é›ªå´©æ¦‚å¿µï¼šæŒ‡çš„æ˜¯åœ¨æŸä¸€æ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆæˆ–è€…é›†ä¸­å®•æœº æ­£å¸¸ï¼š é›ªå´©ï¼š å¦‚æœæ˜¯è‡ªç„¶keyè¿‡æœŸï¼Œå€’æ˜¯å½±å“ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœæ˜¯èŠ‚ç‚¹å®•æœºæˆ–è€…æ–­ç”µï¼Œè¿™å°±å¾ˆæœ‰å¯èƒ½ä¼šå°†æ•°æ®åº“å†²å® è§£å†³æ–¹æ¡ˆï¼š redisé›†ç¾¤ é™æµé™çº§ï¼šåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹ä¸ªæ•° æ•°æ®é¢„çƒ­ï¼šåœ¨æ­£å¼éƒ¨ç½²å‰ï¼Œå…ˆæŠŠå¯èƒ½çš„æ•°æ®é¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·çš„è¯å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­å»ï¼Œåœ¨å³å°†å‘ç”Ÿé«˜å¹¶å‘è®¿é—®å‰ï¼Œæ‰‹åŠ¨è§¦å‘åŠ è½½å™¨ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜è¿‡æœŸæ—¶é—´ç‚¹æ¯”è¾ƒå‡åŒ€","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-ä¸»ä»å¤åˆ¶","slug":"Redis-ä¸»ä»å¤åˆ¶","date":"2022-02-25T03:40:53.000Z","updated":"2022-02-25T13:36:13.180Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-ä¸»ä»å¤åˆ¶/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/","excerpt":"","text":"ä¸»ä»å¤åˆ¶ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨ä¸­çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ä¸Šã€‚ å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master&#x2F;leader)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave&#x2F;follower) æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚Masterä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ã€‚ ä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹(æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ ä½œç”¨ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬ï¼š 1ã€æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚2ã€æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤3ã€è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚4ã€é«˜å¯ç”¨ï¼ˆé›†ç¾¤ï¼‰åŸºçŸ³ï¼šä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µæ¨¡å¼å’Œéƒ¨ç½²é›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè¦å°†Redisè¿ç”¨äºå·¥ç¨‹é¡¹ç›®ä¸­ï¼Œåªä½¿ç”¨ä¸€å°Redisæ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼Œæœ€å°‘ä¸‰å°ï¼ˆä¸€ä¸»äºŒä»ï¼‰ â€‹ 1ã€ä»ç»“æ„ä¸Šï¼Œå•ä¸ªRedisæœåŠ¡å™¨ä¼šå‘ç”Ÿå•ç‚¹æ•…éšœï¼Œå¹¶ä¸”ä¸€å°æœåŠ¡å™¨éœ€è¦å¤„ç†æ‰€æœ‰çš„è¯·æ±‚è´Ÿè½½ï¼Œå‹åŠ›è¾ƒå¤§â€‹ 2ã€ä»å®¹é‡ä¸Šï¼Œä¸èƒ½å°†ä¸€å°æœåŠ¡æ‰€æœ‰å†…å­˜ç”¨ä½œRediså­˜å‚¨å†…å­˜ï¼Œå•å°Redisæœ€å¤§ä½¿ç”¨å†…å­˜ä¸åº”è¯¥è¶…è¿‡20Gã€‚ é…ç½®å­èŠ‚ç‚¹æˆ‘ä»¬è¿™é‡Œä½¿ç”¨dockeræ¥åš 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586# å¤åˆ¶ä¸¤ä»½é…ç½®æ–‡ä»¶ç»™ä»èŠ‚ç‚¹é•œåƒä½¿ç”¨[root@iZbp18qscowpmxk6xpk38iZ redis]# lsredis-01.conf redis-02.conf redis.conf# éœ€è¦ä¿®æ”¹è¿™ä¸‰ä»½æ–‡ä»¶ï¼Œå°†ç»‘å®šæœ¬åœ°çš„é…ç½®æ³¨é‡Šæ‰ï¼Œå…³é—­å®‰å…¨æ¨¡å¼# åˆ†åˆ«ä»¥åå°æ–¹å¼å¯åŠ¨ä¸¤ä¸ªä»èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -P -it -d -v /home/redis/redis-01.conf:/etc/redis/redis.conf --name=salveRedis01 redisa593c51bc1100e892f5d18c34ba5a05f637d1b3a4a29e5840cfeb18a633355f5[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -P -it -d -v /home/redis/redis-02.conf:/etc/redis/redis.conf --name=salveRedis02 redis08833de79be2cf719402b4f4cf42bf06d0f0a84a22e188f2b2f4d03f54ca48c1# æŸ¥çœ‹æ˜ å°„ç«¯å£ï¼Œè¿™é‡Œä¸€å®šä¸€å®šè¦æ³¨æ„ï¼ï¼æœåŠ¡å™¨è¦å¼€å®‰å…¨ç»„ï¼ï¼ï¼ä¸ç„¶å°±æ˜¯è¿æ¥å¤±è´¥å“ï¼ï¼ï¼[root@iZbp18qscowpmxk6xpk38iZ redis]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESa593c51bc110 redis &quot;docker-entrypoint.sâ€¦&quot; 24 minutes ago Up About a minute 0.0.0.0:49169-&gt;6379/tcp salveRedis0108833de79be2 redis &quot;docker-entrypoint.sâ€¦&quot; 24 minutes ago Up About a minute 0.0.0.0:49170-&gt;6379/tcp salveRedis020e9919007f5d redis &quot;docker-entrypoint.sâ€¦&quot; 38 minutes ago Up 2 minutes 0.0.0.0:49168-&gt;6379/tcp masterRedis# æŸ¥çœ‹ä¸»èŠ‚ç‚¹çš„åŸºæœ¬ä¿¡æ¯[root@iZbp18qscowpmxk6xpk38iZ ~]# docker exec -it masterRedis redis-cli127.0.0.1:6379&gt; info replication# Replicationrole:master # å½“å‰èŠ‚ç‚¹çš„è§’è‰²connected_slaves:0 # å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹master_failover_state:no-failovermaster_replid:f37ca91dd3b3578e83031f9ea087d64f9994dd9amaster_replid2:0000000000000000000000000000000000000000master_repl_offset:0second_repl_offset:-1repl_backlog_active:0repl_backlog_size:1048576repl_backlog_first_byte_offset:0repl_backlog_histlen:0# è¿›å…¥å­èŠ‚ç‚¹1å·çš„å®¢æˆ·ç«¯ï¼Œå¹¶é…ç½®çˆ¶èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker exec -it salveRedis01 redis-cli127.0.0.1:6379&gt; SLAVEOF 116.62.151.26 49168OK127.0.0.1:6379&gt; role1) &quot;slave&quot;2) &quot;116.62.151.26&quot;3) (integer) 491684) &quot;connected&quot; #è¯´æ˜è¿æ¥æˆåŠŸï¼Œå¦‚æœæ²¡å¼€å®‰å…¨ç»„çš„è¯ï¼Œè¿™ä¸€è¡Œä¼šæ˜¯connectingä¸‹ä¸€è¡Œæ˜¯-1ï¼Œè¡¨ç¤ºè¿æ¥å¤±è´¥5) (integer) 42# è¿›å…¥å­èŠ‚ç‚¹2å·çš„å®¢æˆ·ç«¯ï¼Œå¹¶é…ç½®çˆ¶èŠ‚ç‚¹[root@iZbp18qscowpmxk6xpk38iZ redis]# docker exec -it salveRedis02 redis-cli127.0.0.1:6379&gt; SLAVEOF 116.62.151.26 49168OK127.0.0.1:6379&gt; role1) &quot;slave&quot;2) &quot;116.62.151.26&quot;3) (integer) 491684) &quot;connected&quot;5) (integer) 112# æŸ¥çœ‹çˆ¶èŠ‚ç‚¹çš„åŸºæœ¬ä¿¡æ¯127.0.0.1:6379&gt; info replication# Replicationrole:masterconnected_slaves:2 # ä¸¤ä¸ªå­èŠ‚ç‚¹slave0:ip=116.62.151.26,port=6379,state=online,offset=112,lag=0slave1:ip=116.62.151.26,port=6379,state=online,offset=112,lag=1master_failover_state:no-failovermaster_replid:92ee701d04326eb2c74d8de1ea0fc2ec010f97dfmaster_replid2:0000000000000000000000000000000000000000master_repl_offset:112second_repl_offset:-1repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:1repl_backlog_histlen:112# åœ¨çˆ¶èŠ‚ç‚¹æµ‹è¯•æ˜¯å¦æ•°æ®åŒæ­¥127.0.0.1:6379&gt; keys *(empty array)127.0.0.1:6379&gt; set k1 v1OK# å­èŠ‚ç‚¹1å·æŸ¥è¯¢127.0.0.1:6379&gt; get k1&quot;v1&quot;# å­èŠ‚ç‚¹2å·æŸ¥è¯¢127.0.0.1:6379&gt; get k1&quot;v1&quot; ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çˆ¶èŠ‚ç‚¹ 123456# é…ç½®ä¸»èŠ‚ç‚¹çš„ipçš„ç«¯å£slaveof ä¸»æœºip ç«¯å£# å¦‚æœä¸»æœºä½¿ç”¨äº†config set masterauth passwordï¼Œæˆ–è€…ä¸»æœºé…ç½®æ–‡ä»¶ä¸­ requirepass password# åˆ™è¿™é‡Œé…ç½®æ–‡ä»¶å°±è¦åŠ ä¸Šä¸»æœºçš„å¯†ç æ¥éªŒè¯masterauth password ä¸»æœºå¯ä»¥å†™å…¥ä¹Ÿå¯ä»¥è¯»å–ï¼Œä½†æ˜¯ä»èŠ‚ç‚¹æ˜¯ä¸å¯ä»¥å†™å…¥çš„ï¼Œåªå¯ä»¥è¯»å–ä¸»èŠ‚ç‚¹å†™å…¥çš„å€¼ 12127.0.0.1:6379&gt; set k2 v2(error) READONLY You can&#x27;t write against a read only replica. ä¸»æœºå®•æœºäº†ä¹‹åï¼Œä»æœºä¾æ—§å¯ä»¥è¯»ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼Œå°±ä¸èƒ½å¾€é‡Œé¢å†™å…¥æ•°æ®äº†ã€‚ ï¼ˆè¿™é‡Œéœ€è¦ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼Œå³å½“ä¸»æœºå®•æœºåï¼Œä»æœºä¸­ä¼šé€‰ä¸¾å‡ºæ¥ä¸€ä¸ªä¸»æœºï¼Œè¿™æ ·çš„è¯å°±ä¿ç•™äº†å†™å…¥æ“ä½œï¼‰ å½“ä¸»æœºæ¢å¤è¿è¡Œï¼Œåˆ™æ¢å¤å†™å…¥åŠŸèƒ½ ä»æœºå®•æœºçš„è¯ï¼Œå¯¹ä¸»æœºæ²¡æœ‰ä»»ä½•å½±å“ å½“ä»æœºè¿è¡Œåï¼Œå°±æ¢å¤ä¸»æœºä¸­çš„æ•°æ® å¤åˆ¶åŸç†Slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€ä¸€ä¸ªsyncå‘½ä»¤ Master æ¥åˆ°å‘½ä»¤ï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚ å…¨é‡å¤åˆ¶ï¼šslaveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ å¢é‡å¤åˆ¶ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ ä½†æ˜¯åªè¦æ˜¯é‡æ–°è¿æ¥masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶ï¼‰å°†è¢«è‡ªåŠ¨æ‰§è¡Œ ä¸»ä»è¿æ¥çš„å½¢å¼ ä¸€å¯¹å¤š é“¾çŠ¶ å“¨å…µï¼ˆSentinelï¼‰æ¨¡å¼è¯¥æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³å½“ä¸»æœºå®•æœºåï¼Œä»æœºç¾¤æ— æ³•æœ‰å†™å…¥æƒé™çš„é—®é¢˜ã€‚ è¯¥æ¨¡å¼ä¸‹ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå½“ä¸»æœºå®•æœºåï¼Œä»æœºç¾¤ä¸­ä¼šè‡ªç«‹ä¸€ä¸ªä¸»æœºï¼Œä»è€Œå°±æœ‰äº†å†™å…¥çš„åŠŸèƒ½ å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚ å…¶åŸç†å°±æ˜¯å“¨å…µé€šè¿‡å‘é€å‘½ä»¤ï¼Œç­‰å¾…redisæœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§å¤šä¸ªRediså®ä¾‹çš„åŠŸèƒ½ è¿™é‡Œçš„å“¨å…µæœ‰ä¸¤ä¸ªä½œç”¨ ç›‘æ§æœåŠ¡å™¨çš„çŠ¶æ€ å½“ä¸»æœºå®•æœºåï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå­èŠ‚ç‚¹ä½œä¸ºä¸»æœºï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä»–å­èŠ‚ç‚¹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ å½“ç„¶ï¼Œå¦‚æœå“¨å…µæŒ‚äº†æ€ä¹ˆåŠï¼Ÿæ‰€ä»¥éœ€è¦é…ç½®å¤šä¸ªå“¨å…µï¼Œç„¶åè¿™å‡ ä¸ªå“¨å…µå†äº’ç›¸ç›‘è§† å‡è®¾ä¸»æœåŠ¡å™¨å®•æœºï¼Œå“¨å…µ1å…ˆæ£€æµ‹åˆ°è¿™ä¸ªç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œé‡æ–°é€‰ä¸¾çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡ç§°ä¸ºä¸»è§‚ä¸‹çº¿ã€‚å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œfailoverï¼ˆæ•…éšœè½¬ç§»ï¼‰æ“ä½œã€‚ åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå®¢è§‚ä¸‹çº¿ã€‚ é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132# å“¨å…µè¿›ç¨‹çš„ç«¯å£port 26379# æ˜¯å¦ä»¥åå°è¿è¡Œdaemonize no# ç»‘å®šçš„çº¿ç¨‹pidfile /var/run/redis-sentinel.pid# æ—¥å¿—åç§°logfile &quot;&quot;# æ—¥å¿—ä¿å­˜ç›®å½•dir /tmp# é…ç½®ç›‘è§†è°# 2ä»£è¡¨è‡³å°‘è¦æœ‰ç»“æœå“¨å…µç¡®è®¤ä¸»æœºå®•æœºsentinel monitor mymaster 127.0.0.1 6379 2sentinel down-after-milliseconds mymaster 30000acllog-max-len 128sentinel parallel-syncs mymaster 1sentinel failover-timeout mymaster 180000sentinel deny-scripts-reconfig yesSENTINEL resolve-hostnames noSENTINEL announce-hostnames no å¯åŠ¨å“¨å…µè¿›ç¨‹ 1[root@iZbp18qscowpmxk6xpk38iZ redis]# docker run -d -p 49103:26379 -v /home/redis/sentinel.conf:/etc/redis/sentinel.conf --name=sentinel redis redis-sentinel /etc/redis/sentinel.conf ä¼˜ç‚¹ï¼š ä¸»ä»å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå¯ç”¨æ€§ä¼šæ›´å¥½ ç¼ºç‚¹ï¼š redisä¸å¥½åœ¨çº¿æ‰©å®¹ å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®ä¼˜ç‚¹éº»çƒ¦","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","date":"2022-02-25T03:19:07.000Z","updated":"2022-06-18T13:18:31.822Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/25/æ­£åˆ™è¡¨è¾¾å¼/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/25/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”±æ™®é€šå­—ç¬¦ï¼ˆå¦‚è‹±æ–‡å­—æ¯ï¼‰ä»¥åŠç‰¹æ®Šå­—ç¬¦ï¼ˆä¹Ÿç§°ä¸ºå…ƒå­—ç¬¦ï¼‰ç»„æˆçš„æ–‡å­—æ¨¡å¼ï¼Œè¯¥æ¨¡å¼å¯¹æ–‡æœ¬æŸ¥æ‰¾æ—¶éœ€è¦åŒ¹é…çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²æè¿°ï¼Œç»™å‡ºä¸€ä¸ªåŒ¹é…æ¨¡æ¿ã€‚å®ƒå¯ä»¥å¤§å¤§ç®€åŒ–æ–‡æœ¬è¯†åˆ«å·¥ä½œï¼Œç°å·²è¶…å‡ºäº†æŸç§è¯­è¨€æˆ–æŸä¸ªç³»ç»Ÿçš„å±€é™ï¼Œæˆä¸ºè¢«äººä»¬å¹¿ä¸ºä½¿ç”¨çš„å·¥å…·ã€‚ æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€ä¹¦å†™ç¬¦å· ç¬¦å· åç§° ç¤ºä¾‹ è§£é‡Š åŒ¹é…è¾“å…¥ \\ è½¬ä¹‰ç¬¦ \\* ç¬¦å·â€œ*â€ * [ ] å¯æ¥æ”¶çš„å­—ç¬¦åˆ—è¡¨ [efgh] eã€fã€gã€hä¸­çš„ä»»æ„1ä¸ªå­—ç¬¦ eã€fã€gã€h [^] ä¸æ¥æ”¶çš„å­—ç¬¦åˆ—è¡¨ [^abc] é™¤aã€bã€cä¹‹å¤–çš„ä»»æ„1ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬æ•°å­—å’Œç‰¹æ®Šç¬¦å· mã€qã€5ã€* | åŒ¹é…â€œ|â€ä¹‹å‰æˆ–ä¹‹åçš„è¡¨è¾¾å¼ ab|cd abæˆ–è€…cd abã€cd ( ) å°†å­è¡¨è¾¾å¼åˆ†ç»„ (abc) å°†å­—ç¬¦ä¸²abcä½œä¸ºä¸€ç»„ abc - è¿å­—ç¬¦ï¼ˆåªåœ¨[ ]ä¸­ä½¿ç”¨ï¼‰ A-Z ä»»æ„å•ä¸ªå¤§å†™å­—æ¯ å¤§å†™å­—æ¯ æ­£åˆ™è¡¨è¾¾å¼é™å®šç¬¦ ç¬¦å· åç§° ç¤ºä¾‹ è§£é‡Š åŒ¹é…è¾“å…¥ ä¸åŒ¹é…è¾“å…¥ * æŒ‡å®šå­—ç¬¦é‡å¤0æ¬¡æˆ–næ¬¡ç›¸å½“äº&#123;0,&#125; (abc)* ä»…åŒ…å«ä»»æ„ä¸ªabcçš„å­—ç¬¦ä¸² abcã€abcabcabc aã€abcabcabca + æŒ‡å®šå­—ç¬¦é‡å¤1æ¬¡æˆ–næ¬¡ï¼Œç›¸å½“äº&#123;1,&#125; m+(abc)* ä»¥è‡³å°‘1ä¸ªmå¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªabcçš„å­—ç¬¦ä¸² mã€mabcã€mabcabc maã€abc ? æŒ‡å®šå­—ç¬¦é‡å¤0æ¬¡æˆ–1æ¬¡ m+abc? ä»¥è‡³å°‘1ä¸ªmå¼€å¤´ï¼Œåæ¥abæˆ–abcçš„å­—ç¬¦ä¸² mabã€mabcã€mmmabã€mmabc abã€abcã€mabcc {n} åªèƒ½è¾“å…¥nä¸ªå­—ç¬¦ [abcd]{3} ç”±abcdä¸­å­—æ¯ç»„æˆçš„ä»»æ„é•¿åº¦ä¸º3çš„å­—ç¬¦ä¸² abcã€dbcã€adc aã€aaã€dcbd {n,} æŒ‡å®šè‡³å°‘ n ä¸ªåŒ¹é… [abcd]{3,} ç”±abcdä¸­å­—æ¯ç»„æˆçš„ä»»æ„é•¿åº¦ä¸å°äº3çš„å­—ç¬¦ä¸² aabã€dbcã€aaabdc aã€cdã€bb {n,m} æŒ‡å®šè‡³å°‘ n ä¸ªä½†ä¸å¤šäº m ä¸ªåŒ¹é… [abcd]{3,5} ç”±abcdä¸­å­—æ¯ç»„æˆçš„ä»»æ„é•¿åº¦ä¸å°äº3ï¼Œä¸å¤§äº5çš„å­—ç¬¦ä¸² abcã€abcdã€aaaaaã€bcdab abã€abababã€a ^ æŒ‡å®šèµ·å§‹å­—ç¬¦ï¼Œç”¨äº&#123;&#125;å†… ^[0-9]+[a-z]* ä»¥è‡³å°‘1ä¸ªæ•°å­—å¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªå°å†™å­—æ¯çš„å­—ç¬¦ä¸² 123ã€6aaã€555edf abcã€aaaã€a33 $ æŒ‡å®šç»“æŸå­—ç¬¦ï¼Œç”¨äº&#123;&#125;å†… ^[0-9]-[a-z]+$ ä»¥1ä¸ªæ•°å­—å¼€å¤´åæ¥è¿å­—ç¬¦â€œâ€“â€ï¼Œå¹¶ä»¥è‡³å°‘1ä¸ªå°å†™å­—æ¯ç»“å°¾çš„å­—ç¬¦ä¸² 2-aã€3-dddã€5-efg 33aã€8-ã€7-Ab åŒ¹é…å­—ç¬¦é›† ç¬¦å· åç§° ç¤ºä¾‹ è§£é‡Š åŒ¹é…è¾“å…¥ ä¸åŒ¹é…è¾“å…¥ . åŒ¹é…é™¤ \\n ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ a..b ä»¥aå¼€å¤´ï¼Œbç»“å°¾ï¼Œä¸­é—´åŒ…æ‹¬2ä¸ªä»»æ„å­—ç¬¦çš„é•¿åº¦ä¸º4çš„å­—ç¬¦ä¸² aaabã€aefbã€a35bã€a#*b abã€aaaaã€a123447b \\d åŒ¹é…å•ä¸ªæ•°å­—å­—ç¬¦ï¼Œç›¸å½“äº[0-9] \\d{3}(\\d)? åŒ…å«3ä¸ªæˆ–4ä¸ªæ•°å­—çš„å­—ç¬¦ä¸² 123ã€9876 123ã€9876 \\D åŒ¹é…å•ä¸ªéæ•°å­—å­—ç¬¦ï¼Œç›¸å½“äº[^0-9] \\D(\\d)* ä»¥å•ä¸ªéæ•°å­—å­—ç¬¦å¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªæ•°å­—å­—ç¬¦ä¸² aã€A342 aaã€AA78ã€1234 \\w åŒ¹é…å•ä¸ªæ•°å­—ã€å¤§å°å†™å­—æ¯å­—ç¬¦ï¼Œç›¸å½“äº[0-9a-zA-Z] ^^^^^ ä»¥3ä¸ªæ•°å­—å­—ç¬¦å¼€å¤´çš„é•¿åº¦ä¸º7çš„æ•°å­—å­—æ¯å­—ç¬¦ä¸² 234abcdã€12345Pe 58aã€Ra46 \\W åŒ¹é…å•ä¸ªéæ•°å­—ã€å¤§å°å†™å­—æ¯å­—ç¬¦ï¼Œç›¸å½“äº[^0-9a-zA-Z] \\W+\\d{2} ä»¥è‡³å°‘1ä¸ªéæ•°å­—å­—æ¯å­—ç¬¦å¼€å¤´ï¼Œ2ä¸ªæ•°å­—å­—ç¬¦ç»“å°¾çš„å­—ç¬¦ä¸² #29ã€#?@10 23ã€#?@10 \\s åŒ¹é…ç©ºæ ¼å­—ç¬¦ï¼Œæ¯”å¦‚tab \\s[0-9]\\s åŒ¹é…æ‰€æœ‰çš„ç©ºç™½ ç©ºæ ¼12ç©ºæ ¼ asdfa \\b åŒ¹é…æ¯ä¸€ä¸ªå­—æ¯çš„å‰å \\b åŒ¹é…æ‰€æœ‰å­—æ¯çš„å‰å æ­£åˆ™-PatternJAVAä¸­çš„æ­£åˆ™java.util.regex æ˜¯ä¸€ä¸ªç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰€è®¢åˆ¶çš„æ¨¡å¼æ¥å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…å·¥ä½œçš„ç±»åº“åŒ…ï¼Œå®ƒåŒ…æ‹¬ä¸¤ä¸ªç±»ï¼šPattern å’Œ Matcher ã€‚ Patternï¼š ä¸€ä¸ª Pattern æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç»ç¼–è¯‘åçš„è¡¨ç°æ¨¡å¼ã€‚ Matcherï¼šä¸€ä¸ª Matcher å¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ® Pattern å¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ã€‚ é¦–å…ˆä¸€ä¸ª Pattern å®ä¾‹è®¢åˆ¶äº†ä¸€ä¸ªæ‰€ç”¨è¯­æ³•ä¸ PERL ç±»ä¼¼çš„æ­£åˆ™è¡¨è¾¾å¼ç»ç¼–è¯‘åçš„æ¨¡å¼ï¼Œç„¶åä¸€ä¸ª Matcher å®ä¾‹åœ¨è¿™ä¸ªç»™å®šçš„ Pattern å®ä¾‹çš„æ¨¡å¼æ§åˆ¶ä¸‹è¿›è¡Œå­—ç¬¦ä¸²çš„åŒ¹é…å·¥ä½œã€‚ ä»¥ä¸‹æˆ‘ä»¬å°±åˆ†åˆ«æ¥çœ‹çœ‹è¿™ä¸¤ä¸ªç±»ï¼š 1.1ã€PatternPattern çš„æ–¹æ³•å¦‚ä¸‹è¡¨ï¼š æ–¹æ³•åç§° è§£é‡Š static Pattern compile(String regex) å°†ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘å¹¶èµ‹äºˆç»™ Pattern ç±» static Pattern compile(String regex, int flags) å¯¹æŒ‡å®šå­—ç¬¦ä¸²çš„æˆªå–ï¼Œå‚æ•°é…ç½®å¦‚ä¸‹ int flags() è¿”å›å½“å‰ Pattern çš„åŒ¹é… flag å‚æ•° Matcher matcher(CharSequence input) ç”Ÿæˆä¸€ä¸ªç»™å®šå‘½åçš„ Matcher å¯¹è±¡ static boolean matches(String regex, CharSequence input) ç¼–è¯‘ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼å¹¶å¯¹è¾“å…¥çš„å­—ä¸²ä»¥è¯¥æ­£åˆ™è¡¨è¾¾å¼ä¸ºæ¨¡å¼€å±•åŒ¹é… String pattern() è¿”å›è¯¥Patterå¯¹è±¡æ‰€ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼ å¯¹äº static Pattern compile(String regex, int flags) æ–¹æ³•ä¸­çš„å‚æ•° flags å–å€¼å¦‚ä¸‹ï¼š Pattern.CASE_INSENSITIVEï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„åŒ¹é…åªé€‚ç”¨äºUS-ASCIIå­—ç¬¦é›†ã€‚è®©è¡¨è¾¾å¼å¿½ç•¥å¤§å°å†™è¿›è¡ŒåŒ¹é…ã€‚ Pattern.COMMENTSï¼šæ­¤ç§æ¨¡å¼ä¸‹ï¼ŒåŒ¹é…æ—¶ä¼šå¿½ç•¥è¡¨è¾¾å¼ä¸­ç©ºæ ¼å­—ç¬¦(è¡¨è¾¾å¼é‡Œçš„ç©ºæ ¼ï¼Œtabï¼Œå›è½¦)ã€‚ Pattern.UNIX_LINESï¼šæ­¤ç§æ¨¡å¼ä¸‹ï¼Œåªæœ‰ \\næ‰è¢«è®¤ä½œä¸€è¡Œçš„ä¸­æ­¢ï¼Œå¹¶ä¸”ä¸ .ï¼Œ^ï¼Œä»¥åŠ $ è¿›è¡ŒåŒ¹é…ã€‚ Pattern.MULTILINEï¼šæ­¤ç§æ¨¡å¼ä¸‹ï¼Œä¸Šç®­å¤´å’Œå•å¼•å·åˆ†åˆ«åŒ¹é…ä¸€è¡Œçš„å¼€å§‹å’Œç»“æŸã€‚ Pattern.DOTALLï¼šæ­¤ç§æ¨¡å¼ä¸‹ï¼Œè¡¨è¾¾å¼ . å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬è¡¨ç¤ºä¸€è¡Œçš„ç»“æŸç¬¦ã€‚ ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸²æœ‰ç‰¹å®šæ„ä¹‰çš„å­—ç¬¦ï¼Œå¿…é¡»é¦–å…ˆè¦ç¼–è¯‘æˆä¸ºä¸€ä¸ª Pattern ç±»çš„å®ä¾‹ï¼Œè¿™ä¸ª Pattern å¯¹è±¡å°†ä¼šä½¿ç”¨ matcher() æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ª Matcher å®ä¾‹ï¼Œæ¥ç€ä¾¿å¯ä»¥ä½¿ç”¨è¯¥ Matcher å®ä¾‹ä»¥ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼ä¸ºåŸºç¡€å¯¹ç›®æ ‡å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…å·¥ä½œï¼Œå¤šä¸ª Matcher æ˜¯å¯ä»¥å…±ç”¨ä¸€ä¸ª Pattern å¯¹è±¡çš„ã€‚ ç°åœ¨æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå†é€šè¿‡åˆ†æå®ƒæ¥äº†è§£æ€æ ·ç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡å¹¶ä¸”ç¼–è¯‘ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ€åæ ¹æ®è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å°†ç›®æ ‡å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼š 123456789101112// ç”Ÿæˆä¸€ä¸ª Patternï¼ŒåŒæ—¶ç¼–è¯‘ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼Pattern p = Pattern.compile(&quot;[/]+&quot;);//ç”¨ Pattern çš„ split() æ–¹æ³•æŠŠå­—ç¬¦ä¸²æŒ‰ &quot;/&quot; åˆ†å‰²String[] result = p.split( &quot;Kevin has seenã€ŠLEONã€‹seveal times,because it is a good film.&quot; +&quot;/ å‡¯æ–‡å·²ç»çœ‹è¿‡ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹å‡ æ¬¡äº†ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€éƒ¨&quot; +&quot;å¥½ç”µå½±ã€‚/åè¯:å‡¯æ–‡ã€‚&quot;);for (int i = 0; i &lt; result.length; i++)&#123; System.out.println(result[i]);&#125; ä¸Šè¿°ä»£ç çš„è¿è¡Œç»“æœä¸ºï¼š Kevin has seenã€ŠLEONã€‹seveal times,because it is a good film.å‡¯æ–‡å·²ç»çœ‹è¿‡ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹å‡ æ¬¡äº†ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€éƒ¨å¥½ç”µå½±ã€‚åè¯:å‡¯æ–‡ã€‚ æ­£åˆ™ - Matcher 1ã€MatcherMatcher å¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ® Pattern å¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ã€‚ æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ Matcher å¸¸ç”¨çš„æ–¹æ³•ï¼š ç´¢å¼•æ–¹æ³•ï¼šç´¢å¼•æ–¹æ³•æä¾›äº†æœ‰ç”¨çš„ç´¢å¼•å€¼ï¼Œç²¾ç¡®è¡¨æ˜è¾“å…¥å­—ç¬¦ä¸²ä¸­åœ¨å“ªèƒ½æ‰¾åˆ°åŒ¹é…ã€‚ åç§° ç®€ä»‹ public int start() è¿”å›ä»¥å‰åŒ¹é…çš„åˆå§‹ç´¢å¼• public int start(int group) è¿”å›åœ¨ä»¥å‰çš„åŒ¹é…æ“ä½œæœŸé—´ï¼Œç”±ç»™å®šç»„æ‰€æ•è·çš„å­åºåˆ—çš„åˆå§‹ç´¢å¼• public int end() è¿”å›æœ€ååŒ¹é…å­—ç¬¦ä¹‹åçš„åç§»é‡ public int end(int group) è¿”å›åœ¨ä»¥å‰çš„åŒ¹é…æ“ä½œæœŸé—´ï¼Œç”±ç»™å®šç»„æ‰€æ•è·å­åºåˆ—çš„æœ€åå­—ç¬¦ä¹‹åçš„åç§»é‡ æŸ¥æ‰¾æ–¹æ³•ï¼šæŸ¥æ‰¾æ–¹æ³•ç”¨æ¥æ£€æŸ¥è¾“å…¥å­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è¯¥æ¨¡å¼ã€‚ åç§° ç®€ä»‹ public boolean lookingAt() å°è¯•å°†ä»åŒºåŸŸå¼€å¤´å¼€å§‹çš„è¾“å…¥åºåˆ—ä¸è¯¥æ¨¡å¼åŒ¹é… public boolean find() å°è¯•æŸ¥æ‰¾ä¸è¯¥æ¨¡å¼åŒ¹é…çš„è¾“å…¥åºåˆ—çš„ä¸‹ä¸€ä¸ªå­åºåˆ— public boolean find(int startï¼‰ é‡ç½®æ­¤åŒ¹é…å™¨ï¼Œç„¶åå°è¯•æŸ¥æ‰¾åŒ¹é…è¯¥æ¨¡å¼ã€ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„è¾“å…¥åºåˆ—çš„ä¸‹ä¸€ä¸ªå­åºåˆ— public boolean matches() å°è¯•å°†æ•´ä¸ªåŒºåŸŸä¸æ¨¡å¼åŒ¹é… ä¾‹ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹å•è¯ cat å‡ºç°åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­å‡ºç°æ¬¡æ•°è¿›è¡Œè®¡æ•°çš„ä¾‹å­ï¼š 123456789101112String regex = &quot;dog&quot;;String input = &quot;dog dog dogtie&quot;;Pattern p = Pattern.compile(regex);Matcher m = p.matcher(input); // è·å– matcher å¯¹è±¡int count = 0;while (m.find()) &#123; count++; System.out.println(&quot;Match number &quot; + count); System.out.println(&quot;start(): &quot; + m.start()); System.out.println(&quot;end(): &quot; + m.end());&#125; ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š Match number 1 &#x2F;&#x2F; ç¬¬ä¸€æ¬¡å‡ºç° ï¼ˆä¸‹æ ‡ 0-2ï¼‰start(): 0 &#x2F;&#x2F; å¼€å§‹ä¸‹æ ‡ 0end(): 3 &#x2F;&#x2F; ç»“æŸä¸‹æ ‡ 3Match number 2 &#x2F;&#x2F; ç¬¬äºŒæ¬¡å‡ºç°ï¼ˆä¸‹æ ‡ 4-6ï¼‰start(): 4 &#x2F;&#x2F; å¼€å§‹ä¸‹æ ‡ 4end(): 7 &#x2F;&#x2F; ç»“æŸä¸‹æ ‡ 7Match number 3 &#x2F;&#x2F; ç¬¬ä¸‰æ¬¡å‡ºç°ï¼ˆä¸‹æ ‡ 8-10ï¼‰start(): 8 &#x2F;&#x2F; å¼€å§‹ä¸‹æ ‡ 8end(): 11 &#x2F;&#x2F; ç»“æŸä¸‹æ ‡ 11 matches å’Œ lookingAt æ–¹æ³•éƒ½ç”¨æ¥å°è¯•åŒ¹é…ä¸€ä¸ªè¾“å…¥åºåˆ—æ¨¡å¼ã€‚å®ƒä»¬çš„ä¸åŒæ˜¯ matches è¦æ±‚æ•´ä¸ªåºåˆ—éƒ½åŒ¹é…ï¼Œè€Œ lookingAt ä¸è¦æ±‚ã€‚ lookingAt æ–¹æ³•è™½ç„¶ä¸éœ€è¦æ•´å¥éƒ½åŒ¹é…ï¼Œä½†æ˜¯éœ€è¦ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•ç»å¸¸åœ¨è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½¿ç”¨ã€‚ æˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæ¥è§£é‡Šè¿™ä¸ªåŠŸèƒ½ï¼š 1234567891011String regex = &quot;foo&quot;;String input = &quot;fooooooooooooooooo&quot;;String input2 = &quot;ooooofoooooooooooo&quot;;Pattern pattern = Pattern.compile(regex);Matcher matcher = pattern.matcher(input);Matcher matcher2 = pattern.matcher(input2);System.out.println(&quot;lookingAt(): &quot; + matcher.lookingAt());System.out.println(&quot;matches(): &quot; + matcher.matches());System.out.println(&quot;lookingAt(): &quot; + matcher2.lookingAt()); ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š lookingAt(): truematches(): falselookingAt(): false æ›¿æ¢æ–¹æ³•ï¼šæ›¿æ¢æ–¹æ³•æ˜¯æ›¿æ¢è¾“å…¥å­—ç¬¦ä¸²é‡Œæ–‡æœ¬çš„æ–¹æ³•ã€‚ åç§° ç®€ä»‹ public Matcher appendReplacement(StringBuffer sb, String replacement) å®ç°éç»ˆç«¯æ·»åŠ å’Œæ›¿æ¢æ­¥éª¤ã€‚ public StringBuffer appendTail(StringBuffer sb) å®ç°ç»ˆç«¯æ·»åŠ å’Œæ›¿æ¢æ­¥éª¤ã€‚ public String replaceAll(String replacement) æ›¿æ¢æ¨¡å¼ä¸ç»™å®šæ›¿æ¢å­—ç¬¦ä¸²ç›¸åŒ¹é…çš„è¾“å…¥åºåˆ—çš„æ¯ä¸ªå­åºåˆ—ã€‚ public String replaceFirst(String replacement) æ›¿æ¢æ¨¡å¼ä¸ç»™å®šæ›¿æ¢å­—ç¬¦ä¸²åŒ¹é…çš„è¾“å…¥åºåˆ—çš„ç¬¬ä¸€ä¸ªå­åºåˆ—ã€‚ public static String quoteReplacement(String s) è¿”å›æŒ‡å®šå­—ç¬¦ä¸²çš„å­—é¢æ›¿æ¢å­—ç¬¦ä¸²ã€‚ replaceFirst å’Œ replaceAll æ–¹æ³•ç”¨æ¥æ›¿æ¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬ã€‚ä¸åŒçš„æ˜¯ï¼ŒreplaceFirst æ›¿æ¢é¦–æ¬¡åŒ¹é…ï¼ŒreplaceAll æ›¿æ¢æ‰€æœ‰åŒ¹é…ã€‚ ä¸‹é¢çš„ä¾‹å­æ¥è§£é‡Šè¿™ä¸ªåŠŸèƒ½ï¼š 123456789101112131415String regex = &quot;dog&quot;;String input1 = &quot;The dog says meow. All dogs say meow.&quot;;String input2 = &quot;The dog says meow. All dogs say meow.&quot;;String replace = &quot;cat&quot;;Pattern p = Pattern.compile(regex);// get a matcher objectMatcher m1 = p.matcher(input1);Matcher m2 = p.matcher(input2);input1 = m1.replaceAll(replace);input2 = m2.replaceFirst(replace);System.out.println(input1);System.out.println(input2); ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š The cat says meow. All cats say meow.The cat says meow. All dogs say meow. ä»ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒreplaceFirst æ–¹æ³•åªå°†ç¬¬ä¸€ä¸ª dog æ›¿æ¢æˆäº† catã€‚è€Œ replaceAll æ–¹æ³•å´å°†ä¸¤ä¸ª dog éƒ½æ›¿æ¢æˆäº† catã€‚ ä¸‹é¢çœ‹ä¸€äº›æ¡ˆä¾‹ï¼š å›æº¯ 123456789101112131415161718# å®ä¾‹ä¸€# pattern:å‰åæ ‡ç­¾åä¸€è‡´&lt;(\\w+)&gt;(.+)&lt;\\/\\1&gt;# åŒ¹é…ï¼š&lt;font&gt;asdasdas&lt;/font&gt;&lt;head&gt;as&lt;/head&gt;# ä¸åŒ¹é…ï¼š&lt;font&gt;sad&lt;/asd&gt;===============================# å®ä¾‹äºŒ # pattern:(\\w)(\\w)\\1\\2# åŒ¹é…ï¼šabbadffd# ä¸åŒ¹é…asasd=============================== æ­£å‘å…ˆè¡Œæ–­è¨€ã€åå‘å…ˆè¡Œæ–­è¨€ã€æ­£å‘åè¡Œæ–­è¨€ã€åå‘åè¡Œæ–­è¨€ 1234567891011121314151617181920212223242526272829303132# æ‹¬å·å†…çš„ä¸ä¼šè¢«æå–å‡ºæ¥===============================# æ­£å‘å…ˆè¡Œæ–­è¨€ï¼Œä»å·¦å¾€å³çœ‹ï¼Œæœ‰æ‰ç»§ç»­åŒ¹é…åé¢çš„# patternï¼šè‡³å°‘æœ‰ä¸€ä¸ªå¤§å°å’Œä¸€ä¸ªå°å†™å­—æ¯(?=.*?[a-z])(?=.*?[A-Z]).+# åŒ¹é…asdojCsdsvdZjsdzsaJN12# ä¸åŒ¹é…assafasf123r32# å¯†ç å¼ºåº¦éªŒè¯# 1.è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—# 2.è‡³å°‘æœ‰ä¸€ä¸ªå°å†™å­—æ¯# 3.è‡³å°‘æœ‰ä¸€ä¸ªå¤§å†™å­—æ¯# 4.è‡³å°‘æœ‰8ä¸ªå­—ç¬¦# patternï¼š(?=.*?[a-zA-z0-9])\\w&#123;8,&#125;================================# åå‘å…ˆè¡Œæ–­è¨€ï¼Œä»å·¦å¾€å³çœ‹ï¼Œæ²¡æœ‰æ‰ç»§ç»­åŒ¹é…åé¢çš„# patternï¼šåŒ¹é…ä¸æ˜¯qq.comç»“å°¾çš„é‚®ç®±(\\d&#123;6,10&#125;)@(?!qq\\.com)# åŒ¹é…233325425@163.com# ä¸åŒ¹é…233325425@qq.com# patternï¼šåŒ¹é…ä¸æ˜¯&lt;font&gt;&lt;/font&gt;åŒ…è£¹çš„æ ‡ç­¾&lt;(?!font)&gt;(\\w+)&lt;/(\\1)&gt;============================# åè¡Œæ–­è¨€æ˜¯ä»å³å‘å·¦æ¥çœ‹çš„# æ­£å‘åè¡Œæ–­è¨€(?&lt;=)# åå‘åè¡Œæ–­è¨€(?&lt;!) æˆ–è€… 12345678# æå–å›¾ç‰‡æ ¼å¼æ˜¯jpgæˆ–è€…pngçš„å›¾ç‰‡åå­—# pattern.+(png|jpg)# åŒ¹é…asdfsa.jpgasfsabiu.png# ä¸åŒ¹é…asfsas.webp åˆ†ç»„ 12345678910111213141516171819# ä½¿ç”¨åˆ†ç»„åŠŸèƒ½ä½†æ˜¯ä¸æ•è·æ•°æ®# patternï¼šChina:å¼€å¤´çš„æ‰è·å–åŸå¸‚æ•°æ®(?:China:)(.+)# åŒ¹é…China:SuzhouChina:BeiJing# ä¸åŒ¹é…America:Los Angeles==================================# åˆ†ç»„å®ç”¨æŠ€å·§#patternï¼šå¯¹äºä¸åŒæ ¼å¼çš„æ•°æ®è·å–å¹´æœˆæ—¥(\\d&#123;4&#125;)[-\\\\\\.\\/\\s]?(\\d&#123;2&#125;)[-\\\\\\.\\/\\s]?(\\d&#123;2&#125;)# åŒ¹é…201909082019-09-082019 09 082019/09/082019\\09\\082019.09.08","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Redis-å‘å¸ƒè®¢é˜…","slug":"Redis-å‘å¸ƒè®¢é˜…","date":"2022-02-25T03:02:40.000Z","updated":"2022-02-25T03:40:30.989Z","comments":true,"path":"javaEE/Redis/2022/02/25/Redis-å‘å¸ƒè®¢é˜…/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/25/Redis-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/","excerpt":"","text":"Rediså‘å¸ƒè®¢é˜…Rediså‘å¸ƒè®¢é˜…æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡çš„æ¨¡å¼ï¼šå‘å¸ƒè€…å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…æ¥æ”¶æ¶ˆæ¯ ä¸‰ä¸ªè§’è‰²ï¼šæ¶ˆæ¯å‘å¸ƒè€…ã€æ¶ˆæ¯æ¥æ”¶è€…ã€è®¢é˜…çš„é¢‘é“ å‘½ä»¤ ä½œç”¨ publish channel message å‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šé¢‘é“ psubscribe pattern [pattern..] è®¢é˜…ä¸€ä¸ªæˆ–è€…å¤šä¸ªç¬¦åˆç»™ç‚¹patternçš„é¢‘é“ pubsub subcommand [argument [argument..]] æŸ¥çœ‹è®¢é˜…å’Œå‘å¸ƒç³»ç»ŸçŠ¶æ€ punsubscribe [pattern [pattern..]] é€€è®¢æ‰€æœ‰ç¬¦åˆæ¨¡å¼çš„é¢‘é“ subscribe channel [channel..] è®¢é˜…æŒ‡å®šé¢‘é“ unsubscribe channel [channel..] é€€è®¢æŒ‡å®šé¢‘é“ ä¸‹é¢ç›´æ¥ä¸Šæ¡ˆä¾‹ï¼š å……å½“è®¢é˜…è€…çš„cli 12345127.0.0.1:6379&gt; SUBSCRIBE studyReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;study&quot;3) (integer) 1 å……å½“å‘å¸ƒè€…çš„cli 12127.0.0.1:6379&gt; PUBLISH study study(integer) 1 è®¢é˜…è€… 12345678127.0.0.1:6379&gt; SUBSCRIBE studyReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;study&quot;3) (integer) 11) &quot;message&quot;2) &quot;study&quot;3) &quot;designpattern&quot; åŸç†ï¼š Redisè®¢é˜…å‘å¸ƒåº•å±‚æ˜¯ä½¿ç”¨Cå®ç°çš„ Redis é€šè¿‡ PUBLISH ã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚ é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ªé¢‘é“ï¼è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œå°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®š channel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚é€šè¿‡ PUBLISH å‘½ä»¤å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯ï¼Œredis-server ä¼šä½¿ç”¨ç»™å®šçš„é¢‘é“ä½œä¸ºé”®ï¼Œåœ¨å®ƒæ‰€ç»´æŠ¤çš„ channel å­—å…¸ä¸­æŸ¥æ‰¾è®°å½•äº†è®¢é˜…è¿™ä¸ªé¢‘é“çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„é“¾è¡¨ï¼Œéå†è¿™ä¸ªé“¾è¡¨ï¼Œå°†æ¶ˆæ¯å‘å¸ƒç»™æ‰€æœ‰è®¢é˜…è€…ã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼","date":"2022-02-25T01:26:59.000Z","updated":"2022-02-25T02:59:21.994Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/25/è®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"åŸå‹æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼ä¸»è¦ç”¨äºå¯¹è±¡çš„å¤åˆ¶ æ­¤è®¾è®¡æ¨¡å¼æœ‰å¤šç§å®ç°ï¼š jdkå†…ç½®cloneableæ¥å£ è‡ªå®šä¹‰æ¥å£ jdkå†…ç½®cloneableæ¥å£æˆ‘ä»¬éƒ½çŸ¥é“objectä¸­æœ‰ä¸€ä¸ªprotectedæ–¹æ³•ï¼Œå«cloneï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼ˆå³è¯¥æ–¹æ³•æ˜¯ç”±C++ç¼–å†™çš„ï¼Œå…·ä½“å®ç°æ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿè€Œå®šï¼‰ 12@HotSpotIntrinsicCandidateprotected native Object clone() throws CloneNotSupportedException; æˆ‘ä»¬æ¥è‡ªå·±é‡å†™ä¸€ä¸ªè¿™ä¸ªæ–¹æ³•è¯•ä¸€è¯• 1234567891011121314151617181920212223242526272829303132333435363738394041public class Video &#123; private String name; private Date gmtCreated; public Video(String name, Date gmtCreated) &#123; this.name = name; this.gmtCreated = gmtCreated; &#125; public Video() &#123; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Date getGmtCreated() &#123; return gmtCreated; &#125; public void setGmtCreated(Date gmtCreated) &#123; this.gmtCreated = gmtCreated; &#125; @Override protected Video clone() throws CloneNotSupportedException &#123; return (Video)super.clone(); &#125; @Override public String toString() &#123; return &quot;Video&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, gmtCreated=&quot; + gmtCreated + &#x27;&#125;&#x27;; &#125;&#125; ä¸»ç¨‹åº 1234567891011121314public static void main(String[] args) throws CloneNotSupportedException &#123; Video video = new Video(); video.setName(&quot;è§†é¢‘ä¸€å·&quot;); video.setGmtCreated(new Date()); System.out.println(video); System.out.println(video.hashCode()); System.out.println(video.getGmtCreated().hashCode()); System.out.println(&quot;=============å…‹éš†å================&quot;); Video clone = (Video) video.clone(); System.out.println(clone); System.out.println(clone.hashCode()); System.out.println(clone.getGmtCreated().hashCode()); System.out.println();&#125; æ§åˆ¶å°è¾“å‡º 12345678Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:31:04 CST 2022&#125;269468037784235907=============å…‹éš†å================Exception in thread &quot;main&quot; java.lang.CloneNotSupportedException: com.lizhi.demo1.Video at java.base/java.lang.Object.clone(Native Method) at com.lizhi.demo1.Video.clone(Video.java:35) at com.lizhi.demo1.CloneApplication.main(CloneApplication.java:13) å¯ä»¥å‘ç°ï¼ŒæŠ¥é”™äº†ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œæˆ‘ä¸æ˜¯å·²ç»é‡å†™äº†æ–¹æ³•å—ï¼Ÿ å…¶å®åŸå› å°±æ˜¯è¯¥ç±»æ²¡æœ‰ä¸€ä¸ªæ ‡è®°æ¥å£Cloneable 123456789101112131415161718192021222324252627/** * A class implements the &lt;code&gt;Cloneable&lt;/code&gt; interface to * indicate to the &#123;@link java.lang.Object#clone()&#125; method that it * is legal for that method to make a * field-for-field copy of instances of that class. * &lt;p&gt; * Invoking Object&#x27;s clone method on an instance that does not implement the * &lt;code&gt;Cloneable&lt;/code&gt; interface results in the exception * &lt;code&gt;CloneNotSupportedException&lt;/code&gt; being thrown. * &lt;p&gt; * By convention, classes that implement this interface should override * &#123;@code Object.clone&#125; (which is protected) with a public method. * See &#123;@link java.lang.Object#clone()&#125; for details on overriding this * method. * &lt;p&gt; * Note that this interface does &lt;i&gt;not&lt;/i&gt; contain the &#123;@code clone&#125; method. * Therefore, it is not possible to clone an object merely by virtue of the * fact that it implements this interface. Even if the clone method is invoked * reflectively, there is no guarantee that it will succeed. * * @author unascribed * @see java.lang.CloneNotSupportedException * @see java.lang.Object#clone() * @since 1.0 */public interface Cloneable &#123;&#125; å°†videoå®ç°è¯¥æ¥å£åï¼Œå¯åŠ¨ç¨‹åºï¼Œæ§åˆ¶å°è¾“å‡º 1234567Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:37:07 CST 2022&#125;269468037784153335=============å…‹éš†å================Video&#123;name=&#x27;è§†é¢‘ä¸€å·&#x27;, gmtCreated=Fri Feb 25 10:37:07 CST 2022&#125;1681595665784153335 æˆ‘ä»¬å¯ä»¥æƒŠå¥‡çš„å‘ç°ï¼Œ ä¸¤è€…çš„å†…å®¹æ‰“å°å‡ºæ¥ä¸€æ¨¡ä¸€æ ·ï¼Œä¸¤è€…çš„å¯¹è±¡ä¸»ä½“çš„hashcodeæ˜¯ä¸åŒçš„ï¼Œè¯´æ˜videoå’Œcloneæ˜¯è´§çœŸä»·å®çš„ä¸¤ä¸ªå¯¹è±¡ã€‚ ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°ä»–ä»¬çš„gmtCreatedå˜é‡çš„hashcodeæ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜ä¸¤è€…æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªgmtCreatedï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦å°†å¤åˆ¶åçš„å¯¹è±¡å†…éƒ¨æŒ‡å‘çš„å¯¹è±¡è¿˜æ˜¯åŸæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦ä¿®æ”¹cloneæ–¹æ³• 1234567@Overrideprotected Object clone() throws CloneNotSupportedException &#123; Object obj = super.clone(); Video v = (Video) obj; v.setGmtCreated((Date) v.getGmtCreated().clone()); return obj;&#125; è‡ªå®šä¹‰æ¥å£123public interface Copyable &#123; Object copy();&#125; å…·ä½“å®ç°å°±ä¸å†™å•¦ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼","date":"2022-02-25T01:26:35.000Z","updated":"2022-02-25T02:22:49.386Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/25/è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å»ºé€ è€…æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯åœ¨ç”¨æˆ·ä¸çŸ¥é“å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹å’Œç»†èŠ‚çš„æƒ…å†µä¸‹å°±å¯ä»¥ç›´æ¥åˆ›å»ºå¤æ‚çš„å¯¹è±¡ã€‚ è¯¥æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å‘ï¼š æœ‰ä¸€ä¸ªåˆ¶é€ è€…æœ‰è‡ªå·±çš„ä¸€å¥—åˆ¶é€ æ–¹æ¡ˆæ¥åˆ¶é€ è¯¥å¯¹è±¡ è‡ªå·±æŒ‡å®šåˆ¶é€ è®¡åˆ’ åˆ¶é€ è€…åˆ¶é€ åœºæ™¯ï¼šé€ æ±½è½¦ æ±½è½¦ç±» 12345678910111213141516@Data@NoArgsConstructor@ToString@AllArgsConstructorpublic class Car &#123; private CarBody carBody; private Engine engine; private Lamp lamp; private Window window; public boolean isWhole()&#123; if(carBody!=null&amp;&amp;engine!=null&amp;&amp;lamp!=null&amp;&amp;window!=null)&#123; return true; &#125; return false; &#125;&#125; ç»„ä»¶æ¥å£ 12public interface Component &#123;&#125; è½¦èº« 123public interface CarBody extends Component &#123; void printName();&#125; å¼•æ“ 123public interface Engine extends Component &#123; void printName();&#125; è½¦çª— 123public interface Window extends Component &#123; void printName();&#125; å¥½çš„è½¦èº« 123456public class GoodCarBody implements CarBody&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„è½¦èº«&quot;); &#125;&#125; ä¸å¥½çš„è½¦èº« 123456public class BadCarBody implements CarBody&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„è½¦èº«&quot;); &#125;&#125; å¥½çš„å¼•æ“ 123456public class GoodEngine implements Engine&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„å‘åŠ¨æœº&quot;); &#125;&#125; ä¸å¥½çš„å¼•æ“ 123456public class BadEngine implements Engine&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„å‘åŠ¨æœº&quot;); &#125;&#125; å¥½çš„è½¦çª— 123456public class GoodWindow implements Window&#123; @Override public void printName() &#123; System.out.println(&quot;å¥½çš„è½¦çª—&quot;); &#125;&#125; ä¸å¥½çš„è½¦çª— 123456public class BadWindow implements Window&#123; @Override public void printName() &#123; System.out.println(&quot;å·®çš„è½¦çª—&quot;); &#125;&#125; è½¦çš„å»ºé€ è€… 1234567public interface CarBuilder &#123; void addCarBody(CarBody carBody); void addWindow(Window window); void addLamp(Lamp lamp); void addEngine(Engine engine); Car getCar();&#125; å…·ä½“çš„å»ºé€ è€… 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DaZhongCarBulder implements CarBuilder &#123; private Car car; public DaZhongCarBulder()&#123; car = new Car(); &#125; @Override public void addCarBody(CarBody carBody) &#123; if(carBody==null)&#123; car.setCarBody(new GoodCarBody()); return; &#125; car.setCarBody(carBody); &#125; @Override public void addWindow(Window window) &#123; if(window==null)&#123; car.setWindow(new GoodWindow()); return; &#125; car.setWindow(window); &#125; @Override public void addLamp(Lamp lamp) &#123; if(lamp==null)&#123; car.setLamp(new GoodLamp()); return; &#125; car.setLamp(lamp); &#125; @Override public void addEngine(Engine engine) &#123; if(engine==null)&#123; car.setEngine(new GoodEngine()); return; &#125; car.setEngine(engine); &#125; @Override public Car getCar() &#123; if(!car.isWhole())&#123; throw new IllegalArgumentException(&quot;é›¶ä»¶ä¸é½ï¼Œè½¦ä¸èƒ½å‡ºå‚&quot;); &#125; return car; &#125;&#125; æŒ‡å¯¼è€… 123456789public class Director &#123; public static Car getCar(CarBuilder carBuilder)&#123; carBuilder.addWindow(null); carBuilder.addCarBody(null); carBuilder.addLamp(new BadLamp()); carBuilder.addEngine(null); return carBuilder.getCar(); &#125;&#125; è‡ªå®šä¹‰å»ºé€ æˆ‘ä»¬å‘ç°ï¼Œæœ‰è½¦ç”±å››éƒ¨åˆ†ç»„æˆï¼Œè¿™å››éƒ¨åˆ†å¯ä»¥æ˜¯åŒä¸€ä¸ªå·¥å‚é€ å‡ºæ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»“åˆä¸€ä¸ªæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå°†äº§å“åˆ¶é€ äº¤ç»™å·¥å‚ã€‚ ç»„ä»¶å·¥å‚æ¥å£ 123456public interface ComponentFactory &#123; CarBody getCarBody(); Engine getEngine(); Window getWindow(); Lamp getLamp();&#125; ä¸å¥½çš„ç»„ä»¶å·¥å‚ 123456789101112131415161718192021public class BadFactory implements ComponentFactory&#123; @Override public CarBody getCarBody() &#123; return new BadCarBody(); &#125; @Override public Engine getEngine() &#123; return new BadEngine(); &#125; @Override public Window getWindow() &#123; return new BadWindow(); &#125; @Override public Lamp getLamp() &#123; return new BadLamp(); &#125;&#125; å¥½çš„ç»„ä»¶å·¥å‚ 12345678910111213141516171819202122public class GoodFactory implements ComponentFactory&#123; @Override public CarBody getCarBody() &#123; return new GoodCarBody(); &#125; @Override public Engine getEngine() &#123; return new GoodEngine(); &#125; @Override public Window getWindow() &#123; return new GoodWindow(); &#125; @Override public Lamp getLamp() &#123; return new GoodLamp(); &#125;&#125; æ”¹é€ CarBuilder 1234567public interface CarBuilder &#123; CarBuilder addCarBody(CarBody carBody); CarBuilder addWindow(Window window); CarBuilder addLamp(Lamp lamp); CarBuilder addEngine(Engine engine); Car getCar();&#125; å…·ä½“åˆ¶é€ å•† 12345678910111213141516171819202122232425262728293031323334353637public class DaZhongCarBulder implements CarBuilder &#123; private Car car; public DaZhongCarBulder()&#123; car = new Car(); &#125; @Override public CarBuilder addCarBody(CarBody carBody) &#123; car.setCarBody(carBody); return this; &#125; @Override public CarBuilder addWindow(Window window) &#123; car.setWindow(window); return this; &#125; @Override public CarBuilder addLamp(Lamp lamp) &#123; car.setLamp(lamp); return this; &#125; @Override public CarBuilder addEngine(Engine engine) &#123; car.setEngine(engine); return this; &#125; @Override public Car getCar() &#123; if(!car.isWhole())&#123; throw new IllegalArgumentException(&quot;é›¶ä»¶ä¸é½ï¼Œè½¦ä¸èƒ½å‡ºå‚&quot;); &#125; return car; &#125;&#125; å®¢æˆ·ç«¯è‡ªå®šä¹‰åˆ¶é€  123456789101112131415public class Customer &#123; public static void main(String[] args) &#123; DaZhongCarBulder daZhongCarBulder = new DaZhongCarBulder(); ComponentFactory goodFactory = new GoodFactory(); ComponentFactory badFactory = new BadFactory(); // è¿™å°±æ˜¯é“¾å¼ç¼–ç¨‹ Car car = daZhongCarBulder .addCarBody(goodFactory.getCarBody()) .addEngine(badFactory.getEngine()) .addLamp(goodFactory.getLamp()) .addWindow(goodFactory.getWindow()) .getCar(); System.out.println(car); &#125;&#125; åŠ æ·±ç†è§£å†æ¥ä¸ªæ¡ˆä¾‹ï¼škfcç‚¹é¤ é¦–å…ˆé£Ÿç‰©æ¥å£ 12public interface Food &#123;&#125; é¥®æ–™æ¥å£ 123public interface Drink extends Food&#123; void drink();&#125; è–¯æ¡æ¥å£ 123public interface Chip extends Food&#123; void eatChip();&#125; ç‚¸é¸¡æ¥å£ 123public interface Chicken extends Food&#123; void eatChicken();&#125; å¥¥å°”è‰¯ç‚¸é¸¡ 123456public class OrleansFriedChicken implements Chicken&#123; @Override public void eatChicken() &#123; System.out.println(&quot;å¥¥å°”è‰¯ç‚¸é¸¡&quot;); &#125;&#125; å­œç„¶ç‚¸é¸¡ 123456public class CuminFriedChicken implements Chicken&#123; @Override public void eatChicken() &#123; System.out.println(&quot;å­œç„¶ç‚¸é¸¡&quot;); &#125;&#125; å¯ä¹ 123456public class Cola implements Drink&#123; @Override public void drink() &#123; System.out.println(&quot;å¯å£å¯ä¹&quot;); &#125;&#125; å¤§è–¯æ¡ 1234567public class BigChip implements Chip&#123; @Override public void eatChip() &#123; System.out.println(&quot;å¤§ä»½è–¯æ¡&quot;); &#125;&#125; ç™¾äº‹å¯ä¹ 123456public class BaiShi implements Drink &#123; @Override public void drink() &#123; System.out.println(&quot;ç™¾äº‹å¯ä¹&quot;); &#125;&#125; è®¢å• 1234567891011@Data@ToStringpublic class Order &#123; private List&lt;Food&gt; foods; public Order()&#123; foods = new ArrayList&lt;&gt;(); &#125; public void addFood(Food food)&#123; foods.add(food); &#125;&#125; ç‚¹å•å°ç¨‹åº 12345678910111213141516171819public class OrderApplication implements Builder&#123; private Order order; public OrderApplication()&#123; order = new Order(); &#125; @Override public Builder addFood(Food food) &#123; order.addFood(food); return this; &#125; @Override public Order getOrder() &#123; if(order.getFoods().size()==0)&#123; throw new IllegalArgumentException(&quot;æ‚¨æœªç‚¹å•ï¼&quot;); &#125; return order; &#125;&#125; å®¢æˆ·ç«¯ 123456789public static void main(String[] args) &#123; OrderApplication orderApplication = new OrderApplication(); Order order = orderApplication .addFood(new BigChip()) .addFood(new OrleansFriedChicken()) .addFood(new Cola()) .getOrder(); System.out.println(order);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼-æ¦‚è¿°","slug":"è®¾è®¡æ¨¡å¼-æ¦‚è¿°","date":"2022-02-24T14:36:38.000Z","updated":"2022-02-25T01:43:48.960Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/24/è®¾è®¡æ¨¡å¼-æ¦‚è¿°/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A6%82%E8%BF%B0/","excerpt":"","text":"ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼ŸDesign Patternæ˜¯å‰è¾ˆä»¬å¯¹ä»£ç å¼€å‘ç»éªŒçš„æ€»ç»“ä¸å½’çº³ï¼Œæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—è§£å†³æ–¹æ¡ˆã€‚ 1995å¹´ï¼Œç”±GoFï¼ˆGang of Fourï¼‰å››äººå¸®åˆä½œå‡ºç‰ˆäº†ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ä¸€ä¹¦ï¼Œä¸€å…±æ”¶å½•äº†23ç§è®¾è®¡æ¨¡å¼ï¼Œäººç§°Gof23è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ï¼š å•ä¾‹æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ åŸå‹æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ ç»„åˆæ¨¡å¼ é—¨é¢æ¨¡å¼ äº«å…ƒæ¨¡å¼ ä»£ç†æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å‘½ä»¤æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼ çŠ¶æ€æ¨¡å¼ ç­–ç•¥æ¨¡å¼ èŒè´£é“¾æ¨¡å¼ è®¿é—®è€…æ¨¡å¼","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€350-Easyã€‘ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†","slug":"ã€350-Easyã€‘ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†","date":"2022-02-24T13:17:21.000Z","updated":"2022-02-25T15:06:26.487Z","comments":true,"path":"ç®—æ³•/2022/02/24/ã€350-Easyã€‘ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/24/%E3%80%90350-Easy%E3%80%91%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86/","excerpt":"","text":"ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ç»™ä½ ä¸¤ä¸ªæ•´æ•°æ•°ç»„ nums1 å’Œ nums2 ï¼Œè¯·ä½ ä»¥æ•°ç»„å½¢å¼è¿”å›ä¸¤æ•°ç»„çš„äº¤é›†ã€‚è¿”å›ç»“æœä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œåº”ä¸å…ƒç´ åœ¨ä¸¤ä¸ªæ•°ç»„ä¸­éƒ½å‡ºç°çš„æ¬¡æ•°ä¸€è‡´ï¼ˆå¦‚æœå‡ºç°æ¬¡æ•°ä¸ä¸€è‡´ï¼Œåˆ™è€ƒè™‘å–è¾ƒå°å€¼ï¼‰ã€‚å¯ä»¥ä¸è€ƒè™‘è¾“å‡ºç»“æœçš„é¡ºåºã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šnums1 = [1,2,2,1], nums2 = [2,2]è¾“å‡ºï¼š[2,2] ç¤ºä¾‹ 2: 12è¾“å…¥ï¼šnums1 = [4,9,5], nums2 = [9,4,9,8,4]è¾“å‡ºï¼š[4,9] æç¤ºï¼š 1 &lt;= nums1.length, nums2.length &lt;= 1000 0 &lt;= nums1[i], nums2[i] &lt;= 1000 Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ åŒæŒ‡é’ˆ äºŒåˆ†æŸ¥æ‰¾ æ’åº ***è¿›é˜¶*ï¼š å¦‚æœç»™å®šçš„æ•°ç»„å·²ç»æ’å¥½åºå‘¢ï¼Ÿä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ å¦‚æœ nums1 çš„å¤§å°æ¯” nums2 å°ï¼Œå“ªç§æ–¹æ³•æ›´ä¼˜ï¼Ÿ æ³•ä¸€ï¼šæš´åŠ›å…ˆå°†å…¶ä¸­ä¸€ä¸ªæ•°ç»„æ”¾åˆ°mapä¸­keyå­˜å‚¨å€¼ï¼Œvalueå…ˆå­˜ä¸º0ã€‚éå†å¦ä¸€ä¸ªæ•°ç»„ï¼Œä»mapä¸­æ‹¿å€¼ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¯´æ˜è¿™æ˜¯ç›¸äº¤çš„å…ƒç´ ï¼Œå°†valueè‡ªå¢1ï¼Œç„¶åéå†mapï¼Œå¦‚æœvalueä¸º1ï¼Œè¯´æ˜è¯¥å…ƒç´ åœ¨ä¸¤æ•°ç»„ä¸­éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”åªå­˜åœ¨ä¸€æ¬¡ï¼Œç›´æ¥å°†å…¶æ”¾å…¥listä¸­ã€‚å¦‚æœå¤§äºç­‰äº2ï¼Œåˆ™è¯´æ˜ç¬¬ä¸¤ä¸ªæ•°ç»„ä¸­ç›¸åŒçš„è¯¥å…ƒç´ å¤§äºäº†2ä¸èƒ½ç¡®å®šæœ€å°å‡ºç°çš„æ¬¡æ•°ï¼Œæ‰€ä»¥åªèƒ½åˆ†åˆ«éå†ä¸¤ä¸ªæ•°ç»„æ‰¾æœ€å°å‡ºç°æ¬¡æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738class Solution &#123; public int[] intersect(int[] nums1, int[] nums2) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int num : nums1) &#123; map.put(num, 0); &#125; for (int v : nums2) &#123; if(map.get(v)!=null)&#123; map.put(v,map.get(v)+1); &#125; &#125; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (Integer v : map.keySet()) &#123; if(map.get(v)==1)&#123; list.add(v); continue; &#125; for (int i = 0; i &lt; Math.min(showTimes(nums1,v),showTimes(nums2,v)); i++) &#123; list.add(v); &#125; &#125; int[] result = new int[list.size()]; for (int i = 0; i &lt; result.length; i++) &#123; result[i]= list.get(i); &#125; return result; &#125; public int showTimes(int[] nums,int value)&#123; int time=0; for (int num : nums) &#123; if(num==value)&#123; time++; &#125; &#125; return time; &#125;&#125; ä¼˜åŒ–ï¼š ä¸€å¼€å§‹çš„mapå°±ç”¨æ¥å­˜å‚¨æœ€å°çš„é‚£ä¸€ä¸ªæ•°ç»„çš„kï¼ˆæ•°ç»„å…ƒç´ ï¼‰-vï¼ˆå‡ºç°æ¬¡æ•°ï¼‰ éå†å¦ä¸€ä¸ªæ•°ç»„ï¼Œä»mapä¸­å–å€¼ï¼Œå¦‚æœè¯¥å€¼ä¸ä¸ºç©ºä¸”å¤§äº0åˆ™å°†å…¶æ”¾å…¥listï¼Œå¹¶è‡ªå‡1 1234567891011121314151617181920212223242526272829class Solution &#123; public int[] intersect(int[] nums1, int[] nums2) &#123; //keyå­˜å‚¨å€¼ï¼Œvalueå­˜å‡ºç°æ¬¡æ•° if(nums1.length&gt; nums2.length)&#123; int[] temp = nums1; nums1=nums2; nums2=temp; &#125; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int num : nums1) &#123; map.merge(num, 1, Integer::sum); &#125; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); Integer temp; for (int t : nums2) &#123; temp = map.get(t); if(temp!=null&amp;&amp;temp&gt;0)&#123; list.add(t); map.put(t,temp-1); &#125; &#125; int[] result = new int[list.size()]; for (int i = 0; i &lt; result.length; i++) &#123; result[i]= list.get(i); &#125; return result; &#125;&#125; åŒä¸€æ€è·¯çš„å®˜æ–¹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445class Solution &#123; public int[] intersect(int[] nums1, int[] nums2) &#123; if (nums1.length &gt; nums2.length) &#123; // ä¿è¯æˆ‘æ˜¯ç»™æœ€çŸ­çš„æ•°ç»„è¿›è¡Œå“ˆå¸Œæ˜ å°„ return intersect(nums2, nums1); &#125; Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(); // å°†numsæ•°ç»„æ”¾å…¥mapä¸­keyä¸ºå…ƒç´ ï¼Œvalueä¸ºå‡ºç°æ¬¡æ•° for (int num : nums1) &#123; int count = map.getOrDefault(num, 0) + 1; map.put(num, count); &#125; // newä¸€ä¸ªæœ€å¤§çš„æ•°ç»„ç”¨æ¥å­˜æ”¾å€¼ int[] intersection = new int[nums1.length]; // å……å½“ç´¢å¼•ï¼Œä¹Ÿæ˜¯æœ€åè¯¥è¿”å›çš„æ•°ç»„é•¿åº¦ int index = 0; // éå†nums2 for (int num : nums2) &#123; // åœ¨mapä¸­æ‹¿å€¼ int count = map.getOrDefault(num, 0); // å¦‚æœå¤§äº0ï¼Œè¯´æ˜è¯¥å…ƒç´ æ˜¯é‡åˆçš„ // ä¸ªäººè§‰å¾—è¿™é‡Œçš„ç§»é™¤å…ƒç´ æ²¡æœ‰å¿…è¦ // è¿™ä¸€æ®µå¯ä»¥æ”¹ä¸º /** if(count&gt;0)&#123; intersection[index++] = num; map.put(num,--count); &#125; **/ if (count &gt; 0) &#123; // å°†è¯¥å…ƒç´ æ”¾å…¥intersectionä¸­ intersection[index++] = num; // å‡ºç°æ¬¡æ•°å‡ä¸€ count--; // å¦‚æœå‡ºç°æ¬¡æ•°è¿˜æ˜¯å¤§äº0çš„ï¼Œåˆ™æ›´æ–°ï¼Œå¦‚æœå·²ç»ç­‰äº0äº†ï¼Œåˆ™ç§»é™¤è¯¥å…ƒç´  if (count &gt; 0) &#123; map.put(num, count); &#125; else &#123; map.remove(num); &#125; &#125; &#125; return Arrays.copyOfRange(intersection, 0, index); &#125;&#125; è¿›é˜¶ï¼šå¦‚æœæ˜¯å·²ç»æ’åºå¥½çš„ã€‚ iä½œä¸ºçŸ­æ•°ç»„nums1çš„ç´¢å¼•ï¼Œjä½œä¸ºé•¿æ•°ç»„nums2çš„ç´¢å¼• æŒ‘é€‰ä¸€ä¸ªé•¿åº¦å°çš„éå†ï¼Œé‡åˆ°ä¸€æ ·çš„åˆ™æ”¾å…¥listï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œåˆ™æ¯”å¤§å°ï¼Œå¦‚æœnums[j]æ¯”nums[i]å¤§ï¼Œåˆ™iå¾€åèµ°ï¼Œç„¶åˆ™jå¾€åèµ° 123456789101112131415161718192021222324252627public int[] intersect2(int[] nums1, int[] nums2) &#123; if(nums1.length&gt; nums2.length)&#123; int[] temp = nums1; nums1=nums2; nums2=temp; &#125; Arrays.sort(nums1); Arrays.sort(nums2); int j=0; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; nums1.length; ) &#123; if(nums1[i]==nums2[j])&#123; list.add(nums1[i]); i++; j++; &#125;else if(nums1[i]&gt;nums2[j])&#123; j++; &#125;else &#123; i++; &#125; &#125; int[] result = new int[list.size()]; for (int i = 0; i &lt; result.length; i++) &#123; result[i]= list.get(i); &#125; return result;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€å‰‘æŒ‡Offer21-Easyã€‘å¥‡å‰å¶å","slug":"ã€å‰‘æŒ‡Offer21-Easyã€‘å¥‡å‰å¶å","date":"2022-02-24T12:05:31.000Z","updated":"2022-02-25T15:08:30.008Z","comments":true,"path":"ç®—æ³•/2022/02/24/ã€å‰‘æŒ‡Offer21-Easyã€‘å¥‡å‰å¶å/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/24/%E3%80%90%E5%89%91%E6%8C%87Offer21-Easy%E3%80%91%E5%A5%87%E5%89%8D%E5%81%B6%E5%90%8E/","excerpt":"","text":"å¥‡å‰å¶åè¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰å¥‡æ•°åœ¨æ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°åœ¨æ•°ç»„çš„ååŠéƒ¨åˆ†ã€‚ ç¤ºä¾‹ï¼š 123è¾“å…¥ï¼šnums = [1,2,3,4]è¾“å‡ºï¼š[1,3,2,4] æ³¨ï¼š[3,1,2,4] ä¹Ÿæ˜¯æ­£ç¡®çš„ç­”æ¡ˆä¹‹ä¸€ã€‚ æç¤ºï¼š 0 &lt;= nums.length &lt;= 50000 0 &lt;= nums[i] &lt;= 10000 Related Topics æ•°ç»„ åŒæŒ‡é’ˆ æ’åº æ³•ä¸€ï¼šåˆ†æï¼šå…ˆnewä¸€ä¸ªç›¸åŒé•¿åº¦çš„æ•°ç»„resultï¼Œæ¥ç€ç”¨odd&#x3D;0æ ‡è®°ä»å¤´å¼€å§‹ï¼Œç”¨even&#x3D;nums.length-1æ ‡è®°ä»å°¾å¼€å§‹ï¼Œç„¶åéå†numsï¼Œå°†æ•°å­—æ”¾å…¥resultä¸­ 12345678910111213141516class Solution &#123; public int[] exchange(int[] nums) &#123; int len = nums.length; int[] result = new int[len]; int odd=0; int even= len -1; for (int i = 0; i &lt; len; i++) &#123; if(nums[i]%2==0)&#123; result[even--]=nums[i]; &#125;else &#123; result[odd++]=nums[i]; &#125; &#125; return result; &#125;&#125; è¿›é˜¶åœ¨åŸæœ‰é¢˜ç›®åŸºç¡€ä¸ŠåŠ ä¸€ä¸ªæ¡ä»¶ï¼šå¥‡æ•°å’Œå¶æ•°éƒ¨åˆ†å¿…é¡»æ˜¯æ’å¥½åºçš„ã€‚ å…¶å®åªè¦æˆ‘ä»¬åœ¨æ¯æ¬¡æ’å…¥æ•°æ®ä¹‹åï¼Œå¾ªç¯åˆ¤æ–­æ˜¯å¦éœ€è¦äº¤æ¢ 1234567891011121314151617181920212223242526272829public int[] sortExchange(int[] nums) &#123; int len = nums.length; int[] result = new int[len]; int odd=0; int even= len -1; for (int i = 0; i &lt; len; i++) &#123; if(nums[i]%2==0)&#123; result[even--]=nums[i]; for (int j = even+1; j &lt; len-1; j++) &#123; if(result[j]&gt;result[j+1])&#123; swap(result,j,j+1); &#125; &#125; &#125;else &#123; result[odd++]=nums[i]; for (int j = odd - 1; j &gt; 0 ; j--) &#123; if(result[j]&lt;result[j-1])&#123; swap(result,j,j-1); &#125; &#125; &#125; &#125; return result;&#125;public void swap(int[] arr,int i,int j)&#123; int temp=arr[j]; arr[j]=arr[i]; arr[i]=temp;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°","slug":"ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°","date":"2022-02-24T11:07:44.000Z","updated":"2022-02-25T15:06:01.419Z","comments":true,"path":"ç®—æ³•/2022/02/24/ã€4-Hardã€‘å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/24/%E3%80%904-Hard%E3%80%91%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/","excerpt":"","text":"å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(log (m+n)) ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]è¾“å‡ºï¼š2.00000è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2 ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]è¾“å‡ºï¼š2.50000è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5 æç¤ºï¼š nums1.length == m nums2.length == n 0 &lt;= m &lt;= 1000 0 &lt;= n &lt;= 1000 1 &lt;= m + n &lt;= 2000 -106 &lt;= nums1[i], nums2[i] &lt;= 106 Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²» æ³•ä¸€ï¼šåˆå¹¶å–ä¸­é—´å€¼æˆ‘ä½¿ç”¨ä¸€ä¸ªlisté›†åˆå­˜æ”¾ä¸¤ä¸ªæ•°ç»„çš„å€¼åæ’åºï¼Œåˆ¤æ–­é›†åˆé•¿åº¦æ˜¯å¦ä¸ºå¶æ•°ï¼Œè¿”å›å¯¹åº”çš„ç»“æœ 123456789101112131415161718class Solution &#123; public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int k : nums1) &#123; list.add(k); &#125; for (int j : nums2) &#123; list.add(j); &#125; Collections.sort(list); int size = list.size(); if(size%2==0)&#123; return (list.get(size/2)+list.get(size/2-1))/2.0; &#125;else &#123; return list.get(size/2); &#125; &#125;&#125; æ˜¾ç„¶ï¼Œè¿™è‚¯å®šä¸æ˜¯é¢˜ç›®çœŸæ­£æƒ³è®©æˆ‘ä»¬å†™çš„ï¼Œä¸ç„¶å¯å°±æ„§å¯¹è¿™hardçº§çš„éš¾åº¦äº† æ›´é«˜é˜¶çš„è§£ç­”è¯·å»åŠ›æ‰£å®˜ç½‘æŸ¥çœ‹","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™","slug":"è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™","date":"2022-02-24T10:18:58.000Z","updated":"2022-02-28T07:37:10.536Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/24/è®¾è®¡æ¨¡å¼-OOPä¸ƒå¤§åŸåˆ™/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-OOP%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/","excerpt":"","text":"OOPä¸ƒå¤§åŸåˆ™å¼€é—­åŸåˆ™(Open-Closed Principle ï¼ŒOCP)å®šä¹‰ï¼šå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ é—®é¢˜çš„ç”±æ¥ï¼šåœ¨è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå› ä¸ºå˜åŒ–ã€å‡çº§å’Œç»´æŠ¤ç­‰åŸå› éœ€è¦å¯¹è½¯ä»¶åŸæœ‰ä»£ç è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¯èƒ½ä¼šç»™æ—§çš„ä»£ç å¼•å…¥é”™è¯¯ã€‚ è§£å†³åŠæ³•ï¼šå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚ ä¸ºä»€ä¹ˆè¦éµå¾ªå¼€é—­åŸåˆ™ 1ã€åªè¦æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­éƒ½ä¼šå¼ºè°ƒå¼€é—­åŸåˆ™ 2ã€æ˜¯æœ€åŸºç¡€çš„è®¾è®¡åŸåˆ™ï¼Œå…¶ä»–äº”ä¸ªè®¾è®¡åŸåˆ™éƒ½æ˜¯å¼€é—­åŸåˆ™çš„å…·ä½“å½¢æ€ 3ã€å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ 4ã€å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle,SRPï¼‰å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªç±»å…·æœ‰å¤šä¸ªèŒè´£ï¼Œåº”å½“å°†å¯¹è±¡è§£è€¦ï¼Œæé«˜å†…èšï¼Œåˆ†åˆ«åˆ›å»ºä¸€äº›ç±»å»ä¸€ ä¸€å®Œæˆè¿™äº›èŒè´£ï¼Œ æ ¸å¿ƒï¼šé«˜å†…èšã€ä½è€¦åˆã€‚ ä¼˜ç‚¹ï¼š 1ã€é™ä½ç±»çš„åŠŸèƒ½å¤æ‚åº¦ 2ã€æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ 3ã€å˜æ›´é£é™©ä½ é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle ï¼ŒLSPï¼‰å®šä¹‰ï¼š å­ç±»å¯¹è±¡èƒ½å¤Ÿæ›¿ä»£ç¨‹åºä¸­çˆ¶ç±»å¯¹è±¡å‡ºç°çš„ä»»ä½•åœ°æ–¹ï¼Œå¹¶ä¸”ä¿è¯åŸæ¥çš„ç¨‹åºçš„é€»è¾‘è¡Œä¸ºä¸å˜åŠæ­£ç¡®æ€§ä¸è¢«ç ´å é‡Œæ°æ›¿æ¢è‡³å°‘åŒ…å«ä¸€ä¸‹ä¸¤ä¸ªå«ä¹‰ï¼š 1ã€å¦‚æœç»§æ‰¿æ˜¯ä¸ºäº†å®ç°ä»£ç é‡ç”¨ï¼Œé‚£ä¹ˆå…±äº«çš„çˆ¶ç±»æ–¹æ³•å°±åº”è¯¥ä¿æŒä¸å˜ï¼Œä¸èƒ½è¢«å­ç±»é‡æ–°å®šä¹‰ã€‚å­ç±»åªèƒ½é€šè¿‡æ–°æ·»åŠ æ–¹æ³•æ¥æ‰©å±•åŠŸèƒ½ï¼Œçˆ¶ç±»å’Œå­ç±»éƒ½å¯ä»¥å®ä¾‹åŒ–ï¼Œè€Œå­ç±»ç»§æ‰¿çš„æ–¹æ³•å’Œçˆ¶ç±»æ˜¯ä¸€æ ·çš„ï¼Œçˆ¶ç±»è°ƒç”¨æ–¹æ³•çš„åœ°æ–¹ï¼Œå­ç±»ä¹Ÿå¯ä»¥è°ƒç”¨åŒä¸€ä¸ªç»§æ‰¿å¾—æ¥çš„ä¸€è‡´çš„æ–¹æ³•ï¼Œè¿™æ—¶ç”¨å­ç±»å¯¹è±¡å°†çˆ¶ç±»å¯¹è±¡æ›¿æ¢æ‰æ—¶ï¼Œå½“ç„¶é€»è¾‘ä¸€è‡´ï¼Œç›¸å®‰æ— äº‹ã€‚ â€‹ 2ã€å¦‚æœç»§æ‰¿çš„ç›®çš„æ˜¯ä¸ºäº†å¤šæ€ï¼Œè€Œå¤šæ€çš„å‰æå°±æ˜¯å­ç±»è¦†ç›–å¹¶é‡æ–°å®šä¹‰çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥å°†çˆ¶ç±»å®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œå¹¶å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œè®©å­ç±»é‡æ–°å®šä¹‰è¿™äº›æ–¹æ³•ï¼Œå½“çˆ¶ç±»æ˜¯æŠ½è±¡ç±»æ—¶ï¼Œçˆ¶ç±»å°±æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å­ç±»æ›¿æ¢çˆ¶ç±»å®ä¾‹çš„ç°è±¡ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥å¤§å¤§å‡å°‘ç¨‹åºçš„bugä»¥åŠå¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚ ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversion Principle ï¼ŒDIPï¼‰å®šä¹‰ï¼šé¢å‘æ¥å£ç¼–ç¨‹ æœ¬è´¨å°±æ˜¯é€šè¿‡æŠ½è±¡(æ¥å£æˆ–æŠ½è±¡ç±»)ä½¿å„ä¸ªç±»æˆ–æ¨¡å—çš„å®ç°å½¼æ­¤ç‹¬ç«‹ï¼Œä¸äº’ç›¸å½±å“ï¼Œå®ç°æ¨¡å—é—´çš„æ¾è€¦åˆã€‚ æ¥å£éš”ç¦»åŸåˆ™(Interface Segregation Principle, ISP)å®šä¹‰ï¼šè¦ç”¨å„ä¸ªç±»å»ºç«‹ä»–ä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£ å®ƒåŒ…å«äº†2å±‚æ„æ€ï¼š æ¥å£çš„è®¾è®¡åŸåˆ™ï¼šæ¥å£çš„è®¾è®¡åº”è¯¥éµå¾ªæœ€å°æ¥å£åŸåˆ™ï¼Œä¸è¦æŠŠç”¨æˆ·ä½¿ç”¨ä¸åˆ°çš„æ–¹æ³•å¡è¿›åŒä¸€ä¸ªæ¥å£é‡Œã€‚å¦‚æœä¸€ä¸ªæ¥å£çš„æœ‰æ–¹æ³•æ²¡æœ‰è¢«ç”¨æˆ·ä½¿ç”¨åˆ°ï¼Œåˆ™è¯´æ˜è¯¥æ¥å£å·²ç»è‡ƒè‚¿äº†ï¼Œåº”è¯¥å°†å…¶åˆ†å‰²æˆå‡ ä¸ªåŠŸèƒ½ä¸“ä¸€çš„æ¥å£ã€‚ æ¥å£çš„ä¾èµ–ï¼ˆç»§æ‰¿ï¼‰åŸåˆ™ï¼šå¦‚æœä¸€ä¸ªæ¥å£aç»§æ‰¿å¦ä¸€ä¸ªæ¥å£bï¼Œåˆ™æ¥å£aç›¸å½“äºç»§æ‰¿äº†æ¥å£bçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæ¥å£aä¹Ÿåº”è¯¥éµå¾ªä¸Šè¿°åŸåˆ™ï¼šä¸åº”è¯¥åŒ…å«ç”¨æˆ·ä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚ åä¹‹ï¼Œåˆ™è¯´æ˜æ¥å£aè¢«bç»™æ±¡æŸ“äº†ï¼Œåº”è¯¥é‡æ–°è®¾è®¡å®ƒä»¬çš„å…³ç³»ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeter ï¼ŒLODï¼‰å®šä¹‰ï¼šåªä¸ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸ä¸é™Œç”Ÿäººé€šä¿¡ ç›´æ¥æœ‹å‹çš„å®šä¹‰ï¼š 1ï¼‰å½“å‰å¯¹è±¡æœ¬èº«ï¼ˆthisï¼‰ 2ï¼‰ä»¥å‚é‡å½¢å¼ä¼ å…¥åˆ°å½“å‰å¯¹è±¡æ–¹æ³•ä¸­çš„å¯¹è±¡ 3ï¼‰å½“å‰å¯¹è±¡çš„å®ä¾‹å˜é‡ 4ï¼‰å½“å‰å¯¹è±¡çš„å®ä¾‹å˜é‡å¦‚æœæ˜¯ä¸€ä¸ªèšé›†ï¼Œé‚£ä¹ˆèšé›†ä¸­çš„å…ƒç´ ä¹Ÿéƒ½æ˜¯æœ‹å‹ 5ï¼‰å½“å‰å¯¹è±¡æ‰€åˆ›å»ºçš„å¯¹è±¡ åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite&#x2F;Aggregate Reuse Principle ï¼ŒCARPï¼‰å®šä¹‰ï¼šå°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…å†…èšç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿æ¥å®ç°ï¼Œå› ä¸ºjavaæ˜¯å•ç»§æ‰¿","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Redis-é…ç½®æ–‡ä»¶","slug":"Redis-é…ç½®æ–‡ä»¶","date":"2022-02-24T07:13:55.000Z","updated":"2022-06-18T13:25:25.393Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-é…ç½®æ–‡ä»¶/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/","excerpt":"","text":"é…ç½®æ–‡ä»¶redis.confåŸºç¡€é…ç½®ä¸‹é¢ä¸ºå¸¸ç”¨çš„é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127# Redis configuration file example.## Note that in order to read the configuration file, Redis must be# started with the file path as first argument:## ./redis-server /path/to/redis.conf# è¯´æ˜å•ä½å’Œä¸åŒºåˆ†å¤§å°å†™# Note on units: when memory size is needed, it is possible to specify# it in the usual form of 1k 5GB 4M and so forth:## 1k =&gt; 1000 bytes# 1kb =&gt; 1024 bytes# 1m =&gt; 1000000 bytes# 1mb =&gt; 1024*1024 bytes# 1g =&gt; 1000000000 bytes# 1gb =&gt; 1024*1024*1024 bytes## units are case insensitive so 1GB 1Gb 1gB are all the same.################################## INCLUDES #################################### å¯ä»¥é…ç½®å¤šä¸ªconfæ–‡ä»¶ç»„åˆèµ·æ¥# Include one or more other config files here. This is useful if you# have a standard template that goes to all Redis servers but also need# to customize a few per-server settings. Include files can include# other files, so use this wisely.## Note that option &quot;include&quot; won&#x27;t be rewritten by command &quot;CONFIG REWRITE&quot;# from admin or Redis Sentinel. Since Redis always uses the last processed# line as value of a configuration directive, you&#x27;d better put includes# at the beginning of this file to avoid overwriting config change at runtime.## If instead you are interested in using includes to override configuration# options, it is better to use include as the last line.## include /path/to/local.conf# include /path/to/other.conf################################## NETWORK ###################################### ç½‘ç»œæ¨¡å—bind 127.0.0.1# å¼€å¯ä¿æŠ¤æ¨¡å¼protected-mode yes# è¿æ¥çš„æœåŠ¡å™¨ç«¯å£port 6379tcp-backlog 511# è¶…æ—¶æ—¶é—´timeout 0tcp-keepalive 300################################# GENERAL ###################################### When Redis is supervised by upstart or systemd, this parameter has no impact.# é»˜è®¤ä¸º daemonize no# éœ€è¦æ‰‹åŠ¨æ”¹ä¸ºyesï¼Œæˆ‘ä»¬éœ€è¦åå°å¯åŠ¨daemonize yes# å¦‚æœä»¥åå°æ–¹å¼è¿è¡Œï¼Œå°±éœ€è¦æŒ‡å®šä¸€ä¸ªpidæ–‡ä»¶pidfile /var/run/redis_6379.pid# Specify the server verbosity level.# This can be one of:# debug (a lot of information, useful for development/testing)# verbose (many rarely useful info, but not a mess like the debug level)# notice (moderately verbose, what you want in production probably)ç”Ÿäº§ç¯å¢ƒ# warning (only very important / critical messages are logged)# æ—¥å¿—çº§åˆ«loglevel notice# ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ålogfile &quot;&quot;# é»˜è®¤æœ‰16ä¸ªæ•°æ®åº“databases 16# æ˜¯å¦æ˜¾ç¤ºlogoalways-show-logo yesset-proc-title yesproc-title-template &quot;&#123;title&#125; &#123;listen-addr&#125; &#123;server-mode&#125;&quot;################################## SECURITY #################################### å¯ä»¥è®¾ç½®Redisçš„å¯†ç # auth# config set requirepass root# è®¾ç½®å¯†ç ä½¿ç”¨å‘½ä»¤requirepass root################################### CLIENTS ##################################### å®¢æˆ·ç«¯çš„ä¸€äº›é™# æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°maxclients 10000############################## MEMORY MANAGEMENT ################################# å†…å­˜è®¾ç½®# è®¾ç½®æœ€å¤§å†…å­˜# maxmemory &lt;bytes&gt;# The default is:# å†…å­˜æ»¡äº†ï¼Œæœ‰ä»€ä¹ˆç­–ç•¥ï¼Œå’ŒJUCä¸­çš„é‚£å››ç§æ‹’ç»ç­–ç•¥æœ‰ç‚¹ç±»ä¼¼# 1.volatile-lru:åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyè¿›è¡Œlru# 2.allkeys-lru:åˆ é™¤lruç®—æ³•çš„key# 3.volatile-random:éšæœºåˆ é™¤å³å°†è¿‡æœŸçš„# 4.allkeys-random:éšæœºåˆ é™¤# 5.volatile-ttl:åˆ é™¤å³å°†è¿‡æœŸçš„# 6.noeviction:è¿”å›é”™è¯¯maxmemory-policy noeviction############################# LAZY FREEING ####################################lazyfree-lazy-eviction nolazyfree-lazy-expire nolazyfree-lazy-server-del noreplica-lazy-flush nolazyfree-lazy-user-del nolazyfree-lazy-user-flush no é…ç½®RDBï¼ˆRedis DataBaseï¼‰æŒä¹…åŒ–Redisæ˜¯å†…å­˜æ€§æ•°æ®åº“ï¼Œå¦‚æœä¸è®²å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æœåŠ¡å™¨çŠ¶æ€ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œæ‰€ä»¥éœ€è¦å­¦ä¼šRedisä¸­çš„æŒä¹…åŒ–æ“ä½œ åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯Snapshotå¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»å–åˆ°å†…å­˜é‡Œã€‚ Redisä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½•IOæ“ä½œçš„ã€‚è¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£RDBæ–¹å¼è¦æ¯”AOFæ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚ RDBçš„ä¼˜ç‚¹æ˜¯æ•ˆç‡é«˜ï¼Œå¯¹äºæ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜ RDBçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚ rdbæ–‡ä»¶é»˜è®¤ä¿å­˜ä¸ºdump.rdb 1234567891011121314151617181920212223242526272829################################ SNAPSHOTTING ################################# å¿«ç…§ï¼šåšæŒä¹…åŒ–çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚# åœ¨è§„å®šçš„æ—¶é—´å†…æ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œå°±ä¼šç”Ÿæˆä¸€ä¸ª.rdbæ–‡ä»¶æˆ–è€….aofæ–‡ä»¶# Redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰æŒä¹…åŒ–ï¼Œç”¨å®Œæ•°æ®å°±æ²¡äº†# æŒä¹…åŒ–è§„åˆ™# 3600så†…è‡³å°‘æœ‰ä¸€ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 3600 1# 300så†…è‡³å°‘æœ‰100ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 300 100# 60så†…è‡³å°‘æœ‰10000ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ save 60 10000# æŒä¹…åŒ–å‡ºé”™åï¼Œæ˜¯å¦è¿˜ç»§ç»­å·¥ä½œstop-writes-on-bgsave-error yes# æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶ï¼Œæ¶ˆè€—CPUèµ„æºrdbcompression yes# æ˜¯å¦æ ¡éªŒrdbæ–‡ä»¶çš„æ•°ç›®rdbchecksum yes# æŒä¹…åŒ–ç”Ÿæˆçš„æ–‡ä»¶åå­—dbfilename dump.rdbrdb-del-sync-files no# ä¿å­˜çš„ç›®å½•ï¼Œå½“å‰ç›®å½•dir ./ é…ç½®AOFï¼ˆAppend Only Fileï¼‰æ–‡ä»¶ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredisé‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œ 123456789101112131415161718192021############################## APPEND ONLY MODE ################################ æŒä¹…åŒ–æ–‡ä»¶aofçš„é…ç½®# é»˜è®¤å…³é—­aofï¼Œé»˜è®¤å¼€å¯rdbçš„æŒä¹…åŒ–ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œrdbå®Œå…¨å¤Ÿç”¨appendonly no# æŒä¹…åŒ–æ–‡ä»¶çš„åå­—appendfilename &quot;appendonly.aof&quot;# appendfsync always # æ¯æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ä¸€ä¸‹appendfsync everysec # æ¯1séƒ½åŒæ­¥ä¸€ä¸‹# appendfsync no # ä¸åŒæ­¥ï¼Œæ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥# æ˜¯å¦é‡å†™# incrby view 10# incrby view 20# é‡å†™å# incrby 30no-appendfsync-on-rewrite noauto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb å¦‚æœaofä¸­è¢«æ¶æ„ç¯¡æ”¹äº†ï¼Œè¿™æ—¶å€™redisæ˜¯å¯åŠ¨ä¸èµ·æ¥çš„ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨redisæä¾›çš„ä¸€ä¸ªå·¥å…·redis-check-aof.exe ä¼˜ç‚¹ï¼šæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´å¥½ï¼Œ ç¼ºç‚¹ï¼šè¯¥æ–‡ä»¶è¿œè¿œå¤§äºrdbï¼Œä¿®å¤é€Ÿåº¦è¿œè¿œæ…¢äºrdbï¼Œè¿è¡Œæ•ˆç‡æ¯”rdbä½ å°ç»“ï¼š RDB æŒä¹…åŒ–æ–¹å¼èƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨ AOF æŒä¹…åŒ–æ–¹å¼è®°å½•æ¯æ¬¡å¯¹æœåŠ¡å™¨å†™çš„æ“ä½œï¼Œå½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼ŒAOFå‘½ä»¤ä»¥Redis åè‡ªåŠ ä¿å­˜æ¯æ¬¡å†™çš„æ“ä½œåˆ°æ–‡ä»¶æœªå°¾ï¼ŒRedisè¿˜èƒ½å¯¹AOFæ–‡ä»¶è¿›è¡Œåå°é‡å†™ï¼Œä½¿å¾—AOFæ–‡ä»¶çš„ä½“ç§¯ä¸è‡³äºè¿‡å¤§ã€‚ åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ– åŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“redisé‡å¯çš„æ—¶å€™ä¼šä¼˜å…ˆè½½å…¥AOFæ–‡ä»¶æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼Œå› ä¸ºåœ¨é€šå¸¸æƒ…å†µä¸‹AOFæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦æ¯”RDB æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦å®Œæ•´ã€‚ RDB çš„æ•°æ®ä¸å®æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä¸¤è€…æ—¶æœåŠ¡å™¨é‡å¯ä¹Ÿåªä¼šæ‰¾AOFæ–‡ä»¶ï¼Œé‚£è¦ä¸è¦åªä½¿ç”¨AOFå‘¢ï¼Ÿä½œè€…å»ºè®®ä¸è¦ï¼Œå› ä¸ºRDBæ›´é€‚åˆ ç”¨äºå¤‡ä»½æ•°æ®åº“ï¼ˆAOFåœ¨ä¸æ–­å˜åŒ–ä¸å¥½å¤‡ä»½ï¼‰ï¼Œå¿«é€Ÿé‡å¯ï¼Œè€Œä¸”ä¸ä¼šæœ‰AOFå¯èƒ½æ½œåœ¨çš„Bugï¼Œç•™ç€ä½œä¸ºä¸€ä¸ªä¸‡ä¸€çš„æ‰‹æ®µã€‚ æ€§èƒ½å»ºè®® å› ä¸ºRDBæ–‡ä»¶åªç”¨ä½œåå¤‡ç”¨é€”ï¼Œå»ºè®®åªåœ¨Slaveä¸ŠæŒä¹…åŒ–RDBæ–‡ä»¶ï¼Œè€Œä¸”åªè¦15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œåªä¿ç•™ save 900 1è¿™æ¡è§„åˆ™ã€‚ å¦‚æœEnable AOFï¼Œå¥½å¤„æ˜¯åœ¨æœ€æ¶åŠ£æƒ…å†µä¸‹ä¹Ÿåªä¼šä¸¢å¤±ä¸è¶…è¿‡ä¸¤ç§’æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬è¾ƒç®€å•åªloadè‡ªå·±çš„AOFæ–‡ä»¶å°±å¯ä»¥äº† ä»£ä»·ä¸€æ˜¯å¸¦æ¥äº†æŒç»­çš„IO ä»£ä»·äºŒæ˜¯AOF rewrite çš„æœ€åå°† rewrite è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°æ•°æ®å†™åˆ°æ–°æ–‡ä»¶é€ æˆçš„é˜»å¡å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚åªè¦ç¡¬ç›˜è®¸å¯ï¼Œåº”è¯¥å°½é‡å‡å°‘AOF rewrite çš„é¢‘ç‡ï¼ŒAOFé‡å†™çš„åŸºç¡€å¤§å°é»˜è®¤å€¼64Må¤ªå°äº†ï¼Œå¯ä»¥è®¾åˆ°5Gä»¥ä¸Šï¼Œé»˜è®¤è¶…è¿‡åŸå¤§å°100%å¤§å°é‡å†™å¯ä»¥æ”¹åˆ°é€‚å½“çš„æ•°å€¼ã€‚ å¦‚æœä¸Enable AOFï¼Œä»…é Master-Slave Repllcationï¼ˆä¸»ä»å¤åˆ¶ï¼‰å®ç°é«˜å¯ç”¨æ€§ä¹Ÿå¯ä»¥ï¼Œèƒ½çœæ‰ä¸€å¤§ç¬”IOï¼Œä¹Ÿå‡å°‘äº†rewriteæ—¶å¸¦æ¥çš„ç³»ç»Ÿæ³¢åŠ¨ã€‚ä»£ä»·æ˜¯å¦‚æœMaster&#x2F;Slave åŒæ—¶æ–­ç”µï¼Œä¼šä¸¢å¤±åå‡ åˆ†é’Ÿçš„æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬ä¹Ÿè¦æ¯”è¾ƒä¸¤ä¸ªMaster&#x2F;Slaveä¸­çš„RDBæ–‡ä»¶ï¼Œè½½å…¥è¾ƒæ–°çš„é‚£ä¸ªã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-æ•´åˆSpringBoot","slug":"Redis-æ•´åˆSpringBoot","date":"2022-02-24T04:08:56.000Z","updated":"2022-02-24T07:13:41.530Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-æ•´åˆSpringBoot/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E6%95%B4%E5%90%88SpringBoot/","excerpt":"","text":"SpringBootæ•´åˆRedisåœ¨SpringBoot2.xä¹‹åï¼Œåº•å±‚å·²ç»ä¸å†ä½¿ç”¨jedisæ“ä½œRedisäº†ï¼Œè€Œæ˜¯lettuce jedisï¼šé‡‡ç”¨çš„ç›´è¿ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼Œéœ€è¦ä½¿ç”¨jedis poolè¿æ¥æ± æ¥è§£å†³é—®é¢˜ï¼ˆBIOæ¨¡å¼ï¼‰ lettcueï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªå®ä¾‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜ï¼ˆDubboåº•å±‚ä¹Ÿç”¨åˆ°äº†å®ƒï¼‰ï¼ˆNIOæ¨¡å¼ï¼‰ å¦‚ä½•ä½¿ç”¨1ã€å¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;version&gt;2.6.3&lt;/version&gt;&lt;/dependency&gt; 2ã€è§‚å¯ŸRedisAutoConfigurationæºç  123456789101112131415161718192021222324252627282930@Configuration( proxyBeanMethods = false)@ConditionalOnClass(&#123;RedisOperations.class&#125;)@EnableConfigurationProperties(&#123;RedisProperties.class&#125;)@Import(&#123;LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class&#125;)public class RedisAutoConfiguration &#123; public RedisAutoConfiguration() &#123; &#125; @Bean // è¿™è¯´æ˜æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰template @ConditionalOnMissingBean( name = &#123;&quot;redisTemplate&quot;&#125; ) @ConditionalOnSingleCandidate(RedisConnectionFactory.class) public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) &#123; RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate(); template.setConnectionFactory(redisConnectionFactory); return template; &#125; @Bean // å› ä¸ºæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨stringä¼šéå¸¸å¤šï¼Œæ‰€ä»¥å†…ç½®äº†ä¸€ä¸ªStringRedisTemplate @ConditionalOnMissingBean @ConditionalOnSingleCandidate(RedisConnectionFactory.class) public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) &#123; return new StringRedisTemplate(redisConnectionFactory); &#125;&#125; 3ã€é…ç½®è¿æ¥ï¼Œçœ‹æºç å¯ä»¥å‘ç°ï¼Œå°±ç®—æˆ‘ä»¬ä¸é…ç½®ï¼Œspringbootä¹Ÿé»˜è®¤å¯ä»¥è¿æ¥æœ¬åœ°çš„redis 4ã€æµ‹è¯• å…ˆæ‰“å¼€å‘½ä»¤è¡Œå®¢æˆ·ç«¯æŸ¥çœ‹å…¨éƒ¨çš„key 12127.0.0.1:6379&gt; keys *(empty list or set) æµ‹è¯•ç±»æµ‹è¯• 123456789101112@SpringBootTestclass SpringbootRedisApplicationTests &#123; @Autowired private StringRedisTemplate redisTemplate; @Test void contextLoads() &#123; RedisConnection connection = redisTemplate.getConnectionFactory().getConnection(); connection.flushAll(); connection.flushDb(); redisTemplate.opsForValue().set(&quot;springboot integrated Redis&quot;,&quot;success&quot;); &#125;&#125; å‘½ä»¤è¡Œå®¢æˆ·ç«¯æŸ¥çœ‹å…¨éƒ¨çš„keyï¼Œå¯ä»¥å‘ç°æ•°æ®æˆåŠŸæ’å…¥äº† 12127.0.0.1:6379&gt; keys *1) &quot;springboot integrated Redis&quot; åºåˆ—åŒ–å™¨å…ˆçœ‹ä¸‹æºç  å¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰è¿™äº›åºåˆ—åŒ–ï¼Œé‚£ä¹ˆä»–ä»¬éƒ½ä¼šè¢«è®¾ç½®ä¸ºå†…ç½®çš„defaultSerializerï¼Œé‚£ä¹ˆè¿™ç§jdkçš„åºåˆ—åŒ–ä¼šä½¿æˆ‘ä»¬çš„ä¸­æ–‡è½¬ä¹‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨JSONæ¥å®ç°åºåˆ—åŒ– 123if (this.defaultSerializer == null) &#123; this.defaultSerializer = new JdkSerializationRedisSerializer(this.classLoader != null ? this.classLoader : this.getClass().getClassLoader());&#125; ä¸‹é¢æˆ‘ä»¬ç›´æ¥ä¸Šæ¡ˆä¾‹ï¼š ä½¿ç”¨jdkå†…ç½®åºåˆ—åŒ–å™¨User 1234567@Data@NoArgsConstructor@AllArgsConstructorpublic class User &#123; private String name; private int age;&#125; ç›´æ¥æµ‹è¯•å°†å¯¹è±¡å†™å…¥ 12345678@Testvoid testSerialization()&#123; User user = new User(); user.setName(&quot;zhima&quot;); user.setAge(19); redisTemplate.opsForValue().set(&quot;user&quot;, user); System.out.println(redisTemplate.opsForValue().get(&quot;user&quot;));&#125; æ‰§è¡Œå‘ç°æŠ¥é”™äº†ï¼Œè¿™å°±æƒ³åˆ°äº†æˆ‘ä»¬ä»æºç ä¸­çœ‹åˆ°çš„JdkSerializationRedisSerializerï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®è‡ªå·±æƒ³è¦çš„åºåˆ—åŒ–å™¨ï¼Œé‚£ä¹ˆå°±é»˜è®¤ä¸ºæ­¤åºåˆ—åŒ–å™¨ï¼Œæ‰€ä»¥çŸ¥é“æŠ¥è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯useræ²¡æœ‰å®ç°åºåˆ—åŒ–æ¥å£ï¼Œé‚£æˆ‘ä»¬æ¥å®ç°ä»¥ä¸‹åºåˆ—åŒ–æ¥å£ 1org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [com.lizhi.springbootredis.pojo.User] è¿™æ—¶å€™å†æ‰§è¡Œï¼Œçœ‹æ§åˆ¶å° 1User(name=zhima, age=19) è‡ªå®šä¹‰åºåˆ—åŒ–å™¨ é…ç½®è‡ªå®šä¹‰redisTemplate 123456789101112131415161718192021@Bean(&quot;myRedisTemplate&quot;)public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)&#123; RedisTemplate&lt;String, Object&gt; template = new RedisTemplate(); template.setConnectionFactory(redisConnectionFactory); Jackson2JsonRedisSerializer&lt;Object&gt; objectJackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class); StringRedisSerializer stringRedisSerializer = new StringRedisSerializer(); ObjectMapper om = new ObjectMapper(); om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); objectJackson2JsonRedisSerializer.setObjectMapper(om); // hashçš„valueä½¿ç”¨JSONåºåˆ—åŒ– template.setHashValueSerializer(objectJackson2JsonRedisSerializer); // valueä½¿ç”¨JSONåºåˆ—åŒ– template.setValueSerializer(objectJackson2JsonRedisSerializer); // hashè¡¨çš„keyä½¿ç”¨stringçš„åºåˆ—åŒ–å™¨ template.setHashKeySerializer(stringRedisSerializer); // keyé‡‡ç”¨stringçš„åºåˆ—åŒ–å™¨ template.setKeySerializer(stringRedisSerializer); template.afterPropertiesSet(); return template;&#125; å†æ‰§è¡Œåˆšåˆšçš„æµ‹è¯•ï¼Œå°±ä¼šå‘ç°ï¼Œå‘½ä»¤è¡Œä¸­çš„keyå·²ç»æ˜¯ä¸€ä¸ªæ­£å¸¸çš„å­—ç¬¦ä¸²äº† å·¥å…·ç±»RedisUtilsè¿™æ ·ä½¿ç”¨åŸç”Ÿçš„APIå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ªå·¥å…·ç±»ã€‚ 12é“¾æ¥:https://pan.baidu.com/s/1CZG5D8QUsz1NnqBjXZf0tg æå–ç :24m2","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-é€šè¿‡Jredisæ“ä½œRedis","slug":"Redis-é€šè¿‡Jedisæ“ä½œRedis","date":"2022-02-24T03:32:22.000Z","updated":"2022-02-24T04:05:50.360Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-é€šè¿‡Jedisæ“ä½œRedis/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E9%80%9A%E8%BF%87Jedis%E6%93%8D%E4%BD%9CRedis/","excerpt":"","text":"JedisJediså…¶å®å°±æ˜¯javaç”¨æ¥æ“ä½œRedisçš„ä¸€ä¸ªå·¥å…·åŒ… å¦‚ä½•ä½¿ç”¨1ã€å¯¼å…¥ä¾èµ– 12345678910111213&lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;4.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.78&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ã€ä½¿ç”¨å°è£…å¥½çš„å¯¹è±¡æµ‹è¯•è¿æ¥Redis 1234567public class TestPing &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;127.0.0.1&quot;,6379); System.out.println(jedis.ping()); &#125;&#125;// æ§åˆ¶å°è¾“å‡ºPONG å¯ä»¥ç‚¹è¿›æºç çœ‹ä¸€ä¸‹ æˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•ä¸å°±æ˜¯æˆ‘ä»¬å½“æ—¶å†™çš„é‚£äº›å—ï¼Œåªä¸è¿‡éƒ½è¢«å°è£…æˆäº†æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ å®ç°äº‹åŠ¡1234567891011121314public class TransactionTest &#123; public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379); jedis.flushDB(); jedis.set(&quot;money&quot;,&quot;100&quot;); jedis.set(&quot;out&quot;,&quot;0&quot;); jedis.watch(&quot;money&quot;); Transaction multi = jedis.multi(); jedis.decrBy(&quot;mondy&quot;,30); jedis.incrBy(&quot;out&quot;,30); multi.exec(); jedis.close(); &#125;&#125; å®é™…ä¸Šå’Œå‘½ä»¤è¡Œçš„å‘½ä»¤æ˜¯ä¸€æ¨¡ä¸€æ ·çš„","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-å®ç°ä¹è§‚é”","slug":"Redis-å®ç°ä¹è§‚é”","date":"2022-02-24T03:07:07.000Z","updated":"2022-02-24T03:31:06.877Z","comments":true,"path":"javaEE/Redis/2022/02/24/Redis-å®ç°ä¹è§‚é”/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/24/Redis-%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81/","excerpt":"","text":"æµ…å®ç°ä¸€ä¸‹ä¹è§‚é”è¿™é‡Œéœ€è¦ä½¿ç”¨watchï¼Œç›´æ¥ä¸Šæ¡ˆä¾‹å§ éœ€æ±‚ï¼šç°æœ‰å­˜æ¬¾100å…ƒï¼ŒèŠ±å‡ºå»30å…ƒï¼Œè¿˜å‰©ä¸‹70å…ƒ 12345678910111213141516127.0.0.1:6379&gt; set money 100OK127.0.0.1:6379&gt; set out 0OK127.0.0.1:6379&gt; watch moneyOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; decrby money 30QUEUED127.0.0.1:6379&gt; incrby out 30QUEUED127.0.0.1:6379&gt; exec1) (integer) 702) (integer) 30# watchåœ¨äº‹åŠ¡æ‰§è¡Œç»“æŸåå°±å¤±æ•ˆäº† ç°åœ¨æˆ‘ä»¬å¼€ä¸¤ä¸ªå®¢æˆ·ç«¯cli-1å’Œcli-2ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„å‘½ä»¤å’Œé¡ºåºæ‰§è¡Œ cli-1 12345678127.0.0.1:6379&gt; watch moneyOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; decrby money 20QUEUED127.0.0.1:6379&gt; incrby out 20QUEUED cli-2 123456127.0.0.1:6379&gt; get money&quot;70&quot;127.0.0.1:6379&gt; incrby money 230(integer) 300127.0.0.1:6379&gt; get money&quot;300&quot; cli-1 1234127.0.0.1:6379&gt; exec # ç›‘è§†çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥è¯¥äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™moneyä¸Šçš„watchæ²¡æœ‰è§£é™¤ï¼Œå¯ä»¥é€šè¿‡unwactchè§£é™¤(nil)127.0.0.1:6379&gt; get money&quot;300&quot;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"å¤šå¹¶å‘ä¸­çš„é”","slug":"JUC-å¤šå¹¶å‘ä¸­çš„é”","date":"2022-02-23T07:56:59.000Z","updated":"2022-02-24T02:29:10.098Z","comments":true,"path":"javaEE/JUC/2022/02/23/JUC-å¤šå¹¶å‘ä¸­çš„é”/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JUC/2022/02/23/JUC-%E5%A4%9A%E5%B9%B6%E5%8F%91%E4%B8%AD%E7%9A%84%E9%94%81/","excerpt":"","text":"ä¸ºä»€ä¹ˆéœ€è¦é”ï¼Ÿåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸è®ºæ€ä¹ˆæ“ä½œæ•°æ®éƒ½ä¸ä¼šå‡ºç°ä»€ä¹ˆè‡´å‘½çš„æ“ä½œï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå¤šå¹¶å‘çš„æ—¶ä»£ï¼Œæˆ‘ä»¬æ›´å¤šçš„è¦è€ƒè™‘å¤šå¹¶å‘ï¼Œå¹¶ä¿è¯å¤šå¹¶å‘ç¯å¢ƒçš„å®‰å…¨æ€§ã€‚ åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹äº‰æŠ¢æ“ä½œåŒä¸€ä»½æ•°æ®ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ç§æœºåˆ¶æ¥ä¿è¯è¿™ä¸€ä»½æ•°æ®çš„å®‰å…¨æ€§ã€‚ é”æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿåœ¨javaä¸­ï¼Œæ¯ä¸€ä¸ªObjectéƒ½æœ‰ä¸€æŠŠé”ï¼Œè¿™æŠŠé”æ”¾åœ¨å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­ï¼Œé”ä¸­è®°å½•äº†å½“å‰å¯¹è±¡è¢«å“ªä¸ªçº¿ç¨‹æ‰€å ç”¨ã€‚ å†…å­˜ä¸­çš„å¯¹è±¡ç»“æ„ å¯¹é½å¡«å……å­—èŠ‚æ˜¯ä¸ºäº†æ»¡è¶³javaå¯¹è±¡å¿…é¡»æ˜¯8æ¯”ç‰¹çš„å€æ•°è¿™ä¸€æ¡ä»¶æ‰€è®¾è®¡çš„ å®ä¾‹æ•°æ®æ˜¯ä¸ºäº†ä¿å­˜å¯¹è±¡å±æ€§å’Œæ–¹æ³•çš„ å¯¹è±¡å¤´æ˜¯ä¸ºäº†ä¿å­˜å¯¹è±¡çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¯¹è±¡å¤´åŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯Mark Word ä¸€ä¸ªæ˜¯Class Pointer Class Pointer æŒ‡å‘Classå¯¹è±¡ Mark Word (32 bit)å­˜æ”¾äº†å¾ˆå¤šå’Œå½“å‰å¯¹è±¡è¿è¡Œæ—¶çŠ¶æ€æœ‰å…³çš„æ•°æ® hashCode é”çŠ¶æ€ synchronizedå®ç°åŸç†synchronizedè¢«ç¼–è¯‘åä¼šç”Ÿæˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¾èµ–è¿™ä¸¤ä¸ªæŒ‡ä»¤å°±å¯ä»¥å®ç°é”çš„æœºåˆ¶ï¼Œä»è€Œå®ç°çº¿ç¨‹çš„åŒæ­¥ è¿™æ˜¯æœªä¸Šé”çš„ä»£ç ï¼š 12345678910111213import java.util.concurrent.TimeUnit;public class TestSync &#123; private int count; public void add()&#123; try &#123; TimeUnit.MILLISECONDS.sleep(30); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;:===&gt;&quot;+count++); &#125;&#125; 123456789101112131415161718public static void main(String[] args) &#123; TestSync ts = new TestSync(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start(); new Thread(()-&gt;&#123; for (int i = 0; i &lt; 1000; i++) &#123; ts.add(); &#125; &#125;).start();&#125; æˆ‘ä»¬æ¥åŠ ä¸€ä¸‹synchronizedä»£ç å— 1234567891011121314151617package com.lizhi;import java.util.concurrent.TimeUnit;public class TestSync &#123; private int count; public void add()&#123; synchronized(this)&#123; try &#123; TimeUnit.MILLISECONDS.sleep(30); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;:===&gt;&quot;+count++); &#125; &#125;&#125; å¯ä»¥å‘ç°ç»“æœååˆ†æ­£ç¡®ï¼Œæˆ‘ä»¬æ¥åç¼–è¯‘ä¸€ä¸‹ï¼Œå¾—åˆ°ä»¥ä¸‹å­—èŠ‚ç æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849javap -c .\\TestSync.classCompiled from &quot;TestSync.java&quot;public class com.lizhi.TestSync &#123; public com.lizhi.TestSync(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public void add(); Code: 0: aload_0 1: dup 2: astore_1 3: monitorenter 4: getstatic #2 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit; 7: ldc2_w #3 // long 30l 10: invokevirtual #5 // Method java/util/concurrent/TimeUnit.sleep:(J)V 13: goto 21 16: astore_2 17: aload_2 18: invokevirtual #7 // Method java/lang/InterruptedException.printStackTrace:()V 21: getstatic #8 // Field java/lang/System.out:Ljava/io/PrintStream; 24: invokestatic #9 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread; 27: invokevirtual #10 // Method java/lang/Thread.getName:()Ljava/lang/String; 30: aload_0 31: dup 32: getfield #11 // Field count:I 35: dup_x1 36: iconst_1 37: iadd 38: putfield #11 // Field count:I 41: invokedynamic #12, 0 // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;I)Ljava/lang/String; 46: invokevirtual #13 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 49: aload_1 50: monitorexit 51: goto 59 54: astore_3 55: aload_1 56: monitorexit 57: aload_3 58: athrow 59: return Exceptio n table: from to target type 4 13 16 Class java/lang/InterruptedException 4 51 54 any 54 57 54 any&#125; å¯ä»¥çœ‹åˆ°åœ¨ç¬¬3è¡Œå’Œç¬¬50è¡Œå‡ºç°äº†monitorenterå’Œmonitorexit Monitorè¯¥å•è¯çš„æ„æ€æ˜¯ç›‘è§†å™¨ï¼Œå¯ä»¥å°†å…¶æƒ³æˆä¸€é—´å®¾é¦†çš„å®¢æˆ¿ï¼ŒæŠŠå„ä¸ªçº¿ç¨‹æƒ³åƒæˆå®¢äººã€‚å¦‚æœå®¢äººæœªé€€æˆ¿ï¼Œåœ¨è¿™ä¹‹åçš„å®¢äººåˆ™æ— æ³•å…¥ä½ï¼Œåªèƒ½ç­‰å¾…è¿™ä¸ªå®¢äººé€€æˆ¿åæ–¹å¯å…¥ä½ã€‚ monitoræ˜¯ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„mutex lockæ¥å®ç°çš„ javaçº¿ç¨‹å®é™…ä¸Šæ˜¯å¯¹æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ˜ å°„ï¼Œæ¯å½“æŒ‚èµ·æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹éƒ½è¦åˆ‡æ¢ æ“ä½œç³»ç»Ÿå†…æ ¸æ€ï¼Œè¿™ç§æ“ä½œæ˜¯æ¯”è¾ƒé‡é‡çº§çš„ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ç”šè‡³åˆ‡æ¢æ—¶é—´ä¼šè¶…è¿‡ä»»åŠ¡æœ¬èº«æ‰§è¡Œçš„æ—¶é—´ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨synchronizedçš„ä¼šå¯¹ç³»ç»Ÿçš„æ€§èƒ½äº§ç”Ÿå¾ˆä¸¥é‡çš„å½±å“ï¼Œä½†æ˜¯ä»java6å¼€å§‹ï¼Œsynchronizedè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¼•å…¥äº†åå‘é”å’Œè½»é‡çº§é”ã€‚ é”çš„å››ç§çŠ¶æ€ç”±ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼šæ— é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ã€‚ è¿™å°±ä¸Mark Wordä¸­çš„å››ç§çŠ¶æ€å¯¹åº”ä¸Šäº† æ³¨æ„ï¼šé”åªèƒ½å‡çº§ä¸èƒ½é™çº§ æ— é” æ— é”å³æ²¡æœ‰å¯¹è‡ªèº«èµ„æºä¸Šé”ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥æ‹¿åˆ°èµ„æºå¹¶æ“ä½œ è¿™å°±å¯èƒ½å‡ºç°ä¸¤ç§æƒ…å†µ æŸä¸ªå¯¹è±¡ä¸ä¼šå‡ºç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæˆ–è€…è¯´å³ä½¿å‡ºç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿä¸ä¼šå‡ºç°ç«äº‰çš„æƒ…å†µ èµ„æºä¼šè¢«ç«äº‰ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³å¯¹èµ„æºé”å®šï¼Œä¸è¿‡è¿™æ ·ä¹Ÿä¸è¡Œï¼Œä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œå°±æƒ³é€šè¿‡ä¸€ç§å…¶ä»–æœºåˆ¶æ¥æ§åˆ¶å¤šçº¿ç¨‹ï¼Œ æ¯”å¦‚è¯´ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹æƒ³ä¿®æ”¹åŒä¸€ä¸ªå€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹æˆåŠŸï¼Œå…¶ä»–å¤±è´¥çš„çº¿ç¨‹éœ€è¦ä¸æ–­å°è¯•ï¼Œç›´åˆ°ä¿®æ”¹æˆåŠŸ ï¼Œè¿™å°±æ˜¯CASï¼ˆCompare And Swapï¼‰,CASåœ¨æ“ä½œç³»ç»Ÿä¸­é€šè¿‡ä¸€æ¡æŒ‡ä»¤æ¥å®ç°ï¼Œæ‰€ä»¥å…¶å°±å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œæœ‰äº†è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°æ— é”ç¼–ç¨‹ åå‘é” å‡å¦‚ä¸€ä¸ªå¯¹è±¡è¢«åŠ é”äº†ï¼Œé‚£ä¹ˆåœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè·å¾—è¿™ä¸ªå¯¹è±¡é”ï¼Œå¹¶åªæœ‰å½“çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ï¼Œæ‰ä¼šå°†é”é‡Šæ”¾ã€‚ æˆ‘ä»¬è®¾æƒ³çš„æ˜¯ï¼Œæœ€å¥½è¿™ä¸ªå¯¹è±¡èƒ½å¤Ÿè®¤è¯†è¿™ä¸ªçº¿ç¨‹ï¼Œå½“è¿™ä¸ªçº¿ç¨‹è¿‡æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æŠŠè‡ªå·±çš„é”ç»™ä»–ï¼Œè¿™å¯ä»¥è¯´è¿™ä¸ªå¯¹è±¡åçˆ±è¿™ä¸ªçº¿ç¨‹ï¼Œè¿™å°±æ˜¯åå‘é”çš„æ¦‚å¿µ é‚£ä¹ˆè¿™ä¸ªè®¤è¯†çš„äººï¼Œè¢«è¿™ä¸ªå¯¹è±¡è®°åœ¨å“ªé‡Œå‘¢ï¼Ÿé‚£å°±æ˜¯åœ¨å¯¹è±¡å¤´ä¸­MarkWordçš„çº¿ç¨‹IDä¸­ï¼Œå‡å¦‚æƒ…å†µå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡å‘ç°ï¼Œä¸æ­¢æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨äº‰æŠ¢é”ï¼Œé‚£ä¹ˆè¯¥åå‘é”ä¼šç›´æ¥å‡çº§æˆè½»é‡çº§é” è½»é‡çº§é” é‚£å½“é”å‡çº§ä¸ºè½»é‡çº§é”çš„æ—¶å€™ï¼Œå¦‚ä½•åˆ¤æ–­çº¿ç¨‹å’Œæ‰€ä¹‹é—´çš„ç»‘å®šå…³ç³»å‘¢ï¼Ÿå¯ä»¥å†çœ‹ä¸‹é‚£å¼ markwordçš„è¡¨ï¼Œè¿™é‡Œå·²ç»ä¸å†ä½¿ç”¨çº¿ç¨‹IDè¿™ä¸ªå­—æ®µäº†ï¼Œè€Œæ˜¯å°†30bitå˜ä¸ºæŒ‡å‘çº¿ç¨‹æ ˆä¸­çš„é”è®°å½•ï¼ˆLock Recordï¼‰çš„æŒ‡é’ˆ å½“ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è·å¾—å¯¹è±¡çš„é”çš„æ—¶å€™ï¼ŒåŠ å…¥çœ‹åˆ°é”çš„æ ‡å¿—ä½ä¸º00é‚£ä¹ˆå°±çŸ¥é“å®ƒæ˜¯è½»é‡çº§é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ä¼šåœ¨è‡ªå·±çš„è™šæ‹Ÿæœºæ ˆä¸­å¼€è¾Ÿä¸€å—è¢«ç§°ä¸ºLock Recordçš„ç©ºé—´ï¼ˆçº¿ç¨‹ç§æœ‰çš„å“¦ï¼‰ï¼Œè¯¥æ§ä»¶ç”¨æ¥å­˜æ”¾å¯¹è±¡å¤´ä¸­çš„Mark wordçš„å‰¯æœ¬ä»¥åŠowneræŒ‡é’ˆï¼Œçº¿ç¨‹é€šè¿‡CASå»å°è¯•è·å¾—é”ï¼Œä¸€æ—¦è·å–é‚£ä¹ˆå°†ä¼šå¤åˆ¶è¯¥å¯¹è±¡å¤´ä¸­çš„markwordåˆ°æœ¬çº¿ç¨‹çš„Lock recordä¸­å¹¶ä¸”å°†Locker recordä¸­çš„owneræŒ‡é’ˆæŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹è±¡çš„å‰ä¸‰åä½å°†ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘çº¿ç¨‹è™šæ‹Ÿæœºæ ˆä¸­çš„Lock Recordï¼Œè¿™æ ·ä¸€æ¥å°±å®ç°äº†çº¿ç¨‹å’Œå¯¹è±¡é”çš„ç»‘å®šã€‚ å½“çº¿ç¨‹å·²ç»è¢«æŠ¢å äº†ï¼Œé‚£å…¶ä»–æƒ³æŠ¢å çš„çº¿ç¨‹ä¼šè‡ªæ—‹ç­‰å¾…ï¼ˆå¯ä»¥ç†è§£ä¸ºè½®è¯¢ï¼‰ï¼Œä¸æ–­å°è¯•æ‹¿åˆ°é”ï¼Œè¿™ç§æ“ä½œåŒºåˆ«äºè¢«æ“ä½œç³»ç»ŸæŒ‚èµ·é˜»å¡ï¼Œå¦‚æœå¯¹è±¡çš„é”å¾ˆå¿«å°±è¢«é‡Šæ”¾çš„è¯ï¼Œè‡ªæ—‹å°±ä¸éœ€è¦è¿›è¡Œç³»ç»Ÿä¸­æ–­å’Œé‡æ–°æ¢å¤ï¼Œæ‰€ä»¥å®ƒçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚ è‡ªæ—‹ç›¸å½“äºCPUç©ºè½¬ï¼Œå¦‚æœCPUç©ºè½¬æ—¶é—´è¿‡é•¿ï¼Œæ€§èƒ½ä¹Ÿä¼šäº§ç”ŸæŸè€—ï¼Œç„¶åå°±æœ‰äº†ä¸€ç§ä¼˜åŒ–ï¼Œå°±æ˜¯é€‚åº”æ€§è‡ªæ—‹ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è‡ªæ—‹çš„æ—¶é—´ä¼šæ ¹æ®ä¸Šä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šè‡ªæ—‹çš„æ—¶é—´ä»¥åŠé”çš„çŠ¶æ€æ¥å†³å®šçš„ é‡é‡çº§é” å¦‚æœåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹è¦è·å¾—è¿™ä¸ªå¯¹è±¡é”ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦è‡ªæ—‹ç­‰å¾…çš„çº¿ç¨‹è¶…è¿‡ä¸€ä¸ªï¼Œåˆ™ä¼šå‡çº§ä¸ºé‡é‡çº§é”ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨monitoræ¥å¯¹çº¿ç¨‹è¿›è¡Œæ§åˆ¶ï¼Œæ­¤æ—¶å°†ä¼šå®Œå…¨é”å®šèµ„æºï¼Œå¯¹çº¿ç¨‹çš„ç®¡æ§ä¹Ÿæ›´ä¸ºä¸¥æ ¼ æ— é”ç¼–ç¨‹javaä¸­çš„synchronizedå°±æ˜¯æ‚²è§‚é”ï¼ˆPessimistic Concurrency Controlï¼‰ï¼Œä»€ä¹ˆå«æ‚²è§‚é”å‘¢ï¼Ÿ ç®€å•æ¥è¯´å°±æ˜¯æ“ä½œç³»ç»Ÿä¼šæ‚²è§‚åœ°è®¤ä¸ºï¼Œå¦‚æœä¸ä¸¥æ ¼åŒæ­¥çº¿ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆä¸€å®šä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥äº’æ–¥é”ä¼šé”å®šèµ„æºï¼Œç›´ä¾›ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œè€Œé˜»å¡å…¶ä»–çº¿ç¨‹ï¼Œå› æ­¤å«æ‚²è§‚é”ï¼Œä½†æ˜¯æ‚²è§‚é”ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯è¯»çš„æ“ä½œï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦åœ¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½é”å®šèµ„æºã€‚å¯èƒ½ä¼šå‡ºç°åŒæ­¥ä»£ç å—æ‰§è¡Œçš„è€—æ—¶è¿œè¿œå°äºçº¿ç¨‹åˆ‡æ¢çš„è€—æ—¶ã€‚ä½¿ç”¨æ‚²è§‚é”ï¼Œä¼šå¯¼è‡´æ€§èƒ½ååˆ†ä¸å®¹ä¹è§‚ï¼Œæ¯”å¦‚å¤§é‡ç”¨æˆ·éœ€è¦åŒæ—¶è¯»å–åŒä¸€ä»½èµ„æºï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ‚²è§‚é”ï¼Œåˆ™åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æŸ¥çœ‹ï¼Œå…¶ä»–ç”¨æˆ·éƒ½åœ¨ä¸€ç›´ç™½å±ï¼Œä½†æ˜¯ï¼å…¶å®å¯¹äºè¯»çš„æ“ä½œï¼Œå³ä½¿æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œè¯¥æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¯¹è¯¥æ•°æ®é€ æˆå½±å“ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¸é”å®šèµ„æºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥å¯¹çº¿ç¨‹è°ƒç”¨è¿›è¡Œä¸€äº›åè°ƒå‘¢ï¼Ÿè¿™æ—¶å€™å°±å‡ºç°äº†ä¹è§‚é”è¿™ç§æœºåˆ¶ï¼Œå®ç°åŸç†å°±æ˜¯CASï¼ˆCompare And Swapï¼‰ CASæˆ‘ä»¬æ¥ä¸¾ä¸ªæ —å­ï¼šäººå°±æ˜¯çº¿ç¨‹ï¼Œå•æ‰€å°±æ˜¯å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ªå€¼æ¥è¡¨ç¤ºæ˜¯å¦è¢«å ç”¨occupy 0è¡¨ç¤ºç©ºé—² 1è¡¨ç¤ºæœ‰äºº å¾ˆå¤šäººè¦å»æŠ¢å•æ‰€ï¼Œç„¶åçº¿ç¨‹Aï¼ˆOld Value &#x3D; 0 ï¼Œnew Value &#x3D;1ï¼‰ã€Bï¼ˆOld Value &#x3D; 0ï¼Œnew Value &#x3D; 1ï¼‰è¿™ä¸¤ä¸ªäººå†²åˆ°äº†æœ€å‰é¢ï¼Œç„¶åAç‡å…ˆå’Œå•æ‰€çš„occupyæ¯”è¾ƒï¼ˆCompareï¼‰å‘ç°å’ŒoldValueä¸€è‡´ï¼Œåˆ™å°†oldValueä¸å•æ‰€çš„occupyäº¤æ¢ï¼ˆAnd Swapï¼‰ï¼Œè¿™æ—¶å€™Bä¸€çœ‹è‡ªå·±çš„oldValueä¸å•æ‰€çš„occupyï¼ˆ1ï¼‰ä¸ä¸€è‡´ï¼Œä»–å¾ˆä¸ç”˜å¿ƒï¼Œä½†ä¹Ÿåªèƒ½åœ¨å•æ‰€å¤–è¸±æ­¥ï¼ˆè‡ªæ—‹ï¼‰ï¼Œé€šå¸¸åœ¨ç­‰äº†ä¸€æ®µæ—¶é—´åï¼ˆè®¾ç½®æœ€å¤§è‡ªæ—‹æ¬¡æ•°ï¼‰ï¼Œéª‚å‡ºä¸€å¥å›½ç²¹åå°±ç¦»å»äº† è¿™æ—¶å€™å¯èƒ½å°±å‡ºç°äº†é—®é¢˜ï¼Œå› ä¸ºCompareå’ŒSwapæ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ²¡æœ‰åŸå­æ€§ï¼Œè¿™å°±æœ‰å¯èƒ½å‡ºç°ï¼Œå½“Aå³å°†å°†å€¼æ”¹ä¸º1çš„é‚£ä¸€åˆ¹é‚£ï¼ŒBæŠ¢åˆ°äº†æ—¶é—´ç‰‡ï¼Œå°†å…¶æ”¹ä¸ºäº†1ï¼Œç„¶åAä¹Ÿå°†å…¶æ”¹ä¸º1ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ï¼Œä¸¤ä¸ªäººä¸€èµ·è¿›å…¥äº†å•æ‰€ã€‚ é‚£ä¹ˆå¦‚ä½•ä¿è¯CSçš„åŸå­æ€§å‘¢ï¼Ÿéš¾é“è¿˜æ˜¯é”æ¥å®ç°åŒæ­¥å—ï¼Ÿè¿™ä¸å°±æ˜¯ä¸€ä¸ªé¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„é—®é¢˜äº†å—ï¼Ÿ å…¶å®å•Šï¼Œå„ç§ä¸åŒæ¶æ„çš„CPUéƒ½æä¾›äº†æŒ‡ä»¤çº§åˆ«çš„CASåŸå­æ“ä½œï¼Œ æ¯”å¦‚åœ¨X86æ¶æ„ä¸‹ï¼Œé€šè¿‡cmpxchgæŒ‡ä»¤å¯ä»¥æ”¯æŒCAS åœ¨ARMä¸‹ï¼Œé€šè¿‡LL&#x2F;SCæ¥å®ç°CSâ€¦â€¦ ä¹Ÿå°±æ˜¯è¯´ä¸é€šè¿‡æ“ä½œç³»ç»Ÿçš„åŒæ­¥åŸè¯­ï¼ˆæ¯”å¦‚ mutexï¼‰ï¼ŒCPUå·²ç»å®ç°äº†CSï¼Œä¸Šå±‚åªéœ€è¦è°ƒç”¨å³å¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ä¾èµ–é”æ¥è¿›è¡Œçº¿ç¨‹åŒæ­¥ï¼Œä½†æ˜¯è¿™ä¹Ÿä¸æ„å‘³ç€æ— é”å¯ä»¥å®Œå…¨ä»£æ›¿æœ‰é” åˆ©ç”¨CASç‰¹æ€§æ¥è¿›è¡Œæ— é”ç¼–ç¨‹éœ€æ±‚ï¼šä½¿ç”¨ä¸‰æ¡çº¿ç¨‹ï¼Œå°†ä¸€ä¸ªå€¼ï¼Œä»0ç´¯åŠ åˆ°1000 1ã€é”™è¯¯ 123456789101112public class Application2 &#123; static int count =0 ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count&lt;1000)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count++); &#125; &#125;).start(); &#125; &#125;&#125; 2ã€ä½¿ç”¨synchronized 1234567891011121314public class Application2 &#123; static int count =0 ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count&lt;1000)&#123; synchronized (Application2.class)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count++); &#125; &#125; &#125;).start(); &#125; &#125;&#125; 3ã€æ— é” 123456789101112public class Application2 &#123; static AtomicInteger count =new AtomicInteger(0) ; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new Thread(()-&gt;&#123; while(count.get()&lt;1000)&#123; System.out.println(Thread.currentThread().getName()+&quot;:==&gt;&quot;+count.getAndIncrement()); &#125; &#125;).start(); &#125; &#125;&#125; æ¢ç©¶æºç  AtomicIntegerçš„getAndIncrementæ–¹æ³• 123public final int getAndIncrement() &#123; return U.getAndAddInt(this, VALUE, 1);&#125; Uçš„getAndAddIntæ–¹æ³• 1private static final jdk.internal.misc.Unsafe U = jdk.internal.misc.Unsafe.getUnsafe(); Uæ˜¯ä¸€ä¸ªæ“ä½œåº•å±‚çš„ç±» 12345678@HotSpotIntrinsicCandidatepublic final int getAndAddInt(Object o, long offset, int delta) &#123; int v; do &#123; v = getIntVolatile(o, offset); &#125; while (!weakCompareAndSetInt(o, offset, v, v + delta)); return v;&#125; 123456@HotSpotIntrinsicCandidatepublic final boolean weakCompareAndSetInt(Object o, long offset, int expected, int x) &#123; return compareAndSetInt(o, offset, expected, x);&#125; 1234@HotSpotIntrinsicCandidatepublic final native boolean compareAndSetInt(Object o, long offset, int expected, int x); å¯åŠ¨æ¬¡æ•°å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°æ¥é…ç½®ï¼Œé»˜è®¤æ˜¯10ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ­»å¾ªç¯ Unsafe","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"http://li-zhi.net.cn/categories/javaEE/JUC/"}],"tags":[{"name":"JUC","slug":"JUC","permalink":"http://li-zhi.net.cn/tags/JUC/"}]},{"title":"Redis-äº‹åŠ¡","slug":"Redis-äº‹åŠ¡","date":"2022-02-23T07:32:42.000Z","updated":"2022-02-23T07:56:26.132Z","comments":true,"path":"javaEE/Redis/2022/02/23/Redis-äº‹åŠ¡/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/23/Redis-%E4%BA%8B%E5%8A%A1/","excerpt":"","text":"äº‹åŠ¡å›é¡¾æˆ‘ä»¬åœ¨MySQLä¸­å­¦ä¹ çš„äº‹åŠ¡å…·æœ‰ACIDåŸåˆ™ åŸå­æ€§ï¼ˆAtomicityï¼‰ åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ äº‹åŠ¡å‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ Redisä¸­çš„äº‹åŠ¡äº‹åŠ¡çš„æœ¬è´¨å³ï¼šä¸€ç»„å‘½ä»¤ä¸€èµ·æ‰§è¡Œï¼Œä¸å…è®¸è¢«æ’é˜Ÿã€‚ åœ¨Redisä¸­ï¼Œå•æ¡å‘½ä»¤æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ äº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ 123456789101112131415161718192021222324# å¼€å¯äº‹åŠ¡127.0.0.1:6379&gt; multiOK# å‘½ä»¤å…¥é˜Ÿ127.0.0.1:6379&gt; hset user:1 name zhimaQUEUED127.0.0.1:6379&gt; hset user:1 age 19QUEUED127.0.0.1:6379&gt; hset user:1 address SuzhouQUEUED127.0.0.1:6379&gt; hmget user:1 name age addressQUEUED# æ‰§è¡Œäº‹åŠ¡127.0.0.1:6379&gt; exec1) (integer) 12) (integer) 13) (integer) 14) 1) &quot;zhima&quot; 2) &quot;19&quot; 3) &quot;Suzhou&quot;# ä¸­é€”æ”¾å¼ƒäº‹åŠ¡127.0.0.1:6379&gt; discard ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šå³ä»£ç æœ¬èº«åˆé—®é€€ï¼Œæ¯”å¦‚127.0.0.1:6379&gt; asdmlk (error) ERR unknown command &#39;asdmlk&#39;å‘½ä»¤è¡Œä¼šç›´æ¥æŠ¥é”™ 12345678910111213141516127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; set k1 v1QUEUED127.0.0.1:6379&gt; set k2 v2QUEUED127.0.0.1:6379&gt; getset k2(error) ERR wrong number of arguments for &#x27;getset&#x27; command127.0.0.1:6379&gt; set k3 v3QUEUED127.0.0.1:6379&gt; exec(error) EXECABORT Transaction discarded because of previous errors.127.0.0.1:6379&gt; get k3(nil)127.0.0.1:6379&gt; get k2(nil) å¯ä»¥å‘ç°æ‰€æœ‰çš„å‘½ä»¤éƒ½æ²¡æœ‰æ‰§è¡Œã€‚ è¿è¡Œæ—¶å¼‚å¸¸ï¼šå¦‚æœäº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¿™ç§é”™è¯¯ï¼Œå…¶ä»–è¯­å¥ç…§å¸¸æ‰§è¡Œï¼Œè¯¥è¯­å¥ä¸æ‰§è¡Œï¼ŒæŠ›å‡ºå¼‚å¸¸ 1234567891011127.0.0.1:6379&gt; set k1 varOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; incr k1QUEUED127.0.0.1:6379&gt; get k1QUEUED127.0.0.1:6379&gt; exec1) (error) ERR value is not an integer or out of range2) &quot;var&quot;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ","slug":"CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ","date":"2022-02-23T03:45:07.000Z","updated":"2022-02-23T04:03:49.550Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/23/CSå’ŒBSæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/23/CS%E5%92%8CBS%E6%9E%B6%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","excerpt":"","text":"C&#x2F;Sæ¶æ„å’ŒB&#x2F;Sæ¶æ„C&#x2F;Sæ¶æ„ Client&#x2F;Serverå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨ å®¢æˆ·ç«¯æ˜¯é’ˆå¯¹æŸä¸€å…·ä½“ä¸šåŠ¡ä¸“é—¨å¼€å‘çš„è½¯ä»¶ï¼Œæ˜¯éœ€è¦ä¸“é—¨å®‰è£…çš„è½¯ä»¶ã€‚ ç”±äºå®¢æˆ·ç«¯æ˜¯ä¸“ç”¨çš„è½¯ä»¶ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ç¨‹åºä¸€èˆ¬ä¹Ÿå…·æœ‰å¯¹å…·ä½“ä¸šåŠ¡è¿›è¡Œå¤„ç†çš„èƒ½åŠ›ï¼Œå¯ä»¥å‡è½»æœåŠ¡ç«¯å‹åŠ› ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œå®‰å…¨æ€§è¾ƒé«˜ è‡´å‘½é—®é¢˜ï¼šç‰ˆæœ¬å‡çº§æˆæœ¬å¾ˆé«˜ å°±æ¯”å¦‚QQã€å¾®ä¿¡ç­‰åº”ç”¨ç¨‹åº B&#x2F;Sæ¶æ„ Browser&#x2F;Serveæµè§ˆå™¨&#x2F;æœåŠ¡å™¨ å®ƒå…¶å®ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„C&#x2F;Sæ¶æ„ï¼Œåªä¸è¿‡è¿™ä¸ªClientæ˜¯æµè§ˆå™¨ï¼Œæ˜¯ä¸€ä¸ªé€šç”¨çš„å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹å…·ä½“ä¸šåŠ¡è¿›è¡Œå¤„ç†çš„èƒ½åŠ›ï¼Œé€Ÿåº¦é™ä½ã€‚ ä¼˜ç‚¹ï¼šä¸å­˜åœ¨å®¢æˆ·ç«¯å‡çº§çš„é—®é¢˜ è‡´å‘½é—®é¢˜ï¼šé€Ÿåº¦æ…¢ï¼Œè€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå®‰å…¨æ€§ä½ å°±æ¯”å¦‚ï¼Œç½‘é¡µç‰ˆQQ","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","slug":"ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","date":"2022-02-22T09:10:53.000Z","updated":"2022-02-25T15:05:37.566Z","comments":true,"path":"ç®—æ³•/2022/02/22/ã€3-Mediumã€‘æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/22/%E3%80%903-Medium%E3%80%91%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/","excerpt":"","text":"æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: s = &quot;abcabcbb&quot;è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ ç¤ºä¾‹ 2: 123è¾“å…¥: s = &quot;bbbbb&quot;è¾“å‡º: 1è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚ ç¤ºä¾‹ 3: 1234è¾“å…¥: s = &quot;pwwkew&quot;è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot; æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚ æç¤ºï¼š 0 &lt;= s.length &lt;= 5 * 104 s ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ Related Topics å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² æ»‘åŠ¨çª—å£ æ³•ä¸€ï¼šæš´åŠ›è§£æ³•åˆ†æï¼šéå†æ•°ç»„çš„æ‰€æœ‰çš„åŒºé—´ï¼Œå°†æ»¡è¶³é¢˜æ„åŒºé—´é•¿åº¦çš„æœ€å¤§å€¼è¿”å› 123456789101112131415161718192021222324252627public int lengthOfLongestSubstring(String s) &#123; int len=s.length(); if(len&lt;=1)&#123; return len; &#125; int maxLength = 1; for (int i = 0; i &lt; len; i++) &#123; for (int j = i + 1; j &lt; len; j++) &#123; if(allUnique(s, i, j))&#123; maxLength = Math.max(maxLength, j-i+1); &#125; &#125; &#125; return maxLength;&#125;// è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è¿”å›è¯¥åŒºé—´æ˜¯å¦æœ‰é‡å¤çš„å­—ç¬¦ï¼Œæœ‰åˆ™è¿”å›falseï¼Œæ²¡æœ‰åˆ™è¿”å›trueprivate boolean allUnique(String s, int i, int j) &#123; // è¿™é‡Œä½¿ç”¨ArrayListä¹Ÿæ˜¯å¯ä»¥çš„ Set&lt;Character&gt; set = new HashSet&lt;&gt;(); for (int x = i; x &lt;= j; x++) &#123; if(set.contains(s.charAt(x)))&#123; return false; &#125; set.add(s.charAt(x)); &#125; return true;&#125; ç¼ºç‚¹ï¼šä¸­é—´ä¼šæœ‰é‡å¤çš„æ¯”è¾ƒï¼Œå¯¼è‡´å…¶æ•ˆç‡ååˆ†ä½ä¸‹ï¼Œå½“stringé•¿åº¦ååˆ†å¤§çš„æ—¶å€™ï¼Œå°±ä¼šè¶…æ—¶ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸ªè¿™ä¸ªç®—æ³• æ³•äºŒï¼šæš´åŠ›ä¼˜åŒ–123456789101112131415161718192021class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123; return len; &#125; int maxLength = 1; Set&lt;Character&gt; set = new HashSet&lt;&gt;(); for (int i = 0; i &lt; len; i++) &#123; set.add(s.charAt(i)); int j = i; while(j&lt;len-1 &amp;&amp; !set.contains(s.charAt(j+1)))&#123; j++; set.add(s.charAt(j)); &#125; maxLength = Math.max(set.size(), maxLength); set.clear(); &#125; return maxLength; &#125;&#125; æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£æ³•æ­¤æ–¹æ³•ä»åŠ›æ‰£å®˜ç½‘è§£é¢˜å¾—çŸ¥ï¼š https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/solution/jian-dan-yi-dong-javac-pythonjshua-dong-bff20/ æˆ‘æŒ‰ç…§æ­¤æ€è·¯ç”»äº†å›¾ è¿™æ˜¯æˆ‘çŸ¥é“æ­¤æ–¹æ³•åå†™çš„ä»£ç ï¼š 1234567891011121314151617181920212223class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123; return len; &#125; int maxLength = 1; int left = 0; int right = 0; LinkedList&lt;Character&gt; list = new LinkedList&lt;&gt;(); while(right &lt; len)&#123; while(right &lt; len &amp;&amp; !list.contains(s.charAt(right)))&#123; maxLength = Math.max(maxLength, right-left+1); list.add(s.charAt(right++)); &#125; left++; while(right &lt; len &amp;&amp; list.pop()!=s.charAt(right))&#123; left++; &#125; &#125; return maxLength; &#125;&#125; è¿™æ˜¯åŠ›æ‰£å®˜ç½‘ç»™å‡ºçš„åŒä¸€æ–¹æ³•çš„ä»£ç ï¼šä¸¤è€…æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ˜¾ç„¶è¿™ä¸€ç§æ›´ä¸ºç®€ä¾¿ï¼ 12345678910111213141516171819public int lengthOfLongestSubstring2(String s) &#123; int n = s.length(); if (n &lt;= 1) return n; int maxLen = 1; int left = 0, right = 0; Set&lt;Character&gt; window = new HashSet&lt;&gt;(); while (right &lt; n) &#123; char rightChar = s.charAt(right); while (window.contains(rightChar)) &#123; window.remove(s.charAt(left)); left++; &#125; maxLen = Math.max(maxLen, right - left + 1); window.add(rightChar); right++; &#125; return maxLen;&#125; è¿™æ˜¯æˆ‘çœ‹å®Œåï¼Œå¯¹è‡ªå·±ä»£ç çš„ä¼˜åŒ–ï¼š 123456789101112131415161718192021222324class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123;return len;&#125; int maxLength = 1; int left = 0; int right = 0; LinkedList&lt;Character&gt; list = new LinkedList&lt;&gt;(); while(right &lt; len)&#123; char now = s.charAt(right); if(list.contains(now))&#123; left++; while(list.pop()!=now)&#123; left++; &#125; &#125; maxLength = Math.max(maxLength, right-left+1); list.add(now); right++; &#125; return maxLength; &#125;&#125; æˆ‘ä»¬å‘ç°å¯¹äºå¤„ç†leftï¼Œæˆ‘ä»¬éœ€è¦éå†ï¼Œé‚£æˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç›´æ¥æ‹¿åˆ°çª—å£ä¸­é‡å¤çš„å­—ç¬¦çš„åä¸€ä¸ªç´¢å¼•å‘¢ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯hashmap 1234567891011121314151617181920212223class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123; return len; &#125; int maxLength = 1; int left = 0; int right = 0; Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;(); while(right &lt; len)&#123; char now = s.charAt(right); if(map.get(now)!=null)&#123; // å¦‚æœæ‹¿åˆ°çš„ç´¢å¼•+1æ¯”leftå¤§å†èµ‹å€¼ left = Math.max(map.get(now)+1,left); &#125; maxLength = Math.max(maxLength, right-left+1); map.put(now,right); right++; &#125; return maxLength; &#125;&#125; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿½æ±‚ä¸€ä¸‹æè‡´ï¼Œå…ˆçœ‹ä¸‹é¢˜ç›®è¦æ±‚ å› ä¸ºå­—ç¬¦æ˜¯ç¡®å®šçš„æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥newä¸€ä¸ª128é•¿åº¦çš„æ•°ç»„æ¥å½“hashmapï¼Œé”®æ˜¯å­—ç¬¦çš„ascllç å€¼ï¼Œå€¼æ˜¯ç´¢å¼•ï¼Œä»£ç å¦‚ä¸‹ 1234567891011121314151617181920class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = s.length(); if(len &lt;= 1)&#123; return len; &#125; int maxLength = 1; int left = 0; int right = 0; int[] window = new int[128]; while(right &lt; len)&#123; char now = s.charAt(right); left = Math.max(left, window[now] +1); maxLength = Math.max(maxLength, right-left+1); window[now] = right; right++; &#125; return maxLength; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å¤§Oè¡¨ç¤ºæ³•","slug":"ç®—æ³•-å¤§Oè¡¨ç¤ºæ³•","date":"2022-02-22T08:52:02.000Z","updated":"2022-02-22T14:31:40.400Z","comments":true,"path":"ç®—æ³•/2022/02/22/ç®—æ³•-å¤§Oè¡¨ç¤ºæ³•/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/22/%E7%AE%97%E6%B3%95-%E5%A4%A7O%E8%A1%A8%E7%A4%BA%E6%B3%95/","excerpt":"","text":"å¦‚ä½•å»è¯„åˆ¤ä¸€ä¸ªç®—æ³•çš„å¥½åå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªç»´åº¦åˆ†åˆ«æ˜¯æ—¶é—´å’Œç©ºé—´å»è¯„åˆ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è¿™ä¸¤ç‚¹å»ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œä»è€Œä½¿è‡ªå·±çš„ç®—æ³•çš„å¤æ‚åº¦é™ä½ï¼Œæ•ˆç‡æé«˜ã€‚ é‚£è¿™æ ·è¯´çš„è¯ï¼Œæ˜¯ä¸æ˜¯æˆ‘æ‹¿ç€ä¸åŒçš„ç®—æ³•åœ¨ä¸åŒçš„ç”µè„‘ä¸Šè·‘ç„¶åæ¯”è¾ƒæ—¶é—´ï¼Œè°çš„æ—¶é—´çŸ­ï¼Œè°çš„ç®—æ³•æ›´ç‰›é€¼ã€‚é‚£å¦‚æœä¸¤å°ç”µè„‘çš„æ€§èƒ½æœ¬å°±æœ‰ç€å¾ˆå¤§çš„å·®è·å‘¢ï¼Ÿè¿™æ ·å°±ä¸å…¬å¹³äº†ï¼Œå¯¼è‡´äº†æ¯”è¾ƒçš„åå·®ã€‚ å¤§Oè¡¨ç¤ºæ³•é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§è¡¨ç¤ºæ³•ä¹Ÿå°±æ˜¯å¤§Oè¡¨ç¤ºæ³•æ¥å…·ä½“è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚å®ƒå°†ä»£ç çš„æ‰€æœ‰æ­¥éª¤è½¬æ¢ä¸ºå…³äºæ•°æ®è§„æ¨¡nçš„å…¬å¼é¡¹ï¼Œç„¶åæ’é™¤ä¸ä¼šå¯¹é—®é¢˜çš„æ•´ä½“å¤æ‚åº¦äº§ç”Ÿè¾ƒå¤§å½±å“çš„ä½é˜¶ã€ç³»æ•°é¡¹å’Œå¸¸æ•°é¡¹ã€‚ æ—¶é—´å¤æ‚åº¦å…¶å®è¯¥å€¼è¡¨ç¤ºçš„æ˜¯ï¼Œå½“æ•°æ®çš„é‡çº§å¢åŠ çš„æ—¶å€™ï¼Œæ—¶é—´å¢é•¿çš„ä¸€ä¸ªè¶‹åŠ¿ã€‚ å…¬å¼ï¼šT(n) &#x3D; O(f(n)) O(1)çš„ä¾‹å­ï¼š 123int x = 0;int y = 1;int temp = x + y; O(n)çš„ä¾‹å­ï¼š 12345678910111213for (int i = 1; i &lt; n; i++)&#123; System.out.println(i);&#125;/*** è¯¥å¾ªç¯å®é™…ä¼šæ‰§è¡Œå¤šå°‘è¡Œä»£ç å‘¢ï¼Ÿ* int i = 1; * 1* i &lt; n * n* i++ * n* sout(i) * n* æ‰€ä»¥æ˜¯O(1+3n)* æˆ‘ä»¬åœ¨å¼€å§‹å°±è¯´è¿‡äº†éœ€è¦æ’é™¤ä¸ä¼šå¯¹é—®é¢˜çš„æ•´ä½“å¤æ‚åº¦äº§ç”Ÿè¾ƒå¤§å½±å“çš„ä½é˜¶ã€ç³»æ•°é¡¹å’Œå¸¸æ•°é¡¹ã€‚* æ‰€ä»¥å¤æ‚åº¦æ˜¯O(n)*/ å†æ¥çœ‹ä¸€ä¸ªO(n^2)çš„æ¡ˆä¾‹ï¼š 12345678910111213141516for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; System.out.println(i+j); &#125;&#125;/** ä¸€æ ·çš„æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå¾ªç¯å®é™…ä¼šæ‰§è¡Œå¤šå°‘æ¬¡* int i = 0; * 1* int j = 0; * 1* i &lt; n * n* i++ * n* j &lt; n * n*n* j++ * n*n* sout(i+j); * 1* ä¹Ÿå°±æ˜¯O(n^2+2n+3) = O(n^2)*/ O(logn)çš„ä¾‹å­ï¼š 12345678910int i=1;while(i &lt; n)&#123; i = i * 2; &#125;/** int i = 1; * 1* i &lt; n * (log2)n* i = i * 2 * (log2)n* ä¹Ÿå°±æ˜¯O(2(log2)n)==(log2)n*/ O(nlogn)çš„ä¾‹å­ï¼š 1234567for (int i = 1; i &lt; n; i++)&#123; int j = 1; while(j &lt; n)&#123; j = j * 2; &#125;&#125;//è¿™ä¸ªå¾ˆç®€å•ï¼Œå’Œä¹‹å‰çš„åˆ†ææ˜¯ä¸€æ ·çš„ ç©ºé—´å¤æ‚åº¦è¯¥å¤æ‚åº¦è¡¨ç¤ºçš„æ˜¯å†…å­˜ç©ºé—´éšç€æ•°æ®çš„å¢åŠ å¢é•¿çš„è¶‹åŠ¿ã€‚ å¸¸ç”¨çš„ç©ºé—´å¤æ‚åº¦O(1),O(n),O(n^2) O(1)çš„ä¾‹å­ï¼š 123int x = 0;int y = 1;int temp = x + y; O(n)çš„ä¾‹å­ï¼š 1234int[] arr = new int[n];for (int i = 0; i &lt; n; i++)&#123; arr[i] = i;&#125; O(n^2)çš„ä¾‹å­ï¼š 123456int[][] arr = new int[n][n];for (int i = 0; i &lt; n; i++)&#123; for (int j = 0; j &lt; n; j++)&#123; arr[i][j] = i+j; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹","slug":"Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹","date":"2022-02-22T08:41:55.000Z","updated":"2022-02-24T05:30:53.475Z","comments":true,"path":"javaEE/Redis/2022/02/22/Redis-ä¸‰å¤§ç‰¹æ®Šç±»å‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/22/Redis-%E4%B8%89%E5%A4%A7%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"ä¸‰ç§ç‰¹æ®Šç±»å‹geospatialè¯¥æ•°æ®ç±»å‹æ˜¯ç”¨æ¥å­˜å‚¨åœ°ç†ç©ºé—´çš„ é™„è¿‘çš„äººï¼Œå‘é€å®šä½ï¼Œåˆ†äº«å®æ—¶ä½ç½®ï¼Œæ‰“è½¦çš„æ—¶å€™çš„è·ç¦»è®¡ç®—éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå®ç° æˆ‘ä»¬è¿™é‡Œä½¿ç”¨è¿™å‡ ä¸ªåŸå¸‚çš„ç»çº¬åº¦ä½œä¸ºæµ‹è¯• åŸå¸‚ ç»åº¦ ç»´åº¦ ç›¸åŸåŒº 120.64239 31.36889 å´æ±ŸåŒº 120.638317 31.159815 å¤ªä»“ 121.10891 31.4497 å¸¸ç†Ÿå¸‚ 120.75225 31.65374 æ˜†å±±å¸‚ 120.98074 31.38464 è¿™é‡Œæœ‰å…­ä¸ªåŸºæœ¬å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªä¸ªçœ‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354# geoadd key longitude latitude member [longitude latitude member..]# å¢åŠ ä¸€ä¸ªç»çº¬åº¦çš„åæ ‡# ä¸¤ææ— æ³•æ·»åŠ ï¼Œä¸€èˆ¬æˆ‘ä»¬é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥127.0.0.1:6379&gt; geoadd Suzhou 120.64239 31.36889 XiangChengDistrict 120.638317 31.159815 WuJiangDistrict 121.10891 31.4497 TaiCang 120.75225 31.65374 ChangShuCity 120.98074 31.38464 KunShanCity(integer) 5# geodist key member1 member2 [unit]# è·å–ä¸¤åœ°ä¹‹é—´çš„è·ç¦»å•ä½ä¸ºç±³127.0.0.1:6379&gt; GEODIST Suzhou TaiCang WuJiangDistrict&quot;55133.1652&quot;127.0.0.1:6379&gt; GEODIST Suzhou TaiCang KunShanCity km&quot;14.1556&quot;# geohash key member [member..]# è·å–memberçš„äºŒç»´çš„ç©ºé—´ç»çº¬åº¦æ•°æ®ç¼–ç # è¿™ä¸ªå¯ä»¥csdnæœä¸€ä¸‹å…·ä½“çš„ç®—æ³•å®ç°127.0.0.1:6379&gt; geohash Suzhou TaiCang1) &quot;wtw4gvhzf10&quot;# geopos key member [member..]# æŸ¥çœ‹memberçš„ç»çº¬åº¦127.0.0.1:6379&gt; geopos Suzhou TaiCang XiangChengDistrict1) 1) &quot;121.10891193151474&quot; 2) &quot;31.449701065685858&quot;2) 1) &quot;120.64238995313644&quot; 2) &quot;31.368889085683811&quot;# georadius key longitude latitude radius m|km|ft|mi [WITHSCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC| ESC]# miæ˜¯è‹±é‡Œï¼Œftæ˜¯è‹±å°º# ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾åˆ°æŸä¸€åŠå¾„å†…çš„å…ƒç´ # WITHCOORDè¡¨ç¤ºæ˜¾ç¤ºåæ ‡# WITHDISTè¡¨ç¤ºæ˜¾ç¤ºè·ç¦»è¯¥ç‚¹çš„ä½ç½®# WITHHASHè¡¨ç¤ºæ˜¾ç¤ºè¯¥åœ°å€çš„hashå€¼# COUNT countè¡¨ç¤ºæ˜¾ç¤ºå‡ ä¸ª# ASC| ESC è¡¨ç¤ºæ­£åºè¿˜æ˜¯å€’åº127.0.0.1:6379&gt; georadius Suzhou 120.98080 31.28460 30 km withdist1) 1) &quot;KunShanCity&quot; 2) &quot;11.1271&quot;2) 1) &quot;TaiCang&quot; 2) &quot;22.0285&quot;# georadiusbymember key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC]# ä»¥memberä¸ºä¸­å¿ƒradiusä¸ºåŠå¾„ï¼Œæ‰¾åˆ°åœ¨æ­¤èŒƒå›´ä¸­çš„å…ƒç´ 127.0.0.1:6379&gt; georadiusbymember Suzhou TaiCang 30 km withcoord withdist withhash asc1) 1) &quot;TaiCang&quot; 2) &quot;0.0000&quot; 3) (integer) 4054798020485654 4) 1) &quot;121.10891193151474&quot; 2) &quot;31.449701065685858&quot;2) 1) &quot;KunShanCity&quot; 2) &quot;14.1556&quot; 3) (integer) 4054794184325796 4) 1) &quot;120.98073989152908&quot; 2) &quot;31.38463984296795&quot; geoçš„åº•å±‚å…¶å®æ˜¯Zsetï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Zsetçš„å‘½ä»¤å»æ“ä½œgeo 1234567127.0.0.1:6379&gt; zrem Suzhou TaiCang(integer) 1127.0.0.1:6379&gt; zrange Suzhou 0 -11) &quot;WuJiangDistrict&quot;2) &quot;XiangChengDistrict&quot;3) &quot;ChangShuCity&quot;4) &quot;KunShanCity&quot; Hyperloglog å…ˆæ¥äº†è§£ä¸€ä¸‹åŸºæ•°æ˜¯ä»€ä¹ˆï¼Ÿ åŸºæ•°å…¶å®å°±æ˜¯ä¸€ä¸ªé›†åˆä¸­ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé›†åˆå»é‡åçš„é›†åˆé•¿åº¦ ä¸šåŠ¡åœºæ™¯ï¼š ç½‘ç«™çš„è®¿é—®é‡ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä¹Ÿç®—ä¸€ä¸ªäººï¼‰ ä¼ ç»Ÿä½¿ç”¨seté›†åˆçš„é‡å¤æ— åºçš„ç‰¹æ€§ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„idï¼Œä»¥seté›†åˆçš„é•¿åº¦ä½œä¸ºæ ‡å‡†ã€‚ä½†æ˜¯ï¼Œä¸“é—¨ä½¿ç”¨ä¸€ä¸ªsetæ¥ä¿å­˜ç”¨æˆ·idæœªå…ä¼˜ç‚¹å¥¢ä¾ˆï¼Œå¦‚æœidæ˜¯åˆ†å¸ƒå¼çš„ä¼šå¾ˆå¤æ‚ï¼Œå¯¼è‡´seté›†åˆå¾ˆåºå¤§ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ Hyperloglogå°±æ˜¯ç”¨æ¥è§£å†³æ­¤é—®é¢˜çš„ç®—æ³•ã€‚ ä¼˜ç‚¹ï¼šå ç”¨å¾ˆå°çš„å†…å­˜ç©ºé—´å­˜æ”¾2^64ä¸ªæ•°æ®ï¼Œä¹Ÿåªå ç”¨12kb ç‘•ç–µï¼šä¼šæœ‰0.81%çš„é”™è¯¯ç‡ 123456789101112131415161718192021222324# pfadd key member [member..]127.0.0.1:6379&gt; pfadd set a b c d e f g h i j k l(integer) 1# pfcount key [key..]# è¿”å›åŸºæ•°127.0.0.1:6379&gt; pfcount set(integer) 12127.0.0.1:6379&gt; pfadd set2 j k l m n(integer) 1127.0.0.1:6379&gt; pfcount set set2(integer) 14# pfmerge destkey sourcekey [sourcekey..]# å°†sourcekeyåˆå¹¶åˆ°destkey127.0.0.1:6379&gt; pfmerge set set2OK# æ¢ç©¶åº•å±‚ï¼š# æˆ‘ä»¬è·å–ä¸€ä¸‹æ­¤æ•°æ®çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥çœ‹åˆ°å®é™…ä¸Šå­˜å‚¨çš„æ˜¯string127.0.0.1:6379&gt; type setstring127.0.0.1:6379&gt; get set&quot;HYLL\\x01\\x00\\x00\\x00\\x0c\\x00\\x00\\x00\\x00\\x00\\x00\\x00Fm\\x80I\\xe8\\x80@\\xc4\\x84K\\\\\\x80D&lt;\\x848\\x80B=\\x80K\\x83\\x80B\\xed\\x84A\\xfc\\x8cG\\x8e\\x80Bm\\x80BZ&quot; Bitmapä½å­˜å‚¨ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸¤ç§çŠ¶æ€çš„åŒºåˆ† æ¯”å¦‚ç»Ÿè®¡ä¸­å›½çš„ç”·å­å’Œå¥³å­çš„æ•°ç›® 14äº¿ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œ0ä»£è¡¨å¥³å­ï¼Œ1ä»£è¡¨ç”· 0 0 1 1 1 0 1 â€¦ ç™»å½•ï¼Œå¤´åƒæ˜¯äº®ç€çš„ï¼Œæœªç™»å½•ï¼Œå¤´åƒæ˜¯ç°è‰²çš„ã€‚ 12345678910111213141516171819202122232425# setbit key offset value# è®¾ç½®offsetä½æ˜¯value127.0.0.1:6379&gt; setbit sign 0 0(integer) 0127.0.0.1:6379&gt; setbit sign 1 1(integer) 0127.0.0.1:6379&gt; setbit sign 2 0(integer) 0127.0.0.1:6379&gt; setbit sign 3 1(integer) 0# ä¸­å›½signå¯ä»¥ä»£è¡¨# æ˜ŸæœŸæ—¥æœªæ‰“å¡# æ˜ŸæœŸä¸€å·²æ‰“å¡# æ˜ŸæœŸäºŒæœªæ‰“å¡# æ˜ŸæœŸä¸‰å·²æ‰“å¡# getbit key offset# æŸ¥çœ‹è¯¥å¤©æ˜¯å¦æ‰“å¡127.0.0.1:6379&gt; getbit sign 3(integer) 1# bitcount key [start end]# æŸ¥çœ‹signä¸­ä¸º1çš„ä¸ªæ•°127.0.0.1:6379&gt; BITCOUNT sign(integer) 2","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"ã€1827-Easyã€‘æœ€å°‘æ“ä½œä½¿æ•°ç»„é€’å¢","slug":"ã€1827-Easyã€‘æœ€å°‘æ“ä½œä½¿æ•°ç»„é€’å¢","date":"2022-02-21T13:49:48.000Z","updated":"2022-02-25T15:08:04.671Z","comments":true,"path":"ç®—æ³•/2022/02/21/ã€1827-Easyã€‘æœ€å°‘æ“ä½œä½¿æ•°ç»„é€’å¢/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/21/%E3%80%901827-Easy%E3%80%91%E6%9C%80%E5%B0%91%E6%93%8D%E4%BD%9C%E4%BD%BF%E6%95%B0%E7%BB%84%E9%80%92%E5%A2%9E/","excerpt":"","text":"æœ€å°‘æ“ä½œä½¿æ•°ç»„é€’å¢ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚æ¯ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒå¢åŠ  1 ã€‚ æ¯”æ–¹è¯´ï¼Œå¦‚æœ nums = [1,2,3] ï¼Œä½ å¯ä»¥é€‰æ‹©å¢åŠ  nums[1] å¾—åˆ° nums = [1,3,3] ã€‚ è¯·ä½ è¿”å›ä½¿ nums ä¸¥æ ¼é€’å¢ çš„ æœ€å°‘ æ“ä½œæ¬¡æ•°ã€‚ æˆ‘ä»¬ç§°æ•°ç»„ nums æ˜¯ ä¸¥æ ¼é€’å¢çš„ ï¼Œå½“å®ƒæ»¡è¶³å¯¹äºæ‰€æœ‰çš„ 0 &lt;= i &lt; nums.length - 1 éƒ½æœ‰ nums[i] &lt; nums[i+1] ã€‚ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„æ•°ç»„æ˜¯ä¸¥æ ¼é€’å¢çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚ ç¤ºä¾‹ 1ï¼š 123456è¾“å…¥ï¼šnums = [1,1,1]è¾“å‡ºï¼š3è§£é‡Šï¼šä½ å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š1) å¢åŠ  nums[2] ï¼Œæ•°ç»„å˜ä¸º [1,1,2] ã€‚2) å¢åŠ  nums[1] ï¼Œæ•°ç»„å˜ä¸º [1,2,2] ã€‚3) å¢åŠ  nums[2] ï¼Œæ•°ç»„å˜ä¸º [1,2,3] ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [1,5,2,4,1]è¾“å‡ºï¼š14 ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [8]è¾“å‡ºï¼š0 æç¤ºï¼š 1 &lt;= nums.length &lt;= 5000 1 &lt;= nums[i] &lt;= 104 Related Topics è´ªå¿ƒ æ•°ç»„ æ³•ä¸€ï¼šåˆ†æï¼šä»ç¬¬äºŒä½éå†æ•°ç»„ï¼Œä¸å‰ä¸€ä½æ¯”è¾ƒï¼Œå°†å·®å€¼ç»™åè€…è¡¥ä¸Šå¹¶åŠ ä¸€å³å¯ ä¸Šä»£ç ï¼š 1234567891011121314class Solution &#123; public int minOperations(int[] nums) &#123; int sum=0; int temp; for (int i = 1; i &lt; nums.length; i++) &#123; if(nums[i]-nums[i-1]&lt;=0)&#123; temp = nums[i-1]-nums[i]+1; sum += temp; nums[i] += temp; &#125; &#125; return sum; &#125;&#125; å› ä¸ºä¸éœ€è¦å¯¹åŸæ•°ç»„åšå‡ºæ”¹åŠ¨ï¼Œæ‰€ä»¥ä»¥ä¸Šå¯ä»¥ç®€åŒ–æˆä»¥ä¸‹çš„ä»£ç  1234567891011class Solution &#123; public int minOperations(int[] nums) &#123; int sum=0; for (int i = 1; i &lt; nums.length; i++) &#123; if(nums[i]-nums[i-1]&lt;=0)&#123; sum += nums[i-1]-nums[i]+1; &#125; &#125; return sum; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€1380-Easyã€‘çŸ©é˜µä¸­çš„å¹¸è¿æ•°","slug":"ã€1380-Easyã€‘çŸ©é˜µä¸­çš„å¹¸è¿æ•°","date":"2022-02-21T13:15:58.000Z","updated":"2022-02-25T15:07:41.093Z","comments":true,"path":"ç®—æ³•/2022/02/21/ã€1380-Easyã€‘çŸ©é˜µä¸­çš„å¹¸è¿æ•°/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/21/%E3%80%901380-Easy%E3%80%91%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E5%B9%B8%E8%BF%90%E6%95%B0/","excerpt":"","text":"çŸ©é˜µä¸­çš„å¹¸è¿æ•°ç»™ä½ ä¸€ä¸ª m * n çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„æ•°å­— å„ä¸ç›¸åŒ ã€‚è¯·ä½ æŒ‰ ä»»æ„ é¡ºåºè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å¹¸è¿æ•°ã€‚ å¹¸è¿æ•°æ˜¯æŒ‡çŸ©é˜µä¸­æ»¡è¶³åŒæ—¶ä¸‹åˆ—ä¸¤ä¸ªæ¡ä»¶çš„å…ƒç´ ï¼š åœ¨åŒä¸€è¡Œçš„æ‰€æœ‰å…ƒç´ ä¸­æœ€å° åœ¨åŒä¸€åˆ—çš„æ‰€æœ‰å…ƒç´ ä¸­æœ€å¤§ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šmatrix = [[3,7,8],[9,11,13],[15,16,17]]è¾“å‡ºï¼š[15]è§£é‡Šï¼š15 æ˜¯å”¯ä¸€çš„å¹¸è¿æ•°ï¼Œå› ä¸ºå®ƒæ˜¯å…¶æ‰€åœ¨è¡Œä¸­çš„æœ€å°å€¼ï¼Œä¹Ÿæ˜¯æ‰€åœ¨åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šmatrix = [[1,10,4,2],[9,3,8,7],[15,16,17,12]]è¾“å‡ºï¼š[12]è§£é‡Šï¼š12 æ˜¯å”¯ä¸€çš„å¹¸è¿æ•°ï¼Œå› ä¸ºå®ƒæ˜¯å…¶æ‰€åœ¨è¡Œä¸­çš„æœ€å°å€¼ï¼Œä¹Ÿæ˜¯æ‰€åœ¨åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚ ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šmatrix = [[7,8],[1,2]]è¾“å‡ºï¼š[7] æç¤ºï¼š m == mat.length n == mat[i].length 1 &lt;= n, m &lt;= 50 1 &lt;= matrix[i][j] &lt;= 10^5 çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä¸åŒçš„ Related Topics æ•°ç»„ çŸ©é˜µ æ³•ä¸€ï¼šè½¬ç½®çŸ©é˜µè¿›è¡Œæ“ä½œåˆ†æï¼šè¯¥é¢˜å…¶å®å°±æ˜¯é©¬éæ•°ï¼Œæˆ‘çš„æ€è·¯æ˜¯ï¼Œè½¬ç½®çŸ©é˜µï¼Œç„¶åéå†åŸäºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œï¼Œå…ˆå–å¾—æ¯ä¸€è¡Œçš„æœ€å°å€¼æ‰€åœ¨çš„ç´¢å¼•ï¼Œç„¶åå–å¾—è¿™ä¸€åˆ—æ‰€åœ¨çš„æœ€å¤§å€¼çš„ç´¢å¼•ï¼Œæ¯”è¾ƒå½“å‰è¡Œæ•°å’Œæœ€å¤§å€¼çš„ç´¢å¼•æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜è¯¥æ•°å­—å³å¹¸è¿æ•°ã€‚è¿™é‡Œä¸å¯ä»¥æ‹¿åˆ°æœ€å°å€¼å’Œæœ€å¤§å€¼çš„å€¼æœ¬èº«è€Œæ˜¯æ‹¿åˆ°ç´¢å¼•ï¼Œä¸ç„¶ä¼šæœ‰å·§åˆå‡ºç°ã€‚ ä¸Šä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Solution &#123; public List&lt;Integer&gt; luckyNumbers (int[][] matrix) &#123; List&lt;Integer&gt; result = new ArrayList&lt;&gt;(); int[][] reverse = reverse(matrix); int min; int max; for (int i = 0; i &lt; matrix.length; i++) &#123; // æ‹¿åˆ°è¿™ä¸€è¡Œçš„æœ€å°å€¼çš„ç´¢å¼• min = indexOfMin(matrix[i]); // æ‹¿åˆ°æœ€å°å€¼è¿™ä¸€åˆ—çš„æœ€å¤§å€¼çš„ç´¢å¼•ï¼Œ max = indexOfMax(reverse[min]); // matrix[i][min]==reverse[min][max] // è¿™é‡Œæ˜¯å…ˆæ‹¿åˆ°æ¯ä¸€è¡Œéœ€è¦æ¯”è¾ƒçš„å€¼å³matrix[i][min]ï¼Œ // ç„¶åæ‹¿åˆ°minåˆ—iè¡Œçš„æœ€å¤§å€¼matrix[i][max]æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰, // åŒ–ç®€ä¸€ä¸‹å³ä¸ºæ¯”è¾ƒiä¸maxçš„å¤§å°æ˜¯å¦ç›¸ç­‰ if(i==max)&#123; result.add(matrix[i][min]); &#125; &#125; return result; &#125; public int[][] reverse(int[][] matrix)&#123; int[][] reverse = new int[matrix[0].length][matrix.length]; for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[i].length; j++) &#123; reverse[j][i]=matrix[i][j]; &#125; &#125; return reverse; &#125; public int indexOfMin(int[] arr)&#123; int min = 0; for (int i = 0; i &lt; arr.length; i++) &#123; if(arr[i]&lt;arr[min])&#123; min=i; &#125; &#125; return min; &#125; public int indexOfMax(int[] arr)&#123; int max = 0; for (int i = 0; i &lt; arr.length; i++) &#123; if(arr[i]&gt;arr[max])&#123; max=i; &#125; &#125; return max; &#125;&#125; æ³•äºŒï¼šé¢„æ‹¿æœ€å€¼åˆ†æï¼šæå‰å°†æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—çš„æœ€å€¼éƒ½æ‹¿å‡ºæ¥ï¼Œç„¶åæ‰«ææ£‹ç›˜æ‰¾åˆ°æ»¡è¶³çš„æ•°æ® ä¸Šä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132class Solution &#123; public List&lt;Integer&gt; luckyNumbers (int[][] matrix) &#123; List&lt;Integer&gt; result = new ArrayList&lt;&gt;(); int rowMin = new int[matrix.length]; Arrays.fill(rowMin,Integer.MAX_VALUE); int columnMax = new int[matrix[0].length]; Arrays.fill(columnMax,Integer.MIN_VALUE); for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[i].length; j++) &#123; rowMin[i] = Math.min(rowMin[i],matrix[i][j]); columnMax[j] = Math.max(columnMax[j],matrix[i][j]); &#125; &#125; for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[i].length; j++) &#123; if(rowMin[i]==matrix[i][j]&amp;&amp;columnMax[j]==matrix[i][j])&#123; result.add(matrix[i][j]); &#125; &#125; &#125; return result; &#125; public int findMin(int[] arr)&#123; int min = arr[0]; for (int i = 0; i &lt; arr.length; i++) &#123; if(arr[i]&lt;min)&#123; min=arr[i]; &#125; &#125; return min; &#125;&#125; å¯¹äºé¢„å¤„ç†è¿˜å¯ä»¥è¿™æ ·å†™ï¼š 12345678910111213141516171819202122232425262728293031class Solution &#123; public List&lt;Integer&gt; luckyNumbers (int[][] matrix) &#123; List&lt;Integer&gt; result = new ArrayList&lt;&gt;(); int rowMin = new int[matrix.length]; int columnMax = new int[matrix[0].length]; Arrays.fill(columnMax,Integer.MIN_VALUE); for (int i = 0; i &lt; matrix.length; i++) &#123; rowMin[i] = findMin(matrix[i]); for (int j = 0; j &lt; matrix[i].length; j++) &#123; columnMax[j] = Math.max(columnMax[j],matrix[i][j]); &#125; &#125; for (int i = 0; i &lt; matrix.length; i++) &#123; for (int j = 0; j &lt; matrix[i].length; j++) &#123; if(rowMin[i]==matrix[i][j]&amp;&amp;columnMax[j]==matrix[i][j])&#123; result.add(matrix[i][j]); &#125; &#125; &#125; return result; &#125; public int findMin(int[] arr)&#123; int min = arr[0]; for (int i = 0; i &lt; arr.length; i++) &#123; if(arr[i]&lt;min)&#123; min=arr[i]; &#125; &#125; return min; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€717-Easyã€‘1æ¯”ç‰¹ä¸2æ¯”ç‰¹å­—ç¬¦","slug":"ã€717-Easyã€‘1æ¯”ç‰¹ä¸2æ¯”ç‰¹å­—ç¬¦","date":"2022-02-21T12:27:37.000Z","updated":"2022-02-25T15:07:19.818Z","comments":true,"path":"ç®—æ³•/2022/02/21/ã€717-Easyã€‘1æ¯”ç‰¹ä¸2æ¯”ç‰¹å­—ç¬¦/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/21/%E3%80%90717-Easy%E3%80%911%E6%AF%94%E7%89%B9%E4%B8%8E2%E6%AF%94%E7%89%B9%E5%AD%97%E7%AC%A6/","excerpt":"","text":"1æ¯”ç‰¹ä¸2æ¯”ç‰¹å­—ç¬¦æœ‰ä¸¤ç§ç‰¹æ®Šå­—ç¬¦ï¼š ç¬¬ä¸€ç§å­—ç¬¦å¯ä»¥ç”¨ä¸€ä¸ªæ¯”ç‰¹ 0 æ¥è¡¨ç¤º ç¬¬äºŒç§å­—ç¬¦å¯ä»¥ç”¨ä¸¤ä¸ªæ¯”ç‰¹(10 æˆ– 11)æ¥è¡¨ç¤ºã€ ç»™å®šä¸€ä¸ªä»¥ 0 ç»“å°¾çš„äºŒè¿›åˆ¶æ•°ç»„ bits ï¼Œå¦‚æœæœ€åä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ä¸€ä½å­—ç¬¦ï¼Œåˆ™è¿”å› true ã€‚ ç¤ºä¾‹ 1: 1234è¾“å…¥: bits = [1, 0, 0]è¾“å‡º: trueè§£é‡Š: å”¯ä¸€çš„ç¼–ç æ–¹å¼æ˜¯ä¸€ä¸ªä¸¤æ¯”ç‰¹å­—ç¬¦å’Œä¸€ä¸ªä¸€æ¯”ç‰¹å­—ç¬¦ã€‚æ‰€ä»¥æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯ä¸€æ¯”ç‰¹å­—ç¬¦ã€‚ ç¤ºä¾‹ 2: 1234è¾“å…¥: bits = [1, 1, 1, 0]è¾“å‡º: falseè§£é‡Š: å”¯ä¸€çš„ç¼–ç æ–¹å¼æ˜¯ä¸¤æ¯”ç‰¹å­—ç¬¦å’Œä¸¤æ¯”ç‰¹å­—ç¬¦ã€‚æ‰€ä»¥æœ€åä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ä¸€æ¯”ç‰¹å­—ç¬¦ã€‚ æç¤º: 1 &lt;= bits.length &lt;= 1000 bits[i] == 0 or 1 Related Topics æ•°ç»„ æ³•ä¸€ï¼šç›´æ¥æ­£åºéå†åˆ†æï¼šå…¶å®è¿™ä¸ªé¢˜ç›®çš„æ„æ€æ•°ç»„ä¸­11ã€10è¿™ä¸¤ç§è¿ç»­çš„ç»„åˆå°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œç„¶å0æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œè¿”å›çš„ç»“æœå°±æ˜¯ï¼Œè¿™ä¸ªæ•°ç»„æŒ‰è¿™ç§è§„åˆ™ç»„åˆåï¼Œæœ€åçš„é‚£ä¸€ä¸ªç»„åˆæ˜¯ä¸æ˜¯0ï¼Œå¦‚æœæ˜¯åˆ™è¿”å›trueï¼Œåä¹‹åˆ™è¿”å›falseã€‚ é¦–å…ˆï¼Œåˆ¤æ–­æœ€åä¸€ä¸ªæ˜¯å¦æ˜¯1ï¼Œå¦‚æœä¸º1åˆ™ç›´æ¥è¿”å›false ç„¶åï¼Œéå†è¯¥æ•°ç»„åˆ°å€’æ•°ç¬¬äºŒä¸ªï¼Œå¦‚æœå½“å‰çš„å€¼æ˜¯1ï¼Œåˆ™ç”¨æ¥éå†çš„è®¡æ•°å™¨é¢å¤–åŠ 1 æœ€åï¼Œè¿”å›è®¡æ—¶å™¨æ˜¯å¦ç­‰äºæ•°ç»„çš„é•¿åº¦å‡1ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜æœ€åä¸€ä½çš„0æœªä¸å€’æ•°ç¬¬äºŒä½åŒ¹é…ï¼Œæ»¡è¶³é¢˜æ„ ä¸Šä»£ç ï¼š 12345678910111213141516class Solution &#123; public boolean isOneBitCharacter(int[] bits) &#123; int length = bits.length; if(bits[length-1]==1)&#123; return false; &#125; int i = 0; while(i&lt;length-1)&#123; if(bits[i]==1)&#123; i++; &#125; i++; &#125; return i==length-1; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ ","slug":"ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ ","date":"2022-02-21T10:53:00.000Z","updated":"2022-06-18T13:18:25.701Z","comments":true,"path":"ç®—æ³•/2022/02/21/ã€2-Mediumã€‘ä¸¤æ•°ç›¸åŠ /","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/21/%E3%80%902-Medium%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/","excerpt":"","text":"ä¸¤æ•°ç›¸åŠ ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚ è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚ ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚ ListNode 12345678//Definition for singly-linked list.public class ListNode &#123; int val; ListNode next; ListNode() &#123;&#125; ListNode(int val) &#123; this.val = val; &#125; ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;&#125; ç¤ºä¾‹1: 123è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]è¾“å‡ºï¼š[7,0,8]è§£é‡Šï¼š342 + 465 = 807. ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šl1 = [0], l2 = [0]è¾“å‡ºï¼š[0] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šl1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9]è¾“å‡ºï¼š[8,9,9,9,0,0,0,1] å›¾ç¤º1ï¼š å›¾ç¤º2ï¼š æç¤ºï¼š æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ [1, 100] å†… 0 &lt;= Node.val &lt;= 9 é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶ Related Topics é€’å½’ é“¾è¡¨ æ•°å­¦ æ³•ä¸€ï¼šé“¾è¡¨è½¬å€¼è®¡ç®—åˆ†æï¼šé‡åˆ°è¿™ç§é“¾è¡¨çš„é¢˜ï¼Œé¦–å…ˆè¦å…ˆå°†é€»è¾‘å›¾ç”»å‡ºæ¥ã€‚ ç»è¿‡è§‚å¯Ÿå¯çŸ¥ï¼Œé“¾è¡¨çš„ç¬¬ä¸€ä½è¡¨ç¤ºè¯¥æ•°å­—çš„ä¸ªä½ï¼Œç¬¬äºŒä½ä»£è¡¨è¯¥æ•°å­—çš„åä½ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ä¸€å¼€å§‹è§£é¢˜æ€è·¯åº”è¯¥æ˜¯ï¼Œå…ˆå°†é“¾è¡¨è¡¨ç¤ºçš„æ•°å­—ç®—å‡ºæ¥ï¼Œç„¶åå…ˆå°†ä¸¤ä¸ªæ•°å­—åŠ èµ·æ¥ï¼Œç„¶åå†ç”¨è¯¥æ•°å­—æ„å»ºå‡ºæ¥ç»“æœé“¾è¡¨ã€‚ ä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223242526public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; long sum=compute(l1)+compute(l2); ListNode listNode = new ListNode(); // è¿™é‡Œçš„listNodeæ˜¯è™šæ‹ŸèŠ‚ç‚¹ï¼Œæœ€åè¿”å›çš„æ˜¯è¯¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ ListNode temp = listNode; while (sum != 0) &#123; // è¿™é‡Œéœ€è¦ä½¿ç”¨å¼ºè½¬ // (sum%10)çš„ç»“æœæ˜¯longç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ListNodeçš„intå‹çš„valä¼šæŠ¥é”™ temp.next = new ListNode((int)(sum%10)); temp = temp.next; sum /= 10; &#125; return listNode.next;&#125;/*** è¯¥å‡½æ•°æ˜¯ä¸ºäº†è®¡ç®—é“¾è¡¨æ‰€è¡¨ç¤ºçš„å€¼*/private int compute(ListNode node)&#123; int result = 0; for(int i = 1 ; node != null ; node = node.next)&#123; result += node.val *i; i *= 10; &#125; return result;&#125; æˆ‘ä»¬ç®—ä¸€ä¸‹intçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Œintæ˜¯4ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯32ä½ï¼Œå¯ä»¥è¡¨ç¤º2^32ä¸ªæ•°å­—ï¼Œ å†æ¥çœ‹longçš„æœ€å¤§å€¼ï¼Œlongæ˜¯8ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯64ä½ï¼Œå¯ä»¥è¡¨ç¤º2^64ä½ã€‚ æ­¤æ–¹æ³•ä¹ä¸€çœ‹ç¡®å®æ²¡é—®é¢˜ï¼Œä½†æ˜¯ï¼Œè¯·çœ‹é¢˜ç›®è¦æ±‚ é¢˜ç›®è¦æ±‚å‘Šè¯‰æˆ‘ä»¬ï¼Œæµ‹è¯•çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°100ä½çš„æ•°å­—ï¼Œlongç±»å‹æœ€å¤§å€¼è¿œè¿œä¸å¤Ÿï¼Œæ‰€ä»¥å½“æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•å°±ä¼šå´©ç›˜ã€‚ è¿™æ—¶å€™å°±éœ€è¦è€ƒè™‘å…¶ä»–æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œé€’å½’ã€‚ æ³•äºŒï¼šé€’å½’åˆ†æï¼šæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªé“¾è¡¨ï¼Œæˆ‘ä»¬å¯¹å…¶è¦æ¸…æ¥šä¸¤ç‚¹ ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸ä¸€å®šç›¸åŒ ä¸¤ä¸ªé“¾è¡¨ç›¸åŠ åï¼Œé•¿åº¦ä¸ä¸€å®šä¸å˜ é€’å½’éœ€è¦å…ˆå°†é€’å½’é€€å‡ºæ¡ä»¶å†™å‡ºæ¥ï¼Œå³ä¸¤è€…éƒ½åˆ°å°¾éƒ¨ï¼Œå°±ç®€å•çœ‹çœ‹æˆ‘ç”»çš„æ€è·¯å›¾ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode listNode = new ListNode(); add(l1,l2,listNode); return listNode; &#125; public ListNode add(ListNode a,ListNode b,ListNode temp)&#123; // å½“ä¸¤ä¸ªé“¾è¡¨éƒ½åˆ°å¤´äº†ï¼Œåˆ™é€€å‡ºé€’å½’ if(a==null&amp;&amp;b==null)&#123; return temp; &#125; // æ­¤å˜é‡æ˜¯ç”¨æ¥æ ‡æ³¨ä¸‹ä¸€æ¬¡é€’å½’çš„æ—¶å€™ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦æ˜¯éƒ½å°¾éƒ¨äº† boolean flag=false; // å½“aåˆ°å°¾éƒ¨çš„æ—¶å€™ï¼Œå°†tempçš„æ•°æ®åŸŸå˜ä¸ºè‡ªèº«åŠ ä¸Šbçš„æ•°æ®åŸŸçš„å€¼ if(a==null)&#123; temp.val+=b.val; // åœ¨aå·²ç»åˆ°å°¾éƒ¨çš„æƒ…å†µä¸‹ï¼Œbçš„nextä¸ºnullï¼Œå³bå°†åœ¨ä¸‹ä¸€æ¬¡é€’å½’åˆ°å°¾éƒ¨äº†ï¼Œåˆ™å°†flagå˜ä¸ºtrue if(b.next==null)&#123; flag=true; &#125; // å½“båˆ°å¤´çš„æ—¶å€™ï¼Œå°†tempçš„æ•°æ®åŸŸå˜ä¸ºè‡ªèº«åŠ ä¸Šbçš„æ•°æ®åŸŸçš„å€¼ &#125;else if(b==null)&#123; temp.val+=a.val; // åœ¨bå·²ç»åˆ°å°¾éƒ¨çš„æƒ…å†µä¸‹ï¼Œaçš„nextä¸ºnullï¼Œå³aå°†åœ¨ä¸‹ä¸€æ¬¡é€’å½’åˆ°å°¾éƒ¨äº†ï¼Œåˆ™å°†flagå˜ä¸ºtrue if(a.next==null)&#123; flag=true; &#125; &#125;else &#123; temp.val+=a.val+b.val; if(a.next==null&amp;&amp;b.next==null)&#123; flag=true; &#125; &#125; // leftç”¨æ¥å­˜å‚¨å½“å‰è¿™ä¸€ä½çš„å€¼æ˜¯å¦&gt;=10ï¼Œå¦‚æœæ»¡è¶³ï¼Œåˆ™è¿›1 int left=temp.val&gt;=10?1:0; // å°†leftä½œä¸ºåˆå§‹å€¼newå‡ºæ¥tempçš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆ temp.next = new ListNode(left); // ä¸ºäº†é˜²æ­¢è¶…è¿‡åï¼Œæ‰€ä»¥è¿™é‡Œåšäº†å–ä½™çš„æ“ä½œï¼Œ temp.val = temp.val%10; // å¦‚æœä¸‹ä¸€æ¬¡é€’å½’çš„æ—¶å€™ä¸¤è€…éƒ½åˆ°äº†å°¾éƒ¨ï¼Œå¹¶ä¸”æ²¡æœ‰è¿›1ï¼Œåˆ™ä¸éœ€è¦newå‡ºæ¥tempçš„next if(flag&amp;&amp;left==0)&#123; temp.next=null; &#125; //é€’å½’è°ƒç”¨ return add(a==null?null:a.next,b==null?null:b.next,temp.next); &#125;&#125; å…¶å®è¿™ç§é€’å½’å°±æ˜¯åŒ–ç®€ä¸ºç¹äº†ï¼Œä¸‹é¢è¿™ç§åšæ³•æ‰æ˜¯æˆ‘è§‰å¾—æœ€å¥½çš„ã€‚ ç¬¬äºŒæ¬¡å†™ 1234567891011121314151617181920212223class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; return add(l1,l2,0); &#125; public ListNode add(ListNode l1, ListNode l2, int bit) &#123; if (l1 == null &amp;&amp; l2 == null &amp;&amp; bit == 0) &#123; return null; &#125; int val = bit; // bitå°±æ˜¯è¡¨ç¤ºæ¯æ¬¡æ˜¯å¦è¿›ä½ if (l1 != null) &#123; val += l1.val; l1 = l1.next; &#125; if (l2 != null) &#123; val += l2.val; l2 = l2.next; &#125; ListNode node = new ListNode(val % 10); node.next = add(l1, l2, val / 10); return node; &#125;&#125; æ³•ä¸‰ï¼šå¹¶è¡Œéå†åˆ†æï¼šç›´æ¥ä¸¤æ¡é“¾è¡¨ä¸€èµ·éå†ï¼Œç”¨leftå­˜å‚¨æ˜¯å¦è¿›ä½ 1234567891011121314151617181920212223242526272829class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode cur = new ListNode(0); ListNode temp = cur; int left = 0; // å½“ä¸¤è€…æœ‰ä¸€ä¸ªæ²¡æœ‰éå†åˆ°å°¾éƒ¨å°±ä¸€ç›´éå† while(l1 != null || l2 != null) &#123; int x = (l1 == null ? 0 : l1.val); int y = (l2 == null ? 0 : l2.val); int sum = x + y + left; // left = sum &gt;= 10 ? 1 : 0;ä¸¤è€…ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸‹è€…è¡¨è¾¾æ›´ç®€å• left = sum / 10; sum = sum % 10; temp.next = new ListNode(sum); temp = temp.next; if(l1 != null) l1 = l1.next; if(l2 != null) l2 = l2.next; &#125; // åšå•ç‹¬å¤„ç† if(left == 1) &#123; temp.next = new ListNode(left); &#125; return cur; &#125;&#125; ç¬¬äºŒæ¬¡å†™ 123456789101112131415161718192021222324252627class Solution &#123; public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode t1 = l1; ListNode t2 = l2; int bit = 0; ListNode res = new ListNode(); ListNode temp = res; // ä¸‰ç§æƒ…å†µå¯ä»¥ç»§ç»­å¾ªç¯ // 1ã€tlæœªåˆ°å¤´ // 2ã€t2æœªåˆ°å¤´ // 3ã€bitä¸º1ï¼Œè¡¨ç¤ºè¿›ä½ while(t1 != null || t2 != null || bit != 0)&#123; int a = t1 == null? 0 : t1.val; int b = t2 == null? 0 : t2.val; // a+b+bitè¡¨ç¤ºè¯¥ä½çš„å’Œï¼Œæ”¾å…¥è¯¥åœ°æ–¹çš„æ˜¯ä½™æ•° temp.next = new ListNode((a+b+bit)%10); temp = temp.next; // bitè¡¨ç¤ºçš„æ˜¯æ˜¯å¦æ»¡åè¿›ä½ï¼Œåªè¦è¯¥æ•°é™¤ä»¥10ï¼Œä¸º1åˆ™è¡¨ç¤ºè¯¥æ•°å¤§äº10äº† bit = (a+b+bit)/10; if(t1 != null) t1 = t1.next; if(t2 != null) t2 = t2.next; &#125; return res.next; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ","slug":"ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ","date":"2022-02-21T10:52:45.000Z","updated":"2022-06-18T13:18:18.710Z","comments":true,"path":"ç®—æ³•/2022/02/21/ã€1-Easyã€‘ä¸¤æ•°ä¹‹å’Œ/","link":"","permalink":"http://li-zhi.net.cn/%E7%AE%97%E6%B3%95/2022/02/21/%E3%80%901-Easy%E3%80%91%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","excerpt":"","text":"ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums = [2,7,11,15], target = 9è¾“å‡ºï¼š[0,1]è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [3,2,4], target = 6è¾“å‡ºï¼š[1,2] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [3,3], target = 6è¾“å‡ºï¼š[0,1] æç¤ºï¼š 2 &lt;= nums.length &lt;= 104 -109 &lt;= nums[i] &lt;= 109 -109 &lt;= target &lt;= 109 åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ è¿›é˜¶ï¼šä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n2) çš„ç®—æ³•å—ï¼Ÿ Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ³•ä¸€ï¼šæš´åŠ›æšä¸¾æ³•åˆ†æï¼šé¢˜ç›®æ„æ€å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯ç»™ä½ ä¸€ä¸ªtargetï¼Œç„¶åç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢æ‰¾åˆ°å¯ä»¥å’Œæ˜¯è¿™ä¸ªtargetçš„é‚£ä¸¤ä¸ªæ•°çš„ç´¢å¼•æ•°ç»„ ä¸Šä»£ç ï¼š 123456789101112131415class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; int[] result = new int[]&#123;-1,-1&#125;; for (int i = 0; i &lt; nums.length; i++) &#123; for (int j = 0; j &lt; nums.length; j++) &#123; if(j!=i&amp;&amp;nums[j]==target-nums[i])&#123; result[0]=i; result[1]=j; return result; &#125; &#125; &#125; return result; &#125;&#125; æ³•äºŒï¼šå“ˆå¸Œè¡¨åˆ†æï¼šæ³•ä¸€å–åˆ°target-nums[i]ä½¿ç”¨çš„æ˜¯éå†ç®—æ³•ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨hashmapåœ¨è¿™ä¸€ç‚¹æé«˜æ•ˆç‡ hashmapçš„ é”®ä¸ºnums[i] å€¼ä¸ºç´¢å¼• ä¸Šä»£ç ï¼š 123456789101112class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; HashMap&lt;Integer,Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; if(map.containsKey(target-nums[i]))&#123; return new int[]&#123;map.get(target-nums[i]),i&#125;; &#125; map.put(nums[i],i); &#125; return new int[]&#123;-1,-1&#125;; &#125;&#125; ç¬¬äºŒä¸ªè§£æ³•çš„æ ¸å¿ƒåœ¨äºï¼šhash è¡¨æ˜¯å¦‚ä½•å°† æŸ¥æ‰¾ target - xï¼Œå…ƒç´ ä» O(N),é™ä½åˆ° Oï¼ˆ1ï¼‰çš„ï¼Ÿ å…¶å®ç®—æ³•ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„å°±ä¸¤ä¸ªï¼Œä¸ç®¡å¤šä¹ˆé«˜æ·±çš„ç®—æ³•åº•å±‚éƒ½æ˜¯è¿™ä¸¤ä¸ªç»“æ„ ä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œæ•ˆç‡ä¸ºO(1) ä¸€ä¸ªæ˜¯é“¾è¡¨ï¼Œæ•ˆç‡ä¸ºO(N) è¦æƒ³è¾¾åˆ°Oï¼ˆ1ï¼‰çš„ç®—æ³•ï¼Œåº•å±‚ä¸€å®šæ˜¯æ•°ç»„ã€‚putæ–¹æ³•å†…éƒ¨é¦–å…ˆå¯¹ keyåšäº† hashï¼ˆï¼‰è¿ç®—ï¼Œå°†å…¶æ˜ å°„åˆ°æ•°ç»„ä¸Šï¼Œåªè¦ä¸åšæ‰©å®¹ï¼Œæˆ–è€…ç¼©å®¹ï¼Œkey åœ¨æ•°ç»„çš„ä½ç½®å°±æ˜¯å›ºå®šçš„ã€‚æ¯æ¬¡é€šè¿‡getæ–¹æ³•è·å–å€¼å¾—æ—¶å€™ï¼Œå…ˆå–å¾—å…¶hashå€¼ï¼Œç„¶åå†é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼ï¼Œç›´æ¥è¿”å›ï¼Œæ‰€ä»¥æ˜¯Oï¼ˆ1ï¼‰çš„æ•ˆç‡","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ","slug":"å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ","date":"2022-02-21T07:58:53.000Z","updated":"2022-02-21T10:43:35.445Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/21/å»IOEæ˜¯ä»€ä¹ˆï¼Ÿ/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/21/%E5%8E%BBIOE%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","excerpt":"","text":"ä»€ä¹ˆå»IOEï¼ŸIæ˜¯ä»¥IBMä¸ºä»£è¡¨çš„å°å‹æœºå°å‹æœºä¸X86æœåŠ¡å™¨çš„åŒºåˆ«ï¼š ä»·æ ¼ ä¸€å°å°å‹æœºå¯ä»¥ä¹°3-4å°X86æœåŠ¡å™¨ æŒ‡ä»¤ X86 å…¼å®¹æ€§å¥½ æ€§èƒ½å·® å°å‹æœº å…¼å®¹æ€§å·® æ€§èƒ½å¥½ æ€§èƒ½ é¢†åŸŸ Oæ˜¯ä»¥ORACLEä¸ºä»£è¡¨çš„å…³ç³»å‹æ•°æ®åº“æ¶æ„2013å¹´5æœˆ17æ—¥ï¼Œæœ€åä¸€å°IBMå°å‹æœºåœ¨æ”¯ä»˜å®ä¸‹çº¿äº†ï¼Œè¿™ä¸ªæ˜¯å»IOEçš„ä¸€ä¸ªé‡è¦çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ORACLEæ•°æ®åº“å‘Šåˆ«é˜¿é‡Œå·´å·´æ˜¯åœ¨2013å¹´çš„7æœˆ10æ—¥ï¼Œè¿™ä¸€å¤©é˜¿é‡Œå·´å·´çš„ä¸€ä¸ªé‡è¦å¹¿å‘Šç³»ç»Ÿçš„ORACLEæ•°æ®åº“ä¹Ÿä¸‹çº¿äº†ï¼Œä¹Ÿæ˜¯æ·˜å®æœ€åä¸€ä¸ªORACLEæ•°æ®åº“ï¼Œè¿™ä¸¤ä»¶äº‹æƒ…åˆåœ¨ä¸€èµ·å•Šï¼Œä¹Ÿæ˜¯æ„æˆé˜¿é‡Œå·´å·´çš„ä¸€ä¸ªé‡è¦çš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚ é˜¿é‡Œå·´å·´å‘¢ä¸€ç›´æ˜¯é‡‡ç”¨çš„æ˜¯ORCALEæ•°æ®åº“ï¼Œå¹¶åˆ©ç”¨å°å‹æœºå’Œé«˜ç«¯çš„å­˜å‚¨è®¾å¤‡æé«˜æ€§èƒ½å’Œæ•°æ®åº“çš„æ€§èƒ½ï¼Œä½†éšç€ä¸šåŠ¡çš„ä¸åœçš„å‘å±•ï¼Œæ•°æ®é‡æ„ˆå‘åºå¤§ã€‚ ä¼ ç»Ÿçš„ç§»åŠ¨å¼ORACLEæ•°æ®åº“çš„æ‰©å±•ï¼Œä¹Ÿå­˜åœ¨ç€ä¸€äº›ç“¶é¢ˆã€‚ä¼ ç»Ÿçš„ORACLEè½¯ä»¶ä¸ºä»£è¡¨çš„å…³ç³»æ•°æ®åº“ï¼Œå¤§å¤šæ•°å‘¢æ˜¯ä»¥é›†ä¸­å¼æ¶æ„ä¸ºä¸»ï¼Œè¿™äº›ä¼ ç»Ÿçš„æ•°æ®åº“è½¯ä»¶æ˜¯æœ€å¤§çš„ç‰¹ç‚¹å‘¢ï¼Œå°±æ˜¯å°†æ‰€æœ‰çš„æ•°æ®é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä¾èµ–å¤§å‹çš„é«˜ç«¯è®¾å¤‡æ¥æé«˜å¤„ç†çš„æ€§èƒ½å’Œæ‰©å±•æ€§ï¼Œé›†ä¸­å¼æ•°æ®åº“çš„æ‰©å±•å‘¢ï¼Œä¸»è¦æ˜¯é‡‡ç”¨å‘ä¸Šæ‰©å±•çš„é‚£è¿™ç§æ–¹å¼å•Šï¼Œå°±æ˜¯é€šè¿‡å¢åŠ CPUå†…å­˜çš„æ–¹å¼æé«˜å¤„ç†èƒ½åŠ›ï¼Œè¿™ç§å¤„ç†çš„æ¶æ„å°±ä½¿å¾—æ•°æ®åº“æˆä¸ºä¸€ä¸ªå¾ˆå¤§çš„ä¸€ä¸ªç³»ç»Ÿç“¶é¢ˆï¼Œè¶Šæ¥è¶Šä¸é€‚åˆç›®å‰æµ·é‡æ•°æ®å¯¹è®¡ç®—èƒ½åŠ›çš„ä¸€ä¸ªéœ€æ±‚ã€‚ Eæ˜¯ä»¥EMCä¸ºä»£è¡¨çš„é«˜ç«¯SANå­˜å‚¨è®¾å¤‡SANï¼šStorage Area Network EMCæ˜¯ä¸€å®¶ç¾å›½ä¿¡æ¯å­˜å‚¨å…¬å¸ã€‚","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹","slug":"Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹","date":"2022-02-21T02:00:54.000Z","updated":"2022-02-24T03:51:49.953Z","comments":true,"path":"javaEE/Redis/2022/02/21/Redis-äº”å¤§åŸºç¡€æ•°æ®ç±»å‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/21/Redis-%E4%BA%94%E5%A4%A7%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"åŸºç¡€çŸ¥è¯†redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“Redisçš„ç“¶é¢ˆæ˜¯æ ¹æ®æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ã€‚ ä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜å¯ä»¥è¿™ä¹ˆå¿«ï¼Ÿredisæ˜¯cè¯­è¨€å†™çš„ï¼Œå®˜ç½‘æä¾›çš„æ€§èƒ½æ•°æ® 1s 11ä¸‡è¯»å– 1s 8ä¸‡å†™å…¥ è¯¯åŒºï¼š é«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ å¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ CPUâ€”&gt;å†…å­˜â€”&gt;ç¡¬ç›˜ æ ¸å¿ƒï¼šrediså°†æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾å…¥å†…å­˜ä¸­ï¼Œæ‰€ä»¥ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡æ˜¯å¾ˆé«˜çš„ï¼Œå¤šçº¿ç¨‹ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼Œååˆ†è€—æ—¶ï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªCPUä¸Šçš„ï¼Œæ²¡æœ‰çº¿ç¨‹è°ƒåº¦çš„è€—æ—¶ äº”å¤§æ•°æ®ç±»å‹åŸºç¡€å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738# åˆ‡æ¢æ•°æ®åº“select index# æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ•°æ®æ•°dbsize# æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¬¦åˆpatternçš„keykeys pattern# æ˜¯å¦å­˜åœ¨è¯¥keyï¼Œå­˜åœ¨åˆ™è¿”å›1ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0exists key# ç§»é™¤keymove key#è®¾ç½®kvset key value# æŸ¥çœ‹keyå­˜å‚¨çš„å€¼get key# æŸ¥çœ‹ç±»å‹type key# è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºsecondssexpire key seconds#æŸ¥çœ‹å‰©ä½™æ—¶é—´ttl key# æ¸…ç©ºå½“å‰æ•°æ®åº“flushdb# æ¸…ç©ºæ‰€æœ‰çš„æ•°æ®åº“çš„å†…å®¹flushall# éšæœºè¾“å‡ºä¸€ä¸ªkeyrandomkey String123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123# è¿½åŠ keyå­˜å‚¨çš„valueå­—ç¬¦ä¸²# å¦‚æœkeyä¸å­˜åœ¨ï¼Œåˆ™è¯¥å‘½ä»¤ç›¸å½“äºset# append key valueappend key &quot;appendstring&quot;# æŸ¥çœ‹keyå­˜å‚¨çš„å­—ç¬¦ä¸²çš„é•¿åº¦strlen key# è‡ªå¢1ï¼Œè‡ªå‡1çš„æ“ä½œ# incr key # decr key127.0.0.1:6379&gt; set views 1OK127.0.0.1:6379&gt; incr views(integer) 2127.0.0.1:6379&gt; incr views(integer) 3127.0.0.1:6379&gt; decr views(integer) 2127.0.0.1:6379&gt; decr views(integer) 1# ä¸€æ¬¡æ€§åŠ æˆ–è€…å‡æŒ‡å®šæ•°å­—çš„æ“ä½œ# incrby key increment# decrby key decrement127.0.0.1:6379&gt; incrby views 10(integer) 11127.0.0.1:6379&gt; decrby views 10(integer) 1# è·å–ä¸€ä¸ªèŒƒå›´å†…çš„å­—ç¬¦ä¸²ï¼Œå³substring==&gt;[start,end)# æ³¨æ„è¿™é‡Œçš„getrangeæ˜¯é—­åŒºé—´ï¼Œ[start,end]# getrange key start end127.0.0.1:6379&gt; set name zhimaOK127.0.0.1:6379&gt; getrange name 0 3&quot;zhim&quot;127.0.0.1:6379&gt; getrange name 0 -1&quot;zhima&quot;# æ›¿æ¢å­—ç¬¦ä¸²# setrange key offset value127.0.0.1:6379&gt; set key randomstringOK127.0.0.1:6379&gt; setrange key 3 xxx(integer) 12127.0.0.1:6379&gt; get key&quot;ranxxxstring&quot;# setex (set with expire) è®¾ç½®è¿‡æœŸæ—¶é—´# è®¾ç½®è¯¥å­—æ®µè¿‡æœŸæ—¶é—´ä¸º30s# setex key seconds valuesetex key 30 &quot;expire&quot;# å¦‚æœä¸å­˜åœ¨åˆ™è®¾ç½®å€¼ï¼Œåœ¨åˆ†å¸ƒå¼é”ä¸­ç»å¸¸ä½¿ç”¨# setnx (set if not exist)# setnx key value127.0.0.1:6379&gt; set key1 value1OK127.0.0.1:6379&gt; get key1&quot;value1&quot;127.0.0.1:6379&gt; setnx key1 &quot;setnx&quot;(integer) 0127.0.0.1:6379&gt; set key1 &quot;setnx&quot;OK127.0.0.1:6379&gt; get key1&quot;setnx&quot;# æ‰¹é‡è·å–å’Œè®¾ç½®å€¼ # mget mset msetnx# mset key value [key value..]# mget key [key..]# msetex key value [key value..]127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3OK127.0.0.1:6379&gt; get k2&quot;v2&quot;127.0.0.1:6379&gt; keys *1) &quot;k2&quot;2) &quot;k1&quot;3) &quot;k3&quot;127.0.0.1:6379&gt; mget k1 k21) &quot;v1&quot;2) &quot;v2&quot;127.0.0.1:6379&gt; msetnx k1 modifiedv1 k4 v4 # è¯¥æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼(integer) 0127.0.0.1:6379&gt; get k4(nil)# åˆ é™¤# del key127.0.0.1:6379&gt; set k1 v1OK127.0.0.1:6379&gt; keys *1) &quot;k1&quot;127.0.0.1:6379&gt; del k1(integer) 1127.0.0.1:6379&gt; keys *(empty list or set)# å¯¹è±¡set user:1&#123;name:zhangsan,age:3&#125; # è®¾ç½®ä¸€ä¸ªuser:1å¯¹è±¡ å€¼ä¸ºjsonå­—ç¬¦ä¸²æ¥ä¿å­˜# è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„å±æ€§ï¼š&#123;className&#125;:&#123;id&#125;:&#123;field&#125;ï¼Œåœ¨redisä¸­æ˜¯å¯ä»¥çš„127.0.0.1:6379&gt; mset user:1:name zhima user:1:age 19OK127.0.0.1:6379&gt; keys *1) &quot;user:1:age&quot;2) &quot;user:1:name&quot;127.0.0.1:6379&gt; mget user:1:name user:1:age1) &quot;zhima&quot;2) &quot;19&quot;# ç»„åˆå‘½ä»¤# getsetå…ˆå–å¾—å½“å‰çš„å€¼å¹¶è¿”å›ï¼Œç„¶åä¿®æ”¹å½“å‰çš„å€¼# getset key value127.0.0.1:6379&gt; getset db redis(nil)127.0.0.1:6379&gt; get db&quot;redis&quot;127.0.0.1:6379&gt; getset db modified&quot;redis&quot;127.0.0.1:6379&gt; get db&quot;modified&quot; Listå¯ä»¥ç»™å…¶è®¾ç½®ä¸€ä¸ªä½¿ç”¨è§„åˆ™ï¼Œåˆ™å¯ä»¥å°†å…¶å®ç°æ ˆæˆ–è€…é˜Ÿåˆ—çš„åŠŸèƒ½ 1234567891011# è®¾ç½®å’Œå–å€¼# lrange key start stop [start,stop]127.0.0.1:6379&gt; lpush list1 v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list1 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; lrange list1 0 11) &quot;v3&quot;2) &quot;v2&quot; åˆ†æå¯çŸ¥è¿™é‡Œçš„lpushæ˜¯å¤´æ’å…¥ï¼Œä¹Ÿå°±æ˜¯leftæ’å…¥ï¼Œé‚£ä¸ä¹‹å¯¹åº”çš„è‚¯å®šè¿˜æœ‰ä¸ªå°¾æ’å…¥ï¼Œå³rightæ’å…¥ï¼Œä½†æ˜¯å•Šåªæœ‰LRANGEæ“ä½œæ¥å–å¾—é›†åˆé‡Œçš„æ•°æ®ï¼Œæ²¡æœ‰RRANGEæ“ä½œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131127.0.0.1:6379&gt; rpush list v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list 0 -11) &quot;v1&quot;2) &quot;v2&quot;3) &quot;v3&quot;# åˆ é™¤å¤´éƒ¨çš„å€¼å¹¶è¿”å›# lpop key127.0.0.1:6379&gt; lpop list&quot;v1&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;2) &quot;v3&quot;# åˆ é™¤å°¾éƒ¨çš„å€¼å¹¶è¿”å›# rpop key127.0.0.1:6379&gt; rpop list&quot;v3&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;# è·å–ç´¢å¼•å¤„çš„å…ƒç´ # lindex key index127.0.0.1:6379&gt; lpush list v1 v2 v3(integer) 3127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; lindex list 0&quot;v3&quot;# è·å–é›†åˆé•¿åº¦# llen key 127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v2&quot;3) &quot;v1&quot;127.0.0.1:6379&gt; llen list(integer) 3# ç§»é™¤æŒ‡å®šä¸ªæ•°çš„åŒ¹é…çš„å€¼# lrem key count value127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v3&quot;3) &quot;v2&quot;4) &quot;v1&quot;127.0.0.1:6379&gt; lrem list 1 v1(integer) 1127.0.0.1:6379&gt; lrange list 0 -11) &quot;v3&quot;2) &quot;v3&quot;3) &quot;v2&quot;127.0.0.1:6379&gt; lrem list 2 v3(integer) 2127.0.0.1:6379&gt; lrange list 0 -11) &quot;v2&quot;# æˆªå–æŒ‡å®šä½ç½®çš„å€¼# ltrim key start stop127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; ltrim list 0 2OK127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;# å°†é›†åˆå°¾éƒ¨å…ƒç´ ç§»é™¤ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªé›†åˆå¤´éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ # rpoplpush source destination127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; rpoplpush list otherlist&quot;v1&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;127.0.0.1:6379&gt; lrange otherlist 0 -11) &quot;v1&quot;# ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„å…ƒç´ çš„å€¼127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;127.0.0.1:6379&gt; lset list 0 modifiedOK127.0.0.1:6379&gt; lrange list 0 -11) &quot;modified&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;# lpush key value [value...]# å½“è¯¥é›†åˆä¸å­˜åœ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»º# lset key index value# å½“è¯¥é›†åˆä¸å­˜åœ¨çš„æ—¶å€™ä¼šæŠ¥é”™# åœ¨æŒ‡å®šå€¼çš„å‰é¢|åé¢æ’å…¥å€¼# linsert key BEFORE|AFTER pivot value127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;v3&quot;4) &quot;v2&quot;5) &quot;v1&quot;127.0.0.1:6379&gt; linsert list before v2 brforev2(integer) 6127.0.0.1:6379&gt; linsert list after v4 afterv4(integer) 7127.0.0.1:6379&gt; lrange list 0 -11) &quot;v5&quot;2) &quot;v4&quot;3) &quot;afterv4&quot;4) &quot;v3&quot;5) &quot;brforev2&quot;6) &quot;v2&quot;7) &quot;v1&quot; è¯¥Listå®è´¨ä¸Šæ˜¯ä½¿ç”¨é“¾è¡¨å®ç°çš„ æ ˆï¼šå‡ºæ ˆï¼ˆLpopï¼‰å…¥æ ˆï¼ˆLpushï¼‰&#x3D;&#x3D; å‡ºæ ˆï¼ˆRpopï¼‰ å…¥æ ˆï¼ˆRpushï¼‰ é˜Ÿåˆ—ï¼šå‡ºé˜Ÿï¼ˆLpopï¼‰å…¥é˜Ÿï¼ˆRpushï¼‰&#x3D;&#x3D; å‡ºæ ˆï¼ˆRpopï¼‰ å…¥æ ˆï¼ˆLpushï¼‰ Setè¯¥é›†åˆçš„ç‰¹ç‚¹æ˜¯ï¼šæ— åºä¸é‡å¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112# æ·»åŠ ä¸€ä¸ªå…ƒç´ # sadd key member [member..]# æŸ¥çœ‹æ‰€æœ‰çš„æˆå‘˜# smembers key127.0.0.1:6379&gt; sadd set a b c a(integer) 3127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;# åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ 127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; sismember set c(integer) 1127.0.0.1:6379&gt; sismember set d(integer) 0# æŸ¥çœ‹é›†åˆçš„é•¿åº¦127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; scard set(integer) 3# åˆ é™¤æŸä¸ªå…ƒç´ # srem key member [member..]127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a&quot;3) &quot;c&quot;127.0.0.1:6379&gt; srem set a c(integer) 2127.0.0.1:6379&gt; smembers set1) &quot;b&quot;# éšæœºè¿”å›æŒ‡å®šä¸ªæ•°çš„å…ƒç´ # srandmember key count127.0.0.1:6379&gt; smembers set1) &quot;d&quot;2) &quot;a&quot;3) &quot;b&quot;4) &quot;c&quot;5) &quot;e&quot;127.0.0.1:6379&gt; srandmember set 31) &quot;d&quot;2) &quot;e&quot;3) &quot;c&quot;127.0.0.1:6379&gt; srandmember set 31) &quot;d&quot;2) &quot;b&quot;3) &quot;a# éšæœºåˆ é™¤æŒ‡å®šä¸ªæ•°çš„å…ƒç´ ï¼Œä¸å†™counté»˜è®¤ä¸º1# spop key [count] 127.0.0.1:6379&gt; smembers set1) &quot;d&quot;2) &quot;a&quot;3) &quot;b&quot;4) &quot;c&quot;5) &quot;e&quot;127.0.0.1:6379&gt; spop set 31) &quot;c&quot;2) &quot;e&quot;3) &quot;a&quot;127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;d&quot;# å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åˆ°å¦ä¸€ä¸ªé›†åˆä¸­# smove source destination member127.0.0.1:6379&gt; sadd set a b c d e(integer) 5127.0.0.1:6379&gt; smove set set2 a(integer) 1127.0.0.1:6379&gt; smembers set21) &quot;a&quot;127.0.0.1:6379&gt; smembers set1) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;# äº¤é›† sinter key [key..]# å·®é›† sdiff key [key..]# å¹¶é›† sunion key [key..]127.0.0.1:6379&gt; smembers set1) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;127.0.0.1:6379&gt; smembers set21) &quot;b&quot;2) &quot;a&quot;3) &quot;g&quot;127.0.0.1:6379&gt; sinter set set21) &quot;b&quot;127.0.0.1:6379&gt; sdiff set set21) &quot;d&quot;2) &quot;e&quot;3) &quot;c&quot;127.0.0.1:6379&gt; sunion set set21) &quot;c&quot;2) &quot;b&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;a&quot;6) &quot;g&quot; HashMapé›†åˆï¼Œkey-Mapé›†åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100# hset key field value# æ”¾å…¥ä¸€ä¸ªmap# hget key field 127.0.0.1:6379&gt; hset hashmap name zhima(integer) 1127.0.0.1:6379&gt; hget hashmap name&quot;zhima&quot;# è®¾ç½®å’Œå–å¾—å¤šä¸ªé”®å€¼å¯¹# hmset key field name [field name..]# hmget key field [field..]127.0.0.1:6379&gt; hmset user:1 name zhim age 10OK127.0.0.1:6379&gt; hmget user:1 name age1) &quot;zhim&quot;2) &quot;10&quot;# ä½¿ç”¨hsetæ›´æ–°é”®å€¼å¯¹127.0.0.1:6379&gt; hset user:1 name zhima(integer) 0127.0.0.1:6379&gt; hmget user:1 name age1) &quot;zhima&quot;2) &quot;19&quot;# å–å¾—æ‰€æœ‰çš„é”®å€¼å¯¹# hgetall key 127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;19&quot;# è·å–é”®å€¼å¯¹ä¸ªæ•°# hlen key127.0.0.1:6379&gt; hlen user:1(integer) 2# åˆ é™¤é”®å€¼å¯¹# hdel key field127.0.0.1:6379&gt; hdel user:1 name(integer) 1127.0.0.1:6379&gt; hgetall user:11) &quot;age&quot;2) &quot;19&quot;# æ˜¯å¦å­˜åœ¨è¯¥é”®å€¼å¯¹# hexists key field127.0.0.1:6379&gt; hexists user:1 name(integer) 1127.0.0.1:6379&gt; hexists user:1 unknown(integer) 0# è·å¾—æ‰€æœ‰çš„é”®# hkeys key# è·å¾—æ‰€æœ‰çš„å€¼# hvals key127.0.0.1:6379&gt; hkeys user:11) &quot;name&quot;2) &quot;age&quot;127.0.0.1:6379&gt; hvals user:11) &quot;zhima&quot;2) &quot;19&quot;# å¢åŠ å€¼# hincrby key field increment # ï¼æ³¨æ„ï¼šï¼è¿™é‡Œæ²¡æœ‰è‡ªå‡çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä¸ºincrementè®¾ç½®è´Ÿæ•°æ¥å®ç°å‡127.0.0.1:6379&gt; hincrby user:1 name 1(error) ERR hash value is not an integer127.0.0.1:6379&gt; hincrby user:1 age 2(integer) 21127.0.0.1:6379&gt; hmset user:2 name lizhi age &quot;19&quot;OK127.0.0.1:6379&gt; hgetall user:21) &quot;name&quot;2) &quot;lizhi&quot;3) &quot;age&quot;4) &quot;19&quot;127.0.0.1:6379&gt; hincrby user:2 age 2(integer) 21127.0.0.1:6379&gt; hincrby user:2 age -1(integer) 20# å¦‚æœä¸å­˜åœ¨è¯¥å­—æ®µï¼Œåˆ™æ·»åŠ è¯¥å­—æ®µ# å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œæ“ä½œ# hsetnx key field value127.0.0.1:6379&gt; hsetnx user:1 name modified(integer) 0127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;21&quot;127.0.0.1:6379&gt; hsetnx user:1 address unknown(integer) 1127.0.0.1:6379&gt; hgetall user:11) &quot;name&quot;2) &quot;zhima&quot;3) &quot;age&quot;4) &quot;21&quot;5) &quot;address&quot;6) &quot;unknown&quot; Hashmapé€‚åˆå­˜å‚¨å¯¹è±¡ Zsetï¼ˆæœ‰åºåˆ—è¡¨ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172# æ·»åŠ å€¼ è¿™ä¸ªscoreç›¸å½“äºæƒé‡ï¼Œç”¨æ¥æ’åº# zadd key [NX|XX] [CH] [INCR] score member [score member..]127.0.0.1:6379&gt; zadd myzset 1 one(integer) 1127.0.0.1:6379&gt; zadd myzset 2 two 3 three(integer) 2# æ­£åºè¾“å‡º# zrange key start stop [withscores]127.0.0.1:6379&gt; zrange myzset 0 -11) &quot;one&quot;2) &quot;two&quot;3) &quot;three&quot;# å€’å™è¾“å‡º# zrevrange key start stop [withscores]127.0.0.1:6379&gt; zrevrange salary 0 -11) &quot;lizhi&quot;2) &quot;xiaozhang&quot;3) &quot;zhima&quot;# æºå¸¦æƒé‡è¾“å‡º127.0.0.1:6379&gt; zrange salary 0 -1 withscores1) &quot;zhima&quot;2) &quot;1000&quot;3) &quot;xiaozhang&quot;4) &quot;1500&quot;5) &quot;lizhi&quot;6) &quot;2000&quot;# zrangebyscore key min max [withscores] [limit offset count]# è·å–scoreåœ¨minåˆ°maxä¹‹é—´çš„å…ƒç´ ï¼Œé—­åŒºé—´127.0.0.1:6379&gt; zrangebyscore salary 1000 16001) &quot;zhima&quot;2) &quot;xiaozhang&quot;127.0.0.1:6379&gt; zrangebyscore salary -inf +inf1) &quot;zhima&quot;2) &quot;xiaozhang&quot;3) &quot;lizhi&quot;# zrevrangebyscore key max min [withscores] [limit offset count]# å€’å™è¾“å‡ºscoreåœ¨maxåˆ°minä¹‹é—´çš„ï¼Œé—­åŒºé—´ï¼Œ# [limit offset count]æ˜¯æŒ‡å®šæ˜¾ç¤ºä»offsetå¼€å§‹çš„countä¸ªæ•°æ®ï¼ŒåŒ…æ‹¬offsetæ‰€åœ¨çš„å…ƒç´ 127.0.0.1:6379&gt; zrevrangebyscore salary 1600 10001) &quot;xiaozhang&quot;2) &quot;zhima&quot;127.0.0.1:6379&gt; zadd salary 10 xiaoming 27 ziaohzhyang 19 zhima 25 lizhi(integer) 4127.0.0.1:6379&gt; zrangebyscore salary 10 191) &quot;xiaoming&quot;2) &quot;zhima&quot;127.0.0.1:6379&gt; zrangebyscore salary 10 25 withscores1) &quot;xiaoming&quot;2) &quot;10&quot;3) &quot;zhima&quot;4) &quot;19&quot;5) &quot;lizhi&quot;6) &quot;25&quot;127.0.0.1:6379&gt; zrangebyscore salary 10 25 limit 0 21) &quot;xiaoming&quot;2) &quot;zhima&quot;# åˆ é™¤å…ƒç´ 127.0.0.1:6379&gt; zrem salary xiaoming(integer) 1# æŸ¥çœ‹è¯¥é›†åˆçš„é•¿åº¦# zcard key127.0.0.1:6379&gt; zcard salary(integer) 3# æŸ¥çœ‹ç¬¦åˆ[min,max]åŒºé—´çš„å…ƒç´ ä¸ªæ•°# zcount key min max127.0.0.1:6379&gt; zcount salary 10 19(integer) 2 æ³¨ï¼šä»¥ä¸Šå‘½ä»¤åªæ˜¯å¸¸ç”¨å‘½ä»¤ï¼Œæ›´å¤šå‘½ä»¤å¯ä»¥åœ¨å®˜ç½‘æŸ¥çœ‹ è‹±æ–‡å®˜ç½‘åœ°å€ï¼šhttps://redis.io/ ä¸­æ–‡å®˜ç½‘åœ°å€ï¼šhttp://www.redis.cn/","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Redis-å‰æœŸå‡†å¤‡","slug":"Redis-å‰æœŸå‡†å¤‡","date":"2022-02-19T09:36:09.000Z","updated":"2022-02-21T04:15:07.083Z","comments":true,"path":"javaEE/Redis/2022/02/19/Redis-å‰æœŸå‡†å¤‡/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Redis/2022/02/19/Redis-%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/","excerpt":"","text":"Nosqlæˆ‘ä»¬å…ˆå‰å­¦çš„éƒ½æ˜¯mysqlï¼Œå®ƒæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè¡¨ä¸è¡¨ä¹‹é—´æœ‰è”ç³»ã€‚ NoSqlå³éå…³ç³»å‹æ•°æ®åº“ã€‚ MySql MySqlçš„ç“¶é¢ˆ æ•°æ®å¤ªå¤§äº†ï¼Œä¸€ä¸ªæœºå™¨å°±æ”¾ä¸ä¸‹äº† 30ä¸‡ä»¥ä¸Šçš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ç´¢å¼•ï¼ˆB+Treeï¼‰ è®¿é—®é‡å¤§çš„è¯ï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§ è§£å†³æ–¹æ¡ˆï¼šè¯»å†™åˆ†ç¦»ï¼ˆå‚ç›´æ‹†åˆ†ï¼‰ å› ä¸º80%ç½‘ç«™å¯¹äºæ•°æ®çš„æ“ä½œéƒ½æ˜¯è¯»å–ï¼Œä¸ä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†æå‡æ•ˆç‡ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¯»å–å®Œæ•°æ®åï¼Œå°†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢å¦‚æœæ˜¯åŒæ ·çš„ä¸šåŠ¡ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®ï¼Œä¼šå¤§å¤§æå‡æ€§èƒ½ï¼Œè§£å†³äº†è¯»çš„å‹åŠ› è§£å†³æ–¹æ¡ˆï¼šåˆ†åº“åˆ†è¡¨ï¼ŒMySqlé›†ç¾¤ï¼ˆæ°´å¹³æ‹†åˆ†ï¼‰æ¯ä¸€ä¸ªé›†ç¾¤æ”¾ä¸€äº›è¡¨å’Œæ•°æ®åº“ï¼Œè¿™æ ·çš„æ“ä½œè§£å†³äº†å†™çš„å‹åŠ› å¦‚ä»Šçš„æ•°æ®æ•°æ®é‡å¤§ï¼Œå˜åŒ–å¿«ï¼Œå¯¼è‡´mysqlæ— æ³•å¾ˆå¥½çš„è§£å†³é—®é¢˜ã€‚ æœ‰çš„äººä½¿ç”¨mysqlæ¥å­˜å‚¨ä¸€äº›æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œåšå®¢æ¨æ–‡ï¼Œå›¾ç‰‡ç­‰ï¼Œæ•°æ®åº“éå¸¸åºå¤§ï¼Œæ•ˆç‡ååˆ†ä½ä¸‹ã€‚ å¦‚æœæœ‰ä¸€ç§æ•°æ®åº“æ¥ä¸“é—¨å¤„ç†è¿™ç§æ•°æ®ï¼Œmysqlçš„å‹åŠ›å°±å˜å°äº†ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨Nosqläº† ç‰¹ç‚¹ æ–¹ä¾¿æ‹“å±•ï¼ˆæ•°æ®ä¹‹é—´è”ç³»ä½ï¼Œå¾ˆå¥½æ‹“å±•ï¼‰ å¤§æ•°æ®é«˜æ€§èƒ½ï¼ˆRedis1sè¯»11ä¸‡æ¬¡ï¼Œå†™8ä¸‡æ¬¡ï¼ŒNosqlçš„ç¼“å­˜è®°å½•ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼‰ æ•°æ®å¤šæ ·ï¼Œä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ å¤§æ•°æ®æ—¶ä»£çš„3Vï¼šå‡ºç°çš„ä¸€äº›é—®é¢˜ Volume æµ·é‡ Variety å¤šæ · Velocity å®æ—¶ å¤§æ•°æ®æ—¶ä»£çš„3é«˜ï¼šå¯¹ç¨‹åºçš„è¦æ±‚ é«˜æ€§èƒ½ é«˜å¯ç”¨ï¼ˆæ‰©ï¼‰ é«˜å¹¶å‘ Nosqlçš„å››å¤§åˆ†ç±» KVé”®å€¼å¯¹ æ–°æµªï¼šRedis ç¾å›¢ï¼šRedis+Tair é˜¿é‡Œ+ç™¾åº¦ï¼šRedis+MemeCache åº”ç”¨åœºæ™¯ï¼šå†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºäº›æ—¥å¿—ç³»ç»Ÿç­‰ç­‰ã€‚ æ•°æ®æ¨¡å‹ï¼šKey æŒ‡å‘çš„é”®å€¼å¯¹Valueï¼Œé€šå¸¸ç”¨hash tableæ¥å®ç° ä¼˜ç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦å¿« ç¼ºç‚¹ï¼šæ•°æ®æ— ç»“æ„ï¼Œé€šå¸¸åªè¢«å½“åšå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶å­˜å‚¨ æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆBSONæ ¼å¼ï¼‰ MongoDB åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼ŒC++ç¼–å†™çš„ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¤§é‡çš„æ–‡æ¡£ MongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸­é—´çš„äº§ç‰©ï¼ŒMongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»å‹æ•°æ®åº“çš„ ConthDB åº”ç”¨åœºæ™¯ï¼šwebåº”ç”¨ æ•°æ®æ¨¡å‹ï¼škey-valueé”®å€¼å¯¹ï¼ˆValueä¸ºç»“æ„åŒ–æ•°æ®ï¼‰ ä¼˜ç‚¹ï¼šæ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼è¡¨ç»“æ„å¯ä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“é‚£æ ·éœ€è¦é¢„å…ˆå®šä¹‰è¡¨ç»“æ„ ç¼ºç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­å¥ åˆ—å­˜å‚¨æ•°æ®åº“ HBase åº”ç”¨åœºæ™¯ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ æ•°æ®æ¨¡å‹ï¼šä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜å‚¨åœ¨ä¸€èµ· ä¼˜ç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‹“å±•æ€§å¼ºï¼Œå®¹æ˜“å®ç°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ ç¼ºç‚¹ï¼šåŠŸèƒ½ç›¸å¯¹å±€é™ å›¾å½¢å…³ç³»æ•°æ®åº“ å­˜çš„æ˜¯å…³ç³»ï¼Œä¸æ˜¯å­˜å›¾å½¢çš„ Neo4j InfoGrid åº”ç”¨åœºæ™¯ï¼šç¤¾äº¤ç½‘ç»œã€ç›¸å…³æ¨è æ•°æ®æ¨¡å‹ï¼šå›¾æ¶æ„ ä¼˜ç‚¹ï¼šåˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³•ï¼Œæ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€Nåº¦å…³ç³»æŸ¥æ‰¾ç­‰ ç¼ºç‚¹ï¼šå¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤æ–¹å¼ Redisç®€ä»‹æ¦‚è¿° Rediså…¨åæ˜¯Remote Dictionary Server ï¼Œå³è¿œç¨‹å­—å…¸è°ƒç”¨ é»˜è®¤ç«¯å£æ˜¯6379 Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ å®ƒæ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚ å­—ç¬¦ä¸²ï¼ˆstringsï¼‰ï¼Œ æ•£åˆ—ï¼ˆhashesï¼‰ï¼Œ åˆ—è¡¨ï¼ˆlistsï¼‰ï¼Œ é›†åˆï¼ˆsetsï¼‰ï¼Œ æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ ä¸èŒƒå›´æŸ¥è¯¢ï¼Œ bitmapsï¼Œ hyperloglogs å’Œ åœ°ç†ç©ºé—´ï¼ˆgeospatialï¼‰ ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚ Redis å†…ç½®äº† å¤åˆ¶ï¼ˆreplicationï¼‰ï¼ŒLUAè„šæœ¬ï¼ˆLua scriptingï¼‰ï¼Œ LRUé©±åŠ¨äº‹ä»¶ï¼ˆLRU evictionï¼‰ï¼Œäº‹åŠ¡ï¼ˆtransactionsï¼‰ å’Œä¸åŒçº§åˆ«çš„ ç£ç›˜æŒä¹…åŒ–ï¼ˆpersistenceï¼‰ï¼Œ å¹¶é€šè¿‡ Rediså“¨å…µï¼ˆSentinelï¼‰å’Œè‡ªåŠ¨ åˆ†åŒºï¼ˆClusterï¼‰æä¾›é«˜å¯ç”¨æ€§ï¼ˆhigh availabilityï¼‰ã€‚ å®ƒä½¿ç”¨ANSIã€Cè¯­è¨€ç¼–å†™çš„ã€æ”¯æŒç½‘ç»œã€å¯ä»¥åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-valueæ•°æ®åº“ã€å¹¶æä¾›å¤šç§è¯­è¨€çš„APIï¼Œäº¦è¢«ç§°ä¸ºç»“æ„åŒ–æ•°æ®åº“ ä¸‹è½½ä¸‹è½½åç›´æ¥è§£å‹å³å¯12é“¾æ¥ï¼šhttps://pan.baidu.com/s/12ozkQkUss8GH70lf7qrinQ æå–ç ï¼šnv5z ç‚¹å‡»redis-server.exeå³å¯å¯åŠ¨æœåŠ¡ å¤‡æ³¨Redisæ¨èæˆ‘ä»¬ä½¿ç”¨Linuxä½¿ç”¨redisï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨æ¥å­¦ä¹ redis 12é“¾æ¥:https://pan.baidu.com/s/1Hy1eFwcSqfftXrWv92-zug æå–ç :u1ff å°†å‹ç¼©æ–‡ä»¶è§£å‹åˆ°æœåŠ¡å™¨çš„optç›®å½•ä¸‹å³å¯ï¼Œè¿›å…¥è§£å‹åçš„ç›®å½•ï¼Œç„¶åå®‰è£…gcc-c++ 12yum install gcc-c++make ä¹Ÿå¯ä»¥ä½¿ç”¨dockeråˆ›å»ºrediså®¹å™¨ 1234# å¼€å¯ä¸€ä¸ªrediså®¹å™¨å¹¶è®¾ç½®å¯†ç docker run -it --name studyredis -p6379:6379 --requirepass lizhi9275 redis# æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨docker ps","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"}]},{"title":"Springboot-shiro","slug":"SpringBoot-Shiro","date":"2022-02-17T03:56:42.000Z","updated":"2022-02-19T07:42:38.688Z","comments":true,"path":"javaEE/SpringBoot/2022/02/17/SpringBoot-Shiro/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringBoot/2022/02/17/SpringBoot-Shiro/","excerpt":"","text":"Shiroç®€ä»‹å…¶å®è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªå…³äºåšå®‰å…¨ç®¡ç†çš„æ¡†æ¶ï¼Œä»–ä¸ä»…å¯ä»¥å’ŒjavaEEç»“åˆä¹Ÿå¯ä»¥å’ŒjavaSEç»“åˆ æä¾›çš„åŠŸèƒ½ Authenticationï¼šèº«ä»½è®¤è¯ï¼Œç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·çš„èº«ä»½ Authorizationï¼šæˆæƒï¼Œ Session Managementï¼š Shiroå†…ç½®çš„sessionï¼Œå¯¹å…¶è¿›è¡Œç®¡ç† Cryptographyï¼šåŠ å¯†ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§ Web Supportï¼š webæ”¯æŒï¼Œå¯ä»¥å¾ˆå¥½çš„é›†æˆåˆ°webç¯å¢ƒ Cachingï¼š ç¼“å­˜ï¼Œ Concurrencyï¼š å¤šå¹¶å‘ Testingï¼šæµ‹è¯• Remember Meï¼šâ€è®°ä½æˆ‘â€çš„åŠŸèƒ½ Shiroç»“æ„æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹Shiroçš„ç»“æ„ è§£é‡Šä¸€ä¸‹å‡ºç°çš„åè¯ subjectï¼šä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥æ˜¯Subjectï¼Œä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼ŒSubjectå…¶å®åªæ˜¯ä¸€ä¸ªé—¨é¢ï¼ŒSecurityManager æ‰æ˜¯å®é™…çš„æ‰§è¡Œè€… SecurityManagerï¼šå®‰å…¨ç®¡ç†å™¨ï¼Œå³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’ï¼Œå¹¶ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰çš„Subjectï¼Œå®ƒæ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸Shiroçš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ Realmï¼š Shiroä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ï¼Œè§’è‰²ï¼Œæƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManager è¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆå®ƒéœ€è¦ä»Realm è·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒï¼Œæ¥ç¡®å®šç”¨æˆ·çš„èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²ã€æƒé™ï¼Œè¿›è¡ŒéªŒè¯ç”¨æˆ·çš„æ“ä½œæ˜¯å¦èƒ½å¤Ÿè¿›è¡Œ å¿«é€Ÿå¼€å§‹ï¼ˆçœ‹ä¸€ä¸‹ç›´æ¥è¿‡ï¼‰å¯¼å…¥ä¾èµ– 123456789101112131415161718192021222324&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-core --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-core&lt;/artifactId&gt; &lt;version&gt;1.8.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.slf4j/jcl-over-slf4j --&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt; &lt;version&gt;1.7.24&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.24&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt;&lt;/dependency&gt; é…ç½®æ–‡ä»¶ log4j.properties 123456789101112131415161718log4j.rootLogger=INF0,stdoutlog4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m %n# GeneraL Apache Librarieslog4j.logger.org.apache=WARN# Springlog4j.logger.org.springframework=WARN# Defautt Shiro Logginglog4j.logger.org.apache.shiro=INF0# DisabLe verbose Logginglog4j.logger.org.apache.shiro.util.ThreadContext=WARNlog4j.logger.org.apache.shiro.cache.ehcache.EhCache=WARN shiro.ini 12345678910111213141516171819202122232425[users]# user &#x27;root&#x27; with password &#x27;secret&#x27; and the &#x27;admin&#x27; roleroot = secret, admin# user &#x27;guest&#x27; with the password &#x27;guest&#x27; and the &#x27;guest&#x27; roleguest = guest, guest# user &#x27;presidentskroob&#x27; with password &#x27;12345&#x27;ï¼ˆ&quot;That&#x27;s the same combination on# my Luggage!!!&quot; ;)), and rote &#x27;president&#x27;presidentskroob = 12345, president# user &#x27;darkhe met&#x27; with password &#x27;Ludicrousspeedâ€™and rotes &#x27;darklordâ€™and &#x27;schwartzdarkhelmet = ludicrousspeed, darklord, schwartz# user &#x27;tonestarr&#x27; with password &#x27;vespa&#x27; and roles &#x27;goodguy&#x27; and &#x27;schwartz&#x27;lonestarr = vespa, goodguy, schwartz# RoLes with assigned permissions# Each Line conforms to the format defined in the# org.apache.shiro.reatm.text.TextConfigurationReatm#setRoleDefinitions JavaDoc# -[roles]# &#x27;admin&#x27; role has all permissions, indicated by the wildcard&#x27;* &#x27;admin = *# The &#x27;schwartz&#x27; role can do anything (*) with any lightsaber:schwartz = lightsaber:*# The &#x27;goodguy&#x27; role is aLlowed to &#x27;drive&#x27; (action) the winnebago (type) with# ticense plate &#x27;eagle5&#x27; (instance specific id)goodguy = winnebago:drive:eagle5 ShiroQuickStart.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public class ShiroQuickStart &#123; private static final Logger LOG = LoggerFactory.getLogger(ShiroQuickStart.class); public static void main(String[] args) &#123; Factory&lt;SecurityManager&gt; factory = new IniSecurityManagerFactory(&quot;classpath:shiro.ini&quot;); SecurityManager securityManager = factory.getInstance(); SecurityUtils.setSecurityManager(securityManager); Subject currentUser = SecurityUtils.getSubject(); Session session = currentUser.getSession(); session.setAttribute(&quot;someKey&quot;,&quot;aValue&quot;); String value = (String) session.getAttribute(&quot;someKey&quot;); if(&quot;aValue&quot;.equals(value))&#123; LOG.info(&quot;Retrieved the correct value&quot;); &#125; if(!currentUser.isAuthenticated())&#123; UsernamePasswordToken token = new UsernamePasswordToken(&quot;lonestar&quot;, &quot;vespa&quot;); token.setRememberMe(true); try&#123; currentUser.login(token); &#125;catch (UnknownAccountException uae)&#123; LOG.info(&quot;There is no user with username whith &quot;+ token.getPrincipal()); &#125;catch (IncorrectCredentialsException ice)&#123; LOG.info(&quot;Password for account&quot;+ token.getPrincipal()+&quot;was incorrect&quot;); &#125;catch (LockedAccountException lae)&#123; LOG.info(&quot;The Account for userName&quot;+ token.getPrincipal()+&quot;is locked. &quot; + &quot;Please contact your administrator to unlocked it&quot;); &#125;catch (AuthenticationException ae)&#123; //unexpected exception &#125; &#125; LOG.info(&quot;USER[&quot;+ currentUser.getPrincipal()+&quot;] logged in successfully&quot;); if(currentUser.hasRole(&quot;schwartz&quot;))&#123; LOG.info(&quot;May the Schwartz be with you&quot;); &#125;else &#123; LOG.info(&quot;Hello,Mere mortal&quot;); &#125; if(currentUser.isPermitted(&quot;lightsaber:wield&quot;))&#123; LOG.info(&quot;You may use a lightsaber ring use it wisely&quot;); &#125;else &#123; LOG.info(&quot;Sorry, light rings are for schwartz masters only&quot;); &#125; if(currentUser.isPermitted(&quot;winnebago:drive:eagle5&quot;))&#123; LOG.info(&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate(id) &#x27;eagle5&#x27;. &quot; + &quot;Here are the keys-have fun!&quot;); &#125;else &#123; LOG.info(&quot;Sorry,you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago&quot;); &#125; currentUser.logout(); System.exit(0); &#125;&#125; è¿è¡Œè¾“å‡º 123456789101112131415161718192021222324252627282930313233342022-02-17 14:33:37,982 DEBUG [org.apache.shiro.io.ResourceUtils] - Opening resource from class path [shiro.ini] 2022-02-17 14:33:38,021 DEBUG [org.apache.shiro.config.Ini] - Parsing [users] 2022-02-17 14:33:38,026 DEBUG [org.apache.shiro.config.Ini] - Parsing [roles] 2022-02-17 14:33:38,523 DEBUG [org.apache.shiro.config.IniFactorySupport] - Creating instance from Ini [sections=users,roles] 2022-02-17 14:33:38,571 DEBUG [org.apache.shiro.realm.text.IniRealm] - Discovered the [roles] section. Processing... 2022-02-17 14:33:38,575 DEBUG [org.apache.shiro.realm.text.IniRealm] - Discovered the [users] section. Processing... 2022-02-17 14:33:38,594 DEBUG [org.apache.shiro.session.mgt.AbstractValidatingSessionManager] - No sessionValidationScheduler set. Attempting to create default instance. 2022-02-17 14:33:38,595 INFO [org.apache.shiro.session.mgt.AbstractValidatingSessionManager] - Enabling session validation scheduler... 2022-02-17 14:33:38,625 DEBUG [org.apache.shiro.session.mgt.DefaultSessionManager] - Creating new EIS record for new session instance [org.apache.shiro.session.mgt.SimpleSession,id=null] 2022-02-17 14:33:39,022 INFO [com.lizhi.springbootshiro.start.ShiroQuickStart] - Retrieved the correct value 2022-02-17 14:33:39,022 DEBUG [org.apache.shiro.realm.AuthenticatingRealm] - Looked up AuthenticationInfo [null] from doGetAuthenticationInfo 2022-02-17 14:33:39,022 DEBUG [org.apache.shiro.realm.AuthenticatingRealm] - No AuthenticationInfo found for submitted AuthenticationToken [org.apache.shiro.authc.UsernamePasswordToken - lonestar, rememberMe=true]. Returning null. 2022-02-17 14:33:39,030 INFO [com.lizhi.springbootshiro.start.ShiroQuickStart] - There is no user with username whith lonestar SpringBootæ•´åˆShiroå…ˆæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æŠŠåŸºæœ¬çš„ç¯å¢ƒæ­å¥½ å¯¼å…¥ä¾èµ–ï¼Œè¿™é‡Œåªæ˜¾ç¤ºshiroçš„ç›¸å…³ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt; &lt;version&gt;1.8.0&lt;/version&gt;&lt;/dependency&gt; å®ä½“ç±»User.java 12345678910@Data@NoArgsConstructor@AllArgsConstructor@ToStringpublic class User &#123; private int id; private String userName; private String password; private String perms;&#125; é…ç½®ç±»ShiroConfig.java 1234567891011121314151617181920212223@Configurationpublic class ShiroConfig &#123; //ShiroFilterFactoryBean @Bean public ShiroFilterFactoryBean getShiroFilterFactory(@Autowired DefaultWebSecurityManager defaultWebSecurityManager)&#123; ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager); return shiroFilterFactoryBean; &#125; //DefaultWebSecurityManager @Bean public DefaultWebSecurityManager getDefaultWebSecurityManager(@Autowired UserRealm userRealm)&#123; DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager(); securityManager.setRealm(userRealm); return securityManager; &#125; //realm,éœ€è¦è‡ªå®šä¹‰ï¼Œç”¨æ¥åšæˆæƒå’Œè®¤è¯çš„ @Bean public UserRealm userRealm()&#123; return new UserRealm(); &#125; UserRealm.java 1234567891011121314151617public class UserRealm extends AuthorizingRealm &#123; @Autowired private UserMapper userMapper; //æˆæƒ @Override protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123; System.out.println(&quot;æˆæƒ&quot;); return null; &#125; //è®¤è¯ @Override protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123; System.out.println(&quot;è®¤è¯&quot;); return null; &#125;&#125; index.html 123456789101112131415&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;é¦–é¡µ&lt;/h2&gt; &lt;ul&gt; &lt;a th:href=&quot;@&#123;/user/add&#125;&quot;&gt;ç”¨æˆ·å¢&lt;/a&gt; &lt;a th:href=&quot;@&#123;/user/del&#125;&quot;&gt;ç”¨æˆ·åˆ &lt;/a&gt; &lt;a th:href=&quot;@&#123;/user/update&#125;&quot;&gt;ç”¨æˆ·æ”¹&lt;/a&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; userçš„addé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„add&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; userçš„delé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„delete&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; userçš„updateé¡µé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;userçš„update&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; MyController.java 1234567891011121314151617181920212223242526272829package com.lizhi.springbootshiro.contoller;import org.apache.shiro.SecurityUtils;import org.apache.shiro.authc.IncorrectCredentialsException;import org.apache.shiro.authc.UnknownAccountException;import org.apache.shiro.authc.UsernamePasswordToken;import org.apache.shiro.subject.Subject;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.validation.BindingResult;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class MyController &#123; @GetMapping(&quot;/index&quot;) public String index(Model model)&#123; model.addAttribute(&quot;msg&quot;,&quot;hello,shiro&quot;); return &quot;index&quot;; &#125; //è¿™é‡Œæ˜¯restfulé£æ ¼ @GetMapping(&quot;/user/&#123;method&#125;&quot;) public String operateUser(@PathVariable(&quot;method&quot;) String method)&#123; return &quot;user/&quot;+method; &#125;&#125; UserMapper.java userè¡¨ä¸­å°±ä¸‰ä¸ªå­—æ®µã€‚id,user_name,password,perms 12345@Mapperpublic interface UserMapper &#123; List&lt;User&gt; listAllUsers(); User getUserByName(String userName);&#125; UserMapper.xml 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lizhi.springbootshiro.mapper.UserMapper&quot;&gt; &lt;select id=&quot;listAllUsers&quot; resultType=&quot;com.lizhi.springbootshiro.pojo.User&quot;&gt; select id,user_name as userName,password,perms from `user` &lt;/select&gt; &lt;select id=&quot;getUserByName&quot; resultType=&quot;com.lizhi.springbootshiro.pojo.User&quot;&gt; select id,user_name as userName,password,perms from `user` where user_name = #&#123;userName&#125; &lt;/select&gt;&lt;/mapper&gt; ç™»å½•æ‹¦æˆªç™»å½•æ‹¦æˆªæŒ‡çš„æ˜¯ï¼Œæœªç™»å½•çš„ç”¨æˆ·ä¸å¾—è¿›å…¥ç”¨æˆ·çš„å¢åˆ æ”¹é¡µé¢ ä¸‹é¢æ˜¯é›†ä¸­æ‹¦æˆªè§„åˆ™ï¼Œä¸€èˆ¬authcå’Œpermsç”¨çš„æ¯”è¾ƒå¤š 1234567/** * annoï¼š æ— éœ€è®¤è¯å³å¯è®¿é—® * authcï¼šå¿…é¡»è®¤è¯äº†æ‰å¯ä»¥è®¿é—® * permsï¼šå¿…é¡»æ‹¥æœ‰æƒé™æ‰å¯ä»¥è®¿é—® * rolesï¼šå¿…é¡»æ‹¥æœ‰æŸç§è§’è‰²æ‰å¯ä»¥è®¿é—® * userï¼šå¿…é¡»æ‹¥æœ‰è®°ä½æˆ‘çš„åŠŸèƒ½çš„æ—¶å€™æ‰å¯ä»¥è®¿é—®ï¼ˆä¸€èˆ¬å¾ˆå°‘ç”¨ï¼‰ */ è¿™æ˜¯åœ¨ShiroFilterFactoryBeanä¸­é…ç½®çš„ 1234567891011121314151617@Beanpublic ShiroFilterFactoryBean getShiroFilterFactory(@Autowired DefaultWebSecurityManager defaultWebSecurityManager)&#123; ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager); Map&lt;String,String&gt; filterMap = new LinkedHashMap&lt;&gt;(); filterMap.put(&quot;/user/add&quot;,&quot;perms[user:add]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:addæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/update&quot;,&quot;perms[user:update]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:updateæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/del&quot;,&quot;perms[user:del]&quot;); //è®¾ç½®è¯¥è·¯å¾„åªæœ‰user:delæ‰å¯ä»¥è®¿é—® filterMap.put(&quot;/user/*&quot;,&quot;authc&quot;); shiroFilterFactoryBean.setFilterChainDefinitionMap(filterMap); shiroFilterFactoryBean.setLoginUrl(&quot;/login&quot;); //è®¾ç½®ç™»å½•çš„è·¯å¾„ shiroFilterFactoryBean.setSuccessUrl(&quot;/index&quot;); //è®¾ç½®ç™»å½•æˆåŠŸçš„è·¯å¾„ shiroFilterFactoryBean.setUnauthorizedUrl(&quot;/unauth&quot;); //è®¾ç½®æœªæˆæƒçš„ç”¨æˆ·è¢«è®¿é—®åè·³è½¬çš„è·¯å¾„ return shiroFilterFactoryBean;&#125; login.html 12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Login&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;ç™»å½•&lt;/h2&gt; &lt;p style=&quot;color: red&quot;&gt;[[$&#123;error&#125;]]&lt;/p&gt; &lt;form th:action=&quot;@&#123;/login.do&#125;&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;userName&quot; placeholder=&quot;è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥æ‚¨çš„å¯†ç &quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;&gt; &lt;/p&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; MyControllerä¸­é…ç½®è·¯å¾„ 123456789101112131415161718192021222324252627282930@GetMapping(&quot;/login&quot;)public String login()&#123; return &quot;login&quot;;&#125;@GetMapping(&quot;/unauth&quot;)@ResponseBody //è¿™é‡Œå·æ‡’æ²¡å†™é¡µé¢äº†ï¼Œè€Œæ˜¯ç›´æ¥å°†æ¶ˆæ¯è¿”å›åˆ°é¡µé¢ä¸­public String unauthorized()&#123; return &quot;æœªç»æˆæƒæ— æ³•è®¿é—®æ­¤é¡µé¢&quot;;&#125;@GetMapping(&quot;/login.do&quot;)public String doLogin(String userName, String password, Model model) &#123; //è·å–å½“å‰ç”¨æˆ· Subject currentUser = SecurityUtils.getSubject(); UsernamePasswordToken token = new UsernamePasswordToken(userName, password); try&#123; currentUser.login(token);//è¿™é‡Œä¸‹ä¸€æ­¥æ˜¯åˆ°userRealmçš„è®¤è¯æ–¹æ³• //å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¯´æ˜ç™»å½•æˆåŠŸ Subject currentUser = SecurityUtils.getSubject(); //æ‹¿åˆ°shiroå†…éƒ¨çš„sessionä¿å­˜æ•°æ®ï¼Œ currentUser.getSession().setAttribute(&quot;loginInfo&quot;,user); return &quot;index&quot;; &#125;catch (UnknownAccountException uae)&#123; model.addAttribute(&quot;error&quot;,&quot;ç”¨æˆ·åé”™è¯¯&quot;); return &quot;login&quot;; &#125;catch (IncorrectCredentialsException ice)&#123; model.addAttribute(&quot;error&quot;,&quot;å¯†ç é”™è¯¯&quot;); return &quot;login&quot;; &#125;&#125; ç”¨æˆ·è®¤è¯æ¡ˆä¾‹èµ°åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°æ— è®ºæ€ä¹ˆç™»å½•éƒ½æ˜¯é”™çš„ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚ ç”¨æˆ·è®¤è¯æŒ‡çš„æ˜¯ï¼Œå½“ç”¨æˆ·ç™»å½•çš„æ—¶å€™ï¼Œå¯¹å…¶è¿›è¡ŒéªŒè¯ 1234567891011121314151617@Overrideprotected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123; System.out.println(&quot;è®¤è¯&quot;); /** * æ•°æ®åº“ä¸­è¯»å–æ•°æ® */ UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken; User user = userMapper.getUserByName(token.getUsername()); if(user==null)&#123; //è¿™é‡Œå¦‚æœè¿”å›nullçš„è¯ï¼Œä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸åˆ°ä¸‹å›¾å¤„ return null; &#125; //è¿™é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°userä¼šè®¾ç½®ç»™å½“å‰ç™»å½•å¯¹è±¡çš„Principalä¸­ã€‚ //å¯ä»¥é€šè¿‡SecurityUtils.getSubject().getPrincipal()è·å– //ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ­£ç¡®çš„å¯†ç ï¼Œå³æ•°æ®åº“ä¸­çš„å¯†ç ï¼Œäº¤ç»™shiroæ¥åšå¯†ç çš„æ ¡éªŒï¼Œå¦‚æœå¯†ç é”™è¯¯ï¼Œä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸åˆ°ä¸‹å›¾çš„åœ°æ–¹ return new SimpleAuthenticationInfo(user, user.getPassword(),&quot;&quot;);&#125; è¿™é‡Œæ’ä¸Šä¸€å˜´ï¼Œåœ¨webç¯å¢ƒä¸­ï¼Œé€šè¿‡subjectæ‹¿åˆ°çš„sessionå³webæ¡†æ¶ä¸­çš„é‚£ä¸ªsessionã€‚ ä½†æ˜¯å¦‚æœshiroæ²¡æœ‰ä½¿ç”¨åœ¨webç¯å¢ƒçš„è¯ï¼Œå†…éƒ¨ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªsessionçš„ï¼Œä½†æ˜¯é‚£ä¸ªå°±ä¸æ˜¯webä¸­çš„sessionäº†ã€‚ ç”¨æˆ·æˆæƒå¥½å•¦ï¼Œç°åœ¨æ¡ˆä¾‹å·²ç»å¯ä»¥è·‘èµ·æ¥äº†ï¼Œå¹¶ä¸”å¦‚æœè´¦å·å¯†ç æ­£ç¡®çš„è¯æ˜¯å¯ä»¥ç™»å½•çš„ï¼Œå¹¶ä¸”è¿”å›åˆ°ä¸»é¡µ è¿˜è®°å¾—æˆ‘ä»¬åœ¨ä¸‹å›¾é…ç½®çš„è¿™ä¸€ä¸²è®©äººä¸€å¤´é›¾æ°´çš„é…ç½®å—ï¼Ÿ è¿™é‡Œå°±åªæ˜¯é…ç½®äº†ä¸€ä¸ªè§„åˆ™ï¼Œä½†æ˜¯å…·ä½“ç™»å½•çš„ç”¨æˆ·çš„æˆæƒè¿˜æ²¡æœ‰åšï¼Œæˆ‘ä»¬ç°åœ¨å»å®Œæˆå®ƒå§ 1234567891011121314@Overrideprotected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123; System.out.println(&quot;æˆæƒ&quot;); SimpleAuthorizationInfo info = new SimpleAuthorizationInfo(); //è¿™é‡Œéœ€è¦æ ¹æ®ç”¨æˆ·è¡¨çš„æ•°æ®è¿›è¡Œå¢åŠ æƒé™ Subject subject = SecurityUtils.getSubject(); //æ‹¿åˆ°ç”¨æˆ·è®¤è¯çš„æ—¶å€™ä¼ å…¥çš„user User currentUser = (User) subject.getPrincipal(); System.out.println(&quot;æƒé™ä¸ºï¼š&quot;+ currentUser.getPerms()); //æ•°æ®åº“ä¸­permså­—æ®µæ˜¯ä»¥è¿™æ ·çš„å½¢å¼å­˜å‚¨çš„ user:add,user:update //æ‰€ä»¥éœ€è¦å°†å…¶ç”¨ï¼Œåˆ†å‰²ç„¶åä½¿ç”¨å·¥å…·ç±»å°†å…¶è½¬æ¢ä¸ºé›†åˆä¼ å…¥addStringPermissions info.addStringPermissions(Arrays.asList(currentUser.getPerms().split(&quot;,&quot;))); return info;&#125; ç°åœ¨å°±å®Œæˆäº†æ‰€æœ‰çš„é…ç½®å•¦ï¼å¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ è¿™é‡Œå†å¤šå®Œæˆä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯é¦–é¡µåªæ˜¾ç¤ºç”¨æˆ·å…·æœ‰æƒé™çš„é“¾æ¥ é¦–å…ˆéœ€è¦å¯¼å…¥thymeleafçš„ä¾èµ–ï¼Œç„¶åå†å¯¼å…¥å‘½åç©ºé—´xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot; 12345&lt;dependency&gt; &lt;groupId&gt;com.github.theborakompanioni&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-shiro&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt;&lt;/dependency&gt; é…ç½®ä¸€ä¸ªbean 12345//æ•´åˆthymeleaf@Beanpublic ShiroDialect shiroDialect()&#123; return new ShiroDialect();&#125; index.html 1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;é¦–é¡µ&lt;/h2&gt; &lt;p&gt;[[$&#123;msg&#125;]]&lt;/p&gt; &lt;!--å½“sessionä¸­æ²¡æœ‰ç™»å½•ä¿¡æ¯çš„æ—¶å€™æ˜¾ç¤º--&gt; &lt;p th:if=&quot;$&#123;session.loginInfo==null&#125;&quot;&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;!--å½“sessionæœ‰ä¿¡æ¯çš„æ—¶å€™æ˜¾ç¤º--&gt; &lt;p th:if=&quot;$&#123;session.loginInfo!=null&#125;&quot;&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; &lt;!--æˆ–è€…åƒè¿™æ ·å†™ï¼Œä¸ç”¨å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥session &lt;p shiro:notAuthenticated&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;p shiro:authenticated&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; --&gt; &lt;ul&gt; &lt;li shiro:hasPermission=&quot;user:add&quot;&gt;&lt;a th:href=&quot;@&#123;/user/add&#125;&quot;&gt;ç”¨æˆ·å¢&lt;/a&gt;&lt;/li&gt; &lt;li shiro:hasPermission=&quot;user:del&quot;&gt;&lt;a th:href=&quot;@&#123;/user/del&#125;&quot;&gt;ç”¨æˆ·åˆ &lt;/a&gt;&lt;/li&gt; &lt;li shiro:hasPermission=&quot;user:update&quot;&gt;&lt;a th:href=&quot;@&#123;/user/update&#125;&quot;&gt;ç”¨æˆ·æ”¹&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; æ³¨é”€å¤§å®¶éƒ½åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œä¸Šé¢çš„é¡µé¢ä¸­å¤šäº†ä¸€ä¸ªæ³¨é”€çš„é“¾æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®Œæˆä¸€ä¸‹æ³¨é”€çš„åŠŸèƒ½ 12345@GetMapping(&quot;/logout&quot;)public String logout()&#123; SecurityUtils.getSubject().logout(); return &quot;index&quot;;&#125; æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œshiroå·²ç»å°†å…¶å®Œç¾å¾—å°è£…å¥½äº† ä»¥ä¸Š","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"swagger","slug":"SpringBoot-Swagger","date":"2022-02-17T02:11:19.000Z","updated":"2022-02-24T10:59:38.726Z","comments":true,"path":"javaEE/SpringBoot/2022/02/17/SpringBoot-Swagger/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringBoot/2022/02/17/SpringBoot-Swagger/","excerpt":"","text":"Swagger å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶ RestFulé£æ ¼çš„APIå±•ç¤ºå¯ä»¥å®ç°APIæ–‡æ¡£å’ŒAPIå®šä¹‰åŒæ­¥æ›´æ–° SpringBootæ•´åˆSwagger å¯¼å…¥ç›¸å…³ä¾èµ– 1234567891011121314151617&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;!--éœ€è¦webçš„æ”¯æŒ--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; å†™ä¸€ä¸ªç®€å•çš„Controller 1234567@RestControllerpublic class HelloController &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return &quot;hello&quot;; &#125;&#125; å¼€å¯SwaggeråŠŸèƒ½ 1234@Configuration@EnableSwagger2public class SwaggerConfig &#123; &#125; è®¿é—®swagger-ui.html æˆ‘ä»¬åœ¨uiçš„jaråŒ…ä¸­å¯ä»¥çŸ¥é“æˆ‘ä»¬å¯ä»¥è®¿é—®è¯¥é¡µé¢ è¿™æ˜¯è®¿é—®çš„é¡µé¢ é…ç½®SwaggerSwaggerä¸­ç”¨æ¥é…ç½®çš„beanæ˜¯Docket é…ç½®æ–‡æ¡£ä¿¡æ¯123456789101112131415161718@Beanpublic Docket docket()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo());&#125;//é…ç½®swaggerä¿¡æ¯public ApiInfo apiInfo()&#123; return new ApiInfo( &quot;swaggeræµ‹è¯•&quot;,//æ–‡æ¡£åç§° &quot;åˆæ¬¡æµ‹è¯•swagger&quot;,//æ–‡æ¡£æè¿° &quot;1.0&quot;,//ç‰ˆæœ¬å· &quot;http://li-zhi.net.cn/&quot;,//ä½œè€…ä¸ªäººåšå®¢ new Contact(&quot;ææ™º&quot;,&quot;http://li-zhi.net.cn/&quot;,&quot;1158778689@qq.com&quot;),//ä½œè€…è”ç³»æ–¹å¼ &quot;Apache 2.0&quot;,//å¼€æºåè®® &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;, new ArrayList&lt;&gt;() );&#125; é…ç½®æ¨¡å‹1234567@Controllerpublic class SwaggerModelConfig &#123; @GetMapping(&quot;/user&quot;) public User user()&#123; return new User(); &#125;&#125; æˆ‘æ˜¯ä¸“é—¨å»ºäº†ä¸€ä¸ªSwaggerModelConfigæ¥æ”¾ç½®æ‰€æœ‰çš„æ¨¡å‹ç±» é…ç½®åˆ†ç»„å› ä¸ºé¡¹ç›®ä¸€èˆ¬æ˜¯åˆ†ç»„ååŒå¼€å‘ï¼Œæ¯ä¸ªç»„å„è‡ªå¼€å‘çš„æ¥å£ï¼Œé‚£æ¥å£æ–‡æ¡£åº”è¯¥å„è‡ªåˆ†å¼€ï¼Œæ‰€ä»¥å°±æœ‰äº†åˆ†ç»„çš„éœ€è¦ åˆ†ç»„åªéœ€è¦é…ç½®ä¸€ä¸ªgroupName(â€œgroupNameâ€)å³å¯ 12345678910@Beanpublic Docket docket2()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group2&quot;);&#125;@Beanpublic Docket docket1()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;);&#125; é…ç½®æ‰«æçš„æ¥å£è¿™é‡Œä¸»è¦è®²ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯æŒ‰è·¯å¾„æ‰«æï¼Œç¬¬äºŒç§æ˜¯æŒ‰åŒ…åæ‰«æ æŒ‰è·¯å¾„æ‰«æ123456789@Beanpublic Docket docket1()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;) .select() .paths(PathSelectors.ant(&quot;/user/**&quot;)) // è¯¥é…ç½®ä¸‹ï¼Œè¯¥ç»„ä¼šæ‰«ææ‰€æœ‰çš„/user/ä¸‹çš„æ‰€æœ‰çš„API .build();&#125; æŒ‰åŒ…åæ‰«æ123456789@Beanpublic Docket docket2()&#123; return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group2&quot;) .select() .apis(RequestHandlerSelectors.basePackage(&quot;com.lizhiswaggertest.controller&quot;)) //è¯¥é…ç½®ä¸‹ï¼Œè¯¥ç»„ä¼šæ‰«ææ‰€æœ‰æ­¤åŒ…ä¸‹çš„APIæ¥å£ .build();&#125; åœ¨ç±»RequestHandlerSelectorsä¸­è¿˜æœ‰å…¶ä»–çš„æ‰«ææœºåˆ¶ï¼Œå¯è‡ªè¡Œç ”ç©¶ æ ¹æ®ç¯å¢ƒæ§åˆ¶æ˜¯å¦èƒ½è®¿é—®swaggerä¸€èˆ¬äº§å“çš„å¼€å‘éƒ½ä¼šæœ‰å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€ä¸Šçº¿ç­‰å¤šå¥—ç¯å¢ƒï¼Œæ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼Œæ§åˆ¶æ˜¯å¦å¯ä»¥è®¿é—®swaggerçš„uiç•Œé¢ é…ç½®æ–‡ä»¶application.yml 1234567891011121314151617181920212223---server: port: 8081spring: profiles: dev---server: port: 8082spring: profiles: test---server: port: 8083spring: profiles: pro---spring: profiles: active: dev é…ç½®devç¯å¢ƒå’Œtestç¯å¢ƒå¯ä»¥ä½¿ç”¨swagger 12345678@Beanpublic Docket docket1(Environment environment)&#123; Profiles devProfile = Profiles.of(&quot;dev&quot;,&quot;test&quot;); boolean dev = environment.acceptsProfiles(devProfile); return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()).groupName(&quot;group1&quot;) .enable(dev);&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"å•ä¾‹è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å•ä¾‹è®¾è®¡æ¨¡å¼","date":"2022-02-16T11:02:56.000Z","updated":"2022-02-25T01:43:38.836Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/16/è®¾è®¡æ¨¡å¼-å•ä¾‹è®¾è®¡æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å•ä¾‹è®¾è®¡æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯ï¼Œä¸€ä¸ªç¯å¢ƒä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡ è¯¥æ¨¡å¼æœ‰äº”ç§å®ç°æ–¹å¼ æ¶æ±‰æ¨¡å¼ æ‡’æ±‰æ¨¡å¼ é™æ€å†…éƒ¨ç±»æ¨¡å¼ æšä¸¾æ¨¡å¼ è¯¥è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ˜¯æ„é€ æ–¹æ³•ç§æœ‰åŒ– é¥¿æ±‰æ¨¡å¼æ¶æ±‰æ¨¡å¼ï¼šè§åçŸ¥æ„ï¼Œå°±æ˜¯åœ¨ç±»è¢«åŠ è½½çš„æ—¶å€™å°±åˆ›å»ºã€‚ æ¡ˆä¾‹ï¼šRuntimeç±» ç¼ºç‚¹ï¼šæµªè´¹å†…å­˜ç©ºé—´ æˆ‘æŸ¥äº†èµ„æ–™ï¼ŒæŸ¥åˆ°äº†è¿™ä¸ªç¼ºç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªç¼ºç‚¹æˆ‘ä¸æ—¶å¾ˆèƒ½ç†è§£ 123456789public class Hungry &#123; private final static Hungry HUNGRY = new Hungry(); private Hungry()&#123; &#125; public static Hungry getInstance()&#123; return HUNGRY; &#125;&#125; æ‡’æ±‰æ¨¡å¼è¿™ç§å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä»åˆ†å‡ ä¸ªç‰ˆæœ¬ä»ç®€å•åˆ°å¤æ‚ Version 0112345678910111213public class LazyMan &#123; private static LazyMan lAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(lAZYMAN==null)&#123; //A lAZYMAN = new LazyMan(); &#125; return lAZYMAN; &#125;&#125; ç¼ºç‚¹ï¼šåªèƒ½åœ¨å•çº¿ç¨‹ä¸­å®‰å…¨ï¼Œå¤šçº¿ç¨‹ä¸­æ˜¯ä¸å®‰å…¨çš„ ç°åœ¨æœ‰çº¿ç¨‹Aå’Œçº¿ç¨‹Bï¼Œçº¿ç¨‹Aèµ°åˆ°äº†æ³¨è§£Aå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œè¿™æ—¶å€™lAZYMANè¿˜æ˜¯nullï¼Œæ‰€ä»¥çº¿ç¨‹Båˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œç„¶åçº¿ç¨‹AæŠ¢å›CPUï¼Œå®ƒè¿™æ—¶å€™å·²ç»åœ¨ifè¯­å¥é‡Œé¢äº†ï¼Œç®­åœ¨å¼¦ä¸Šä¸å¾—ä¸å‘ï¼Œæ‰€ä»¥çº¿ç¨‹Aä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œå¯¼è‡´å•ä¾‹æ¨¡å¼è¢«ç ´åï¼Œæ‰€ä»¥è¯¥å®ç°æ–¹å¼çº¿ç¨‹ä¸å®‰å…¨ Version 02123456789101112public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public synchronized static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; LAZYMAN = new LazyMan(); &#125; return LAZYMAN; &#125;&#125; ç¼ºç‚¹ï¼šä¸ºæ–¹æ³•åŠ é”ï¼Œç¡®å®ä¿è¯äº†å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“åŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯LazyMançš„Classç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—çŸ¥è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨ã€‚ä½†æ˜¯æˆ‘ä»¬å¥½å¥½æƒ³æƒ³ï¼Œå½“æˆ‘ä»¬åˆ›å»ºäº†ç¬¬ä¸€ä¸ªå•ä¾‹å¯¹è±¡ä¹‹åï¼Œè¿˜éœ€è¦é”æ¥ä¿è¯åŒæ­¥å—ï¼Ÿç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œè‚¯å®šæ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ•ˆç‡ä½ä¸‹ï¼Œéœ€è¦æ”¹è¿›ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªç‰ˆæœ¬ Version 03123456789101112131415public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; LAZYMAN = new LazyMan(); &#125; &#125; return LAZYMAN; &#125;&#125; æˆ‘ä»¬ä¸ä½¿ç”¨åŒæ­¥æ–¹æ³•æ¥ä¿è¯æ‰€æœ‰çš„çº¿ç¨‹åŒæ­¥ï¼Œæˆ‘ä»¬åªå¯¹LAZYMANå¯¹è±¡è¿˜ä¸ºnullçš„çº¿ç¨‹åŒæ­¥ï¼Œè¿™æ—¶å€™åˆå‡ºç°äº†é—®é¢˜ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚çº¿ç¨‹Aèµ°åˆ°äº†æ³¨é‡ŠAå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œè¿™æ—¶å€™lAZYMANè¿˜æ˜¯nullï¼Œæ‰€ä»¥çº¿ç¨‹Båˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œç„¶åçº¿ç¨‹AæŠ¢å›CPUï¼Œå®ƒè¿™æ—¶å€™å·²ç»åœ¨ifè¯­å¥é‡Œé¢äº†ï¼Œç®­åœ¨å¼¦ä¸Šä¸å¾—ä¸å‘ï¼Œæ‰€ä»¥çº¿ç¨‹Aä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªlAZYMANå¯¹è±¡ï¼Œå¯¼è‡´å•ä¾‹æ¨¡å¼è¢«ç ´åï¼Œæ‰€ä»¥è¯¥å®ç°æ–¹å¼çº¿ç¨‹ä¸å®‰å…¨ï¼Œæˆ‘ä»¬å‘ç°è¿™å’Œæˆ‘ä»¬æ²¡æœ‰åŠ é”çš„æ—¶å€™çš„æƒ…å½¢å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŒé‡é”æœºåˆ¶ Version 04public class LazyMan &#123; private static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; if(LAZYMAN==null)&#123; //B LAZYMAN = new LazyMan(); &#125; &#125; &#125; return LAZYMAN; &#125; &#125; æˆ‘ä¸ªäººçš„ç†è§£æ˜¯ç¬¬ä¸€é‡é”æ˜¯ä¸ºäº†è¿‡æ»¤LAZYMANä¸ºNULLçš„çº¿ç¨‹ï¼Œç¬¬äºŒé‡é”æ˜¯ä¸ºäº†ä¿è¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»åˆ›å»ºå¯¹è±¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¼¼ä¹æ‰¾ä¸åˆ°ä»€ä¹ˆç ´ç»½äº†ï¼Œæˆ‘ä»¬æ¥ç»§ç»­å¾€ä¸‹çœ‹ Version 05123456789101112131415161718public class LazyMan &#123; private volatile static LazyMan LAZYMAN; private LazyMan()&#123; &#125; public static LazyMan getInstance()&#123; if(LAZYMAN==null)&#123; //A synchronized (LazyMan.class)&#123; if(LAZYMAN==null)&#123; //B LAZYMAN = new LazyMan(); &#125; &#125; &#125; return LAZYMAN; &#125;&#125; ä¹ä¸€çœ‹ï¼Œå¥½åƒå’Œä¸Šä¸€ä¸ªç‰ˆæœ¬æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä»”ç»†ä¸€çœ‹ï¼Œå…¶å®åŒºåˆ«æ˜¯åœ¨è¿™ä¸ªå•ä¾‹å˜é‡çš„ä¿®é¥°ç¬¦å¤šäº†ä¸€ä¸ªvolatileã€‚ volatileä¸‰å¤§ä½œç”¨ ä¿è¯å¯è§æ€§ ä¸ä¿è¯åŸå­æ€§ ç¦æ­¢è¯¥å˜é‡å‡ºç°çš„åœ°æ–¹å‘ç”ŸæŒ‡ä»¤é‡æ’ è¿™é‡Œçš„è¯ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ç‰¹æ€§æ˜¯ç¬¬ä¸‰ç‚¹ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ LAZYMAN = new LazyMan(); è¿™ä¸€å¥è¯å…¶å®æ‰§è¡Œäº†ä¸‰ä¸ªæ­¥éª¤ å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ åˆå§‹åŒ–å¯¹è±¡ å°†è¯¥å†…å­˜ç©ºé—´çš„åœ°å€æŒ‡å‘å˜é‡ JVMå†…éƒ¨ä¼šæœ‰ä¸€ç§å«æŒ‡ä»¤é‡æ’çš„ä»£ç ä¼˜åŒ–æœºåˆ¶ï¼Œè¿™æ—¶å€™ï¼Œè¿™ä¸‰è€…çš„é¡ºåºå°±æœ‰å¯èƒ½ä¼šæ”¹å˜ã€‚ ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚çº¿ç¨‹Aèµ°åˆ°äº†æ³¨é‡ŠAå¤„ï¼Œç„¶åçº¿ç¨‹BæŠ¢å äº†CPUï¼Œå¼€å§‹æ‰§è¡ŒLAZYMAN = new LazyMan();å¼€è¾Ÿå†…å­˜ç©ºé—´åï¼Œæ²¡æœ‰å…ˆåˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œæ˜¯å…ˆå°†è¯¥å†…å­˜ç©ºé—´çš„åœ°å€æŒ‡å‘å˜é‡ï¼Œè¿™æ—¶å€™çº¿ç¨‹AæŠ¢å›äº†CPUï¼Œè¿™æ—¶å€™çš„LAZYMANå·²ç»ä¸æ˜¯NULLäº†ï¼Œç›´æ¥å°†å…¶è¿”å›äº†å‡ºå»ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡å…¶å®è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œè¿˜æ˜¯ä¸ªç©ºæ¶å­ï¼Œè¿™å°±å‡ºç°äº†é—®é¢˜ã€‚ å½“ç„¶è¿™ç§æƒ…å†µååˆ†ååˆ†å°‘ï¼Œä½†æ˜¯ä¸ºäº†ä¸¥è°¨æ€§ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Švolatileå…³é”®è¯ç¦æ­¢æŒ‡ä»¤é‡æ’ é™æ€å†…éƒ¨ç±»æ¨¡å¼1234567891011public class StaticWay &#123; private StaticWay()&#123; &#125; public static class InnerClass&#123; private static final StaticWay STATICWAY = new StaticWay(); &#125; public static StaticWay getInstance()&#123; return InnerClass.STATICWAY; &#125;&#125; è¯¥å®ç°æ–¹å¼å…¶å®å°±æ˜¯åˆ©ç”¨çš„JVMçš„ä¸€äº›ç‰¹æ€§ ç±»çš„åŠ è½½åˆ†ä¸ºä»¥ä¸‹è¿‡ç¨‹ ç±»çš„åŠ è½½ï¼šå°†Classæ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–è¯¥ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ ç±»çš„é“¾æ¥ï¼šå°†Javaç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JVMä¸­ éªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ç¬¦åˆJVMè§„èŒƒ å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®æˆå‘˜å˜é‡çš„é»˜è®¤å€¼ è§£æï¼šJVMå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ ç±»çš„åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»æ„é€ å™¨&lt; clinit &gt;()æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå…¶çˆ¶ç±»ä¸ºåˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±» ï¼ŒJVMä¼šä¿è¯ç±»æ„é€ å™¨åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¢«æ­£ç¡®åŠ é” å…¶å®æœ€å¼€å§‹çš„é¥¿æ±‰å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯ä¹Ÿæ˜¯è¿™ä¸ªåŸç† é¢ è¦†å…¶å®ä¸€è·¯åˆ°äº†è¿™é‡Œï¼Œä»¥ä¸Šæ–¹æ³•éƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚å› ä¸ºjavaæœ‰ä¸€ä¸ªå¾ˆç‰›Xçš„åŒ…ã€‚ java.lang.reflect æˆ‘ä»¬åœ¨æœ€å¼€å§‹è¯´è¿‡ï¼Œå•ä¾‹æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯æ„é€ å™¨ç§æœ‰åŒ–ï¼Œä½†æ˜¯javaçš„åå°„æœºåˆ¶ï¼Œå®ƒä¸è®²æ­¦å¾·ï¼Œå®ƒå¯ä»¥ç›´æ¥ä¿®æ”¹æƒé™ä¿®é¥°ç¬¦ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ã€‚ 12345678public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;Hungry&gt; constructor = Hungry.class.getDeclaredConstructor(null); constructor.setAccessible(true); Hungry hungry1 = Hungry.getInstance();; Hungry hungry2 = constructor.newInstance(); System.out.println(hungry1==hungry2);&#125;//å¯æƒ³è€ŒçŸ¥æœ€åçš„ç»“æœæ˜¯ false å¯ä¸å¯ä»¥å¯¹å…¶ä½œå‡ºé˜²å¾¡å‘¢ï¼Ÿ 1234567891011121314private Hungry()&#123; if(HUNGRY!=null)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;&#125;Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490) at com.lizhi.hungry.Hungry.main(Hungry.java:26)Caused by: java.lang.IllegalArgumentException: è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼ at com.lizhi.hungry.Hungry.&lt;init&gt;(Hungry.java:15) ... 5 more ä¸Šè¿°æ–¹æ³•å¯¹é¥¿æ±‰å·²ç»ä½œå‡ºäº†åˆé€‚çš„é˜²å¾¡ï¼Œé‚£å¯¹äºæ‡’æ±‰æ¨¡å¼ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä½¿ç”¨åå°„åˆ›å»ºçš„å‘¢ï¼Ÿè¿™æ—¶å€™è¿™ä¸ªé˜²å¾¡å°±æ˜¯å½¢åŒè™šè®¾äº†ï¼Œå› ä¸ºæˆ‘ä»¬è‚¯å®šæ˜¯ç¦æ­¢åå°„å»åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ç§è‚¯å®šæ˜¯ä¸è¡Œçš„ 123456789101112131415161718192021222324252627282930public class LazyMan &#123; private static LazyMan LazyMan; private LazyMan()&#123; if(LAZYMAN!=null)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;else &#123; synchronized (LazyMan.class)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; public static LazyMan getInstance()&#123; if(LazyMan==null)&#123; synchronized (LazyMan.class)&#123; if(LazyMan==null)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; return LazyMan; &#125; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;LazyMan&gt; constructor = LazyMan.class.getDeclaredConstructor(null); constructor.setAccessible(true); LazyMan lazyMan1 = constructor.newInstance(); LazyMan lazyMan2 = LazyMan.getInstance(); System.out.println(lazyMan1==lazyMan2); &#125;&#125; æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå¸ƒå°”å€¼æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ 12345678910111213141516171819202122232425262728293031public class LazyMan &#123; private volatile static LazyMan LazyMan; private volatile static boolean flag ; private LazyMan()&#123; if(flag)&#123; throw new IllegalArgumentException(&quot;è¯·ä¸è¦å°è¯•ä½¿ç”¨åå°„ç ´åå•ä¾‹æ¨¡å¼&quot;); &#125;else &#123; flag=true; &#125; &#125; public static LazyMan getInstance()&#123; if(LazyMan==null)&#123; synchronized (LazyMan.class)&#123; if(LazyMan==null)&#123; LazyMan = new LazyMan(); &#125; &#125; &#125; return LazyMan; &#125; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;LazyMan&gt; constructor = LazyMan.class.getDeclaredConstructor(null); constructor.setAccessible(true); LazyMan lazyMan1 = constructor.newInstance();// LazyMan lazyMan2 = constructor.newInstance(); LazyMan lazyMan2 = LazyMan.getInstance();// LazyMan lazyMan1 = LazyMan.getInstance(); System.out.println(lazyMan1==lazyMan2); &#125;&#125; è¿™æ ·åå°„å°±æ— æ³•æ§åˆ¶æˆ‘ä»¬çš„å•ä¾‹äº†ï¼ æšä¸¾ç±»è¿™æ—¶å€™æœ‰æ²¡æœ‰æƒ³èµ·æ¥æˆ‘ä»¬åœ¨å­¦javaSEçš„æ—¶å€™å°±å­¦åˆ°äº†ä¸€ä¸ªè‡ªå¸¦å•ä¾‹æ¨¡å¼çš„ç±»å‹ï¼Œé‚£å°±æ˜¯æšä¸¾ç±»Enumï¼ æˆ‘ä»¬æ¥å°è¯•æ”»å‡»ä¸€ä¸‹æšä¸¾ç±»ï¼ 1234567891011public enum SingleEnum &#123; SINGLETON; public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; Constructor&lt;SingleEnum&gt; constructor = SingleEnum.class.getDeclaredConstructor(String.class, int.class); constructor.setAccessible(true); SingleEnum single1 = constructor.newInstance(&quot;single&quot;, 2); SingleEnum single2 = constructor.newInstance(&quot;single&quot;, 2); System.out.println(single1==single2); &#125;&#125; è¿™æ—¶å€™å‘ç°æŠ¥é”™äº†ï¼ï¼ 123Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot reflectively create enum objects at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484) at com.lizhi.SingleEnum.main(SingleEnum.java:12) æˆ‘ä»¬ç‚¹è¿›newInstanceæ–¹æ³•çœ‹ä¸‹æºç ï¼Œ 1234567891011121314151617181920@CallerSensitive@ForceInline // to ensure Reflection.getCallerClass optimizationpublic T newInstance(Object ... initargs) throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException&#123; if (!override) &#123; Class&lt;?&gt; caller = Reflection.getCallerClass(); checkAccess(caller, clazz, clazz, modifiers); &#125; if ((clazz.getModifiers() &amp; Modifier.ENUM) != 0) throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); ConstructorAccessor ca = constructorAccessor; // read volatile if (ca == null) &#123; ca = acquireConstructorAccessor(); &#125; @SuppressWarnings(&quot;unchecked&quot;) T inst = (T) ca.newInstance(initargs); return inst;&#125; æˆ‘ä»¬å‘ç°äº†è¿™å¥è¯throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); è¿™å°±è§£é‡Šé€šäº†ï¼ŒåŸæ¥æ˜¯javaçš„åå°„å·²ç»å¤„ç†å¥½äº†æšä¸¾ç±»ï¼Œä½¿å…¶çœŸæ­£çš„å®ç°äº†å®‰å…¨çš„å•ä¾‹ï¼","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"å·¥å‚è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼-å·¥å‚è®¾è®¡æ¨¡å¼","date":"2022-02-16T11:01:20.000Z","updated":"2022-02-25T01:45:08.928Z","comments":true,"path":"è®¾è®¡æ¨¡å¼/2022/02/16/è®¾è®¡æ¨¡å¼-å·¥å‚è®¾è®¡æ¨¡å¼/","link":"","permalink":"http://li-zhi.net.cn/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2022/02/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å·¥å‚è®¾è®¡æ¨¡å¼è¯¥è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯ï¼šå°†ç±»å®ä¾‹åŒ–çš„æ“ä½œä¸ä½¿ç”¨å¯¹è±¡çš„æ“ä½œåˆ†å¼€ï¼Œè®©ä½¿ç”¨è€…ä¸ç”¨çŸ¥é“å…·ä½“å‚æ•°å°±å¯ä»¥å®ä¾‹åŒ–å‡ºæ‰€éœ€è¦çš„äº§å“ç±»ï¼Œä»è€Œé¿å…äº†åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æ˜¾å¼æŒ‡å®šï¼Œå®ç°äº†è§£è€¦ã€‚ è¯¥è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç§å®ç° ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼ å·¥å‚æ–¹æ³•å®ç°æ¨¡å¼ æŠ½è±¡å·¥å‚å®ç°æ¨¡å¼ ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼ä¸€ä¸ªæ±½è½¦å·¥å‚ç”Ÿäº§æ±½è½¦ã€‚æœ‰ç‰¹æ–¯æ‹‰ã€å¤§ä¼—ã€äº”è± è½¦çš„æ¥å£ 123public interface Car &#123; void printName();&#125; å¤§ä¼— 123456public class DaZhong implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;å¤§ä¼—&quot;); &#125;&#125; ç‰¹æ–¯æ‹‰ 123456public class TeSiLa implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;ç‰¹æ–¯æ‹‰&quot;); &#125;&#125; äº”è± 123456public class WuLin implements Car&#123; @Override public void printName() &#123; System.out.println(&quot;äº”è±å®å…‰&quot;); &#125;&#125; å·¥å‚ 12345678910111213public class CarFactory &#123; public static Car getCar(String carName)&#123; if(&quot;å¤§ä¼—&quot;.equals(carName))&#123; return new DaZhong(); &#125;else if(&quot;äº”è±å®å…‰&quot;.equals(carName))&#123; return new WuLin(); &#125;else if(&quot;ç‰¹æ–¯æ‹‰&quot;.equals(carName))&#123; return new TeSiLa(); &#125;else &#123; return null; &#125; &#125;&#125; ç¼ºç‚¹ï¼šå¾ˆéš¾æ¨ªå‘æ‹“å±•ï¼Œå¦‚æœæˆ‘åæœŸéœ€è¦åŠ æ–°çš„è½¦å‹ï¼Œéœ€è¦æ”¹å˜åŸæ¥çš„ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼ˆOOPä¸ƒå¤§åŸåˆ™ï¼‰ ä¼˜ç‚¹ï¼šç®€å•æ˜“æ‡‚ å¯ä»¥ç®€å•ä¼˜åŒ– 1234567891011public class CarFactory &#123; public static Car getWuLin()&#123; return new WuLin(); &#125; public static Car getDaZhong()&#123; return new DaZhong(); &#125; public static Car getTeSiLa()&#123; return new TeSiLa(); &#125;&#125; å·¥å‚æ–¹æ³•å®ç°æ¨¡å¼è¿˜æ˜¯ç®€å•å·¥å‚çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æ¥æ¢ä¸ªå·¥å‚ è¿™ä¸€æ¬¡æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ±½è½¦å·¥å‚çš„æ¥å£ 123public interface CarFactory &#123; Car getCar();&#125; ç‰¹æ–¯æ‹‰å·¥å‚ 123456public class TeSiLaCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new TeSiLa(); &#125;&#125; å¤§ä¼—å·¥å‚ 123456public class DaZhongCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new DaZhong(); &#125;&#125; äº”è±å·¥å‚ 123456public class WuLinCarFactory implements CarFactory&#123; @Override public Car getCar() &#123; return new WuLin(); &#125;&#125; ç¼ºç‚¹ï¼šå½“æ±½è½¦ç±»å‹å¾ˆå¤šçš„æ—¶å€™ï¼Œä¼šæœ‰å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå„è‡ªçš„å·¥å‚ï¼Œæ²¡æœ‰å¿…è¦ æŠ½è±¡å·¥å‚å®ç°æ¨¡å¼è¿™æ¬¡æˆ‘ä»¬æ¢ä¸€ä¸ªåœºæ™¯ï¼šå°ç±³å’Œåä¸ºéƒ½æœ‰è·¯ç”±å™¨å’Œæ‰‹æœºçš„äº§å“ è·¯ç”±å™¨æ¥å£ 1234public interface Router &#123; void doConfig(); void printInfo();&#125; æ‰‹æœºæ¥å£ 1234public interface MobilePhone &#123; void sendMsg(); void callUp();&#125; å‚å®¶æ¥å£ 1234public interface ProductFactory &#123; MobilePhone getMobilePhone(); Router getRouter();&#125; åä¸ºæ‰‹æœº 1234567891011public class HuaWeiMobilePhone implements MobilePhone &#123; @Override public void sendMsg() &#123; System.out.println(&quot;åä¸ºæ‰‹æœºå‘ä¿¡æ¯&quot;); &#125; @Override public void callUp() &#123; System.out.println(&quot;åä¸ºæ‰‹æœºæ‰“ç”µè¯&quot;); &#125;&#125; åä¸ºè·¯ç”±å™¨ 1234567891011public class HuaWeiRouter implements Router &#123; @Override public void doConfig() &#123; System.out.println(&quot;åä¸ºè·¯ç”±å™¨é…ç½®&quot;); &#125; @Override public void printInfo() &#123; System.out.println(&quot;åä¸ºè·¯ç”±å™¨æ‰“å°è¯¦ç»†ä¿¡æ¯&quot;); &#125;&#125; å°ç±³è·¯ç”±å™¨ 1234567891011public class XiaoMiRouter implements Router &#123; @Override public void doConfig() &#123; System.out.println(&quot;å°ç±³è·¯ç”±å™¨é…ç½®&quot;); &#125; @Override public void printInfo() &#123; System.out.println(&quot;å°ç±³è·¯ç”±å™¨æ‰“å°è¯¦ç»†ä¿¡æ¯&quot;); &#125;&#125; å°ç±³æ‰‹æœº 1234567891011public class XiaoMiMobilePhone implements MobilePhone &#123; @Override public void sendMsg() &#123; System.out.println(&quot;å°ç±³æ‰‹æœºå‘ä¿¡æ¯&quot;); &#125; @Override public void callUp() &#123; System.out.println(&quot;å°ç±³æ‰‹æœºæ‰“ç”µè¯&quot;); &#125;&#125; åä¸ºå‚å•† 1234567891011public class HuaWeiFactory implements ProductFactory &#123; @Override public MobilePhone getMobilePhone() &#123; return new HuaWeiMobilePhone(); &#125; @Override public Router getRouter() &#123; return new HuaWeiRouter(); &#125;&#125; å°ç±³å‚å•† 1234567891011public class XiaoMiFactory implements ProductFactory &#123; @Override public MobilePhone getMobilePhone() &#123; return new XiaoMiMobilePhone(); &#125; @Override public Router getRouter() &#123; return new XiaoMiRouter(); &#125;&#125; ä¸¤ä¸ªç»´åº¦ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ˜¯äº§å“æ—ï¼ˆè·¯ç”±å™¨ã€æ‰‹æœºï¼‰ï¼Œç¬¬äºŒä¸ªç»´åº¦æ˜¯å…·ä½“å‚å•†ï¼ˆåä¸ºï¼Œå°ç±³ï¼‰ã€‚ æ ¹æ®è¿™ä¸¤ç§ç»´åº¦åˆ†åˆ«è®¾è®¡äº†æ¥å£ï¼ŒæŠ½è±¡çš„å·¥å‚å®šä¹‰ç”Ÿäº§å“ªäº›äº§å“æ—ï¼Œå…·ä½“çš„å·¥å‚å…·ä½“å®ç°è‡ªå·±çš„äº§å“æ—","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"SpringBoot-Security","slug":"SpringBoot-Security","date":"2022-02-16T08:20:46.000Z","updated":"2022-02-16T10:44:14.790Z","comments":true,"path":"javaEE/SpringBoot/2022/02/16/SpringBoot-Security/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringBoot/2022/02/16/SpringBoot-Security/","excerpt":"","text":"ç®€ä»‹Spring Security æ˜¯é’ˆå¯¹Springé¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯Spring Bootåº•å±‚å®‰å…¨æ¨¡å—é»˜è®¤çš„æŠ€æœ¯é€‰å‹ï¼Œä»–å¯ä»¥å®ç°å¼ºå¤§çš„Webå®‰å…¨æ§åˆ¶ï¼Œå¯¹äºå®‰å…¨æ§åˆ¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦å¼•å…¥spring-boot-starter-securityæ¨¡å—ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œå³å¯å®ç°å¼ºå¤§çš„å®‰å…¨ç®¡ç†! Spring Securityçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯â€œè®¤è¯â€å’Œâ€œæˆæƒâ€ï¼ˆè®¿é—®æ§åˆ¶ï¼‰ â€œè®¤è¯â€(Authentication) â€œæˆæƒâ€ (Authorization) è¿™ä¸ªæ¦‚å¿µæ˜¯é€šç”¨çš„ï¼Œè€Œä¸æ˜¯åªåœ¨Spring Security ä¸­å­˜åœ¨ã€‚ åŸºæœ¬ä½¿ç”¨ å¯¼å…¥ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; ç»§æ‰¿WebSecurityConfigurerAdapter 123@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123;&#125; é‡å†™ä»¥ä¸‹æ–¹æ³•åšå‡ºæƒé™è®¾ç½® 1234567891011121314151617@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; //é¦–é¡µéƒ½å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯å„ä¸ªçº§åˆ«ä¸‹çš„é¡µé¢è®¾ç½®æˆåªèƒ½å„è‡ªçš„çº§åˆ«æ‰å¯ä»¥è®¿é—® http.authorizeRequests() .antMatchers(&quot;/&quot;).permitAll() .antMatchers(&quot;/vip1/**&quot;).hasRole(&quot;vip1&quot;) .antMatchers(&quot;/vip2/**&quot;).hasRole(&quot;vip2&quot;) .antMatchers(&quot;/vip3/**&quot;).hasRole(&quot;vip3&quot;); //æ²¡æœ‰æƒé™é»˜è®¤å›åˆ°ç™»å½•é¡µé¢ï¼ŒloginPageè®¾ç½®ç™»å½•é¡µé¢ï¼ŒloginProcessingUrlè®¾ç½®ç™»å½•æäº¤çš„api //å¦‚æœåªå†™ http.formLogin();ä¼šæœ‰ä¸€ä¸ªé»˜è®¤ç™»å½•é¡µé¢å’Œé»˜è®¤çš„ç™»å½•æäº¤çš„api http.formLogin().loginPage(&quot;/login&quot;).loginProcessingUrl(&quot;/user/api/login&quot;); //è®¾ç½®é€€å‡ºæ—¶å€™ä½¿sessionå¤±æ•ˆï¼ŒlogoutSuccessUrlè®¾ç½®é€€å‡ºæˆåŠŸçš„é¡µé¢ http.logout().invalidateHttpSession(true).logoutSuccessUrl(&quot;/index&quot;); //è®¾ç½®â€™è®°ä½æˆ‘â€˜çš„åŠŸèƒ½ //remember-meä¸ºé»˜è®¤æäº¤çš„å‚æ•° http.rememberMe().rememberMeParameter(&quot;remember&quot;);&#125; é‡å†™ä»¥ä¸‹æ–¹æ³•åšå‡ºæˆæƒå¤„ç† 123456789101112@Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; /** * è¿™é‡Œè¦ä»æ•°æ®åº“è¯» */ //BCryptPasswordEncoderä¸ºå¯†ç è®¾ç½®åŠ å¯†ï¼Œå¦‚æœä¸è®¾ç½®ä¼šæŠ¥é”™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–åŠ å¯†çš„ç±» BCryptPasswordEncoder encoder = new BCryptPasswordEncoder(); auth.inMemoryAuthentication().passwordEncoder(encoder) .withUser(&quot;zhima&quot;).password(encoder.encode(&quot;a&quot;)).roles(&quot;vip1&quot;,&quot;vip3&quot;) .and() .withUser(&quot;lizhi&quot;).password(encoder.encode((&quot;123456&quot;))).roles(&quot;vip1&quot;,&quot;vip2&quot;,&quot;vip3&quot;);&#125; æµ‹è¯• thymeleafæ¨¡æ¿ç»“åˆSpringSecurityå¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; &lt;version&gt;3.0.4.RELEASE&lt;/version&gt;&lt;/dependency&gt; è§‚å¯Ÿè¿™ä¸ªé¡µé¢çš„ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity4&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div sec:authorize=&quot;!isAuthenticated()&quot;&gt; &lt;!--sec:authorize=&quot;!isAuthenticated()&quot;å½“ç”¨æˆ·æ²¡ç™»å½•çš„æ—¶å€™--&gt; &lt;p&gt;é¦–é¡µ&lt;/p&gt; &lt;p&gt;&lt;a th:href=&quot;@&#123;/login&#125;&quot;&gt;ç™»å½•&lt;/a&gt;&lt;/p&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;isAuthenticated()&quot;&gt; &lt;!--sec:authorize=&quot;isAuthenticated()&quot;å½“ç”¨æˆ·ç™»å½•çš„æ—¶å€™--&gt; ç”¨æˆ·åï¼š&lt;span sec:authentication=&quot;name&quot;&gt;&lt;/span&gt; &lt;!--sec:authentication=&quot;name&quot;å–å‡ºç”¨æˆ·çš„ç”¨æˆ·å--&gt; æˆæƒï¼š&lt;span sec:authentication=&quot;principal.authorities&quot;&gt;&lt;/span&gt; &lt;!--sec:authentication=&quot;principal.authorities&quot;å–å‡ºç”¨æˆ·çš„roles--&gt; &lt;p&gt;&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;æ³¨é”€&lt;/a&gt;&lt;/p&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip1&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip1&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip1æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip1&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/1&#125;&quot;&gt;vip1-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/2&#125;&quot;&gt;vip1-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip1/3&#125;&quot;&gt;vip1-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip2&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip2&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip2æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip2&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/1&#125;&quot;&gt;vip2-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/2&#125;&quot;&gt;vip2-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip2/3&#125;&quot;&gt;vip2-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasRole(&#x27;vip3&#x27;)&quot;&gt; &lt;!--sec:authorize=&quot;hasRole(&#x27;vip3&#x27;)&quot;å¦‚æœå½“å‰ç™»å½•ç”¨æˆ·æœ‰vip3æƒé™åˆ™æ˜¾ç¤ºæ­¤div--&gt; &lt;span&gt;vip3&lt;/span&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/1&#125;&quot;&gt;vip3-1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/2&#125;&quot;&gt;vip3-2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;vip3/3&#125;&quot;&gt;vip3-3&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://li-zhi.net.cn/tags/SpringBoot/"}]},{"title":"ForkJoin","slug":"ForkJoin","date":"2022-02-11T08:48:02.000Z","updated":"2022-02-11T09:27:57.367Z","comments":true,"path":"javaEE/JUC/2022/02/11/ForkJoin/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JUC/2022/02/11/ForkJoin/","excerpt":"","text":"ForkJoinä»€ä¹ˆæ˜¯ForkJoinï¼Ÿå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œæäº¤æ•ˆç‡ï¼Œå¤§æ•°æ®é‡çš„æ—¶å€™ä½¿ç”¨ï¼ æŠŠå¤§ä»»åŠ¡æ‹†åˆ†æˆå°ä»»åŠ¡ ForkJoinç‰¹ç‚¹ï¼šå·¥ä½œçªƒå–å†…éƒ¨ç»´æŠ¤çš„åŒç«¯é˜Ÿåˆ—ï¼Œä¸¤ç«¯éƒ½å¯ä»¥å‡º å¦‚ä½•ä½¿ç”¨ åˆ›å»ºForkJoinPoolå¯¹è±¡ æ–°å»ºä¸€ä¸ªè®¡ç®—ä»»åŠ¡ForkJoinTaskæ”¾å…¥æ± å­ä¸­è®¡ç®— 1234567891011121314151617181920212223242526272829303132package com.lizhi;import java.util.concurrent.RecursiveTask;public class ForkJoinDemo extends RecursiveTask&lt;Long&gt; &#123; private long start; private long end; private long temp = 10000L; public ForkJoinDemo(long start, long end) &#123; this.start = start; this.end = end; &#125; @Override public Long compute()&#123; long result = 0; if(end-start&lt;temp)&#123; for (long i = start; i &lt;= end; i++) &#123; result+=i; &#125; &#125;else &#123; long middle = (start + end) / 2; ForkJoinDemo forkJoinDemo1 = new ForkJoinDemo(start,middle); forkJoinDemo1.fork(); ForkJoinDemo forkJoinDemo2 = new ForkJoinDemo(middle,end); forkJoinDemo2.fork();//æŠŠä»»åŠ¡å‹å…¥çº¿ç¨‹é˜Ÿåˆ— result = forkJoinDemo1.join()+ forkJoinDemo2.join(); &#125; return result; &#125;&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"http://li-zhi.net.cn/categories/javaEE/JUC/"}],"tags":[{"name":"JUC","slug":"JUC","permalink":"http://li-zhi.net.cn/tags/JUC/"}]},{"title":"å‡½æ•°å¼æ¥å£","slug":"å‡½æ•°å¼æ¥å£","date":"2022-02-11T07:13:29.000Z","updated":"2022-02-17T03:09:30.549Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/11/å‡½æ•°å¼æ¥å£/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/11/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/","excerpt":"","text":"å‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£ï¼Œå³åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å³ä¸ºå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ç®€åŒ–ä½¿ç”¨ã€‚ å‡½æ•°å¼æ¥å£ä¸€èˆ¬æ¥å£ä¸Šéƒ½ä¼šæœ‰@FunctionInterfaceæ³¨è§£åšæ ‡è®°ï¼Œä½œç”¨æ˜¯æ£€æŸ¥è¯¥æ¥å£æ˜¯å¦åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœä¸å†™ï¼Œä½†æ˜¯æ¥å£ä¸­ç¡®å®åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå½±å“lambdaçš„ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸€äº›å¸¸è§çš„å‡½æ•°å¼æ¥å£ Function&lt; T , R &gt;å‡½æ•°å‹æ¥å£ Tä¸ºä¼ å…¥å‚æ•°çš„ç±»å‹ Rä¸ºè¿”å›å€¼ç±»å‹ 123Function&lt;String, String&gt; f = s -&gt; s.substring(2,4);String apply = f.apply(&quot;asdas asd &quot;);System.out.println(apply); Predicate&lt; T &gt;æ–­è¨€å‹æ¥å£ Tä¸ºä¼ å…¥å‚æ•°çš„ç±»å‹ è¿”å›å€¼ä¸ºBoolean 123Predicate&lt;String&gt; p = t-&gt;t.length()&gt;5;System.out.println(p.test(&quot;3223&quot;));System.out.println(p.test(&quot;saf223&quot;)); Consumer&lt; T &gt;æ¶ˆè´¹è€…å‹æ¥å£ Tä¸ºä¼ å…¥çš„å‚æ•° æ— è¿”å›å€¼ 123Consumer&lt;String&gt; consumer = c-&gt; System.out.println(&quot;æˆ‘ä½¿ç”¨äº†&quot;+c);consumer.accept(&quot;123&quot;);consumer.accept(&quot;456&quot;); Supplier&lt; T &gt;ç”Ÿäº§è€…å‹æ¥å£ Tä¸ºè¿”å›å€¼ç±»å‹ 12Supplier&lt;String&gt; supplier = ()-&gt; UUID.randomUUID().toString();System.out.println(supplier.get());","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"çº¿ç¨‹æ± ","slug":"JUC-çº¿ç¨‹æ± ","date":"2022-02-11T06:31:26.000Z","updated":"2022-02-11T07:22:22.592Z","comments":true,"path":"javaEE/å¤šçº¿ç¨‹/2022/02/11/JUC-çº¿ç¨‹æ± /","link":"","permalink":"http://li-zhi.net.cn/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2022/02/11/JUC-%E7%BA%BF%E7%A8%8B%E6%B1%A0/","excerpt":"","text":"çº¿ç¨‹æ± ä¸‰å¤§æ–¹æ³•æˆ‘ä»¬å…ˆçœ‹ä½¿ç”¨Executorsåˆ›å»ºçš„ä¸‰ç§çº¿ç¨‹æ±  123Executors.newSingleThreadExecutor();//åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± Executors.newFixedThreadPool();//åˆ›å»ºä¸€ä¸ªå›ºå®šæ•°ç›®çš„çº¿ç¨‹çš„çº¿ç¨‹æ± Executors.newCachedThreadPool();//ç¼“å­˜æ± ï¼Œä¼šå¤ç”¨ä¹‹å‰ä½¿ç”¨è¿‡çš„çº¿ç¨‹ æ‰§è¡Œçº¿ç¨‹ 12345678public static void main(String[] args) &#123; ExecutorService executorService = Executors.newSingleThreadExecutor(); for (int i = 0; i &lt; 10; i++) &#123; executorService.execute(()-&gt;&#123; System.out.println(Thread.currentThread().getName()); &#125;); &#125;&#125; ä¸ƒå¤§å‚æ•°é˜¿é‡Œå·´å·´è§„èŒƒä¸­æœ‰è¿™ä¹ˆä¸€æ¡ 12345çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨Executorså»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ThreadPoolExecutorçš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚ è¯´æ˜ï¼šExecutorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š1ï¼‰FixedThreadPoolå’ŒSingleThreadPool: å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´OOMã€‚2ï¼‰CachedThreadPool: å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´OOMã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹åˆ›å»ºè¿™ä¸‰ç§çº¿ç¨‹æ± çš„æ„é€ æ–¹æ³• 1234567891011121314151617public static ExecutorService newSingleThreadExecutor() &#123; return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()));&#125;public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) &#123; return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(), threadFactory);&#125;public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());&#125; å¯ä»¥å‘ç°ï¼Œè¿™ä¸‰ä¸ªæ„é€ æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡å…¶å®éƒ½æ˜¯ThreadPoolExecutorå¯¹è±¡ï¼Œåªä¸è¿‡å°±æ˜¯æ„é€ å‚æ•°ä¸ä¸€æ ·ã€‚ å‚æ•° ä½œç”¨ int corePoolSize æ ¸å¿ƒçº¿ç¨‹æ± çš„å¤§å° int maximumPoolSize æœ€å¤§çº¿ç¨‹æ± çš„å¤§å° long keepAliveTime è¶…æ—¶æ—¶é—´è¿‡åå°±é‡Šæ”¾ TimeUnit unit è¶…æ—¶æ—¶é—´å•ä½ BlockingQueue&lt; Runnable&gt; workQueue é˜»å¡é˜Ÿåˆ— ThreadFactory threadFactory çº¿ç¨‹å·¥å‚ï¼Œåˆ›å»ºçº¿ç¨‹çš„ï¼Œä¸€èˆ¬ä¸ç”¨åŠ¨ RejectedExecutionHandler handler æ‹’ç»ç­–ç•¥ 123456789101112131415161718192021public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; corePoolSizeä¸ºä¸€ç›´å¼€ç€çš„çº¿ç¨‹æ•°ï¼Œå½“workQueueå·²ç»æ»¡äº†ï¼Œåˆ™ç»§ç»­å¼€å¯çº¿ç¨‹ç›´åˆ°maximumPoolSizeï¼Œå½“çº¿ç¨‹æ•°åˆ°äº†maximumPoolSizeï¼Œç„¶åworkQueueä¹Ÿæ»¡äº†ï¼Œå¦‚æœè¿˜æœ‰æ–°çš„ä»»åŠ¡ï¼Œåˆ™ä½¿ç”¨handleræ‹’ç»ç­–ç•¥å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ å½“corePoolSize-maximumPoolSizeåŒºé—´çš„çº¿ç¨‹ç­‰å¾…äº†workQueueæ—¶é—´åï¼Œè¿˜æ˜¯æ²¡ä»»åŠ¡æ¥ï¼Œåˆ™å…³é—­è¯¥åŒºé—´çš„çº¿ç¨‹ 123456789ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor( 2, 5, 3, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(3), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy()); CPUå¯†é›†å‹å’ŒIOå¯†é›†å‹æœ€å¤§çº¿ç¨‹æ•°åˆ°åº•å¦‚ä½•å®šä¹‰ï¼Ÿ CPUå¯†é›†å‹å‡ æ ¸CPUå°±æ˜¯å‡ ï¼Œå¯ä»¥ä¿è¯æ•ˆç‡æœ€é«˜ 1Runtime.getRuntime().availableProcessors()//åŠ¨æ€è·å–cpuæ ¸æ•° IOå¯†é›†å‹ç¨‹åºé‡Œé¢æœ‰å¤šå°‘ä¸ªéå¸¸æ¶ˆè€—IOçš„çº¿ç¨‹ï¼Œä¸€èˆ¬æœ€å¤§çº¿ç¨‹æ•°è®¾ç½®ä¸ºè¯¥æ•°å­—çš„ä¸¤å€ å››å¤§æ‹’ç»ç­–ç•¥ AbortPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œå¹¶ä¸”æŠ›å‡ºå¼‚å¸¸ CallerRunsPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œå¾€ä¸Šä¼ é€’æ­¤ä»»åŠ¡ï¼Œå“ªæ¥çš„å›å“ªé‡Œå» DiscardOldestPolicyä¸å¤„ç†æ­¤ä»»åŠ¡ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ DiscardPolicyå°è¯•å’Œæœ€è€çš„é‚£ä¸€ä¸ªçº¿ç¨‹ç«äº‰ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"å¤šçº¿ç¨‹","slug":"javaEE/å¤šçº¿ç¨‹","permalink":"http://li-zhi.net.cn/categories/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://li-zhi.net.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"JVM-ç®€ä»‹","slug":"JVM-ç®€ä»‹","date":"2022-02-10T04:24:26.000Z","updated":"2022-03-18T10:13:51.013Z","comments":true,"path":"javaEE/JVM/2022/02/10/JVM-ç®€ä»‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/JVM/2022/02/10/JVM-%E7%AE%80%E4%BB%8B/","excerpt":"","text":"JVMçš„ä½“ç³»ç»“æ„ä¸‹é¢æ˜¯ç®€æ˜“çš„ç»“æ„å›¾ æ ˆä¸­ä¸ä¼šæœ‰åƒåœ¾å›æ”¶ å¤§éƒ¨åˆ†JVMè°ƒä¼˜éƒ½æ˜¯åœ¨å †å†…å­˜ä¸Šè¿›è¡Œè°ƒä¼˜ è¯¦ç»†çš„ç»“æ„å›¾å¦‚ä¸‹ æ²™ç®±å®‰å…¨æœºåˆ¶â€‹ javaå®‰å…¨æ¨¡å‹çš„æ ¸å¿ƒå°±æ˜¯javaæ²™ç®±ï¼ˆsandboxï¼‰ã€‚æ²™ç®±æ˜¯ä¸€ä¸ªé™åˆ¶ç¨‹åºè¿è¡Œçš„ç¯å¢ƒã€‚æ²™ç®±æœºåˆ¶å°±æ˜¯å°†javaä»£ç é™å®šåœ¨JVMç‰¹å®šçš„è¿è¡ŒèŒƒå›´å†…ï¼Œå¹¶ä¸”ä¸¥æ ¼é™åˆ¶ä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®ï¼Œé€šè¿‡è¿™æ ·çš„æªæ–½æ¥ä¿è¯å¯¹ä»£ç çš„æœ‰æ•ˆéš”ç¦»ï¼Œé˜²æ­¢å¯¹æœ¬åœ°ç³»ç»Ÿé€ æˆç ´åã€‚æ²™ç®±ä¸»è¦é™åˆ¶ç³»ç»Ÿèµ„æºï¼ˆCPUï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œç½‘ç»œï¼‰è®¿é—®ã€‚ä¸åŒçº§åˆ«çš„æ²™ç®±å¯¹è¿™äº›èµ„æºçš„é™åˆ¶å°±ä¸ä¸€æ · â€‹ æ‰€æœ‰çš„javaç¨‹åºè¿è¡Œéƒ½å¯ä»¥æŒ‡å®šæ²™ç®±ï¼Œå¯ä»¥æŒ‡å®šå®‰å…¨ç­–ç•¥ã€‚ â€‹ åœ¨javaä¸­ï¼Œå°†æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæœ¬åœ°ä»£ç å’Œè¿œç¨‹ä»£ç ä¸¤éƒ¨åˆ†ï¼Œæœ¬åœ°ä»£ç æ˜¯é»˜è®¤å¯ä¿¡ä»»çš„ï¼Œè€Œè¿œç¨‹ä»£ç åˆ™è¢«çœ‹åšæ˜¯ä¸å—ä¿¡ä»»çš„ã€‚å¯¹äºæˆäºˆä¿¡ä»»çš„æœ¬åœ°ä»£ç ï¼Œå¯ä»¥è®¿é—®ä¸€åˆ‡æœ¬åœ°èµ„æºã€‚è€Œå¯¹äºéæˆäºˆä¿¡ä»»çš„è¿œç¨‹ä»£ç åœ¨æ—©æœŸçš„javaå®ç°ä¸­ï¼Œå®Œå…¨ä¾èµ–äºjavaæ²™ç®±æœºåˆ¶ã€‚ä¸‹å›¾æ˜¯jdk1.0çš„å®‰å…¨æ¨¡å‹ â€‹ ä½†æ˜¯å¦‚æ­¤ä¸¥æ ¼çš„å®‰å…¨æœºåˆ¶ä¹Ÿç»™ç¨‹åºçš„åŠŸèƒ½æ‹“å±•å¸¦æ¥äº†éšœç¢ï¼Œæ¯”å¦‚ç”¨æˆ·å¸Œæœ›è¿œç¨‹ä»£ç è®¿é—®æœ¬åœ°èµ„æºçš„æ—¶å€™ï¼Œå°±ä¼šè¢«æ²™ç®±æœºåˆ¶æ‰€æ‹’ç»ã€‚æ‰€ä»¥åœ¨åæ¥çš„jdk1.1ç‰ˆæœ¬ä¸­ï¼Œé’ˆå¯¹å®‰å…¨æœºåˆ¶åšå‡ºäº†æ”¹è¿›ï¼Œå¢åŠ äº†å®‰å…¨ç­–ç•¥ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®æƒé™ã€‚ä¸‹å›¾æ˜¯jdk1.1çš„å®‰å…¨æ¨¡å‹ â€‹ åœ¨jdk1.2çš„ç‰ˆæœ¬ä¸­ï¼Œå†æ¬¡å¼•è¿›å®‰å…¨æœºåˆ¶ï¼Œå¢åŠ äº†ä»£ç ç­¾åï¼Œä¸è®ºæ˜¯æœ¬åœ°ä»£ç è¿˜æ˜¯è¿œç¨‹ä»£ç ï¼Œéƒ½ä¼šæŒ‰ç…§ç”¨æˆ·çš„å®‰å…¨ç­–ç•¥è®¾å®šï¼Œç”±ç±»åŠ è½½å™¨åŠ è½½åˆ°JVMä¸­æƒé™ä¸åŒçš„è¿è¡Œç©ºé—´ï¼Œæ¥å®ç°å·®å¼‚åŒ–çš„ä»£ç æ‰§è¡Œæƒé™æ§åˆ¶ã€‚ä¸‹å›¾æ˜¯jdk1.2çš„å®‰å…¨æ¨¡å‹ â€‹ å½“å‰æœ€æ–°çš„å®‰å…¨æœºåˆ¶å®ç°ï¼Œåˆ™å¼•å…¥äº†åŸŸï¼ˆdomainï¼‰çš„æ¦‚å¿µã€‚JVMä¼šæŠŠæ‰€æœ‰çš„ä»£ç åŠ è½½åˆ°ä¸åŒçš„ç³»ç»Ÿå’Œåº”ç”¨åŸŸï¼Œç³»ç»ŸåŸŸéƒ¨åˆ†ä¸“é—¨è´Ÿè´£ä¸å…³é”®èµ„æºè¿›è¡Œäº¤äº’ï¼Œè€Œå„ä¸ªåº”ç”¨åŸŸéƒ¨åˆ†åˆ™é€šè¿‡ç³»ç»Ÿçš„éƒ¨åˆ†ä»£ç†æ¥å¯¹å„ç§éœ€è¦çš„èµ„æºè¿›è¡Œè®¿é—®ã€‚è™šæ‹Ÿæœºä¸­ä¸åŒçš„å—ä¿æŠ¤åŸŸï¼ˆProtected Domainï¼‰ï¼Œå¯¹åº”ä¸ä¸€æ ·çš„æƒé™ï¼ˆPermissionï¼‰ã€‚å­˜åœ¨äºä¸åŒåŸŸä¸­çš„ç±»æ–‡ä»¶å°±å…·æœ‰äº†å½“å‰åŸŸçš„å…¨éƒ¨æƒé™ã€‚ä¸‹å›¾æ˜¯jdk1.6çš„å®‰å…¨æ¨¡å‹ â€‹ ç»„æˆæ²™ç®±çš„åŸºæœ¬ç»„ä»¶: å­—èŠ‚ç æ ¡éªŒå™¨(bytecode verifier):ç¡®ä¿javaç±»æ–‡ä»¶é­å¾ªjavaè¯­è¨€è§„èŒƒã€‚è¿™æ ·å¯ä»¥å¸®åŠ©avaç¨‹åºå®ç°å†…å­˜ä¿æŠ¤ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»æ–‡ä»¶éƒ½ä¼šç»è¿‡å­—èŠ‚ç æ ¡éªŒï¼Œæ¯”å¦‚æ ¸å¿ƒç±»ã€‚ ç±»è£…è½½å™¨(classloader):å…¶ä¸­ç±»è£…è½½å™¨åœ¨3ä¸ªæ–¹é¢å¯¹javaæ²™ç®±èµ·ä½œç”¨ å®ƒé˜²æ­¢æ¶æ„ä»£ç å»å¹²æ¶‰å–„æ„çš„ä»£ç ; å®ƒå®ˆæŠ¤äº†è¢«ä¿¡ä»»çš„ç±»åº“è¾¹ç•Œ; å®ƒå°†ä»£ç å½’å…¥ä¿æŠ¤åŸŸï¼Œç¡®å®šäº†ä»£ç å¯ä»¥è¿›è¡Œå“ªäº›æ“ä½œã€‚ â€‹ è™šæ‹Ÿæœºä¸ºä¸åŒçš„ç±»åŠ è½½å™¨è½½å…¥çš„ç±»æä¾›ä¸åŒçš„å‘½åç©ºé—´ï¼Œå‘½åç©ºé—´ç”±ä¸€ç³»åˆ—å”¯ä¸€çš„åç§°ç»„æˆï¼Œæ¯ä¸€ä¸ªè¢«è£…è½½çš„ç±»å°†æœ‰ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªå‘½åç©ºé—´æ˜¯ç”±avaè™šæ‹Ÿæœºä¸ºæ¯ä¸€ä¸ªç±»è£…è½½å™¨ç»´æŠ¤çš„ï¼Œå®ƒä»¬äº’ç›¸ä¹‹é—´ç”šè‡³ä¸å¯è§ã€‚ ç±»è£…è½½å™¨é‡‡ç”¨çš„æœºåˆ¶æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ã€‚ ä»æœ€å†…å±‚IVMè‡ªå¸¦ç±»åŠ è½½å™¨å¼€å§‹åŠ è½½ï¼Œå¤–å±‚æ¶æ„åŒåç±»å¾—ä¸åˆ°åŠ è½½ä»è€Œæ— æ³•ä½¿ç”¨; ç”±äºä¸¥æ ¼é€šè¿‡åŒ…æ¥åŒºåˆ†äº†è®¿é—®åŸŸï¼Œå¤–å±‚æ¶æ„çš„ç±»é€šè¿‡å†…ç½®ä»£ç ä¹Ÿæ— æ³•è·å¾—æƒé™è®¿é—®åˆ°å†…å±‚ç±»ï¼Œç ´åä»£ç å°±è‡ªç„¶æ— æ³•ç”Ÿæ•ˆã€‚ å­˜å–æ§åˆ¶å™¨(access controller):å­˜å–æ§åˆ¶å™¨å¯ä»¥æ§åˆ¶æ ¸å¿ƒAPIå¯¹æ“ä½œç³»ç»Ÿçš„å­˜å–æƒé™ï¼Œè€Œè¿™ä¸ªæ§åˆ¶çš„ç­–ç•¥è®¾å®šï¼Œå¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šã€‚ å®‰å…¨ç®¡ç†å™¨(security manager):æ˜¯æ ¸å¿ƒAPIå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸»è¦æ¥å£ã€‚å®ç°æƒé™æ§åˆ¶ï¼Œæ¯”å­˜å–æ§åˆ¶å™¨ä¼˜å…ˆçº§é«˜ã€‚ å®‰å…¨è½¯ä»¶åŒ…(security package):javasecurityä¸‹çš„ç±»å’Œæ‰©å±•åŒ…ä¸‹çš„ç±»ï¼Œå…è®¸ç”¨æˆ·ä¸ºè‡ªå·±çš„åº”ç”¨å¢åŠ æ–°çš„å®‰å…¨ç‰¹æ€§ï¼ŒåŒ…æ‹¬: å®‰å…¨æä¾›è€… æ¶ˆæ¯æ‘˜è¦ æ•°å­—ç­¾å åŠ å¯† é‰´åˆ« nativeå‡¡æ˜¯å¸¦äº†nativeå…³é”®è¯çš„æ–¹æ³•ï¼Œè¯´æ˜è¿™ä¸ªæ–¹æ³•javaè¯­è¨€å®ç°ä¸äº†ï¼Œæ­¤æ–¹æ³•ä¼šè¢«æ”¾å…¥æœ¬åœ°æ–¹æ³•æ ˆä¸­ï¼Œè¯¥æ ˆé€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰å»è°ƒç”¨åº•å±‚çš„Cæˆ–è€…C++è¯­è¨€å†™çš„æ–¹æ³•ã€‚ æ–¹æ³•åŒºMethod Area æ–¹æ³•åŒºæ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€æœ‰å­—æ®µå’Œæ–¹æ³•å­—èŠ‚ç ï¼Œä»¥åŠä¸€äº›ç‰¹æ®Šæ–¹æ³•ï¼Œå¦‚æ„é€ å‡½æ•°ï¼Œæ¥å£ä»£ç ä¹Ÿåœ¨æ­¤å®šä¹‰ï¼Œç®€å•æ¥è¯´ï¼Œæ‰€æœ‰å®šä¹‰çš„æ–¹æ³•çš„ä¿¡æ¯éƒ½ä¼šè¢«ä¿å­˜åœ¨è¯¥åŒºåŸŸ é™æ€å˜é‡ã€å¸¸é‡ã€ç±»ä¿¡æ¯ï¼ˆæ„é€ æ–¹æ³•ï¼Œæ¥å£å®šä¹‰ï¼‰ï¼Œè¿è¡Œæ—¶çš„å¸¸é‡æ± å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼Œä½†æ˜¯å®ä¾‹å˜é‡å­˜åœ¨äºå†…å­˜åŒºä¸­ï¼Œä¸æ–¹æ³•åŒºæ— å…³ PCå¯„å­˜å™¨ç¨‹åºè®¡æ•°å™¨ï¼šProgram Counter Register â€‹ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œå®ç°ç¨‹åºç§æœ‰çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•åŒºä¸­çš„æ–¹æ³•å­—èŠ‚ç  å †ï¼ˆHeapï¼‰ä¸€ä¸ªJVMåªæœ‰ä¸€ä¸ªå †å†…å­˜ï¼Œå †å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œé‡Œé¢ä¸€èˆ¬æ”¾å®ä¾‹å¯¹è±¡ å †å†…å­˜ç»†åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š æ–°ç”ŸåŒº Young&#x2F;New å…»è€åŒº old æ°¸ä¹…åŒº perm GCåƒåœ¾å›æ”¶ä¸»è¦åœ¨ä¼Šç”¸å›­åŒºå’Œå…»è€åŒº å †å†…å­˜æ»¡äº†å°±ä¼šçˆ†OOMï¼ˆOutOfMemoryErrorï¼‰é”™è¯¯ æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯åœ¨ä¼Šç”¸å›­åŒºäº§ç”Ÿçš„ ä¼Šç”¸å›­æ»¡äº†ä¼šè§¦å‘è½»GCï¼Œæœ‰çš„å°±ç›´æ¥æ­»äº†ï¼Œç„¶åç•™ä¸‹æ¥çš„å»å¾€å¹¸å­˜åŒº å¦‚æœå¹¸å­˜åŒºæ»¡äº†ï¼Œå°±å»å¾€è€å¹´åŒº å¦‚æœè€å¹´åŒºæ»¡äº†ï¼Œè§¦å‘ä¸€æ¬¡é‡GCï¼ˆä¼Šç”¸å›­åŒºå’Œå¹¸å­˜è€…åŒºéƒ½æ¸…ä¸€éï¼Œæ´»ä¸‹æ¥çš„å»è€å¹´åŒºï¼‰ åƒåœ¾å¤„ç†å™¨GCGCçš„ä½œç”¨åŒºåŸŸåªæœ‰å † ä¸¤ç§å›æ”¶ï¼šè½»GC ã€Full GC GCçš„ç®—æ³• æ ‡è®°æ¸…é™¤æ³• æ ‡è®°æ•´ç†æ³• æ ‡è®°å¤åˆ¶ç®—æ³• å¼•ç”¨è®¡æ•°æ³•ï¼ˆç»™æ¯ä¸€ä¸ªå¯¹è±¡åˆ†é…ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå°†è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡æ¸…é™¤ï¼‰ æ ‡è®°å¤åˆ¶æ³•è°ç©ºè°æ˜¯toå¹¸å­˜åŒº æ–°ç”ŸåŒºä¸»è¦ä½¿ç”¨å¤åˆ¶ç®—æ³• å¥½å¤„ï¼šæ²¡æœ‰å†…å­˜ç¢ç‰‡ åå¤„ï¼šæµªè´¹äº†å†…å­˜ç©ºé—´ å¤åˆ¶ç®—æ³•ä½¿ç”¨æœ€ä½³åœºæ™¯ï¼šå¯¹è±¡å­˜æ´»åº¦è¾ƒä½çš„æ—¶å€™ æ ‡è®°æ¸…é™¤æ³•æ‰«æè¿™äº›æ´»ç€çš„å¯¹è±¡ï¼Œæ¸…é™¤æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ ç¼ºç‚¹ï¼šä¸¤æ¬¡æ‰«æï¼Œæµªè´¹æ—¶é—´ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ ä¼˜ç‚¹ï¼šä¸éœ€è¦é¢å¤–ç©ºé—´ æ ‡è®°æ•´ç†æ³•å†æ¬¡æ‰«æï¼Œå‘ä¸€ç«¯ç§»åŠ¨å­˜æ´»çš„å¯¹è±¡ åˆ†ä»£æ”¶é›†ç®—æ³• å¹´è½»ä»£ï¼š å­˜æ´»ç‡ä½ å¤åˆ¶ç®—æ³• è€å¹´ä»£ å­˜æ´»ç‡é«˜ æ ‡è®°æ¸…é™¤+æ ‡è®°å‹ç¼©æ··åˆå®ç° è¿™äº”é“é¢è¯•é¢˜å¯ä»¥è¯•ç€åšä¸€åš è¯·ä½ è°ˆè°ˆä½ å¯¹JVMçš„ç†è§£ï¼Ÿjava8è™šæ‹Ÿæœºå’Œä¹‹å‰çš„æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ ä»€ä¹ˆæ˜¯OOMï¼Œä»€ä¹ˆæ˜¯æ ˆæº¢å‡ºï¼Ÿæ€ä¹ˆåˆ†æï¼Ÿ JVMçš„å¸¸ç”¨è°ƒä¼˜å‚æ•°æœ‰å“ªäº›ï¼Ÿ å†…å­˜å¿«ç…§å¦‚ä½•æŠ“å–ï¼Ÿæ€ä¹ˆåˆ†æDumpæ–‡ä»¶ï¼Ÿ è°ˆè°ˆä½ å¯¹ç±»åŠ è½½å™¨çš„è®¤è¯†ï¼Ÿ","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"http://li-zhi.net.cn/categories/javaEE/JVM/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"http://li-zhi.net.cn/tags/JVM/"}]},{"title":"ifè¯­å¥å‡å°‘åµŒå¥—","slug":"ifè¯­å¥å‡å°‘åµŒå¥—","date":"2022-02-07T12:32:09.000Z","updated":"2022-03-02T10:19:12.798Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/ifè¯­å¥å‡å°‘åµŒå¥—/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/if%E8%AF%AD%E5%8F%A5%E5%87%8F%E5%B0%91%E5%B5%8C%E5%A5%97/","excerpt":"","text":"ifçš„å¤šé‡åµŒå¥—ç›´æ¥ä¸¾æ —å­ï¼šæœ‰ä¸€ä¸ªç”µå•†å¹³å°ï¼Œå½“ç”¨æˆ·æ¶ˆè´¹æ»¡1000å…ƒï¼Œæ ¹æ®vipç­‰çº§å¯äº«å—ä¼˜æƒ  æ™®é€šä¼šå‘˜ ä¸æ‰“æŠ˜ ç™½é“¶ä¼šå‘˜ ä¼˜æƒ 50å…ƒ é»„é‡‘ä¼šå‘˜ æ‰“8æŠ˜ ç™½é‡‘ä¼šå‘˜ ä¼˜æƒ 50å…ƒï¼Œå†æ‰“ä¸ƒæŠ˜ Version 1.0ä¼šå‘˜ç±»å‹æšä¸¾ 1234567891011121314151617181920public enum UserType &#123; /** * ORDINARY_VIP: æ™®é€šä¼šå‘˜ * SILVER_VIP: ç™½é“¶ä¼šå‘˜ * GOLD_VIPï¼š é»„é‡‘ä¼šå‘˜ * PLATINUM_VIPï¼šç™½é‡‘ä¼šå‘˜ */ ORDINARY_VIP(1), SILVER_VIP(2), GOLD_VIP(3), PLATINUM_VIP(4); private int code; UserType(int code) &#123; this.code = code; &#125; public int getCode() &#123; return code; &#125;&#125; 12345678910111213private static double getResult(long money, int type)&#123; double result = money; if(money &gt;= 1000)&#123; if(type == UserType.SILVER_VIP.getCode())&#123; result = money - 50; &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = money * 0.8; &#125;else if(type == UserType.PLATNUM_VIP.getCode())&#123; result = (money - 50)*0.7; &#125; &#125; return result;&#125; å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„ifè¯­å¥å¯èƒ½ä¸æ˜¯é‚£ä¹ˆç¹çï¼Œä½†æ˜¯å½“ä¸šåŠ¡ååˆ†å¤æ‚æˆ–è€…å½“ç­–ç•¥ä¼šç»å¸¸å˜åŠ¨çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä¿®æ”¹æºä»£ç ï¼Œè¿™å°±ä¸¥é‡è¿åäº†å¼€é—­åŸåˆ™ï¼Œä½†æ˜¯æˆ‘å¯ä¸å¯å‡å°‘ifçš„å‡ºç°ç”šè‡³ä¸å‡ºç°å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬ç»“åˆä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆæ¥ä¸€æ­¥ä¸€æ­¥å°è¯•è§£å†³é—®é¢˜ å«è¯­å¥ ç­–ç•¥æ¨¡å¼ Version 1.1å«è¯­å¥ï¼Œå°±æ˜¯å°†ä¸ç¬¦åˆçš„æƒ…å†µç›´æ¥è¿”å› 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.0ç­–ç•¥æ¨¡å¼å°±æ˜¯å°†å„ä¸ªä¼šå‘˜çš„ä¼˜æƒ æ–¹å¼æå‡ºä¸€ä¸ªæ¥å£ï¼Œåˆ†åˆ«å®ç° ç­–ç•¥æ¥å£ 123public interface Strategy &#123; double compute(long money);&#125; æ™®é€šä¼šå‘˜ 123456public class OrdinaryStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money; &#125;&#125; é»„é‡‘ä¼šå‘˜ 123456public class GoldStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money*0.8; &#125;&#125; ç™½é‡‘ä¼šå‘˜ 123456public class PlatinumStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125;&#125; ç™½é“¶ä¼šå‘˜ 123456public class SilverStrategy implements Strategy&#123; @Override public double compute(long money) &#123; return money-50; &#125;&#125; 12345678910111213141516public static double getResult(long money,int type)&#123; double result = money; if(money&lt;1000)&#123; return result; &#125; if(type== UserType.ORDINARY_VIP.getCode())&#123; result = new OrdinaryStrategy().compute(money); &#125;else if(type == UserType.SILVER_VIP.getCode())&#123; result = new SilverStrategy().compute(money); &#125;else if(type == UserType.GOLD_VIP.getCode())&#123; result = new GoldStrategy().compute(money); &#125;else if(type==UserType.PLATINUM_VIP.getCode())&#123; result = new PlatinumStrategy().compute(money); &#125; return result;&#125; Version 2.112345678910111213public class StrategyFactory &#123; public static Map&lt;Integer,Strategy&gt; map; private StrategyFactory()&#123; map = new HashMap&lt;&gt;(); init(); &#125; private void init()&#123; map.put(UserType.ORDINARY_VIP.getCode(), new OrdinaryStrategy()); map.put(UserType.SILVER_VIP.getCode(), new SilverStrategy()); map.put(UserType.GOLD_VIP.getCode(),new GoldStrategy()); map.put(UserType.PLATINUM_VIP.getCode(),new PlatinumStrategy()); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125; è¿™é‡Œçš„å·¥å‚è¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç° Version 2.2ç­–ç•¥æ¥å£ 1234public interface Strategy &#123; double compute(long money); int getType();&#125; é»„é‡‘ä¼šå‘˜ 123456789101112public class GoldStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money*0.8; &#125; @Override public int getType() &#123; return UserType.GOLD_VIP.getCode(); &#125;&#125; æ™®é€šä¼šå‘˜ 1234567891011public class OrdinaryStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money; &#125; @Override public int getType() &#123; return UserType.ORDINARY_VIP.getCode(); &#125;&#125; ç™½é‡‘ä¼šå‘˜ 1234567891011public class PlatinumStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return (money-50)*0.7; &#125; @Override public int getType() &#123; return UserType.PLATINUM_VIP.getCode(); &#125;&#125; ç™½é“¶ä¼šå‘˜ 1234567891011public class SilverStrategy implements Strategy &#123; @Override public double compute(long money) &#123; return money-50; &#125; @Override public int getType() &#123; return UserType.SILVER_VIP.getCode(); &#125;&#125; ç­–ç•¥å·¥å‚ 12345678910111213141516public class StrategyFactory &#123; private static Map&lt;Integer, Strategy&gt; map; public StrategyFactory() &#123; map=new HashMap&lt;&gt;(); init(); &#125; private void init() &#123; List&lt;Strategy&gt; strategies=new ArrayList&lt;&gt;(); strategies.add(new GoldStrategy()); strategies.add(new OrdinaryStrategy()); strategies.add(new PlatinumStrategy()); strategies.add(new SilverStrategy()); map=strategies.stream().collect(Collectors.toMap(Strategy::getType,strategy -&gt; strategy)); &#125;&#125; 123456789public static double getResult(int userType, long money)&#123; if(money&lt;1000)&#123; return money; &#125; if(StrategyFactory.map.get(userType)==null)&#123; throw new IllegalArgumentException(&quot;å‚æ•°é”™è¯¯ï¼Œæ— æ­¤ç±»å‹çš„ç”¨æˆ·&quot;); &#125; return map.get(userType).compute(money);&#125;","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Cookieå’ŒSession","slug":"Cookieå’ŒSession","date":"2022-02-07T10:04:34.000Z","updated":"2022-02-07T11:13:21.241Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Cookieå’ŒSession/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Cookie%E5%92%8CSession/","excerpt":"","text":"æƒ…æ™¯åœ¨çº¿æˆ‘ä»¬åœ¨ç™»å½•å®Œä¸€ä¸ªç½‘ç«™åï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚å¤§å®¶æœ‰æ²¡æœ‰å¥½å¥‡è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å­¦è¿‡HTTPçš„éƒ½çŸ¥é“ï¼ŒHTTPè®¿é—®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨æ˜¯ä¸çŸ¥é“ä½ è¿™æ˜¯ç¬¬å‡ æ¬¡è®¿é—®è¯¥ç½‘ç«™çš„ã€‚ é‚£ä¹ˆCookieï¼ŒSessionå°±æ˜¯æ¥åšåˆ°è®©æœåŠ¡å™¨é¢„å…ˆçŸ¥é“ä¸€äº›ä¿¡æ¯ï¼Œå…¶æ ¸å¿ƒå…¶å®å°±æ˜¯å­˜å‚¨ã€‚ Cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ï¼ŒSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ ä¸‹é¢æˆ‘ä»¬æ¥è¯´è¯´Cookie CookieCookieç¿»è¯‘ä¸ºå°é¥¼å¹² è¯¥æŠ€æœ¯å¯ä»¥å®ç°æ¯æ¬¡HTTPè¯·æ±‚éƒ½è‡ªåŠ¨å¸¦æ•°æ®ç»™æœåŠ¡å™¨ï¼Œä»è€Œå®ç°æœåŠ¡å™¨å¯ä»¥åœ¨è¯·æ±‚çš„æ—¶å€™å°±é¢„å…ˆçŸ¥é“ä¸€äº›ä¿¡æ¯ã€‚ æµç¨‹å›¾å¦‚ä¸‹ æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹Cookie å¦‚æœä½¿ç”¨Cookieä¿å­˜è´¦å·å¯†ç ï¼Œé‚£åªè¦åˆ«äººç›—åˆ°ä½ çš„Cookieï¼Œé‚£ä¹ˆä½ çš„è´¦å·å¯†ç å°±æ³„éœ²äº†ï¼æ‰€ä»¥å°±å‡ºç°äº†Sessionçš„æŠ€æœ¯ SessionSessionç¿»è¯‘ä¸ºä¼šè¯ å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨è¿›å»ç½‘ç«™ï¼Œåˆ™å¼€å§‹ä¸€ä¸ªä¼šè¯ï¼Œä½†æ˜¯ä¼šè¯çš„ç»“æŸæ¯”è¾ƒæ¨¡ç³Šï¼Œå¯ä»¥è‡ªåŠ¨è®¾ç½®sessionè¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ°¸ä¸è¿‡æœŸã€‚ Sessionä¿å­˜åœ¨æœåŠ¡å™¨ï¼Œå½“äº§ç”Ÿäº†ä¸€æ¬¡ä¼šè¯ï¼Œåˆ™æœåŠ¡å™¨è¿”å›çš„æ—¶å€™æºå¸¦å­˜å‚¨sessionç›¸å…³ä¿¡æ¯çš„Cookieï¼Œå¹¶ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œè€Œè¿™ä¸ªsessionå¯¹è±¡çš„ä¿¡æ¯åˆ™ä¿å­˜åœ¨æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­ã€‚ ä¸‹é¢æ˜¯æµç¨‹å›¾","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Token","slug":"Token","date":"2022-02-07T10:01:03.000Z","updated":"2022-02-07T11:28:54.376Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Token/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Token/","excerpt":"","text":"ä¸ºä»€ä¹ˆä¼šå‡ºç°Tokenç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“Cookieå’ŒSessionï¼ˆä¸çŸ¥é“è¿™ä¸¤è€…çš„åœ¨æˆ‘å¦å¤–ä¸¤ç¯‡åšå®¢é‡Œé¢æœ‰å†™ï¼Œé™„ä¸Šé“¾æ¥ï¼ŒCookieå’ŒSessionï¼‰ éšç€æŠ€æœ¯çš„å‘å±•ï¼Œç”¨æˆ·ç¾¤ä½“å˜çš„è¶Šæ¥è¶Šå¤§ï¼Œå¦‚æœæœåŠ¡å™¨ä¾æ—§ä½¿ç”¨åŸºäºCookieçš„Sessionï¼Œåœ¨æŸä¸€æ—¶é—´æ®µæœ‰å¤§é‡ç”¨æˆ·è®¿é—®çš„è¯ï¼ŒæœåŠ¡å™¨å°±ä¼šå°†å¤§é‡çš„Sessionä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå¯¼è‡´æœåŠ¡å™¨æ€§èƒ½é™ä½ï¼Œä¸ºäº†å¤„ç†è¿™ç§é—®é¢˜ï¼Œå°±å‡ºç°äº†ä¸€ç§æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯JWT(JSON Web Token) Token JWTæ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„ï¼Œåˆ†åˆ«æ˜¯headerã€payloadã€signature headeréƒ¨åˆ†ç”³æ˜ç”¨ä»€ä¹ˆç®—æ³•ç”Ÿæˆç­¾å payloadéƒ¨åˆ†ä¿å­˜ä¸€äº›æ•°æ® signatureéƒ¨åˆ†ä¿å­˜headerç”³æ˜çš„ç®—æ³•ç”Ÿæˆçš„ç­¾å å°ç»“Sessionã€Cookieã€Tokenéƒ½æ˜¯æ˜¯åœ¨æœåŠ¡å™¨äº§ç”Ÿçš„ Cookieæ˜¯ä¿å­˜SessionIDçš„è½½ä½“ï¼Œä½†æ˜¯Sessionå¯¹è±¡æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨æ•°æ®åº“ä¸­çš„ Tokenåœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œä¿å­˜æœåŠ¡å™¨ç«¯çš„å¯†æ–‡ï¼Œå°†tokenæ”¾å…¥cookieå‘é€è¯¶å®¢æˆ·ç«¯å¹¶äº¤ç”±å®¢æˆ·ç«¯ä¿å­˜","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"Ngrok","slug":"Ngrok","date":"2022-02-07T09:30:02.000Z","updated":"2022-02-07T10:00:22.913Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/Ngrok/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/Ngrok/","excerpt":"","text":"ä½¿ç”¨Ngrokå¿«é€Ÿéƒ¨ç½²é¡¹ç›® æ‰“å¼€https://ngrok.cc/ æ³¨å†Œä¸€ä¸ªè´¦æˆ· æ”¯ä»˜2å—é’±è¿›è¡Œæ”¯ä»˜å®å®åè®¤è¯ ç‚¹å‡»å¼€é€šéš§é“å¹¶ç¿»åˆ°æœ€å å¼€é€šéš§é“é€‰é¡¹ è¯´æ˜ï¼š éš§é“åè®®ï¼Œä¸¤è€…å³å¯ HTTP HTTPSï¼ˆHTTPSéœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œå¹¶ä¸”å·²ç»ç”³è¯·äº†SSLè¯ä¹¦ï¼Œæ‰èƒ½æœ‰æ•ˆï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨httpsã€‚ï¼‰ éš§é“åç§° éšä¾¿å†™å³å¯ å‰ç½®åŸŸå å†™è‡ªå·±å–œæ¬¢çš„ httpéªŒè¯ç”¨æˆ·åå’Œå¯†ç  è¿™é‡Œå¯ä»¥ä¸å†™ ç¡®è®¤ä¿¡æ¯ï¼Œå¼€é€š è¿›å…¥éš§é“ç®¡ç†é¡µé¢ psï¼šè¿™é‡Œå’Œæˆ‘ä¹‹å‰å†™çš„é…ç½®ä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºä¸€ä¸ªç”¨æˆ·åªèƒ½å…è´¹å¼€é€šä¸€ä¸ªhttpéš§é“ ä¸‹è½½å®¢æˆ·ç«¯ ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„è½¯ä»¶ï¼Œå¹¶è§£å‹ å¯åŠ¨æ‰¹å¤„ç†å‘½ä»¤ psï¼šæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ä¸æ˜¯ä¹±ç ï¼Œæˆ‘ä¹Ÿä¸ç†è§£è¿™æ¬¡ä½¿ç”¨ä¸ºä»€ä¹ˆä¼šä¹±ç ï¼Œè¿™é‡Œä¸å½±å“ä½¿ç”¨ è¾“å…¥éš§é“idï¼Œå›è½¦ å¦‚æœä¹‹å‰é…ç½®äº†è´¦å·å¯†ç ï¼Œåˆ™åœ¨æ­¤å¤„éœ€è¦è¾“å…¥è´¦å·å¯†ç  å¯åŠ¨æœ¬åœ°é¡¹ç›® æ³¨ï¼šæœ¬åœ°é¡¹ç›®å¯åŠ¨çš„ç«¯å£ä¸€å®šè¦å’Œä¹‹å‰å†™çš„ç«¯å£æ˜ å°„ä¸€è‡´ æ‰“å¼€ç½‘å€æµ‹è¯• æœ¬åœ° Ngrokæä¾›çš„ç½‘ç«™è®¿é—®","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"å…³äºè·¯å¾„","slug":"å…³äºè·¯å¾„","date":"2022-02-07T08:57:28.000Z","updated":"2022-02-07T09:14:03.166Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/02/07/å…³äºè·¯å¾„/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/02/07/%E5%85%B3%E4%BA%8E%E8%B7%AF%E5%BE%84/","excerpt":"","text":"è®¿é—®è·¯å¾„URLç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç”¨äºå®šä½èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚ é€šå¸¸çš„URLèµ„æºè®¿é—®è·¯å¾„ç”±ä¸¤éƒ¨åˆ†æ„æˆ:èµ„æºè·¯å¾„ä¸èµ„æºåç§°ã€‚ èµ„æºåç§°æŒ‡çš„æ˜¯è¦è®¿é—®èµ„æºçš„ç›´æ¥åç§°ï¼Œå¦‚show.html,æˆ–ä¸è¦è®¿é—®èµ„æºå­˜åœ¨æ˜ å°„å…³ç³»çš„é—´æ¥åç§°ï¼Œå¦‚show.do èµ„æºè·¯å¾„ï¼Œåˆ™æ˜¯é€šè¿‡è¯¥è·¯å¾„åˆ™å¯ä»¥å®šä½åˆ°æŒ‡å®šçš„èµ„æºï¼Œå³èµ„æºè·¯å¾„æ˜¯æŒ‡åœ¨URLèµ„æºè®¿é—®è·¯å¾„ä¸­é™¤äº†èµ„æºåç§°ä»¥å¤–çš„å…¶å®ƒéƒ¨åˆ†ã€‚ æ ¹æ®â€œèµ„æºè·¯å¾„æ˜¯å¦å¯ä»¥ç‹¬ç«‹å®Œæˆèµ„æºå‡†ç¡®å®šä½â€çš„åˆ¤åˆ«æ ‡å‡†,å¯ä»¥å°†è®¿é—®è·¯å¾„åˆ†ä¸ºç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ ç»å¯¹è·¯å¾„ç»å¯¹è·¯å¾„ï¼Œæ˜¯æŒ‡æ ¹æ®ç»™å‡ºçš„è®¿é—®è·¯å¾„å¯ä»¥ç²¾ç¡®çš„å®šä½åˆ°è¿™ä¸ªèµ„æºçš„è·¯å¾„ å¯¹äºè®¡ç®—æœºä¸­Webåº”ç”¨çš„ç»å¯¹è·¯å¾„ï¼Œåˆ™æ˜¯æŒ‡å¸¦è®¿é—®åè®®çš„è·¯å¾„ã€‚å³URL ç›¸å¯¹è·¯å¾„ç›¸å¯¹è·¯å¾„,æ˜¯æŒ‡ä»…æ ¹æ®è®¿é—®è·¯å¾„æ— æ³•å‡†ç¡®å®šä½èµ„æºçš„è·¯å¾„ã€‚ ç›¸å¯¹è·¯å¾„å¿…é¡»è¦ç»“åˆå…¶å‚ç…§è·¯å¾„æ‰å¯ç»„æˆå¯ä»¥å‡†ç¡®å®šä½èµ„æºçš„ç»å¯¹è·¯å¾„ã€‚ å‚ç…§è·¯å¾„çš„ä¸åŒï¼Œæ‰€å½¢æˆçš„å¯ä»¥å‡†ç¡®å®šä½èµ„æºçš„ç»å¯¹è·¯å¾„ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ åœ¨è¿›è¡Œèµ„æºè®¿é—®æ—¶,å¿…é¡»è¦å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„æ‰å¯å®Œæˆèµ„æºçš„ç²¾ç¡®å®šä½ ç»å¯¹è·¯å¾„ &#x3D; å‚ç…§è·¯å¾„ + ç›¸å¯¹è·¯å¾„ æ ¹æ®ç›¸å¯¹è·¯å¾„æ˜¯å¦ä»¥æ–œæ å¼€å¤´ï¼Œä¸”è·¯å¾„æŒ‡å‘çš„æ–‡ä»¶ä¸åŒï¼Œå…¶é»˜è®¤çš„å‚ç…§è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ ä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„å‰å°è·¯å¾„æ‰€è°“å‰å°è·¯å¾„æ˜¯æŒ‡ï¼Œç”±æµè§ˆå™¨è§£ææ‰§è¡Œçš„ä»£ç ä¸­æ‰€åŒ…å«çš„è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œhtmlã€ cssã€ jsä¸­çš„è·¯å¾„ï¼ŒåŠjspæ–‡ä»¶ä¸­é™æ€éƒ¨åˆ†çš„è·¯å¾„(HTMLæ ‡ç­¾ä¸­çš„è·¯å¾„)ã€‚html åŠjspæ–‡ä»¶ä¸­çš„&lt; img src-&#x3D;*&#x2F;&gt;ã€&lt; a href&#x3D;â€â€&gt;. &lt; form action&#x3D;â€â€&gt;ç­‰æ ‡ç­¾ä¸­çš„ä»¥æ–œæ å¼€å¤´çš„è·¯å¾„éƒ½å±äºå‰å°è·¯å¾„ å‰å°è·¯å¾„çš„å‚ç…§è·¯å¾„æ˜¯WebæœåŠ¡å™¨çš„æ ¹è·¯å¾„,å³http://127.0.0.1:8080 å°†å‰å°è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„çš„å·¥ä½œ,æ˜¯ç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆçš„ã€‚ è¯¥è·¯å¾„çš„ä½œç”¨æ˜¯è¦ä¸ºç”¨æˆ·æäº¤å¯¹æŸç§èµ„æºçš„è¯·æ±‚,æ˜¯è¦æŸ¥æ‰¾å¹¶å®šä½æœåŠ¡å™¨ä¸­çš„æŸèµ„æºã€‚ ç®€å•æ¥è¯´,å‰å°è·¯å¾„çš„ä½œç”¨æ˜¯â€œæŸ¥æ‰¾â€ åå°è·¯å¾„æ‰€è°“åå°è·¯å¾„æ˜¯æŒ‡ï¼Œç”±æœåŠ¡å™¨è§£ææ‰§è¡Œçš„ä»£ç åŠæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œjava ä»£ç ä¸­çš„è·¯å¾„ã€jspæ–‡ä»¶åŠ¨æ€éƒ¨åˆ†javaä»£ç å—)ä¸­çš„è·¯å¾„ã€xmlç­‰é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„(é…ç½®æ–‡ä»¶æ˜¯è¦è¢«javaä»£ç è§£æååŠ è½½åˆ°å†…å­˜çš„ï¼Œå…¶ä¸­çš„è·¯å¾„ä¼šå‡ºç°åœ¨Java ä»£ç ä¸­) åå°è·¯å¾„çš„å‚ç…§è·¯å¾„æ˜¯Webåº”ç”¨çš„æ ¹è·¯å¾„ã€‚http://127.0.0.1:8080/projectName å°†åå°è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„çš„å·¥ä½œ,æ˜¯ç”±æœåŠ¡å™¨è‡ªåŠ¨å®Œæˆçš„ã€‚è¯¥è·¯å¾„çš„ä½œç”¨æ˜¯æ ‡è¯†å‡ºè¯¥èµ„æºåœ¨æœåŠ¡å™¨ä¸­çš„è·¯å¾„ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯èƒ½å¤ŸæŒ‰ç…§è¿™ä¸ªè®¾å®šè·¯å¾„æ¥æŸ¥æ‰¾ç›¸åº”èµ„æºã€‚ç®€å•æ¥è¯´,åå°è·¯å¾„çš„ä½œç”¨æ˜¯â€œæ ‡è¯†â€ ä»¥è·¯å¾„å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ä»¥è·¯å¾„åç§°å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ï¼Œæ— è®ºæ˜¯å‡ºç°åœ¨å‰å°é¡µé¢,è¿˜æ˜¯å‡ºç°åœ¨åå°Javaä»£ç æˆ–é…ç½®æ–‡ä»¶ä¸­ï¼Œå…¶å‚ç…§è·¯å¾„éƒ½æ˜¯å½“å‰è®¿é—®è·¯å¾„çš„èµ„æºè·¯å¾„ã€‚ å³ä½¿æ˜¯response çš„sendRedirect()æ–¹æ³•çš„å‚æ•°è·¯å¾„,è‹¥ä¸ä»¥æ–œæ å¼€å¤´ï¼Œå…¶ä¹Ÿå±äºâ€œä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„â€ç±»çš„è·¯å¾„ï¼Œå‚ç…§è·¯å¾„ä¸ºå½“å‰æœåŠ¡å™¨çš„æ ¹è·¯å¾„ æ€»ç»“ ç›¸å¯¹è·¯å¾„ç±»å‹ å‚ç…§è·¯å¾„ ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„çš„å®Œæˆè€… å‰å°è·¯å¾„ å½“å‰WebæœåŠ¡å™¨çš„æ ¹è·¯å¾„ æµè§ˆå™¨ åå°è·¯å¾„ å½“å‰Webåº”ç”¨çš„æ ¹è·¯å¾„ WebæœåŠ¡å™¨ ä»¥è·¯å¾„åç§°å¼€å¤´çš„è·¯å¾„ å½“å‰è®¿é—®è·¯å¾„çš„èµ„æºè·¯å¾„ æµè§ˆå™¨&#x2F;WebæœåŠ¡å™¨ PSï¼š å¯¹äºresponseçš„sendRedirect( )æ–¹æ³•å®Œæˆçš„é‡å®šå‘ è‹¥å…¶å‚æ•°è·¯å¾„ä¸ºâ€œä»¥æ–œæ å¼€å¤´çš„ç›¸å¯¹è·¯å¾„â€è¿™ä¸ªåå°è·¯å¾„æ˜¯ä¸ªç‰¹ä¾‹ã€‚æ˜¯ç”±sendRedirect( )æ–¹æ³•çš„æœ¬è´¨å†³å®šçš„ã€‚è¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥å®Œæˆåœ¨å½“å‰é¡¹ç›®ä¸­èµ„æºçš„è·³è½¬,è¿˜å¯ä»¥è·³è½¬åˆ°å…¶å®ƒé¡¹ç›®ä¸­çš„èµ„æºã€‚æ‰€ä»¥è¿™ä¸ªåå°è·¯å¾„çš„å‚ç…§è·¯å¾„ä¸ºâ€œå½“å‰WebæœåŠ¡å™¨çš„æ ¹â€ã€‚æ‰€ä»¥è¦åŠ resquest.getContextPath(); æ³¨æ„ï¼Œåªæœ‰è¿™ä¸€ç§é‡å®šå‘æ˜¯ç‰¹ä¾‹,å°†æ¥æˆ‘ä»¬è¿˜ä¼šå­¦ä¹ åˆ°å…¶å®ƒæ–¹å¼å®ç°çš„é‡å®šå‘ï¼Œä½†é‚£é‡Œçš„é‡å®šå‘å°±ä¸æ˜¯ç‰¹ä¾‹,è€Œæ˜¯éµå¾ªæˆ‘ä»¬ä¹‹å‰çš„è·¯å¾„è½¬æ¢ç†è®º å¦‚æœåŠ æ–œæ å’Œä¸åŠ æ–œæ éƒ½å¯ä»¥å®Œæˆè·³è½¬ï¼Œå°±åŠ ä¸Šæ–œæ ","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"SpringMVC-æ–‡ä»¶ä¸‹è½½","slug":"SpringMVC-æ–‡ä»¶ä¸‹è½½","date":"2022-01-31T06:57:54.000Z","updated":"2022-02-02T11:14:56.953Z","comments":true,"path":"javaEE/SpringMVC/2022/01/31/SpringMVC-æ–‡ä»¶ä¸‹è½½/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/31/SpringMVC-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/","excerpt":"","text":"æ–‡ä»¶ä¸‹è½½æ–‡ä»¶ä¸‹è½½å¾ˆç®€å•ï¼Œåªè¦è®¾ç½®ä¸€ä¸‹å“åº”å¤´å³å¯ é¡µé¢ï¼š 123456789101112131415161718192021&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; ul li &#123; cursor: pointer; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;a href=&quot;javascript:&quot;&gt;ç‚¹å‡»æ–‡å­—ä¸‹è½½&lt;/a&gt;&lt;ul id=&quot;ul&quot;&gt; &lt;c:forEach items=&quot;$&#123;fileList&#125;&quot; var=&quot;file&quot;&gt; &lt;li&gt;&lt;a href=&quot;/fileDownLoad.do?fileName=$&#123;file&#125;&quot;&gt;$&#123;file&#125;&lt;/a&gt;&lt;/li&gt; &lt;/c:forEach&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; Controllerï¼š 123456789101112131415161718@GetMapping(&quot;/fileDownLoad.do&quot;)public String fileDownLoad(String fileName,HttpServletRequest req,HttpServletResponse resp) throws IOException &#123; String realPath = req.getServletContext().getRealPath(&quot;\\\\download&quot;)+&quot;\\\\&quot;; File file = new File(realPath.concat(fileName)); resp.setHeader(&quot;Content-disposition&quot;,&quot;attachment; filename=&quot;+ URLEncoder.encode(file.getName(),&quot;UTF-8&quot;)); ServletOutputStream outputStream = resp.getOutputStream(); FileInputStream fis = new FileInputStream(file); byte[] buffer = new byte[1024]; int len=0; while((len=fis.read(buffer))&gt;0)&#123; outputStream.write(buffer,0,len); &#125; outputStream.flush(); fis.close(); outputStream.close(); return &quot;filedownload&quot;;&#125;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-æ–‡ä»¶ä¸Šä¼ ","slug":"SpringMVC-æ–‡ä»¶ä¸Šä¼ ","date":"2022-01-31T06:55:40.000Z","updated":"2022-02-01T07:18:07.250Z","comments":true,"path":"javaEE/SpringMVC/2022/01/31/SpringMVC-æ–‡ä»¶ä¸Šä¼ /","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/31/SpringMVC-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/","excerpt":"","text":"å‡†å¤‡å·¥ä½œé¦–å…ˆå¯¹äºè¡¨å•ä¸­çš„enctypeå±æ€§åšä¸€ä¸ªäº†è§£ application&#x2F;x-www&#x3D;form-urlencoded:é»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•ä¸­çš„valueçš„å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆURLç¼–ç æ–¹å¼ multipart&#x2F;form-data:è¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šå°†æ–‡ä»¶åŸŸä¸­çš„æ–‡ä»¶å¤œé£æ’åˆ°è¯·æ±‚å‚æ•°ä¸­ text&#x2F;plain:é™¤äº†æŠŠç©ºæ ¼æ”¹ä¸ºâ€œ+â€å·å¤–ï¼Œå…¶ä»–å­—ç¬¦ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚åˆç›´æ¥é€šè¿‡è¡¨å•æ¥å‘é€é‚®ä»¶ æ–‡ä»¶ä¸Šä¼ æ˜¯ä¸€ä¸ªwebé¡¹ç›®ä¸­å¾ˆå¸¸è§çš„åŠŸèƒ½ï¼Œåœ¨springmvcä¸­æœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œä½†æ˜¯springmvcé»˜è®¤ä¸Šä¸‹æ–‡æ²¡æœ‰é…ç½®MultipartResolverï¼Œæ‰€ä»¥åœ¨åšæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½å‰ï¼Œéœ€è¦é…ç½®MultipartResolverï¼Œ åœ¨åŸæœ‰åŒ…çš„åŸºç¡€ä¸Šå¯¼å…¥æ­¤åŒ… 12345&lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.3&lt;/version&gt;&lt;/dependency&gt; æ³¨å†ŒMultipartResolverå®ä¾‹ï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œidå¿…é¡»ä¸ºmultipartResolverï¼Œä¸ç„¶æŠ¥é”™ 12345&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;10485760&quot;/&gt; &lt;property name=&quot;maxInMemorySize&quot; value=&quot;40960&quot;/&gt;&lt;/bean&gt; ä»¥ä¸‹å°±ä¸èµ˜è¿°springMVCçš„é…ç½®æ–‡ä»¶äº† ä¸Šä¼ å•ä¸ªæ–‡ä»¶é¡µé¢ï¼š 1234567891011121314151617&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;å•ä¸ªæ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;avatar&quot; id=&quot;avatar&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; controllerï¼š 12345678910111213141516171819202122@PostMapping(&quot;/singleFileUpload.do&quot;)public String singleFileUploadDo(@RequestParam(value = &quot;avatar&quot;,required = false) CommonsMultipartFile avatar,HttpServletRequest req, Model model) throws IOException &#123; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = avatar.getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ avatar.transferTo(new File(realSavePath)); return &quot;singleFileUpload&quot;;&#125; ä¸Šä¼ å¤šä¸ªæ–‡ä»¶å…¶å®å’Œä¸Šä¼ å•ä¸ªæ–‡ä»¶å¾ˆåƒï¼Œåªè¦inputæ§ä»¶çš„nameå±æ€§æ˜¯ä¸€æ ·çš„ï¼Œé‚£å®ƒä»¬å°±æ˜¯ä¸€ç»„ï¼Œä¸‹é¢æ¥çœ‹çœ‹ä»£ç  controllerï¼šï¼ˆä¸¤æ³•ï¼Œä¸ªäººåå‘äºç¬¬äºŒç§ï¼‰ 12345678910111213141516171819202122232425@PostMapping(&quot;/multiFileUpload.do&quot;)public String multiFileUploadDo(@RequestParam(value = &quot;file&quot;,required = false) CommonsMultipartFile[] files,HttpServletRequest req, Model model) throws IOException &#123; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload/multipart&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; for (int i = 0; i &lt; files.length; i++) &#123; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = files[i].getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ files[i].transferTo(new File(realSavePath)); &#125; return &quot;multiFileUpload&quot;;&#125; 1234567891011121314151617181920212223@PostMapping(&quot;/multiFileUpload.do&quot;)public Map multiFileUploadDo(HttpServletRequest request) throws IOException &#123; String realPath = request.getServletContext().getRealPath(&quot;\\\\multipartUpload&quot;)+&quot;\\\\&quot;; CommonsMultipartResolver cmr = new CommonsMultipartResolver(request.getServletContext()); if(cmr.isMultipart(request))&#123; MultipartHttpServletRequest req = (MultipartHttpServletRequest) request; MultiValueMap&lt;String, MultipartFile&gt; multiFileMap = req.getMultiFileMap(); for (String fieldName : multiFileMap.keySet()) &#123; String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); //åˆ›å»ºå­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶å¤¹ File dir = new File(realPath + uuidPath + fieldName); dir.mkdirs(); List&lt;MultipartFile&gt; multipartFiles = multiFileMap.get(fieldName); for (MultipartFile f : multipartFiles) &#123; //å¦‚æœæ–‡ä»¶ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ if(!f.isEmpty())&#123; f.transferTo(new File(dir.getPath()+&quot;\\\\&quot;+f.getOriginalFilename())); &#125; &#125; &#125; &#125; return &quot;multiFileUpload&quot;;&#125; é¡µé¢ï¼š 12345678910111213141516171819202122232425&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/multiFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ä»¥ä¸Šéƒ½æ˜¯åŒæ­¥æäº¤ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æäº¤å¹¶ä¸”å°†å›¾ç‰‡é¢„è§ˆå‡ºæ¥ï¼Œè¿™æ¬¡åªæ¼”ç¤ºå•ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œå¤šä¸ªæ–‡ä»¶ä¸Šä¼ åŒç†ã€‚ å¼‚æ­¥æäº¤å¹¶æä¾›é¢„è§ˆControllerï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@PostMapping(&quot;/reg.do&quot;)@ResponseBodypublic Map reg(User user,String relativePath)&#123; user.setAvatarUrl(&quot;\\\\upload\\\\&quot;.concat(relativePath)); HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;(); System.out.println(user); map.put(&quot;result&quot;,&quot;success&quot;); return map;&#125;@PostMapping(&quot;/singleFileUpload.do&quot;)@ResponseBodypublic Map singleFileUploadDo(@RequestParam(value = &quot;avatar&quot;,required = false)CommonsMultipartFile avatar, HttpServletRequest req) throws IOException &#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); if(avatar==null||avatar.isEmpty())&#123; map.put(&quot;result&quot;,&quot;fail&quot;); return map; &#125; //çœŸå®çš„ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤¹ String realSaveDirPath = req.getSession().getServletContext().getRealPath(&quot;/upload&quot;); File dir = new File(realSaveDirPath); if(!dir.exists())&#123; dir.mkdirs(); &#125; //æ–‡ä»¶çš„å…¨ç§°ï¼ŒåŒ…æ‹¬åç¼€ String avatarWholeName = avatar.getOriginalFilename(); //æ–‡ä»¶çš„åç¼€ String suffix = avatarWholeName.substring(avatarWholeName.lastIndexOf(&#x27;.&#x27;)+1); //è¿™é‡Œå¯ä»¥å¯¹æ–‡ä»¶åç¼€åšå‡ºä¸€äº›é€»è¾‘å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå¤„ç†äº† //è¿™é‡Œä¸ºäº†ä¿è¯æ–‡ä»¶åä¸€å®šä¸ä¸€è‡´ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªUUIDéšæœºå€¼ String uuidPath = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;); String realFileName = uuidPath.concat(avatarWholeName); //æ–‡ä»¶çš„çœŸå®ä¿å­˜å…¨è·¯å¾„ String realSavePath = realSaveDirPath.concat(&quot;/&quot;).concat(realFileName); //è¿™é‡Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨æµè¯»å†™ avatar.transferTo(new File(realSavePath)); map.put(&quot;result&quot;,&quot;success&quot;); //ç”¨æ¥ç»™é¡µé¢æ˜¾ç¤ºå›¾ç‰‡ map.put(&quot;relativePath&quot;,&quot;\\\\upload\\\\&quot;.concat(realFileName)); //ç”¨æ¥ç»™å‰ç«¯åˆ¤æ–­æ˜¯å¦éœ€è¦å†æ¬¡ä¸Šä¼  map.put(&quot;fileName&quot;,avatarWholeName); return map;&#125; é¡µé¢ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;å•ä¸ªæ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form id=&quot;form&quot; action=&quot;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; name=&quot;userName&quot; id=&quot;userName&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;number&quot; placeholder=&quot;è¯·è¾“å…¥å¹´é¾„&quot; name=&quot;age&quot; id=&quot;age&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;avatar&quot; id=&quot;avatar&quot;&gt; &lt;div style=&quot;display: none&quot; id=&quot;showimgcontainer&quot;&gt; &lt;img id=&quot;showimg&quot; width=&quot;400px&quot; height=&quot;400px&quot; style=&quot;border: solid 1px black&quot;/&gt; &lt;/div&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;button&quot; id=&quot;submitBtn&quot; value=&quot;æ³¨å†Œ&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery.form.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt; let fileName; let relativePath; $(&#x27;#avatar&#x27;).change(()=&gt;&#123; if(fileName===$(&#x27;#avatar&#x27;)[0].files[0].name)&#123; return; &#125; let options = &#123; url: &#x27;$&#123;pageContext.request.contextPath&#125;/singleFileUpload.do&#x27;, dataType:&#x27;text&#x27;, success(data)&#123; data = JSON.parse(data); if(data.result===&#x27;fail&#x27;)&#123; alert(&quot;æ–‡ä»¶ä¸ºç©ºæˆ–è€…ä¸å­˜åœ¨&quot;); return; &#125; relativePath = data.relativePath; fileName = data.fileName; $(&#x27;#showimgcontainer&#x27;).show(); $(&#x27;#showimg&#x27;).attr(&#x27;src&#x27;,relativePath); &#125; &#125; $(&#x27;#form&#x27;).ajaxSubmit(options); &#125;) $(&#x27;#submitBtn&#x27;).click(()=&gt;&#123; $.ajax(&#123; url: &#x27;$&#123;pageContext.request.contextPath&#125;/reg.do&#x27;, method:&#x27;post&#x27;, data: &#123;relativePath:relativePath,userName:$(&#x27;#userName&#x27;).val(),age:$(&#x27;#age&#x27;).val()&#125;, success(data) &#123; if(data.result===&#x27;success&#x27;)&#123; alert(&quot;æ³¨å†ŒæˆåŠŸ&quot;); window.location = &#x27;$&#123;pageContext.request.contextPath&#125;/login&#x27;; &#125;else &#123; alert(&quot;å‡ºé”™ï¼è¯·é‡è¯•ï¼&quot;); &#125; &#125; &#125;) &#125;)&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"Linux-ç®¡ç†ï¼ˆäº†è§£å³å¯ï¼‰","slug":"Linux-ç®¡ç†ï¼ˆäº†è§£å³å¯ï¼‰","date":"2022-01-31T06:14:13.000Z","updated":"2022-04-24T07:55:18.134Z","comments":true,"path":"javaEE/Linux/2022/01/31/Linux-ç®¡ç†ï¼ˆäº†è§£å³å¯ï¼‰/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Linux/2022/01/31/Linux-%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF%EF%BC%89/","excerpt":"","text":"è´¦å·ç®¡ç† ç®€ä»‹ åœ¨ä¸€å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬å°±æåˆ°ï¼ŒLinuxæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªéœ€è¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»å‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·ç™»å½•ç³»ç»Ÿã€‚ ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹èµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ æ¯ä¸ªç”¨æˆ·éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œå¯†ç  å¯¹äºè´¦å·çš„ç®¡ç†ï¼Œä¸»è¦æœ‰ä»¥ä¸‹æ“ä½œ ç”¨æˆ·è´¦å·çš„æ·»åŠ ï¼Œåˆ é™¤å’Œä¿®æ”¹ å¢åŠ ç”¨æˆ· 1useradd -é€‰é¡¹ ç”¨æˆ·å é€‰é¡¹ -m è‡ªåŠ¨åˆ›å»ºè¿™ä¸ªç”¨æˆ·çš„ä¸»ç›®å½• -d æŒ‡å®šç”¨æˆ·çš„ä¸»ç›®å½•åœ¨å“ª -c æŒ‡å®šä¸€æ®µæ³¨é‡Š -g æŒ‡å®šè¯¥ç”¨æˆ·çš„ç”¨æˆ·ç»„ -G æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ -s shellæ–‡ä»¶ï¼ŒæŒ‡å®šç”¨æˆ·çš„ç™»å½•shell -u ç”¨æˆ·å· ï¼Œå¦‚æœæœ‰-oå±æ€§ï¼Œåˆ™å¯ä»¥ä¸å…¶ä»–äººçš„æ ‡è¯†å·é‡å¤ ç”¨æˆ·å æŒ‡å®šç”¨æ¥ç™»å½•çš„ç”¨æˆ·å åˆ é™¤ç”¨æˆ· 12userdel -r ç”¨æˆ·å -g åˆ†é…ç»„#åˆ é™¤ç”¨æˆ·çš„æ—¶å€™å°†å…¶ç›®å½•ä¸€å¹¶åˆ é™¤ ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ 1usermod åˆ›å»ºçš„æ—¶å€™çš„ä¸€äº›å‚æ•°ï¼Œå¯¹åº”ä¿®æ”¹çš„å†…å®¹çš„å‚æ•° ä¿®æ”¹ç”¨æˆ·å¯†ç  rootç”¨æˆ· 1passwd ç”¨æˆ·å æ™®é€šç”¨æˆ· 12passwdcurrent password åˆ‡æ¢ç”¨æˆ· rootç”¨æˆ· åˆ‡æ¢ç”¨æˆ·çš„å‘½ä»¤æ˜¯ï¼šsu username ä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼šsudo su åœ¨ç»ˆç«¯è¾“å…¥exitæˆ–è€…logoutçš„æ—¶æˆ–è€…å¿«æ·æ–¹å¼Ctrl+dï¼ˆå…¶å®å°±æ˜¯exitï¼‰ï¼Œå¯ä»¥é€€å›åŸæ¥è´¦æˆ· åœ¨åˆ‡æ¢ç”¨æˆ·çš„ä¹‹åï¼Œå¦‚æœä¹Ÿæƒ³åˆ‡æ¢æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒï¼Œåˆ™å¯ä»¥å†suå’Œusernameä¹‹é—´åŠ å…¥ä¸€ä¸ª-ï¼Œæ¯”å¦‚su - root $ä»£è¡¨æ™®é€šç”¨æˆ· #ä»£è¡¨è¶…çº§ç”¨æˆ·ï¼Œå³rootç”¨æˆ· é”å®šè´¦æˆ· 1234#é”å®šä¹‹åå°±ä¸èƒ½ç™»å½•äº†passwd -l ç”¨æˆ·å#æ¸…ç©ºè¯¥ç”¨æˆ·çš„å¯†ç ï¼Œä¹Ÿä¸èƒ½ç™»å½•passwd -d ç”¨æˆ·å æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯ 1234cat /etc/passwdç”¨æˆ·åï¼šå£ä»¤(ä¸å¯è§ä¸ºX)ï¼šç”¨æˆ·æ ‡è¯†å·ï¼šç»„æ ‡è¯†å·ï¼šæ³¨é‡Šæ€§æè¿°ï¼šä¸»ç›®å½•ï¼šç™»å½•shellcat /etc/shadomæŸ¥çœ‹åŠ å¯†çš„å¯†ç  ç”¨æˆ·ç»„çš„ç®¡ç† å±ä¸»ï¼Œå±ç»„ æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œrootç”¨æˆ·å¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„çš„å…¨éƒ¨ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ï¼ˆå¼€å‘ç»„ï¼Œè¿ç»´ç»„ã€ã€ã€ï¼‰ã€‚ä¸åŒçš„Linuxç³»ç»Ÿå¯¹äºç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸ä»–åŒåçš„ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·çš„æ—¶å€™åˆ›å»º ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠï¼Œç”¨æˆ·ç»„çš„æ·»åŠ ï¼Œç”¨æˆ·ç»„çš„åˆ é™¤å’Œä¿®æ”¹ã€‚å…¶å®è¿™äº›æ“ä½œéƒ½æ˜¯åœ¨å¯¹&#x2F;etc&#x2F;groupçš„æ–‡ä»¶è¿›è¡Œæ›´æ–° åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç»„ 1gruopadd ç”¨æˆ·ç»„åç§° åˆ›å»ºç”¨æˆ·ç»„åå¯ä»¥å¾—åˆ°ä¸€ä¸ªidï¼Œå¯ä»¥é€šè¿‡-gå‚æ•°æŒ‡å®šè¯¥id åˆ é™¤ä¸€ä¸ªç”¨æˆ·ç»„ 1groupdel ç”¨æˆ·ç»„åç§° ä¿®æ”¹ç”¨æˆ·ç»„æƒé™ä¿¡æ¯å’Œåå­— 1groupmod -g ç”¨æˆ·ç»„id -n ä¿®æ”¹åç”¨æˆ·ç»„åç§° ç”¨æˆ·ç»„åç§° æŸ¥çœ‹æ‰€æœ‰çš„ç”¨æˆ·ç»„ 1cat /etc/group ç£ç›˜ç®¡ç† df [-h]ï¼Œåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿæ•´ä½“çš„ç£ç›˜ä½¿ç”¨é‡ du [-h]ï¼Œæ£€æŸ¥å½“å‰ç£ç›˜çš„ä½¿ç”¨é‡ 12du -sm /*#æ£€æŸ¥æ ¹ç›®å½•ä¸‹æ¯ä¸ªæ–‡ä»¶å ç”¨çš„å®¹é‡ 1234#å°†å¤–éƒ¨è®¾å¤‡filenameæŒ‚è½½åˆ°/mnt/filenameä¸‹æ¥å®ç°è®¿é—®mount /dev/filename /mnt/filename#unmount -få¼ºåˆ¶å¸è½½unmount -f [æŒ‚è½½ä½ç½®] è¿›ç¨‹ç®¡ç†1ã€æ¯ä¸€ä¸ªç¨‹åºéƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå· 2ã€æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ 3ã€ä¸¤ç§è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿è¡Œï¼Œåå°è¿è¡Œ 4ã€ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæœåŠ¡éƒ½æ˜¯åå°è¿è¡Œçš„ å‘½ä»¤1ps æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨æ‰§è¡Œçš„å„ç§è¿›ç¨‹çš„ä¿¡æ¯ ps -xxï¼š -a æ˜¾ç¤ºå½“å‰ç»ˆç«¯è¿è¡Œçš„æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯ -u ä»¥ç”¨æˆ·çš„ä¿¡æ¯æ˜¾ç¤ºè¿›ç¨‹ -x æ˜¾ç¤ºåå°è¿è¡Œè¿›ç¨‹çš„å‚æ•° 123456#æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹ps -aux|grep mysqlps -aux|grep redis#|è¿™ä¸ªåœ¨Linuxå«ç®¡é“ç¬¦ A|B#grep è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² è¿™é‡Œåªè¦çŸ¥é“å°±è¡Œ 123456#å¯ä»¥æŸ¥çœ‹çˆ¶è¿›ç¨‹çš„ä¿¡æ¯ps -ef|grep mysql#è¿›ç¨‹æ ‘ï¼Œæ›´æ¨èpstree -p æ˜¾ç¤ºçˆ¶id -u æ˜¾ç¤ºç”¨æˆ·ç»„ ç»“æŸè¿›ç¨‹ 123kill -9 è¿›ç¨‹id# è¿™ä¸ª-9æ˜¯ä¿¡å·ä»£ç ï¼Œä»£è¡¨å¼ºåˆ¶ç»“æŸ#å¦‚æœæœ‰æ­»å¾ªç¯äº†ï¼Œå°±å¯ä»¥é€‰æ‹©å¼ºåˆ¶ç»“æŸè¯¥è¿›ç¨‹ æ‹“å±•å†…å®¹æŸ¥çœ‹ç½‘ç»œ123#åœ¨/etc/sysconfig/network-scripts/ç›®å½•ä¸‹æ˜¯é…ç½®ç½‘ç»œçš„#æŸ¥çœ‹IPåœ°å€ï¼Œç½‘ç»œé…ç½®ifconfig åˆ›å»ºæ–‡ä»¶1touch æ–‡ä»¶å å¾€æ–‡ä»¶å°¾éƒ¨å†™å…¥å€¼1echo &quot;Hello&quot; &gt;&gt;filename å…³äºä¸»æœºåç§°1234#æŸ¥çœ‹ä¸»æœºåç§°hostname#ä¿®æ”¹ä¸»æœºåç§°hostname newhostname æ¸…å±1clear é“¾æ¥åœ¨Linuxä¸­ï¼Œé“¾æ¥åˆ†ä¸ºè½¯é“¾æ¥å’Œç¡¬é“¾æ¥ ç¡¬é“¾æ¥ï¼šAâ€“Bï¼ŒBæ˜¯Açš„ç¡¬é“¾æ¥ï¼Œç±»ä¼¼äºæ‹·è´äº†ä¸€ä»½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¦‚æœæˆ‘æŠŠAåˆ äº†ï¼ŒBä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°Aè¿™ä¸ªæ–‡ä»¶ è½¯é“¾æ¥ï¼šå°±æ˜¯ä¸€ç§ç±»ä¼¼Windowsä¸‹çš„å¿«æ·æ–¹å¼ï¼ŒAâ€“Bï¼ŒBæ˜¯Açš„è½¯é“¾æ¥ã€‚ å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¦‚æœæˆ‘æŠŠAåˆ äº†ï¼Œåˆ™Bæ— æ³•å†æ¬¡è®¿é—®Aæ–‡ä»¶äº† åˆ›å»ºé“¾æ¥åŸºç¡€å‘½ä»¤ï¼šln 1234#è®¾ç½®Bä¸ºAçš„ç¡¬é“¾æ¥ï¼Œè¿™æ—¶å€™çš„Bæ˜¯ç™½è‰²ln A B#è®¾ç½®Cä¸ºAçš„è½¯é“¾æ¥ï¼ˆåˆåç¬¦å·é“¾æ¥ï¼‰ï¼Œè¿™æ—¶å€™çš„Cæ˜¯ç‰¹æ®Šé¢œè‰²ln -s A C ä¼šæ„Ÿè§‰è¿™ä¸ªç¡¬é“¾æ¥å’Œå¤åˆ¶æœ‰ç‚¹åƒï¼Œä½†æ˜¯ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ é“¾æ¥æ–‡ä»¶ï¼Œä»–ä»¬çš„å†…å®¹æ˜¯åŒæ­¥çš„ä½†æ˜¯å¤åˆ¶åªæ˜¯å¤åˆ¶ï¼Œä¸ä¼šåŒæ­¥æ•°æ® ç«¯å£æœ‰å…³æ“ä½œ12345678910111213141516171819#æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£firewall-cmd --list-ports#å¼€å¯é˜²ç«å¢™service firewalld start#é‡å¯é˜²ç«å¢™service firewalld restart#å…³é—­é˜²ç«å¢™service firewalld stop#æŸ¥çœ‹å½“å‰firewalldçš„çŠ¶æ€systemctl status firewalld#å¼€å¯ç«¯å£ï¼Œè®°å¾—åœ¨é˜¿é‡Œäº‘é…ç½®å®‰å…¨ç»„firewall-cmd --zone=public --add-port=80/tcp --permanent#é‡å¯é˜²ç«å¢™æœåŠ¡systemctl restart firewalld.service","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-vimç¼–è¾‘å™¨","slug":"Linux-vimç¼–è¾‘å™¨","date":"2022-01-31T06:12:29.000Z","updated":"2022-04-24T04:06:04.035Z","comments":true,"path":"javaEE/Linux/2022/01/31/Linux-vimç¼–è¾‘å™¨/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Linux/2022/01/31/Linux-vim%E7%BC%96%E8%BE%91%E5%99%A8/","excerpt":"","text":"VIMç¼–è¾‘å™¨ ä»€ä¹ˆæ˜¯VIMç¼–è¾‘å™¨ VIMæ˜¯ä»viå‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä»£ç è¡¥å…¨ï¼Œç¼–è¯‘ï¼ŒåŠé”™è¯¯è·³è½¬ç­‰åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œã€‚Linuxä¸­å¿…é¡»ä¼šä½¿ç”¨vim ä¸‰ç§ä½¿ç”¨æ¨¡å¼åŸºæœ¬ä¸Švim&#x2F;viåˆ†ä¸ºä¸‰ç§ä½¿ç”¨æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ã€è¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast Line modeï¼‰ å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ç”¨æˆ·åˆšåˆšå¯åŠ¨vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜ä¼šè¢«è¯†åˆ«ä¸ºå‘½ä»¤ï¼Œä¸ä¼šè¾“å…¥å­—ç¬¦ ä»¥ä¸‹ä¸ºå¸¸ç”¨å‘½ä»¤ï¼š å‘½ä»¤ ä½œç”¨ i åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ ï¼š åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ kæˆ–è€…ä¸Šç®­å¤´ å…‰æ ‡å‘ä¸Šç§» jæˆ–è€…ä¸‹ç®­å¤´ å…‰æ ‡å‘ä¸‹ç§» hæˆ–è€…å·¦ç®­å¤´ å…‰æ ‡å‘å·¦ç§» læˆ–è€…å³ç®­å¤´ å…‰æ ‡å‘å³ç§» Ctrl+f å‘ä¸‹ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äºpageDown Ctrl+b å‘ä¸Šç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äºpageUp Ctrl+d å‘ä¸‹ç§»åŠ¨åŠé¡µ Ctrl+u å‘ä¸Šç§»åŠ¨åŠé¡µ 0&#x2F;åŠŸèƒ½é”®[home] å°†å…‰æ ‡ç§»åŠ¨åˆ°è¯¥è¡Œçš„å¼€å¤´å¤„ $&#x2F;åŠŸèƒ½é”®[end] å°†å…‰æ ‡ç§»åŠ¨åˆ°è¯¥è¡Œçš„ç»“å°¾å¤„ H å°†å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨çš„ä½ç½® M å°†å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•ä¸­å¤®çš„é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨çš„ä½ç½® L å°†å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•æœ€åä¸€è¡Œçš„ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨çš„ä½ç½® G å°†å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•æœ€åä¸€è¡Œçš„ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨çš„ä½ç½® nG nä»£è¡¨æ•°å­—ï¼Œè¡¨ç¤ºç§»åŠ¨åˆ°è¯¥æ–‡ä»¶çš„ç¬¬å‡ è¡Œ gg ç§»åŠ¨åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œ n&lt;å›è½¦&gt; å…‰æ ‡å‘ä¸‹ç§»åŠ¨nä¸ªå­—ç¬¦ï¼ˆå•ç‹¬æ‘ç©ºæ ¼å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼‰ n&lt;é€€æ ¼é”®&gt; å…‰æ ‡å‘å·¦ç§»åŠ¨nä¸ªå­—ç¬¦ï¼ˆå•ç‹¬æ‘é€€æ ¼é”®å…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼‰ n&lt;ç©ºæ ¼&gt; å…‰æ ‡å‘å³ç§»åŠ¨nä¸ªå­—ç¬¦ï¼ˆå•ç‹¬æ‘ç©ºæ ¼å…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼‰ æ›¿æ¢æœç´¢ å‘½ä»¤ ä½œç”¨ &#x2F; keyword å‘ä¸‹æŸ¥è¯¢å­—ç¬¦ä¸²keyword ï¼Ÿkeyword å‘ä¸ŠæŸ¥è¯¢å­—ç¬¦ä¸²keyword n ç»§ç»­å½“å‰çš„æŸ¥è¯¢åŠ¨ä½œ N åå‘è¿›è¡Œå½“å‰çš„æŸ¥è¯¢åŠ¨ä½œ åˆ é™¤ã€å¤åˆ¶ã€é»è´´ å‘½ä»¤ ä½œç”¨ x ï¼ŒX åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨çš„å­—ç¬¦ nx nä¸ºæ•°å­—ï¼Œè¿ç»­å‘ååˆ é™¤nä¸ªå­—ç¬¦ &lt;æ•°å­—&gt;dd&#x2F;D åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„é‚£næ•´è¡Œ(é»˜è®¤nä¸º1) d1G åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ® dG åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ® d$ åˆ é™¤æ‰€åœ¨å…‰æ ‡åˆ°è¯¥è¡Œæœ€å d0 åˆ é™¤æ‰€åœ¨å…‰æ ‡åˆ°è¯¥è¡Œå¼€å¤´ &lt;æ•°å­—&gt;yy å¤åˆ¶é‚£ä¸€æ•´è¡Œï¼ˆé»˜è®¤nä¸º1ï¼‰ y1G å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ® yG å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ® y0 å¤åˆ¶å…‰æ ‡æ‰€åœ¨åˆ°è¯¥è¡Œçš„å¼€å§‹ä½ç½® y$ å¤åˆ¶å…‰æ ‡æ‰€åœ¨åˆ°è¯¥è¡Œçš„ç»“æŸä½ç½® pï¼ŒP på°†å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡çš„ä¸‹ä¸€è¡Œé»è´´ï¼ŒPå°†å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡çš„ä¸Šä¸€è¡Œé»è´´ J å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸ä¸‹ä¸€è¡Œçš„æ•°æ®ç»“åˆæˆåŒä¸€è¡Œ Ctrl+r é‡åš u æ’¤é”€ ä»å‘½ä»¤æ¨¡å¼åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼çš„å…¶ä»–å‘½ä»¤ å‘½ä»¤ iã€I iä¸ºåœ¨å½“å‰å…‰æ ‡å¤„è¿›å…¥è¾“å…¥æ¨¡å¼ï¼ŒIä¸ºåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨å¤„è¿›å…¥è¾“å…¥æ¨¡å¼ aã€A aä¸ºåœ¨å½“å‰å…‰æ ‡çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„è¿›å…¥è¾“å…¥æ¨¡å¼ï¼ŒAä¸ºåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦æ‰€åœ¨å¤„è¿›å…¥è¾“å…¥æ¨¡å¼ oã€O oä¸ºåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ–°çš„ä¸€è¡Œï¼ŒOä¸ºåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ–°çš„ä¸€è¡Œ rã€R è¿›å…¥å–ä»£æ¨¡å¼ï¼Œrä¸ºåªå–ä»£ä¸€æ¬¡ï¼ŒRä¸ºä¸€ç›´å–ä»£ç›´åˆ°æŒ‰ä¸‹esc esc é€€å‡ºåˆ°å‘½ä»¤æ¨¡å¼ è¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”® è¿™äº›æ“ä½œå’Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„æ˜¯ä¸€æ ·çš„ åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast Line modeï¼‰åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„å…‰æ ‡ä¼šç§»åŠ¨åˆ°æœ€åº•ä¸‹ï¼Œå°±å¯ä»¥è¾“å…¥ä¸€äº›å‘½ä»¤äº† å‘½ä»¤ :w ä¿å­˜ :wï¼ è‹¥æ–‡ä»¶ä¸ºåªè¯»å±æ€§ï¼Œå¼ºåˆ¶å†™å…¥ï¼Œè·Ÿæƒé™æœ‰å…³ :q é€€å‡ºvim :q! ä¸ä¿å­˜é€€å‡º !åœ¨vimä¸­ä¸€èˆ¬è¡¨ç¤ºå¼ºåˆ¶çš„æ„æ€ :wq ä¿å­˜é€€å‡º :ZZ å¦‚æœæ¡£æ¡ˆæ²¡æœ‰æ”¹åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥ä¿®æ”¹äº†ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ :w[filename] å¦å­˜ä¸ºåˆ°å¦ä¸€ä¸ªæ–‡ä»¶ :r[filename] åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ã€‚äº¦å°†filenameä¸­çš„å†…åŠ¨è¿½åŠ åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„åé¢ :n1,n2 w[filename] å°†n1åˆ°n2çš„æ•°æ®å­˜å‚¨åˆ°filenameè¿™ä¸ªæ–‡ä»¶ä¸­ :!command æš‚æ—¶ç¦»å¼€vimæ‰§è¡Œcommandå‘½ä»¤ï¼Œã€ä¾‹å¦‚ï¼š:! ls &#x2F;homeã€‘ :set nu æ˜¾ç¤ºè¡Œå· :set nonu å–æ¶ˆæ˜¾ç¤ºè¡Œå·","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-æ–‡ä»¶æ“ä½œ","slug":"Linux-æ–‡ä»¶æ“ä½œ","date":"2022-01-31T06:11:31.000Z","updated":"2022-04-24T05:01:53.449Z","comments":true,"path":"javaEE/Linux/2022/01/31/Linux-æ–‡ä»¶æ“ä½œ/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Linux/2022/01/31/Linux-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/","excerpt":"","text":"æ–‡ä»¶æ“ä½œæ–‡ä»¶å±æ€§Linuxç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿnoçš„å®‰å…¨æ€§ï¼ŒLinuxç³»ç»Ÿå¯¹äºä¸åŒçš„ç”¨æˆ·è®¿é—®åŒä¸€æ–‡ä»¶å¤¹çš„æƒé™åšå‡ºäº†è§„å®š å…ˆå‰æˆ‘ä»¬ä½¿ç”¨ls -alæŸ¥çœ‹äº†æ–‡ä»¶å±æ€§ï¼Œæˆ‘ä»¬ç°åœ¨æ¥çœ‹çœ‹è¿™äº›å¼€å¤´çš„å­—ç¬¦åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å§ æˆ‘ä»¬å°†æ¯ä¸€è¡Œåˆ†ä¸ºå…­ç»„æ¥çœ‹ ç¬¬ä¸€ç»„ è¿™ä¸€ç»„å›ºå®šä¸€å…±åä¸ªå­—ç¬¦ï¼Œæ‹†åˆ†ä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦å’Œå9ä¸ªå­—ç¬¦æ¥çœ‹ ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å«ä¹‰ [d]ä»£è¡¨ç›®å½• [-]ä»£è¡¨æ–‡ä»¶ [l]ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé“¾æ¥æ–‡æ¡£ï¼ˆlink fileï¼‰ [b]ä»£è¡¨è£…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å¯èƒ½æœ‰ä¾›å­˜å‚¨çš„æ¥å£è®¾å¤‡ [c]ä»£è¡¨è£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜æˆ–è€…é¼ æ ‡ åä¹ä¸ªå­—ç¬¦çš„å«ä¹‰ æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡æ˜¯ä»¥[rwx]çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆ râ€“ã€‹readè¯»æ“ä½œ wâ€“ã€‹writeå†™æ“ä½œ xâ€“ã€‹executeæ‰§è¡Œæ“ä½œ å¦‚æœå¯¹åº”ä½ç½®æ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°-å· ç¬¬ä¸€ç»„ä¸ºå±ä¸»çš„æƒé™ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰ ç¬¬äºŒç»„ä¸ºå±ç»„çš„æƒé™ï¼ˆæ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·ï¼‰ ç¬¬ä¸‰ç»„ä¸ºå…¶ä»–ç”¨æˆ·çš„æƒé™ï¼ˆå…¶ä»–ç”¨æˆ·ï¼‰ ç¬¬äºŒç»„ å¦‚æœè¯¥é¡¹æ˜¯æ–‡ä»¶å¤¹ï¼Œè¯¥æ•°å­—è¡¨ç¤ºæ–‡ä»¶å¤¹ä¸­çš„åŒ…å«æ–‡ä»¶æ•° å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ™æ˜¾ç¤º1 ç¬¬ä¸‰ç»„ ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå±ä¸» ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå±ç»„ï¼ˆrootç»„ï¼‰ ç¬¬å››ç»„ æ–‡ä»¶å¤§å° ç¬¬äº”ç»„ åˆ›å»ºæ—¶é—´ ç¬¬å…­ç»„ æ–‡ä»¶å ä¿®æ”¹æ–‡å±æ€§ä»¶æ›´æ”¹æ–‡ä»¶å±ç»„åŸºç¡€å‘½ä»¤ï¼šchgrp 1chgrp [-R] å±ç»„å æ–‡ä»¶å æ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„12chown [-R] å±ä¸»å æ–‡ä»¶åchown [-R] å±ä¸»åï¼šå±ç»„å æ–‡ä»¶å æ›´æ”¹æ–‡ä»¶ä¹å¤§å±æ€§1chomd [-R] xyz æ–‡ä»¶æˆ–è€…ç›®å½• Linuxæ–‡ä»¶ç³»ç»Ÿå±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œä¸€ç§æ•°å­—ï¼Œä¸€ç§ç¬¦å·ã€‚ Linuxæ–‡ä»¶çš„åŸºæœ¬æƒé™æœ‰ä¹ä¸ªï¼Œåˆ†åˆ«æ˜¯owner&#x2F;group&#x2F;othersä¸‰ç§èº«ä»½å„è‡ªæœ‰è‡ªå·±çš„read&#x2F;write&#x2F;executeæƒé™ æ–‡ä»¶çš„æƒé™å­—ç¬¦æ˜¯[rwxrwxrwx]ï¼Œè¿™ä¹ä¸ªæƒé™æ˜¯ä¸‰ä¸‰ä¸€ç»„çš„ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„ä¸ªæƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š 1r:4 w:2 x:1 æ¯ç§èº«ä»½ï¼ˆowner&#x2F;group&#x2F;othersï¼‰å„è‡ªçš„ä¸‰ä¸ªæƒé™ï¼ˆr&#x2F;w&#x2F;xï¼‰åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¸¾ä¸ªæ —å­ï¼š[rwxrwxâ€”] owner &#x3D; rwx &#x3D; 4 + 2 + 1&#x3D; 7 group &#x3D; rwx &#x3D; 4 + 2 + 1&#x3D; 7 others &#x3D; â€” &#x3D; 0 1chmod 770 filename æŸ¥çœ‹æ–‡ä»¶Linuxç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ tac ç”±æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ nl æ˜¾ç¤ºçš„æ—¶å€™ï¼Œè¾“å‡ºè¡Œå· more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ ç©ºæ ¼ç¿»é¡µï¼Œenterä»£è¡¨å‘ä¸‹çœ‹ä¸€è¡Œï¼Œ:fä»£è¡¨å½“å‰è¡Œæ•°ï¼Œé€€å‡ºæŸ¥çœ‹è¾“å…¥qï¼Œå‘ä¸‹æŸ¥è¯¢å­—ç¬¦ä¸²ä½¿ç”¨å‘½ä»¤/è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å‘ä¸ŠæŸ¥è¯¢ä½¿ç”¨å‘½ä»¤?è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ï¼Œnä»£è¡¨ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªï¼ŒNä»£è¡¨ç»§ç»­æœå¯»ä¸Šä¸€ä¸ª less ä¸ moreç›¸ä¼¼ï¼Œä½†æ˜¯ä»–å¯ä»¥å¾€å‰ç¿»é¡µ ä¸Šä¸‹é”®ä»£è¡¨å‘ä¸Šä¸‹ç¿»é¡µ head åªæŸ¥çœ‹å‰å‡ è¡Œ é€šè¿‡ -n å‚æ•°å¯ä»¥æ§åˆ¶æŸ¥çœ‹å‡ è¡Œ tail åªæŸ¥çœ‹å°¾å·´å‡ è¡Œ é€šè¿‡ -n å‚æ•°å¯ä»¥æ§åˆ¶æŸ¥çœ‹å‡ è¡Œ","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-ç›®å½•æ“ä½œ","slug":"Linux-ç›®å½•æ“ä½œ","date":"2022-01-31T06:10:26.000Z","updated":"2022-04-24T04:39:06.784Z","comments":true,"path":"javaEE/Linux/2022/01/31/Linux-ç›®å½•æ“ä½œ/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Linux/2022/01/31/Linux-%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C/","excerpt":"","text":"ç›®å½•ç»“æ„ ä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Š &#x2F;bin: binæ˜¯Binaryçš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ &#x2F;boot: è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxçš„æ—¶å€™ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;dev: devæ˜¯Deviceçš„ç¼©å†™ï¼Œå­˜æ”¾çš„æ˜¯Linuxçš„å¤–è®¾è®¾å¤‡ï¼Œ &#x2F;etc: è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½• &#x2F;home: ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä½¿ç”¨ç”¨æˆ·çš„è´¦å·æ¥å‘½åçš„ &#x2F;lib: è¿™é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;lost+found: è¿™ä¸ªç›®å½•ä¸€èˆ¬æ˜¯ç©ºçš„ï¼Œä½†æ˜¯å½“æœåŠ¡å™¨æ„å¤–å…³é—­çš„æ—¶å€™ï¼Œé‡Œé¢ä¼šå­˜åœ¨ä¸€äº›é”™è¯¯æ–‡ä»¶ï¼ˆä¸è¦åŠ¨ï¼‰ &#x2F;media: Linuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚uç›˜ï¼Œå…‰é©±ç­‰ç­‰ &#x2F;mnt: è¿™ä¸ªç›®å½•æ˜¯ç»™ç”¨æˆ·æ¥ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼ˆåé¢ä¼šæŠŠæœ¬åœ°æ–‡ä»¶æŒ‚è½½åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼‰ &#x2F;opt: ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€åœ¨çš„ç›®å½• &#x2F;proc: è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œä»–æ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å¾—ç³»ç»Ÿä¿¡æ¯ï¼ˆä¸ç”¨ç®¡ï¼‰ &#x2F;rootï¼ˆä¹Ÿå°±æ˜¯ ~ ï¼‰: è¯¥ç›®å½•æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ç›®å½•ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½• &#x2F;sbin: så°±æ˜¯superçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åº &#x2F;srv: è¯¥ç›®å½•ç”¨æ¥å­˜æ”¾ä¸€äº›å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ® &#x2F;sys: è¿™æ˜¯Linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„æ”¹å˜ï¼Œè¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿsysfs &#x2F;tmp: è¿™ä¸ªç›®å½•ä½¿ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ &#x2F;usr: è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶ &#x2F;usr&#x2F;bin: ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åº &#x2F;usr&#x2F;sbin: è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ **&#x2F;usr&#x2F;src: ** å†…æ ¸æºä»£ç é»˜è®¤å­˜æ”¾çš„åœ°å€ &#x2F;var: è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç€ä¸€äº›ä¸æ–­åœ¨æ‹“å……çš„ä¸œè¥¿ï¼Œä¹ æƒ¯æ€§çš„å°†ä¸€äº›ç»å¸¸ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¯¥ç›®å½•ä¸‹ &#x2F;run: æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ï¼Œå½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰ï¼ˆä¸ç”¨ç®¡ï¼‰ &#x2F;www: å­˜æ”¾æœåŠ¡å™¨ç½‘ç«™çš„ç›¸å…³çš„èµ„æºï¼Œç¯å¢ƒï¼Œç½‘ç«™ ä¸æ˜¯æ¯ä¸€ä¸ªç›®å½•éƒ½ä¸€å®šä¼šå­˜åœ¨ å…³æœºæŒ‡ä»¤åŸºç¡€æŒ‡ä»¤ï¼šshutdown 123456789101112131415161718# Linuxç³»ç»Ÿä¸­ä¸ºäº†æé«˜ç£ç›˜çš„è¯»å†™æ•ˆç‡ï¼Œå¯¹ç£ç›˜é‡‡ç”¨äº†â€œé¢„è¯»è¿Ÿå†™â€æ“ä½œæ–¹å¼ã€‚å½“ç”¨æˆ·ä¿å­˜æ–‡ä»¶æ—¶ï¼ŒLinuxæ ¸å¿ƒå¹¶ä¸ä¸€å®šç«‹å³å°†æ•°æ®å†™å…¥ç‰©ç†ç£ç›˜ä¸­ï¼Œè€Œæ˜¯å°†æ•°æ®ä¿å­˜åœ¨ç¼“å­˜åŒºä¸­ï¼Œç­‰åˆ°ç¼“å­˜åŒºè¢«å¡«æ»¡äº†ä¹‹åå†å°†æ•°æ®å†™å…¥ç£ç›˜ï¼Œè¿™ç§æ–¹å¼ç¡®å®æå¤§åœ°æé«˜äº†è¯»å†™æ•ˆç‡ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶æ‰€åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œå½“æœåŠ¡å™¨é­å—åˆ°æ–­ç”µæˆ–è€…å…¶ä»–æ„å¤–æƒ…å†µçš„æ—¶å€™ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¼šç›´æ¥ä¸¢å¤±ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œsyncå°±æ˜¯å°†ç¼“å­˜ä¸­çš„ä¸œè¥¿ç›´æ¥å†™å…¥åˆ°ç£ç›˜ä¸­å»ï¼Œæ— éœ€ç­‰å¾…ç¼“å­˜è¢«å¡«æ»¡#å°†æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜ï¼ˆå…³æœºå‰å¿…é¡»åšï¼‰sync#æœåŠ¡å™¨åœ¨ååˆ†é’Ÿåå…³æœºshutdown -h 10#ç«‹å³å…³æœºshutdown -h now#åœ¨20:35å…³æœºshutdown -h 20:35#ç«‹é©¬é‡å¯shutdown -r now#ç«‹é©¬é‡å¯reboot åˆ‡æ¢ç›®å½•åŸºç¡€æŒ‡ä»¤ï¼šcd é¦–å…ˆè¦çŸ¥é“è¿™ä¸¤ä¸ªæ¦‚å¿µ å†³å®šè·¯å¾„ ç›¸å¯¹è·¯å¾„ ç»å¯¹è·¯å¾„ï¼šæŒ‡çš„æ˜¯èµ„æºçš„å…¨è·¯å¾„ï¼Œæ¯”å¦‚D:\\APP\\Typora ç›¸å¯¹è·¯å¾„ï¼šæŒ‡çš„æ˜¯èµ„æºåœ¨å½“å‰ç›®å½•ä¸‹çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨åœ¨D:\\APPç›®å½•ä¸‹ï¼Œæˆ‘è¦å®šä½åˆ°Typoraè¿™ä¸ªç›®å½•ï¼Œæˆ‘å¯ä»¥ç›´æ¥ä½¿ç”¨Typoraæ¥è¡¨ç¤ºè¯¥æ–‡ä»¶å¤¹ 12345678#è¿›å…¥æ ¹è·¯å¾„ä¸‹çš„usrç›®å½•cd /usr#å½“å‰åœ¨æ ¹è·¯å¾„ä¸‹ï¼Œæˆ‘è¦è¿›å…¥usrç›®å½•[root@iZbp18qscowpmxk6xpk38iZ /]#cd usr#è¿”å›ä¸Šä¸€çº§ç›®å½•cd .. æŸ¥çœ‹ç›®å½•åŸºç¡€æŒ‡ä»¤ï¼šls 123456789#æŸ¥çœ‹æ‰€æœ‰çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼Œç®€å†™å½¢å¼ls -a#ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æ‰€æœ‰çš„æ–‡ä»¶çš„å±æ€§å’Œæƒé™ï¼Œä¸åŒ…æ‹¬éšè—æ–‡ä»¶ls -l#Linuxä¸­å‘½ä»¤å¯ä»¥ç»„åˆ#ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æ‰€æœ‰çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ls -al ç›®å½•æ“ä½œåˆ›å»ºä¸€ä¸ªç›®å½•1234mkdir æ–‡ä»¶å#åˆ›å»ºå¤šçº§ç›®å½•mkdir -p test1/test2/test3 åˆ é™¤ä¸€ä¸ªç›®å½•12345#åˆ é™¤ä¸€ä¸ªç©ºç›®å½•rmdir test1#åˆ é™¤å¤šçº§æ–‡ä»¶rmdir -p test1/test2/test3 å¤åˆ¶ä¸€ä¸ªç›®å½•1cp æºæ–‡ä»¶ ç›®çš„æ–‡ä»¶å¤¹ æŸ¥çœ‹å½“å‰ç›®å½•è·¯å¾„12345678910# æ–‡ä»¶å‘ˆç°ä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒçš„å«ä¹‰# ç™½è‰² ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶# è“è‰² ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹# ç»¿è‰² ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶# çº¢è‰² ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªå‹ç¼©æ–‡ä»¶# æµ…è“è‰² ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªé“¾æ¥æ–‡ä»¶# çº¢è‰²é—ªçƒ ä»£è¡¨é“¾æ¥çš„æ–‡ä»¶æœ‰é—®é¢˜# é»„è‰² ä»£è¡¨è®¾å¤‡æ–‡ä»¶# ç°è‰² ä»£è¡¨å®ƒæ˜¯å…¶ä»–æ–‡ä»¶pwd ç§»é™¤ç›®å½•æˆ–è€…æ–‡ä»¶åŸºç¡€å‘½ä»¤ï¼šrm -f å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šï¼Œå¼ºåˆ¶åˆ é™¤ -r é€’å½’åˆ é™¤æ ¹ç›®å½• -i äº’åŠ¨ï¼Œåˆ é™¤è¯¢é—®æ˜¯å¦åˆ é™¤ 1rm -rf install.sh ç§»åŠ¨ç›®å½•æˆ–è€…æ–‡ä»¶åŸºç¡€å‘½ä»¤ï¼šmv -f å¼ºåˆ¶ -u åªæ›¿æ¢å·²ç»æ›´æ–°è¿‡çš„æ–‡ä»¶ 1234mv æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶å¤¹#é‡å‘½ådir1ä¸ºdir2mv dir1 dir2","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"}]},{"title":"Linux-ç®€ä»‹","slug":"Linux-ç®€ä»‹","date":"2022-01-29T10:32:02.000Z","updated":"2022-04-24T03:31:11.143Z","comments":true,"path":"javaEE/Linux/2022/01/29/Linux-ç®€ä»‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Linux/2022/01/29/Linux-%E7%AE%80%E4%BB%8B/","excerpt":"","text":"Linuxç®€ä»‹å…¶å®Linuxè¿™ä¸ªè¯æœ¬èº«æŒ‡çš„æ˜¯Linuxå†…æ ¸ã€‚ æˆ‘ä»¬æ‰€è¯´çš„Linuxæ“ä½œç³»ç»Ÿå…¶å®æ˜¯åŸºäºLinuxå†…æ ¸çš„æ“ä½œç³»ç»Ÿï¼Œå°±æ˜¯Linuxçš„å‘è¡Œç‰ˆã€‚ ç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒçŸ¥åçš„æ˜¯ï¼šUbuntuã€RedHatã€CnetOSã€Oracle Linuxç­‰ç­‰ å‡†å¤‡å·¥ä½œ å‡†å¤‡ä¸€ä¸ªLinuxç³»ç»Ÿçš„æœåŠ¡å™¨ å¦‚æœæ²¡æœ‰ç»æµåŸºç¡€ï¼Œå¯ä»¥ä½¿ç”¨VMwareï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºç”¨æ¥å­¦ä¹ ã€‚ è¿™é‡Œå»ºè®®å¤§å®¶å»é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘è´­ä¹°ä¸€ä¸ªæœåŠ¡å™¨ç”¨æ¥å­¦ä¹ ï¼Œè¿™æ ·çš„ç¯å¢ƒæ›´çœŸå®ï¼Œå¹¶ä¸”ä¹Ÿä¸æ˜¯å¾ˆè´µï¼Œå…·ä½“å¦‚ä½•è´­ä¹°ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå¯ä»¥è‡ªè¡Œåˆ°bç«™æœä¸€æœã€‚ å·¥å…· è¿™é‡Œè¦ä¸‹è½½ä¸¤ä¸ªå·¥å…·ï¼Œä¸€ä¸ªå«XShellï¼Œå¦ä¸€ä¸ªå«XFtpã€‚ XShellæ˜¯ç”¨sshæ¥è¿œç¨‹è¿æ¥ä½ è´­ä¹°çš„æœåŠ¡å™¨ã€‚ XFtpæ˜¯ç”¨æ¥ä¸Šä¼ æœ¬åœ°æ–‡ä»¶çš„ã€‚ è¿™é‡Œæˆ‘æŠŠå®‰è£…åŒ…åˆ†äº«ä¸€ä¸‹ã€‚ 12é“¾æ¥:https://pan.baidu.com/s/1AgF6l1Bn74QGMpkwQRIHqA æå–ç :hr1x é€šå¸¸æœåŠ¡å™¨ä¼šåœ¨ä¸€å¼€å§‹æ­å»ºä¸€äº›ç¯å¢ƒï¼Œæœ‰è¿™ä¸¤ç§æ¯”è¾ƒæµè¡Œçš„ç»„åˆ LAMP(Linux+Apache+MySQL+PHP) LNMP(Linux+Nginx+MySQL+PHP)ï¼ˆæ¨èï¼‰ è¿™é‡Œå«Œéº»çƒ¦çš„å¯ä»¥å®‰è£…ä¸€ä¸ªå®å¡”ï¼Œä¸€é”®éƒ¨ç½²ã€‚ èµ°è¿›Linuxç³»ç»Ÿå¼€æœºä¼šå¯åŠ¨è®¸å¤šç¨‹åºï¼Œåœ¨windowsä¸­æˆ‘ä»¬å«å®ƒæœåŠ¡ï¼ˆâ€œServiceâ€ï¼‰ï¼Œåœ¨Linuxä¸­æˆ‘ä»¬å«å®ƒå®ˆæŠ¤è¿›ç¨‹ï¼ˆâ€œdaemonâ€ï¼‰ è®¡ç®—æœºä¸­ï¼Œä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºæˆ–å‘½ä»¤ï¼Œè¢«å«åšâ€œè¿›ç¨‹â€ï¼ˆprocessï¼‰ å¯åŠ¨ä¹‹åä¸€ç›´å­˜åœ¨ã€å¸¸é©»å†…å­˜çš„è¿›ç¨‹ï¼Œä¸€èˆ¬è¢«å«åšâ€œæœåŠ¡â€ï¼ˆserviceï¼‰ åœ¨Linuxä¸­è®°ä½ä¸¤å¥è¯ ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ ¹ç›®å½•æ˜¯&#x2F; æœ€é«˜æƒé™ä¸ºrootï¼Œå¯ä»¥æ“ä½œä¸€åˆ‡","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"}]},{"title":"SpringMVC-JSON","slug":"SpringMVC-JSON","date":"2022-01-29T02:05:17.000Z","updated":"2022-01-29T02:05:53.400Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-JSON/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-JSON/","excerpt":"","text":"JSON(JavaScript Object Notation)JSONæ˜¯ä¸€ç§ååˆ†è½»é‡çº§çš„æ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œæˆ‘ä»¬æ¥è®²ä¸€ä¸‹å¤„ç†JSONå­—ç¬¦ä¸²çš„ä¸¤ä¸ªåº“ Jackson 12345&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.13.1&lt;/version&gt;&lt;/dependency&gt; å°†å¯¹è±¡è½¬ä¸ºJSONå­—ç¬¦ä¸² 12ObjectMapper mapper = new ObjectMapper();String json = mapper.writeValueAsString(user); è¿™æ—¶å€™ï¼Œé¡µé¢å†æ¬¡å‡ºç°ä¹±ç é—®é¢˜ ç¬¬ä¸€ç§åŸç”Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯ 1@GetMapping(value = &quot;/json1&quot;,produces = &quot;application/json;charset=utf-8&quot;) ç¬¬äºŒç§ä½¿ç”¨springmvcçš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ®µé…ç½®åªé’ˆå¯¹jacksonåº“ 1234567891011121314&lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt; &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt; &lt;constructor-arg value=&quot;UTF-8&quot;/&gt; &lt;/bean&gt; &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt; &lt;property name=&quot;objectMapper&quot;&gt; &lt;bean class=&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt; &lt;property name=&quot;failOnEmptyBeans&quot; value=&quot;false&quot;/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt;&lt;/mvc:annotation-driven&gt; é‚£æˆ‘ä»¬æ€ä¹ˆå¤„ç†æ—¶é—´å¯¹è±¡å‘¢ï¼Ÿ 12345678@GetMapping(&quot;/datejson&quot;)@ResponseBodypublic String jsonDate() throws JsonProcessingException &#123; Date date = new Date(); ObjectMapping objectMapping = new ObjectMapper(); return objectMapping.writeValueAsString(date);&#125;//è¿”å›çš„æ˜¯å½“æ—¶çš„æ—¶é—´æˆ³ ä¸‹é¢æ˜¯ç¬¬ä¸€ç§æ–¹æ³• 123456@GetMapping(&quot;/datejson&quot;)@ResponseBodypublic String jsonDate() throws JsonProcessingException &#123; SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); return new ObjectMapper().writeValueAsString(sdf.format(new Date()));&#125; è¿™æ˜¯ç¬¬äºŒç§æ–¹æ³• 123456789@GetMapping(&quot;/datejson2&quot;)@ResponseBodypublic String jsonDate2() throws JsonProcessingException &#123; ObjectMapper mapper = new ObjectMapper(); mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,false); SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); mapper.setDateFormat(sdf); return mapper.writeValueAsString(new Date());&#125; FastJson 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.78&lt;/version&gt;&lt;/dependency&gt; ä¸»è¦çš„ä¸‰ä¸ªç±» JSONObject å¯¹åº”JSONå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨getæ–¹æ³•è·å–JSONå¯¹è±¡çš„å€¼ JSONArray ä»£è¡¨JSONæ•°æ® JSONä»£è¡¨JSONarrayå’ŒJSONObjectçš„è½¬åŒ– ä¸»è¦ç”¨è¿™ä¸ªç±»çš„é™æ€æ–¹æ³•å»è½¬åŒ–JSONå­—ç¬¦ä¸²å’Œå¯¹è±¡","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-Controller","slug":"SpringMVC-Controller","date":"2022-01-29T02:02:36.000Z","updated":"2022-01-29T02:03:04.779Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-Controller/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-Controller/","excerpt":"","text":"Controlleræ§åˆ¶å™¨å’Œmybatisä¸åŒï¼Œåœ¨springmvcä¸­ï¼Œæ³¨è§£å¼€å‘æ‰æ˜¯ä¸»æµï¼Œæ‰€ä»¥æ¥ä¸‹æ¥éƒ½ä¼šä½¿ç”¨æ³¨è§£æ¥å¼€å‘ã€‚ è¢«@Controlleræ ‡æ³¨çš„ç±»æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œéƒ½å„è‡ªæ˜ å°„ä¸€ä¸ªurlåœ°å€ åœ¨springä¸­æˆ‘ä»¬è¯´è¿‡ï¼Œä½¿ç”¨æ³¨è§£çš„æ—¶å€™éœ€è¦åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ³¨è§£æ‰«æ 12&lt;context:component-scan base-package=&quot;com.lizhi.controller&quot;/&gt;&lt;!--è¿™é‡Œæœ€å¥½å†™åˆ°controlleråŒ…ï¼Œå› ä¸ºè¯¥é…ç½®æ–‡ä»¶ä¸“æ³¨äºå¤„ç†Controllerå±‚çš„äº‹æƒ…ï¼Œä¸è¦å°†åŒ…æ‰«æçš„èŒƒå›´æ‰©å¤§--&gt; å›é¡¾springä¸­çš„å¸¸ç”¨æ³¨å†Œbeançš„æ³¨è§£ 12345@Component æ™®é€šç»„ä»¶@Service æœåŠ¡å±‚@Repository æŒä¹…å±‚@Mapper mybatisçš„æ¥å£å±‚@Controller æ§åˆ¶å™¨å±‚ å› ä¸ºæˆ‘ä»¬é…ç½®çš„DispatcherServletä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œä½†æ˜¯å¯¹äºé™æ€èµ„æºï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹¦æˆªå¯¹ä»–åšå‡ºå¤„ç†ï¼Œæ‰€ä»¥æœ‰äº†ä»¥ä¸‹é…ç½® 12&lt;!-- Springmvcä¸å¤„ç†é™æ€æ–‡ä»¶--&gt;&lt;mvc:default-servlet-handler/&gt; @RequestMappingè¯¥æ³¨è§£å¯ä»¥ä½œç”¨äºç±»ä¸Šé¢æˆ–è€…æ–¹æ³•ä¸Šé¢ æ–¹æ³•ä¸Šé¢ è¯¥æ–¹æ³•æ˜ å°„çš„urlåœ°å€å³ä¸ºæ³¨è§£ä¸­çš„å€¼ ç±»ä¸Šé¢ å½“å…¶ä½œç”¨åœ¨ç±»ä¸Šé¢çš„æ—¶å€™ï¼Œè¯¥æ§åˆ¶å™¨ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•çš„æ˜ å°„è·¯å¾„çš„å‰é¢éƒ½ä¼šåŠ ä¸Šè¯¥æ³¨è§£ä¸­çš„å€¼ @GetMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯getè¯·æ±‚ @PostMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯postè¯·æ±‚ @PutMapping è¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯putè¯·æ±‚ @DeleteMappingè¯¥æ³¨è§£ä»£è¡¨è¯·æ±‚æ˜¯deleteè¯·æ±‚ @RestControllerå½“ç±»ä¸Šä¸æ˜¯@Controlleræ³¨è§£è€Œæ˜¯@RestControlleræ—¶å€™ï¼Œè¯¥ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•è¿”å›çš„å€¼ï¼Œä¸ä¼šè·³è½¬è§†å›¾ï¼Œè€Œæ˜¯è¿”å›JSONå­—ç¬¦ä¸² å¦‚æœä¸æƒ³è®©ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½è¿”å›å­—ç¬¦ä¸² åˆ™ç±»ä¸Šé¢ä½¿ç”¨@Controlleræ³¨è§£ï¼Œæ–¹æ³•ä¸Šä½¿ç”¨@ResponseBodyæ ‡æ³¨æ­¤æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸²ä¸è¦è¢«è§†å›¾è§£æå™¨è§£æ RestFulé£æ ¼æ¦‚å¿µï¼šRestFulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ å®ƒä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œå®ƒå°±åªæ˜¯ä¸€ä¸ªstyleã€‚åŸºäºè¿™ç§é£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´åŠ ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œå¹¶ä¸”å®‰å…¨ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æºé€šè¿‡ä¸ç”¨çš„å‚æ•°æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œæ–¹æ³•å•ä¸€ï¼Œpostå’Œget http:&#x2F;locoalhost:8080&#x2F;item&#x2F;insertItem postæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;deleteitem getæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;queryItem getæäº¤ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;updateitem postæäº¤ ä½¿ç”¨RestFulé£æ ¼æ“ä½œèµ„æº http:&#x2F;locoalhost:8080&#x2F;item&#x2F;add&#x2F;å‚æ•°&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;update&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;query&#x2F;å‚æ•°&#x2F;â€¦ http:&#x2F;locoalhost:8080&#x2F;item&#x2F;update&#x2F;å‚æ•°&#x2F;â€¦ æœ¬è´¨å…¶å®å°±æ˜¯é€šè¿‡ä¸åŒçš„æäº¤æ–¹å¼èµ°ä¸åŒçš„æ–¹æ³• ç»“æœè·³è½¬æ–¹å¼æ§åˆ¶å™¨æœ€åç›´æ¥returnå­—ç¬¦ä¸²çš„è¯é»˜è®¤è¯·æ±‚è½¬å‘ å¦‚æœæƒ³è¦é‡å®šå‘å­—ç¬¦ä¸²å‰é¢åŠ â€œ**redirect:**â€å³å¯ å¤„ç†å‰ç«¯æ•°æ® å¦‚æœæäº¤å‚æ•°çš„åç§°å’Œæ–¹æ³•çš„å‚æ•°åä¸€è‡´çš„è¯ï¼Œ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add?name=lizhi&amp;age=20 1234@GetMapping(&quot;user/add&quot;)public String test01(String name,int age,Model model)&#123; return &quot;user&quot;;&#125; å¦‚æœæäº¤å‚æ•°å’Œæ–¹æ³•å‚æ•°ä¸ä¸€è‡´çš„è¯ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add?username=lizhi&amp;userage=20 1234@GetMapping(&quot;user/add&quot;)public String add(@RequestParam(&quot;username&quot;) String name,@RequestParam(&quot;userage&quot;)int age,Model model)&#123; return &quot;user&quot;;&#125; å¦‚æœæäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ æäº¤æ•°æ®ï¼šhttp://localhost:8080/user/add è¦æ±‚æäº¤çš„è¡¨å•è¦å’Œå±æ€§çš„å±æ€§åä¸€è‡´ï¼Œæ–¹æ³•å‚æ•°å³å¯ç›´æ¥ä½¿ç”¨å¯¹è±¡ 1234@PostMapping(&quot;user/add&quot;)public String add(User user,Model model)&#123; return &quot;user&quot;;&#125; è¿”å›å‰ç«¯æ•°æ® ModelAndView è¯¥å¯¹è±¡åœ¨åˆè¯†mvcçš„æ—¶å€™å·²ç»è§è¿‡ï¼Œä¸å†èµ˜è¿° Modelï¼ˆè¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼‰ è¯¥å¯¹è±¡åœ¨ä½¿ç”¨æ³¨è§£å¼€å‘çš„æ—¶å€™ä¹Ÿå·²ç»è§è¿‡ï¼Œè¿™é‡Œä¹Ÿä¸å†èµ˜è¿° ModelMap ModelMapå®ç°äº†Modelæ¥å£ï¼Œç»§æ‰¿äº†LinkedHashMapï¼Œæ‰€ä»¥å®ƒæ›´å¼ºå¤§ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹Modelä¼šæ›´å¸¸ç”¨","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ç®€è¿°","slug":"SpringMVC-ç®€è¿°","date":"2022-01-29T02:01:23.000Z","updated":"2022-01-29T02:08:21.939Z","comments":true,"path":"javaEE/SpringMVC/2022/01/29/SpringMVC-ç®€è¿°/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/29/SpringMVC-%E7%AE%80%E8%BF%B0/","excerpt":"","text":"Spring MVCModel 1æ—¶ä»£æ‰€æœ‰è¯·æ±‚ç›´æ¥è½¬å‘åˆ°jspç„¶ååœ¨jspç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œç„¶åæ ¹æ®ä¸åŒçš„ç»“æœè·³è½¬ä¸åŒçš„é¡µé¢ Model 2æ—¶ä»£Controller å–å¾—è¡¨å•æ•°æ® å¤„ç†ä¸šåŠ¡é€»è¾‘ æ ¹æ®ä¸åŒçš„æƒ…å†µè·³è½¬ä¸åŒçš„é¡µé¢ View å±•ç¤ºæ•°æ® Model ä¸šåŠ¡é€»è¾‘ ä¿å­˜æ•°æ® ç®€ä»‹SpringMVCçš„ç‰¹ç‚¹ï¼š è½»é‡çº§ï¼Œç®€å•æ˜“å­¦ ä¸springæ— ç¼ç»“åˆï¼Œå¯ä»¥å°†mvcä¸­æ‰€æœ‰éœ€è¦çš„ç±»æ³¨å†Œåˆ°iocå®¹å™¨ä¸­ é«˜æ•ˆï¼ŒåŸºäºè¯·æ±‚å’Œå“åº”çš„mvcæ¡†æ¶ åŠŸèƒ½å¼ºå¤§ï¼ŒRESTFULé£æ ¼ï¼Œæ ¼å¼åŒ–ï¼Œæ•°æ®éªŒè¯ çº¦å®šå¤§äºé…ç½® è¯´ç™½äº†å­¦å®ƒå°±ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºå®ƒè®©æˆ‘ä»¬å¼€å‘å˜å¾—ç®€å•äº† åŸç† å›é¡¾servletæˆ‘ä»¬éƒ½å­¦è¿‡java webï¼Œé‚£æ—¶å€™æˆ‘ä»¬å¯¹äºå‰ç«¯çš„è¯·æ±‚éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªservletæ¥å¤„ç†çš„ï¼Œç„¶ååœ¨servleté‡Œé¢ï¼Œå¤„ç†å‰ç«¯ä¼ æ¥çš„æ•°æ®ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›å¤„ç†ä¹‹åçš„æ•°æ®ï¼Œç„¶åservletæ ¹æ®è¿™äº›æ•°æ®ï¼Œè¿›è¡Œé‡å®šå‘æˆ–è€…è¯·æ±‚è½¬å‘ ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªservletï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬åœ¨å¼€å‘ä¸­å†™äº†å¤§é‡çš„servletï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦åœ¨web.xmlä¸­æ³¨å†Œï¼Œååˆ†ç¹çã€‚ æ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚è§£å†³ä¸äº†çš„ï¼Œæ‰€ä»¥ï¼Œspringmvcåœ¨servletä¹‹å‰åŠ äº†ä¸€å±‚æ¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ SpringMVCçš„webæ¡†æ¶æ˜¯ä»¥å›´ç»•DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼Œè°ƒåº¦å™¨ï¼Œè¯·æ±‚åˆ†å‘å™¨ï¼‰è®¾è®¡çš„ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ï¼ˆæ–¹æ³•æˆ–è€…ç±»ï¼Œä¸‹é¢çš„åˆè¯†mvcæ˜¯ä»¥ç±»çº§ä½œä¸ºå¤„ç†å™¨ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ–¹æ³•çº§å»åšå¤„ç†å™¨ï¼‰ ä¸‹å›¾æ˜¯DispatcherServletçš„ç»“æ„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›åœ¨javawebé˜¶æ®µæ¯”è¾ƒçœ¼ç†Ÿçš„ç±»ï¼Œæ¯”å¦‚Servletï¼ŒGenericServletï¼ŒHttpServletã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼ŒDispatcherServletæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå’Œæˆ‘ä»¬å½“æ—¶å†™çš„servletæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä»–å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ã€‚ äººåˆ°ä¸­å¹´æœ‰ä¸‰å¤§ä»¶ï¼Œæ¸æå¤§æ£ä¿æ¸©æ¯ã€‚ SpringMVCä¸­ä¹Ÿæœ‰ä¸‰å¤§ä»¶ï¼Œåˆ†åˆ«æ˜¯ å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆHandlerMappingï¼‰ å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰ è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰ æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸‰å¤§ä»¶æ˜¯å¦‚ä½•åœ¨springmvcä¸­å‘æŒ¥ä½œç”¨çš„ï¼ŒåŸç†å›¾å¦‚ä¸‹ï¼š æ ¸å¿ƒç±»å›¾ ç®€è¦åˆ†æ DispatcherServletå°±å¯ä»¥ç®€å•ç†è§£ä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼Œä»–ä¼šå°†æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚æ‹¦æˆª å°†è¯¥è¯·æ±‚å‘é€ç»™HandlerMappingå®ç°ç±»ï¼Œè¯¥å®ç°ç±»æ ¹æ®urlæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ§åˆ¶å™¨ï¼Œå°†ç»“æœè¿”å›ç»™DispatcherServlet DispatcherServletæ ¹æ®HandlerMappingè§£æçš„ç»“æœï¼Œé€‚é…å¹¶æ‰§è¡Œå¯¹åº”çš„æ§åˆ¶å™¨çš„é€»è¾‘ï¼Œ æ§åˆ¶å™¨è¿”å›ä¿¡æ¯ï¼ŒHandlerAdapterå®ç°ç±»æ¥æ”¶è¯¥ä¿¡æ¯å¹¶å°†å…¶è§£ææˆModelAndViewå¯¹è±¡è¿”å›åˆ°DispatcherServlet DispatcherServletè°ƒç”¨ViewResolverå®ç°ç±»å°†HandlerAdapterå®ç°ç±»ä¼ å›æ¥çš„è§†å›¾é€»è¾‘å’Œæ¨¡å‹è§£æ è§†å›¾è§£æå™¨å°†è§£æåçš„é€»è¾‘è§†å›¾åä¼ å›DispatcherServlet DispatcherServletæ ¹æ®è§£æåçš„è§†å›¾åç§°æ‰¾åˆ°è¯¥è§†å›¾ æ¸²æŸ“è§†å›¾ï¼Œè¿”å›é¡µé¢ï¼Œä½œå‡ºå“åº”","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-æ‹¦æˆªå™¨","slug":"SpringMVC-æ‹¦æˆªå™¨","date":"2022-01-28T14:48:50.000Z","updated":"2022-01-29T02:06:45.968Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-æ‹¦æˆªå™¨/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E6%8B%A6%E6%88%AA%E5%99%A8/","excerpt":"","text":"SpringMVCä¸­çš„æ‹¦æˆªå™¨å…¶å®æ­¤æ‹¦æˆªå™¨å°±æ˜¯æˆ‘ä»¬åœ¨javawebé˜¶æ®µä½¿ç”¨çš„è¿‡æ»¤å™¨ï¼Œåªä¸è¿‡æ˜¯æ¢äº†ä¸€ä¸ªåå­—è€Œå·²ï¼Œæ¢æ±¤ä¸æ¢è¯ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚ åªä¸è¿‡æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ è¿‡æ»¤å™¨ï¼š Servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•javawebå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨ åœ¨url-patternä¸­é…ç½®äº†&#x2F;*åï¼Œä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ æ‹¦æˆªå™¨ï¼š æ‹¦æˆªå™¨æ˜¯SpringMVCä¸­æ‰ä¼šæœ‰çš„ï¼Œåªæœ‰ä½¿ç”¨äº†æ­¤æ¡†æ¶çš„å·¥ç¨‹æ‰å¯ä»¥ä½¿ç”¨ æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¦‚æœè®¿é—®çš„æ˜¯é™æ€èµ„æºæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„ è‡ªå®šä¹‰æ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£ 1234567891011121314151617181920212223242526272829package com.lizhi.interceptor;import org.springframework.web.servlet.HandlerInterceptor;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class MyInterceptor implements HandlerInterceptor &#123; /** * return trueæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ */ @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; System.out.println(&quot;===å¤„ç†å‰===&quot;); return true; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; System.out.println(&quot;===å¤„ç†å===&quot;); &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; System.out.println(&quot;===æ¸…ç†===&quot;); &#125;&#125; åœ¨Springæ ¸å¿ƒæ–‡ä»¶ä¸­æ³¨å†Œæ‹¦æˆªå™¨ 1234567&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--/**ä¼šæ‹¦æˆªè¿™ä¸ªè¯·æ±‚ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.lizhi.interceptor.MyInterceptor&quot;/&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt;","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ä¹±ç ","slug":"SpringMVC-ä¹±ç ","date":"2022-01-28T14:48:01.000Z","updated":"2022-05-05T05:38:59.702Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-ä¹±ç /","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E4%B9%B1%E7%A0%81/","excerpt":"","text":"ä¹±ç ï¼ä¸€ç”Ÿä¹‹æ•Œï¼ï¼ï¼UserController 123456789101112131415161718package com.lizhi.controller;import com.lizhi.pojo.User;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;@Controller@RequestMapping(&quot;/user&quot;)public class UserController &#123; @PostMapping(&quot;/login.do&quot;) public String login(User user, Model model)&#123; model.addAttribute(&quot;user&quot;,user); return &quot;index&quot;; &#125;&#125; login.jsp 123456789101112131415161718&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;/user/login.do&quot; method=&quot;post&quot;&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt; &lt;/p&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; index.jsp 12345678910&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;name:$&#123;user.name&#125;age:$&#123;user.age&#125;&lt;/body&gt;&lt;/html&gt; ç»“æœå¦‚ä¸‹ï¼š æˆ‘ä»¬å…ˆå°è¯•ä¸€ä¸‹é…ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆ 1234567891011121314151617181920212223package com.lizhi.filter;import javax.servlet.*;import java.io.IOException;public class CharsetFilter implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; servletRequest.setCharacterEncoding(&quot;utf-8&quot;); servletResponse.setCharacterEncoding(&quot;utf-8&quot;); &#125; @Override public void destroy() &#123; &#125;&#125; è®°å¾—å»web.xmlä¸­æ³¨å†Œ 12345678&lt;filter&gt; &lt;filter-name&gt;charsetFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.lizhi.filter.CharsetFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;charsetFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æˆ‘ä»¬å°è¯•åå‘ç°ï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œé‚£æ—¢ç„¶æˆ‘ä»¬å†™çš„è¿‡æ»¤å™¨ä¸è¡Œ é‚£springmvcç»™æˆ‘ä»¬å†™äº†ä¸€ä¸ªä¸“é—¨å¤„ç†ä¹±ç çš„è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ï¼Œè¿™æ˜¯ç¬¬äºŒç§æ–¹æ¡ˆï¼Œå¾ˆç¨³å¦¥ 123456789101112&lt;filter&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æµ‹è¯•åå‘ç°ï¼Œè¿˜æ˜¯ä¹±ç ï¼ï¼è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å»çœ‹ä¸€ä¸‹tomcatçš„configç›®å½•ä¸‹çš„server.xmlï¼Œæ‰¾åˆ°connectoræ ‡ç­¾å¹¶ä¿®æ”¹å±æ€§ 123&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; URIEncoding=&quot;UTF-8&quot; /&gt; å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œæˆ‘ä»¬å»æ‰¾ä¸€ä¸ªå…¶ä»–å¤§ä½¬è‡ªå·±å†™çš„è¿‡æ»¤å™¨è¯•ä¸€è¯•ï¼Œè¿™æ˜¯ç¬¬ä¸‰ç§æ–¹æ¡ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.lizhi.filter;import javax.servlet.*;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletRequestWrapper;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.io.UnsupportedEncodingException;import java.nio.charset.StandardCharsets;import java.util.Map;public class EncodeFilter implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; //å¤„ç†responseçš„å­—ç¬¦ç¼–ç  HttpServletResponse resp = (HttpServletResponse) servletResponse; resp.setContentType(&quot;text/html;utf-8&quot;); HttpServletRequest req = (HttpServletRequest) servletRequest; HttpServletRequest myreq = new MyRequest(req); filterChain.doFilter(myreq, resp); &#125; @Override public void destroy() &#123; &#125;&#125;class MyRequest extends HttpServletRequestWrapper &#123; private HttpServletRequest request; private boolean hasEncode; public MyRequest(HttpServletRequest request) &#123; super(request); this.request = request; &#125; @Override public Map getParameterMap() &#123; String method = request.getMethod(); if(&quot;post&quot;.equalsIgnoreCase(method))&#123; try&#123; request.setCharacterEncoding(&quot;utf-8&quot;); return request.getParameterMap(); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125;else if(&quot;get&quot;.equalsIgnoreCase(method))&#123; Map&lt;String,String[]&gt; parameterMap = request.getParameterMap(); if(!hasEncode)&#123; for (String parameterName : parameterMap.keySet()) &#123; String[] values = parameterMap.get(parameterName); if(values!=null)&#123; for (int i = 0; i &lt; values.length; i++) &#123; try&#123; values[i] = new String(values[i].getBytes(&quot;ISO-8859-1&quot;),&quot;utf-8&quot;); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; hasEncode = true; &#125; return parameterMap; &#125; return super.getParameterMap(); &#125; @Override public String getParameter(String name) &#123; Map&lt;String,String[]&gt; parameterMap = getParameterMap(); String[] values = parameterMap.get(name); if(values==null)&#123; return null; &#125; return values[0]; &#125; @Override public String[] getParameterValues(String name) &#123; Map&lt;String,String[]&gt; parameterMap = getParameterMap(); return parameterMap.get(name); &#125;&#125; ç»“æœæµ‹è¯•å‘ç°ï¼Œè¿˜æ˜¯ä¸å¯¹ï¼å…¶å®ä¹±ç çš„é—®é¢˜åˆ°è¿™é‡Œä¸€èˆ¬éƒ½ä¼šè§£å†³äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸è¡Œå‘¢ï¼Ÿ å…¶å®æ˜¯åœ¨æ³¨å†Œfilterçš„æ—¶å€™å°±å‡ºé”™äº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹é¢çš„æ­£ç¡®é…ç½®ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ 12345678&lt;filter&gt; &lt;filter-name&gt;otherEncodeFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.lizhi.filter.EncodeFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;otherEncodeFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æœ‰çš„å°ä¼™ä¼´å¯èƒ½åœ¨ä¸€å¼€å§‹å°±çœ‹å‡ºæ¥äº†ï¼Œæ²¡é”™ï¼Œå°±æ˜¯&lt;&lt;url-pattern&gt;/*&lt;/url-pattern&gt;&gt;è¿™é‡Œçš„æ‹¦æˆªè·¯å¾„æˆ‘ä»¬åº”è¯¥ä½¿ç”¨/*è€Œä¸æ˜¯/ ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å‰è€…æ˜¯æ‹¦æˆªä¸€åˆ‡è¯·æ±‚ï¼ŒåŒ…æ‹¬jsp è€Œåè€…ä¼šæ‹¦æˆªé™¤äº†jspçš„æ‰€æœ‰èµ„æº ç›¸ä¿¡åƒäº†è¿™æ¬¡äºï¼Œå¤§å®¶ä¹‹åå°±å†ä¹Ÿä¸ä¼šå¿˜è®°è¿™ä¸ªå‘äº†ï¼è€Œä¸”ä¹Ÿäº†è§£äº†å¤§éƒ¨åˆ†ä¹±ç é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹","slug":"SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹","date":"2022-01-28T14:26:57.000Z","updated":"2022-01-29T02:04:25.357Z","comments":true,"path":"javaEE/SpringMVC/2022/01/28/SpringMVC-ç¬¬ä¸€ä¸ªSpringMVCå·¥ç¨‹/","link":"","permalink":"http://li-zhi.net.cn/javaEE/SpringMVC/2022/01/28/SpringMVC-%E7%AC%AC%E4%B8%80%E4%B8%AASpringMVC%E5%B7%A5%E7%A8%8B/","excerpt":"","text":"åˆè¯†SpringMVCç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ™®é€šmavenå·¥ç¨‹ ç¬¬äºŒæ­¥ï¼šå¯¼å…¥æ‰€éœ€ä¾èµ– 12345678910111213141516171819202122232425&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.3.14&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt; &lt;artifactId&gt;jstl-api&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;taglibs&lt;/groupId&gt; &lt;artifactId&gt;standard&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt;&lt;/dependency&gt; ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ webæ”¯æŒ ç¬¬å››æ­¥ï¼šåœ¨web.xmlä¸­é…ç½®DispatcherServlet 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; ç¬¬äº”æ­¥ï¼šåœ¨èµ„æºè·¯å¾„ä¸‹åˆ›å»ºspringmvc-servlet.xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®å¤„ç†å™¨æ˜ å°„å™¨ï¼Œå¤„ç†å™¨é€‚é…å™¨ï¼Œè§†å›¾è§£æå™¨ 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt; &lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;/bean&gt; &lt;bean id=&quot;/hello&quot; class=&quot;com.lizhi.controller.HelloServlet&quot;/&gt;&lt;/beans&gt; ç¬¬å…­æ­¥ï¼šåˆ›å»ºHelloControllerå®ç°Controlleræ¥å£ï¼Œå¹¶æ³¨å†Œï¼Œidä¸ºè·¯å¾„ 12345678910111213141516171819package com.lizhi.controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.mvc.Controller;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class HelloServlet implements Controller &#123; @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(&quot;msg&quot;,&quot;HelloSpringMVC&quot;); modelAndView.setViewName(&quot;hello&quot;); return modelAndView; &#125;&#125; ç¬¬ä¸ƒæ­¥ï¼šåœ¨WEB-INFæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºjspæ–‡ä»¶å¤¹ï¼Œåœ¨jspæ–‡ä»¶å¤¹ä¸­åˆ›å»ºhello.jsp 123456789&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;$&#123;msg&#125;&lt;/body&gt;&lt;/html&gt; ç¬¬å…«æ­¥ï¼šå¯åŠ¨tomcatæµ‹è¯• ä½¿ç”¨æ³¨è§£å¼€å‘å‰å››æ­¥å¦‚ä¸Š ç¬¬äº”æ­¥ï¼šåœ¨springmvc-servletä¸­å¼€å¯æ³¨è§£æ”¯æŒ 123456789101112131415161718192021222324252627282930313233&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt; &lt;context:component-scan base-package=&quot;com.lizhi.controller&quot;/&gt; &lt;!-- Springmvcä¸å¤„ç†é™æ€æ–‡ä»¶--&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!--æ”¯æŒspringmvcæ³¨è§£é©±åŠ¨åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ¥å®Œæˆæ˜ å°„å…³ç³»è¦æƒ³è®©æ³¨è§£ç”Ÿæ•ˆï¼Œåˆ™å¿…é¡»è¦å‘ä¸Šä¸‹æ–‡æ³¨å†ŒDefaultAnnotationHandlerMappingå’Œä¸€ä¸ªAnnotationMethodHandlerMappingå®ä¾‹è¿™ä¸¤ä¸ªå¤„ç†å™¨åˆ†åˆ«æ˜¯ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«çš„è€Œannotation-drivenåˆ™å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆäº†è¿™ä¸¤ä¸ªç±»çš„é…ç½®--&gt; &lt;mvc:annotation-driven/&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; ç¬¬å…­æ­¥ï¼šåˆ›å»ºController 123456789101112131415package com.lizhi.controller;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;@Controllerpublic class UserController &#123; @GetMapping(&quot;login&quot;) public String login(Model model)&#123; //modelå¯¹è±¡æ˜¯é¡µé¢æ¨¡å‹ï¼Œå¯ä»¥åœ¨æ­¤å¯¹è±¡ä¸­æ”¾å…¥ä¸šåŠ¡è¿”å›çš„å‰ç«¯éœ€è¦çš„æ•°æ® model.addAttribute(&quot;msg&quot;,&quot;è¯·ç™»å½•&quot;); return &quot;login&quot;; &#125;&#125; ç¬¬ä¸ƒæ­¥ï¼šåœ¨WEB-INFæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºjspæ–‡ä»¶å¤¹ï¼Œåœ¨jspæ–‡ä»¶å¤¹ä¸­åˆ›å»ºlogin.jsp ç¬¬å…«æ­¥ï¼šå¯åŠ¨tomcatæµ‹è¯• å¦‚æœå‡ºç°404æˆ–è€…500é”™è¯¯å¯ï¼Œå°è¯•ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆ åœ¨pom.xmlä¸­åŠ å…¥æ­¤æ®µé…ç½® 123456789101112131415161718192021&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå‡ºç°çš„é—®é¢˜--&gt;&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; åœ¨artifactä¸­åŠ å…¥libç›®å½•ï¼Œå¹¶å°†æ‰€éœ€jaråŒ…å¯¼å…¥å…¶ä¸­","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"}]},{"title":"MyBatisæ˜ å°„å™¨æ–‡ä»¶","slug":"MyBatisæ˜ å°„å™¨æ–‡ä»¶","date":"2022-01-27T10:59:36.000Z","updated":"2022-01-27T11:01:38.799Z","comments":true,"path":"javaEE/MyBatis/2022/01/27/MyBatisæ˜ å°„å™¨æ–‡ä»¶/","link":"","permalink":"http://li-zhi.net.cn/javaEE/MyBatis/2022/01/27/MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E6%96%87%E4%BB%B6/","excerpt":"","text":"æ˜ å°„å™¨æ–‡ä»¶mybatisçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„å°±åœ¨äºå®ƒçš„è¯­å¥æ˜ å°„ã€‚ æ­£æ˜¯å› ä¸ºæ­¤æ˜ å°„å™¨æ–‡ä»¶ï¼Œæ‰ä½¿æˆ‘ä»¬å‡å°‘äº†å°†è¿‘95%çš„JDBCä»£ç ï¼Œä½¿æˆ‘ä»¬æ›´ä¸“æ³¨äºä¹¦å†™SQLè¯­å¥ æ˜ å°„å™¨æ–‡ä»¶åªæœ‰è¿™äº›é¡¶çº§å…ƒç´  cache cache-ref delete insert resultMap select sql update selectè¯¥æ ‡ç­¾å¯¹æ ‡SQLè¯­å¥çš„DQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯selectè¯­å¥ 123&lt;select id=&quot;getStudentById&quot; resultType=&quot;student&quot;&gt; select * from student where id = #&#123;id&#125;&lt;/select&gt; è¿™ä¸ªselectè¯­å¥æ˜ å°„namespaceç»‘å®šçš„æ¥å£ä¸­çš„listTeachersæ–¹æ³• resultTypeå®šä¹‰è¿”å›å€¼ç±»å‹ #{id}æ˜¯å–åˆ°æ–¹æ³•ä¼ å…¥çš„å‚æ•° å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ resultType æœŸæœ›ä»è¿™æ¡è¯­å¥ä¸­è¿”å›ç»“æœçš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚ æ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯é›†åˆï¼Œé‚£åº”è¯¥è®¾ç½®ä¸ºé›†åˆåŒ…å«çš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«çš„ç±»å‹ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ resultMap å¯¹å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœæ˜ å°„æ˜¯ MyBatis æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¦‚æœä½ å¯¹å…¶ç†è§£é€å½»ï¼Œè®¸å¤šå¤æ‚çš„æ˜ å°„é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ useCache å°†å…¶è®¾ç½®ä¸º true åï¼Œå°†ä¼šå¯¼è‡´æœ¬æ¡è¯­å¥çš„ç»“æœè¢«äºŒçº§ç¼“å­˜ç¼“å­˜èµ·æ¥ï¼Œé»˜è®¤å€¼ï¼šå¯¹ select å…ƒç´ ä¸º trueã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ insertï¼Œupdateå’Œdeleteè¿™ä¸‰ä¸ªæ ‡ç­¾å¯¹æ ‡SQLè¯­å¥çš„DMLè¯­å¥ å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ parameterMap ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šï¼ˆå¯¹ insertã€update å’Œ delete è¯­å¥ï¼‰trueã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ useGeneratedKeys ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„ getGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL Server è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ keyProperty ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰æŒ‡å®šèƒ½å¤Ÿå”¯ä¸€è¯†åˆ«å¯¹è±¡çš„å±æ€§ï¼ŒMyBatis ä¼šä½¿ç”¨ getGeneratedKeys çš„è¿”å›å€¼æˆ– insert è¯­å¥çš„ selectKey å­å…ƒç´ è®¾ç½®å®ƒçš„å€¼ï¼Œé»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ sqlè¯¥æ ‡ç­¾ç”¨æ¥å®šä¹‰sqlç‰‡æ®µï¼Œä¸€èˆ¬ç”¨æ¥å®šä¹‰ä¸€äº›å¯å¤ç”¨çš„SQLè¯­å¥ç‰‡æ®µï¼Œä½¿ç”¨includeæ ‡ç­¾ä»¥åœ¨å…¶ä»–è¯­å¥ä¸­ä½¿ç”¨ 12345678910111213&lt;sql id=&quot;userColumns&quot;&gt; $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password &lt;/sql&gt;&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt; select &lt;include refid=&quot;userColumns&quot;&gt; &lt;property name=&quot;alias&quot; value=&quot;t1&quot;/&gt; &lt;/include&gt;, &lt;include refid=&quot;userColumns&quot;&gt; &lt;property name=&quot;alias&quot; value=&quot;t2&quot;/&gt; &lt;/include&gt; from some_table t1 cross join some_table t2&lt;/select&gt; å‚æ•°å¦‚æœä¼ å…¥ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¡Œä¸ºå°±ä¼šæœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚æ¯”å¦‚ï¼š 1234&lt;insert id=&quot;insertUser&quot; parameterType=&quot;User&quot;&gt; insert into users (id, username, password) values (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)&lt;/insert&gt; JDBC è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªåˆ—å…è®¸ä½¿ç”¨ null å€¼ï¼Œå¹¶ä¸”å¯èƒ½ä¼šä½¿ç”¨å€¼ä¸º null çš„å‚æ•°ï¼Œå°±å¿…é¡»è¦æŒ‡å®š JDBC ç±»å‹ï¼ˆjdbcType) å­—ç¬¦ä¸²æ›¿æ¢é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨#{}è·å–å‚æ•°çš„å€¼çš„æ—¶å€™ï¼Œmybatisä¼šåˆ›å»ºä¸€ä¸ªPreparedStatementå¯¹è±¡ï¼Œé€šè¿‡é¢„ç¼–è¯‘ï¼Œç”Ÿæˆä¸#{}å‡ºç°æ¬¡æ•°ç›¸åŒçš„å ä½ç¬¦ï¼ˆå³ ? ï¼‰è¿™æ ·æ›´å®‰å…¨å¹¶ä¸”æ›´è¿…é€Ÿã€‚ ä½†æ˜¯æœ‰æ—¶å€™æƒ³ç›´æ¥åœ¨SQLè¯­å¥ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸éœ€è¦è½¬ä¹‰æ­¤å­—ç¬¦ä¸²ï¼ˆå³ä¸éœ€è¦å ä½ç¬¦ï¼‰ï¼Œæ¯”å¦‚ORDER BYè¯­å¥ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨${}è¯­å¥ï¼Œè¿™æ ·çš„è¯ï¼Œmybatiså°±ä¸ä¼šè½¬ä¹‰è¯¥å­—ç¬¦ä¸²äº† å½“ SQL è¯­å¥ä¸­çš„å…ƒæ•°æ®ï¼ˆå¦‚è¡¨åæˆ–åˆ—åï¼‰æ˜¯åŠ¨æ€ç”Ÿæˆçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ›¿æ¢å°†ä¼šéå¸¸æœ‰ç”¨ã€‚ ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœä½ æƒ³ select ä¸€ä¸ªè¡¨ä»»æ„ä¸€åˆ—çš„æ•°æ®æ—¶ï¼Œä¸éœ€è¦è¿™æ ·å†™ï¼š 12345678910@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)User findById(@Param(&quot;id&quot;) long id);@Select(&quot;select * from user where name = #&#123;name&#125;&quot;)User findByName(@Param(&quot;name&quot;) String name);@Select(&quot;select * from user where email = #&#123;email&#125;&quot;)User findByEmail(@Param(&quot;email&quot;) String email);// å…¶å®ƒçš„ &quot;findByXxx&quot; æ–¹æ³• è€Œæ˜¯å¯ä»¥åªå†™è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š 12@Select(&quot;select * from user where $&#123;column&#125; = #&#123;value&#125;&quot;)User findByColumn(@Param(&quot;column&quot;) String column, @Param(&quot;value&quot;) String value); å…¶ä¸­ $&#123;column&#125; ä¼šè¢«ç›´æ¥æ›¿æ¢ï¼Œè€Œ #&#123;value&#125; ä¼šä½¿ç”¨ ? é¢„å¤„ç†ã€‚ è¿™æ ·ï¼Œå°±èƒ½å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼š 123User userOfId1 = userMapper.findByColumn(&quot;id&quot;, 1L);User userOfNameKid = userMapper.findByColumn(&quot;name&quot;, &quot;kid&quot;);User userOfEmail = userMapper.findByColumn(&quot;email&quot;, &quot;noone@nowhere.com&quot;); ç»“æœé›†æ˜ å°„å¯ä»¥è‡ªå®šä¹‰ä¸€äº›å¤æ‚çš„è¿”å›å€¼å¯¹è±¡ ç®€å•ç»“æœé›†æ˜ å°„123456789@Data@NoArgsConstructor@AllArgsConstructor@Alias(&quot;aliasStudent&quot;)public class Student &#123; private Integer id; private String name; private Integer tid;&#125; 12345678&lt;select id=&quot;getStudentById&quot; resultMap=&quot;studentMap&quot;&gt; select student_id,student_name,student_tid from student where id = #&#123;id&#125;&lt;/select&gt;&lt;resultMap id=&quot;studentMap&quot;&gt; &lt;id column=&quot;student_id&quot; property=&quot;id&quot;/&gt; &lt;result column=&quot;student_name&quot; property=&quot;name&quot;/&gt; &lt;result column=&quot;student_tid&quot; property=&quot;tid&quot;/&gt;&lt;/resultMap&gt; é«˜çº§ç»“æœé›†æ˜ å°„1234567@Data@NoArgsConstructor@AllArgsConstructorpublic class Teacher &#123; private int id; private String name;&#125; 123456789101112&lt;resultMap id=&quot;teacherMap&quot; type=&quot;com.lizhi.pojo.Teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot; /&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;collection property=&quot;students&quot; ofType=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;/association&gt; &lt;/collection&gt;&lt;/resultMap&gt; resultMapçš„å­æ ‡ç­¾ constructor ç”¨äºåœ¨å®ä¾‹åŒ–ç±»æ—¶ï¼Œæ³¨å…¥ç»“æœåˆ°æ„é€ æ–¹æ³•ä¸­ idArg - ID å‚æ•°ï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½ arg - å°†è¢«æ³¨å…¥åˆ°æ„é€ æ–¹æ³•çš„ä¸€ä¸ªæ™®é€šç»“æœ id â€“ ä¸€ä¸ª ID ç»“æœï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½ result â€“ æ³¨å…¥åˆ°å­—æ®µæˆ– JavaBean å±æ€§çš„æ™®é€šç»“æœ association ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”,è®¸å¤šç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹ åµŒå¥—ç»“æœæ˜ å°„ â€“ å…³è”å¯ä»¥æ˜¯ resultMap å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨ collection ä¸€ä¸ªå¤æ‚ç±»å‹çš„é›†åˆ åµŒå¥—ç»“æœæ˜ å°„ â€“ é›†åˆå¯ä»¥æ˜¯ resultMap å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨ constructoræœ‰äº›æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå³é‚£äº›å¾ˆå°‘æ”¹å˜æˆ–è€…åŸºæœ¬ä¸å˜çš„ç±»ï¼Œå³å¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥ 12345&lt;constructor&gt; &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; name=&quot;id&quot; /&gt; &lt;arg column=&quot;age&quot; javaType=&quot;_int&quot; name=&quot;age&quot; /&gt; &lt;arg column=&quot;username&quot; javaType=&quot;String&quot; name=&quot;username&quot; /&gt;&lt;/constructor&gt; id &amp; result12&lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt;&lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; è¿™äº›å…ƒç´ æ˜¯ç»“æœæ˜ å°„çš„åŸºç¡€ã€‚ id å’Œ result å…ƒç´ éƒ½å°†ä¸€ä¸ªåˆ—çš„å€¼æ˜ å°„åˆ°ä¸€ä¸ªç®€å•æ•°æ®ç±»å‹ï¼ˆString, int, double, Date ç­‰ï¼‰çš„å±æ€§æˆ–å­—æ®µã€‚ è¿™ä¸¤è€…ä¹‹é—´çš„å”¯ä¸€ä¸åŒæ˜¯ï¼Œid å…ƒç´ å¯¹åº”çš„å±æ€§ä¼šè¢«æ ‡è®°ä¸ºå¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡å®ä¾‹æ—¶ä½¿ç”¨ã€‚ è¿™æ ·å¯ä»¥æé«˜æ•´ä½“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç¼“å­˜å’ŒåµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥æ˜ å°„ï¼‰çš„æ—¶å€™ã€‚ ä¸¤ä¸ªå…ƒç´ éƒ½æœ‰ä¸€äº›å±æ€§ï¼š å±æ€§ æè¿° property æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœ JavaBean æœ‰è¿™ä¸ªåå­—çš„å±æ€§ï¼ˆpropertyï¼‰ï¼Œä¼šå…ˆä½¿ç”¨è¯¥å±æ€§ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µï¼ˆfieldï¼‰ã€‚ column æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ javaType ä¸€ä¸ª Java ç±»çš„å…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚ jdbcType JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹åçš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯ä»¥ä¸ºç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚ jdbcTypeæ”¯æŒçš„ JDBC ç±»å‹ ä¸ºäº†ä»¥åå¯èƒ½çš„ä½¿ç”¨åœºæ™¯ï¼ŒMyBatis é€šè¿‡å†…ç½®çš„ jdbcType æšä¸¾ç±»å‹æ”¯æŒä¸‹é¢çš„ JDBC ç±»å‹ã€‚ BIT FLOAT CHAR TIMESTAMP OTHER UNDEFINED TINYINT REAL VARCHAR BINARY BLOB NVARCHAR SMALLINT DOUBLE LONGVARCHAR VARBINARY CLOB NCHAR INTEGER NUMERIC DATE LONGVARBINARY BOOLEAN NCLOB BIGINT DECIMAL TIME NULL CURSOR ARRAY associationè¯¥æ ‡ç­¾å¤„ç†ä¸€ä¸ªå¯¹è±¡èšåˆå¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»ã€‚ mybatisæœ‰ä¸¤ç§ä¸åŒæ–¹å¼å»åŠ è½½å…³è” åµŒå¥—selectæŸ¥è¯¢ï¼šé€šè¿‡å¦ä¸€ä¸ªSQLè¯­å¥å»åŠ è½½å¤æ‚å¯¹è±¡ åµŒå¥—ç»“æœæŸ¥è¯¢ï¼šé€šè¿‡è¿æ¥æŸ¥è¯¢ç›´æ¥å°†æ‰€æœ‰çš„ç»“æœæŸ¥è¯¢å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€å¼ è¡¨é‡Œé¢ åµŒå¥—selectæŸ¥è¯¢ï¼ˆä¸æ¨èï¼‰12345678910111213&lt;resultMap id=&quot;StudentMap&quot; type=&quot;student&quot;&gt; &lt;result column=&quot;tid&quot; property=&quot;tid&quot;/&gt; &lt;association property=&quot;teacher&quot; column=&quot;tid&quot; javaType=&quot;teacher&quot; select=&quot;getTeacherById&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;getTeacherById&quot; resultType=&quot;teacher&quot;&gt; select * from teacher where id = #&#123;tid&#125;&lt;/select&gt;&lt;select id=&quot;getStudentById&quot; resultMap=&quot;StudentMap&quot;&gt; select * from student where id = #&#123;id&#125;&lt;/select&gt; ä¼˜ç‚¹ï¼šSQLè¯­å¥å†™èµ·æ¥æ–¹ä¾¿ ç¼ºç‚¹ï¼šå¤šå±‚SQLåµŒå¥—ï¼Œä¸æ˜“äºç»´æŠ¤ï¼Œä½¿ç”¨äº†mybatisçš„ç›¸å…³æ’ä»¶ä¼šå¯¼è‡´selectè¯­å¥çˆ†çº¢ï¼Œçœ‹èµ·æ¥ä¸èˆ’æœ å¯¹äºå¤§å‹æ•°æ®ä¸Šï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªâ€œN+1æŸ¥è¯¢é—®é¢˜â€ï¼Œé—®é¢˜æè¿°å¦‚ä¸‹ æ‰§è¡Œäº†ä¸€ä¸ªå•ç‹¬çš„SQLè¯­å¥å»åŠ è½½æ¯ä¸€æ¡è®°å½•çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯+1ï¼‰ å¯¹è¿”å›çš„åˆ—è¡¨çš„æ¯ä¸€æ¡è®°å½•ï¼Œéƒ½éœ€è¦æ‰§è¡Œè¿™æ ·çš„ä¸€ä¸ªå•ç‹¬çš„SQLè¯­å¥å»åŠ è½½è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯Nï¼‰ è¿™æ ·ä¼šå¯¼è‡´è¿è¡Œæˆåƒä¸Šä¸‡æ¡sqlè¯­å¥ï¼Œå¤§å¤§å¢åŠ ç³»ç»Ÿå¼€é”€ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ åµŒå¥—ç»“æœæŸ¥è¯¢ï¼ˆæ¨èï¼‰123456789101112131415&lt;resultMap id=&quot;studentMap&quot; type=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot; javaType=&quot;_int&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot; javaType=&quot;string&quot;/&gt; &lt;result property=&quot;tid&quot; column=&quot;tid&quot; javaType=&quot;_int&quot;/&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot; javaType=&quot;_int&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot; javaType=&quot;string&quot;/&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=&quot;getStudentById&quot; resultMap=&quot;studentMap&quot;&gt; select s.id sid, s.name sname, tid, t.name tname from student s inner join teacher t on s.id = #&#123;id&#125; and tid = t.id&lt;/select&gt; ä¼˜ç‚¹ï¼šé…ç½®resultMapååˆ†æ–¹ä¾¿ï¼Œé€»è¾‘ååˆ†æ¸…æ¥šï¼Œæ–¹ä¾¿æŸ¥é”™å’Œç»´æŠ¤ ç¼ºç‚¹ï¼šè¿æ¥æŸ¥è¯¢çš„SQLè¯­å¥å†™èµ·æ¥éš¾åº¦å¤§ï¼Œ collectioncollectionå¯ä»¥è¯´æ˜¯å¤šä¸ªç±»å‹çš„å…³è”ï¼Œæ‰€ä»¥ä¸associationçš„å¤„ç†ååˆ†ç›¸ä¼¼ åµŒå¥—selectæŸ¥è¯¢123456789&lt;resultMap id=&quot;teacherMap&quot; type=&quot;teacher&quot;&gt; &lt;collection property=&quot;students&quot; javaType=&quot;ArrayList&quot; column=&quot;id&quot; ofType=&quot;student&quot; select=&quot;getStudentsByTid&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;getStudentsByTid&quot; resultType=&quot;student&quot;&gt; select * from student where tid = #&#123;id&#125;&lt;/select&gt;&lt;select id=&quot;getTeacherById&quot; resultMap=&quot;teacherMap&quot;&gt; SELECT * FROM teacher WHERE id = #&#123;id&#125;&lt;/select&gt; æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨ofTypeæ¥æŒ‡å®šé›†åˆçš„æ³›å‹ åµŒå¥—ç»“æœæŸ¥è¯¢1234567891011121314&lt;resultMap id=&quot;teacherMap&quot; type=&quot;teacher&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;tid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;collection property=&quot;students&quot; ofType=&quot;student&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;result property=&quot;tid&quot; column=&quot;tid&quot;/&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;getTeacherById&quot; resultMap=&quot;teacherMap&quot;&gt; SELECT t.name tname,t.id tid,s.id sid, s.name sname FROM teacher t inner join student s on t.id=#&#123;id&#125; and s.tid=#&#123;id&#125;&lt;/select&gt; ç¼“å­˜é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åˆ°åº•ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ ç¼“å­˜è¿™ä¸ªè¯ï¼Œç›¸ä¿¡å¤§å®¶å¯¹å…¶ä¸ä¼šé™Œç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬åœ¨bç«™ï¼Œè…¾è®¯è§†é¢‘è¿™ä¸€ç±»è§†é¢‘APPä¸­éƒ½ä¼šç¼“å­˜è¿‡ä¸€äº›è§†é¢‘ã€‚ é‚£æˆ‘ä»¬å¯ä»¥ä»ä¸­å½’çº³å‡ºï¼Œç¼“å­˜å°±æ˜¯ç¨‹åºä»¥æŸç§å½¢å¼å°†æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡çš„ä½¿ç”¨ã€‚ é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ç¼“å­˜å‘¢ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜è¦è¿½æ±‚ä¸‰é«˜ï¼Œå½“ç„¶ä¸ä¼šæ˜¯é«˜è¡€è„‚ï¼Œé«˜è¡€ç³–ï¼Œé«˜è¡€å‹ã€‚æˆ‘ä»¬æ‰€è¯´çš„ä¸‰é«˜æ˜¯é«˜å¹¶å‘ï¼Œé«˜å¯ç”¨ï¼Œé«˜æ€§èƒ½ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œå¯¹äºæ•°æ®åº“çš„æ“ä½œæ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„ã€‚å› æ­¤ï¼Œå¤šæ¬¡è¿æ¥æ•°æ®åº“ä¸åˆ©äºæˆ‘ä»¬è¾¾åˆ°ä¸‰é«˜ï¼Œé‚£ä¹ˆç¼“å­˜å°±æ˜¯ä¼šå¸®åŠ©æˆ‘ä»¬è¾¾åˆ°ä¸‰é«˜çš„ä¸€ç§æŠ€æœ¯ã€‚ æˆ‘ä»¬å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢ï¼Œå¹¶ä¸”å¾ˆå°‘å‘ç”Ÿæ”¹å˜çš„æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œå½“ç”¨æˆ·ä¸‹ä¸€æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼Œå°±ä¸ç”¨å†å»è¿æ¥æ•°æ®åº“æŸ¥è¯¢æ•°æ®äº†ï¼Œå‡å°‘äº†è®¿é—®æ•°æ®åº“çš„æ¬¡æ•°ï¼Œå‡å°‘äº†ç³»ç»Ÿå¼€é”€ï¼Œä»è€Œæé«˜äº†æ€§èƒ½ã€‚ åœ¨mybatisä¸­ï¼Œå­˜åœ¨ç€ä¸¤ç§ç¼“å­˜æœºåˆ¶ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ ä¸€çº§ç¼“å­˜è¯¥çº§åˆ«çš„ç¼“å­˜ï¼Œmybatisæ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¹¶ä¸”æ— æ³•å…³é—­ã€‚ è¯¥ç¼“å­˜æ˜¯sqlSessionçº§åˆ«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œç”¨åŸŸå’Œæˆ‘ä»¬ä¹‹å‰è°ˆè¿‡çš„sqlSessionçš„ä½œç”¨åŸŸä¸€è‡´ å› ä¸ºç”¨æˆ·å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯æŸ¥è¯¢ï¼Œä½†æ˜¯å¦‚æœå‡ºç°äº†DMLè¯­å¥ï¼ˆå³å¢åˆ æ”¹ï¼‰çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¹ç¼“å­˜ä¸­çš„æ•°æ®é€ æˆäº†ä¿®æ”¹ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œå½“å‘ç”Ÿå¢åˆ æ”¹æ“ä½œçš„æ—¶å€™ï¼Œä¸€çº§ç¼“å­˜å³åˆ»å¤±æ•ˆã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ äºŒçº§ç¼“å­˜è¯¥çº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯é»˜è®¤å…³é—­çš„ï¼Œéœ€æ‰‹åŠ¨æ‰“å¼€ åœ¨mapperæ˜ å°„å™¨æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¸€è¡Œä»£ç  1234567&lt;cache/&gt;//æˆ–è€…åŠ ä¸€äº›é…ç½®&lt;cache eviction=&quot;FIFO&quot; flushInterval=&quot;60000&quot; size=&quot;512&quot; readOnly=&quot;true&quot;/&gt; åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­ 123//å¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¼šè¯´ï¼Œè¯¥è®¾ç½®é»˜è®¤å°±æ˜¯trueï¼Œä¸éœ€è¦å†™è¿™ä¸€è¡Œä»£ç //ä½†æ˜¯ï¼Œä¸ºäº†æ˜¾å¼è¯´æ˜æˆ‘ä»¬å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæœ€å¥½è¿˜æ˜¯æ ‡æ³¨å‡ºæ¥&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; æ³¨ï¼šå¦‚æœåœ¨cacheæ ‡ç­¾ä¸­æ²¡æœ‰åŠ å…¥readOnly&#x3D;â€œtrueâ€ï¼Œåˆ™éœ€è¦å°†æ¨¡å‹ç±»å®ç°åºåˆ—åŒ–æ¥å£ï¼ˆSerializableï¼‰ è¯¥ç¼“å­˜æ˜¯namespaceçº§åˆ«çš„ï¼Œä¹Ÿå°±æ˜¯å’Œåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ é™„ä¸Šä¸€å¼ å…³äºmybatisçš„åŸç†å›¾ï¼Œä»…ä¾›å‚è€ƒ","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"http://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"Spring-aop","slug":"Spring-aop","date":"2022-01-27T08:25:19.000Z","updated":"2022-02-24T11:00:34.477Z","comments":true,"path":"javaEE/Spring/2022/01/27/Spring-aop/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Spring/2022/01/27/Spring-aop/","excerpt":"","text":"AOPAOPä¸ºAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„æ€æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚ Springæ¡†æ¶ä¸¤å¤§é‡ç‚¹ï¼ŒAOPå’ŒIOC(Inversion Of Control)æ§åˆ¶åè½¬ AOPæ˜¯OOPçš„å»¶ç»­,æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹, ä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚ åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œè§£è€¦åˆ,ä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½,æé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ ä½œç”¨åŠä¼˜åŠ¿ ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹è¿›è¡ŒåŠŸèƒ½å¢å¼º ä¼˜åŠ¿ï¼šå‡å°‘ä»£ç é‡å¤æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤ åº•å±‚åŸç†å®é™…ä¸Šï¼ŒAOPçš„åº•å±‚æ˜¯é€šè¿‡Springæä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚ åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚ å¸¸ç”¨ä»£ç†æŠ€æœ¯ JDKä»£ç†ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ Adivce.java 12345678public class Advice &#123; public void before()&#123; System.out.println(&quot;å‰ç½®å¢å¼º&quot;); &#125; public void after()&#123; System.out.println(&quot;åç½®å¢å¼º&quot;); &#125;&#125; TargetInterface.java 123public interface TargetInterface &#123; void save();&#125; Target.java 123456public class Target implements TargetInterface &#123; @Override public void save()&#123; System.out.println(&quot;saving running......&quot;); &#125;&#125; ProxyTest.java 1234567891011121314151617181920public class ProxyTest &#123; public static void main(String[] args) &#123; final Target = new Target(); final Adivice = new Advice(); TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance( target.getClass().getClassLoader(), target.getClass().getInterfaces(), new InvocationHandle()&#123; public Object invoke(Object proxy,Method method,Object[] args) throws Throwable &#123; advice.before(); Object invoke = method.invoke(target,args); advice.after(); return invoke; &#125; &#125; ); proxy.save(); &#125;&#125; cglibä»£ç†ï¼šåŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ ProxyTest.java 123456789101112131415161718192021222324public class ProxyTest &#123; public static void main(String[] args) &#123; Target target = new Target(); Enhance enhance = new Enhance(); //åˆ›å»ºå¢å¼ºå…¶ Enhancer enhancer = new Enhancer(); //è®¾ç½®çˆ¶ç±» enhancer.setSuperclass(Target.class); //è®¾ç½®å›è°ƒ enhancer.setCallback(new MethodInterceptor() &#123; @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; enhance.before(); Object invoke = method.invoke(target, args); enhance.after(); return invoke; &#125; &#125;); //åˆ›å»ºä»£ç†å¯¹è±¡ Target proxy = (Target) enhancer.create(); proxy.save(); &#125;&#125; AOPç›¸å…³æœ¯è¯­Springçš„AOPå®ç°åº•å±‚å°±æ˜¯å¯¹ä¸Šé¢çš„åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£…,å°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™,å¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚ Target (ç›®æ ‡å¯¹è±¡) :ä»£ç†çš„ç›®æ ‡å¯¹è±¡ Proxy (ä»£ç†) :ä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºå,å°±äº§ç”Ÿä¸€ ä¸ªç»“æœä»£ç†ç±» Joinpoint (è¿æ¥ç‚¹) :æ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ Pointcut (åˆ‡å…¥ç‚¹) :æ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªçš„å®šä¹‰ Advice (é€šçŸ¥&#x2F;å¢å¼·) :æ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥ Aspect (åˆ‡é¢) :æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥(å¼•ä»‹)çš„ç»“åˆ Weaving (ç»‡å…¥) :æ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥,è€ŒAspecté‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥ å¼€å‘æ˜ç¡®äº‹é¡¹ éœ€è¦ç¼–å†™çš„å†…å®¹ ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç (ç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•) ç¼–å†™åˆ‡é¢ç±»,åˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥(å¢å¼ºåŠŸèƒ½æ–¹æ³•) åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»,å³å°†å“ªäº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ AOPæŠ€æœ¯å®ç°çš„å†…å®¹ Springæ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®,å°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚ åŸºäºXMLçš„AOPå¼€å‘ æ­¥éª¤ å¯¼å…¥AOPåæ ‡ 123456789101112&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.2.2.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.9.8.M1&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; åˆ›å»ºç›®æ ‡ç±»å’Œç›®æ ‡æ¥å£ åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰ å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™Spring åœ¨applicationContext.xmlä¸­é…ç½®ä¸­ç»‡å…¥å…³ç³» æµ‹è¯• åˆ‡ç‚¹è¡¨è¾¾å¼1execution([ä¿®é¥°ç¬¦]è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)) è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥ è¿”å›å€¼ç±»å‹ã€ åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå·*ä»£è¡¨ä»»æ„ åŒ…åä¸ç±»åä¹‹é—´ä¸€ ä¸ªç‚¹.ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»,ä¸¤ä¸ªç‚¹.. è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±» å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºä»»æ„ä¸ªæ•°,ä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨ 1234567891011121314//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aop.Targetç±»çš„è¿”å›voidçš„methodçš„æ— å‚æ•°æ–¹æ³•execution (public void com.itheima.aop.Target.method() )//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aop.Targetç±»çš„è¿”å›voidçš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution (void com.itheima.aop.Target.*(.. ))//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aopåŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution(* com.lizhi.aop.*.*(..))//ä»£è¡¨åˆ‡å£æ˜¯com.lizhi.aopåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸ºä»»æ„execution(* com.lizhi.aop..*.* (..) )//ä»£è¡¨åˆ‡å£æ˜¯é¡¹ç›®ä¸‹çš„æ‰€æœ‰åŒ…çš„æ‰€æœ‰æ–¹æ³•ï¼Œå‚æ•°ä¸ºä»»æ„å‚æ•°execution(* *..*.*(..) ) é€šçŸ¥ç±»å‹ åç§° é€šçŸ¥ç±»å‹ è¯´æ˜ å‰ç½®é€šçŸ¥ aop:before æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹å‰æ‰§è¡Œ åç½®é€šçŸ¥ aop:after-returning æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹åæ‰§è¡Œ ç¯ç»•é€šçŸ¥ aop:around æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹ä¹‹å‰å’Œä¹‹åéƒ½ä¼šæ‰§è¡Œ å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ aop:throwing æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨å‡ºç°åˆ‡ç‚¹å¼‚å¸¸æ—¶æ‰§è¡Œ æœ€ç»ˆé€šçŸ¥ aop:after æ— è®ºå¢å¼ºæ–¹å¼æ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ around 1234567//ProceedingJoinPointæŒ‡çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è¿æ¥ç‚¹==åˆ‡ç‚¹public Object around(ProceedingJoinPoint pjp) throws Throwable &#123; System.out.println(&quot;ç¯ç»•å‰å¢å¼ºã€‚ã€‚ã€‚ã€‚ã€‚&quot;); Object obj = pjp.proceed();//åˆ‡ç‚¹æ–¹æ³• System.out.println(&quot;ç¯ç»•åå¢å¼ºã€‚ã€‚ã€‚ã€‚ã€‚&quot;); return obj;&#125; åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å– 123456&lt;apo:config&gt; &lt;aop:aspect&gt; &lt;apo:pointcut id=&quot;myPointcut&quot; expression=&quot;excution( * com.lizhi.apo.*.*(..))&quot;&gt;&lt;/apo:pointcut&gt; &lt;apo:before method=&quot;before&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/apo:before&gt; &lt;/aop:aspect&gt;&lt;/apo:config&gt; åŸºäºæ³¨è§£çš„AOPå¼€å‘ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»(å†…éƒ¨æœ‰åˆ‡ç‚¹) åˆ›å»ºåˆ‡é¢ç±»(å†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•) å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³» åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’ŒAOPçš„è‡ªåŠ¨ä»£ç† æµ‹è¯•","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Spring","slug":"javaEE/Spring","permalink":"http://li-zhi.net.cn/categories/javaEE/Spring/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"http://li-zhi.net.cn/tags/Spring/"}]},{"title":"é¢å‘æ¥å£ç¼–ç¨‹","slug":"é¢å‘æ¥å£ç¼–ç¨‹","date":"2022-01-27T08:21:11.000Z","updated":"2022-01-27T08:22:15.896Z","comments":true,"path":"çç¢çš„çŸ¥è¯†/2022/01/27/é¢å‘æ¥å£ç¼–ç¨‹/","link":"","permalink":"http://li-zhi.net.cn/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/2022/01/27/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B/","excerpt":"","text":"é¢å‘æ¥å£ç¼–ç¨‹æ˜¯ä»€ä¹ˆå¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹ æ ¹æœ¬åŸå› :è§£è€¦ï¼Œå¯æ‹“å±•ï¼Œæé«˜å¤ç”¨ï¼Œåˆ†å±‚å¼€å‘ä¸­ï¼Œä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç°ï¼Œå¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡†ï¼Œä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ï¼Œè§„èŒƒæ€§æ›´å¥½ åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†: è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚ å…³äºæ¥å£çš„ç†è§£æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰(è§„èŒƒï¼Œçº¦æŸ)ä¸å®ç°(åå®åˆ†ç¦»çš„åŸåˆ™)çš„åˆ†ç¦»ã€‚ æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚æ¥å£åº”æœ‰ä¸¤ç±»: ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class) ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢(interface) ä¸€ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚ ä¸‰ä¸ªé¢å‘çš„åŒºåˆ«é¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜çš„æ—¶å€™ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§å’Œæ–¹æ³• é¢å‘è¿‡ç¨‹ç¼–ç¨‹æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜çš„æ—¶å€™ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯å±‚é¢çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„","categories":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"MyBatisçš„xmlé…ç½®","slug":"MyBatisé…ç½®","date":"2022-01-26T15:44:33.000Z","updated":"2022-01-27T07:40:23.106Z","comments":true,"path":"javaEE/MyBatis/2022/01/26/MyBatisé…ç½®/","link":"","permalink":"http://li-zhi.net.cn/javaEE/MyBatis/2022/01/26/MyBatis%E9%85%8D%E7%BD%AE/","excerpt":"","text":"é…ç½®Configurationåœ¨MyBatisä¸­ï¼Œé…ç½®æ–‡ä»¶çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ Configuration properties settings typeAliases typeHandlers objectFactory plugins environments environment dataSource transactionManager databaseIdProvider mappers å±æ€§properties123&lt;properties resource=&quot;db.properties&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;&lt;/properties&gt; resourceå±æ€§å¯ä»¥å¯¼å…¥åœ¨å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§åˆ°propertiesæ ‡ç­¾ä¸­ propertyæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ é…ç½®å¥½çš„å±æ€§å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨${}æ¥æ›¿æ¢éœ€è¦åŠ¨æ€é…ç½®çš„å±æ€§å€¼ 123456&lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;&lt;/dataSource&gt; æ¯”å¦‚ä¸Šæ–¹çš„driverçš„å€¼ä¼šç”±db.propertiesæ–‡ä»¶ä¸­å¯¹åº”çš„å€¼æ¥æ›¿æ¢ å¦‚æœåœ¨å¤šä¸ªåœ°æ–¹è¿›è¡Œäº†é…ç½®Javaä»£ç ï¼Œå¤–éƒ¨æ–‡ä»¶ï¼Œpropertiesæ ‡ç­¾ï¼Œåˆ™æŒ‰ç…§ä»¥ä¸‹é¡ºåºåŠ è½½ å…ˆåŠ è½½propertiesæ ‡ç­¾ä¸­çš„å±æ€§ å†åŠ è½½å¤–éƒ¨æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§ï¼Œå¦‚æœæœ‰é‡å¤çš„å±æ€§ï¼Œåˆ™è¦†ç›–æ—§çš„å±æ€§ æœ€ååŠ è½½Javaä»£ç ä¸­çš„å±æ€§ï¼Œå¦‚æœæœ‰é‡å¤çš„å±æ€§ï¼Œè¦†ç›–æ—§çš„å±æ€§ å› æ­¤ï¼Œé€šè¿‡javaæ–¹æ³•ä¼ å…¥çš„å±æ€§å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œå¤–éƒ¨æ–‡ä»¶ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼Œpropertiesæ ‡ç­¾ä¸­çš„å±æ€§ä¼˜å…ˆçº§æœ€ä¸ºä½ è®¾ç½®settingsä»¥ä¸‹ä¸ºé‡è¦çš„å‡ ä¸ªé…ç½®ï¼Œéœ€è¦æŒæ¡ è®¾ç½®å æè¿° æœ‰æ•ˆå€¼ é»˜è®¤å€¼ cacheEnabled å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚ true | false true lazyLoadingEnabled å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® fetchType å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚ true | false false useGeneratedKeys å…è®¸ JDBC æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œå°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›æ•°æ®åº“é©±åŠ¨ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½†ä»å¯æ­£å¸¸å·¥ä½œï¼ˆå¦‚ Derbyï¼‰ã€‚ true | false False mapUnderscoreToCamelCase æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚ true | false False logImpl æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚ SLF4J | LOG4J(deprecated since 3.5.9) | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING æœªè®¾ç½® ç±»å‹åˆ«åtypeAliasesåœ¨æ˜ å°„å™¨XMLæ–‡ä»¶ä¸­ï¼ŒresultTypeå±æ€§åœ¨é…ç½®äº†ç±»å‹åˆ«ååï¼Œå¯ä»¥ä¸éœ€è¦å†™å…¨é™å®šåï¼Œå¯ä»¥å†™åœ¨è¿™é‡Œèµ·çš„åˆ«å åœ¨æ­¤åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½è¢«é»˜è®¤èµ·åˆ«åä¸ºç±»åå¼€å¤´å°å†™ï¼Œè¯¥é»˜è®¤å€¼è¢«æ³¨è§£@Alias()è¦†ç›– 123&lt;typeAliases&gt; &lt;package name=&quot;com.lizhi.pojo&quot;/&gt;&lt;/typeAliases&gt; å¯ä»¥å•ç‹¬ä¸ºä¸€ä¸ªç±»èµ·åˆ«åï¼Œ 123&lt;typeAliases&gt; &lt;typeAlias type=&quot;com.lizhi.pojo.Teacher&quot; alias=&quot;teacher&quot;/&gt;&lt;/typeAliases&gt; ä¸‹é¢ä¸ºä¸€äº›å¸¸è§çš„javaç±»å‹å†…å»ºçš„ç±»å‹åˆ«å åˆ«å æ˜ å°„çš„ç±»å‹ _byte byte _long long _short short _int int _integer int _double double _float float _boolean boolean string String byte Byte long Long short Short int Integer integer Integer double Double float Float boolean Boolean date Date map Map ç¯å¢ƒé…ç½®Environmentsmybatiså¯ä»¥é…ç½®å¤šå¥—ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åˆ©äºå°†SQLæ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­ã€‚å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿæˆç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ã€‚ 1234567891011&lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt;&lt;/environments&gt; æ³¨æ„ä¸€äº›å…³é”®ç‚¹ environmentçš„idå±æ€§ï¼Œè¯¥å±æ€§æ˜¯å”¯ä¸€æ€§æ ‡è¯†ç¯å¢ƒçš„å€¼ åœ¨environmentsçš„defaultå±æ€§ä¸­é€šè¿‡idæŒ‡å®šç¯å¢ƒé…ç½® äº‹åŠ¡ç®¡ç†å™¨transactionManagertypeæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨ mybatisä¸­æœ‰ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯type &#x3D; â€œJDBC|MANAGEDâ€ï¼‰ JDBC-è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº†JDBCçš„æäº¤å’Œå›æ»šæœºåˆ¶ï¼Œä¾èµ–äºæ•°æ®æºçš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ç®¡ç†ä½œç”¨åŸŸ MANAGED-è¿™ä¸ªé…ç½®å‡ ä¹ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸€èˆ¬ä¸é€‰ç”¨ å¦‚æœä½¿ç”¨mybatis+Spring åˆ™æ²¡æœ‰å¿…è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå› ä¸ºSpringæ¨¡å—ä¼šä½¿ç”¨è‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨æ¥è¦†ç›–æ­¤é…ç½® æ•°æ®æºdataSourcetypeæŒ‡å®šæ•°æ®æºç±»å‹ dataSourceå…ƒç´ ä½¿ç”¨æ ‡å‡†çš„JDBCæ•°æ®æºæ¥å£æ¥é…ç½®JDBCè¿æ¥å¯¹è±¡çš„èµ„æº æœ‰ä¸‰ç§å†…ç½®çš„æ•°æ®æºæ ¼å¼ UNPOOLEDè¿™ä¸ªæ•°æ®æºçš„å®ç°æ¯æ¬¡è¿æ¥ä¼šæ‰“å¼€å’Œå…³é—­è¿æ¥ä¼šæœ‰ç‚¹æ…¢ï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å‹åº”ç”¨å·²ç»è¶³å¤Ÿäº†ï¼Œ æ­¤ç±»å‹çš„æ•°æ®æºåªéœ€è¦é…ç½®ä»¥ä¸‹å‡ ç§å±æ€§ driver â€“ è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåï¼ˆå¹¶ä¸æ˜¯ JDBC é©±åŠ¨ä¸­å¯èƒ½åŒ…å«çš„æ•°æ®æºç±»ï¼‰ã€‚ url â€“ è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚ username â€“ ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€‚ password â€“ ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚ defaultTransactionIsolationLevel â€“ é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ defaultNetworkTimeout â€“ ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ POOLEDè¿™ä¸ªæ•°æ®æºçš„å®ç°åˆ©ç”¨äº†æ± çš„æ¦‚å¿µå°†JDBCçš„è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹çš„æ—¶å€™æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ï¼Œå¯ä»¥ä½¿webåº”ç”¨å“åº”é€Ÿåº¦å˜å¿«ï¼Œè¯¥ç±»å‹çš„æ•°æ®æºé™¤äº†ä»¥ä¸ŠUNPOOLEDçš„å±æ€§å¤–è¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨é…ç½® poolMaximumActiveConnections â€“ åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10 poolMaximumIdleConnections â€“ ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚ poolTimeToWait â€“ è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚ JNDI(ç”¨å¾—å°‘ï¼Œç•¥)","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"http://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"MyBatiså…¥é—¨","slug":"MyBatiså…¥é—¨","date":"2022-01-26T15:43:33.000Z","updated":"2022-01-27T07:40:32.707Z","comments":true,"path":"javaEE/MyBatis/2022/01/26/MyBatiså…¥é—¨/","link":"","permalink":"http://li-zhi.net.cn/javaEE/MyBatis/2022/01/26/MyBatis%E5%85%A5%E9%97%A8/","excerpt":"","text":"MyBatiså›é¡¾JDBC æ³¨å†Œé©±åŠ¨ è·å–è¿æ¥ è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡ æ‰§è¡ŒSQLï¼Œæ“ä½œæ•°æ®åº“ å¤„ç†ç»“æœé›† å…³é—­è¿æ¥ Connectionå¯ä»¥è·å¾—PreparedStatementæˆ–è€…Statement ResultSetæ˜¯SQLè¯­å¥æ‰§è¡Œåè¿”å›çš„å¯¹è±¡ PreparedStatementå’ŒStatementæ˜¯ç”¨æ¥æ‰§è¡ŒSQLè¯­å¥çš„å¯¹è±¡ ä¸¤è€…çš„åŒºåˆ«ï¼š PreparedStatementå¯¹SQLè¯­å¥åšäº†é¢„ç¼–è¯‘ï¼Œå¾ˆå¥½çš„è§£å†³äº†SQLæ³¨å…¥çš„é—®é¢˜ã€‚ Statementæ˜¯å•çº¯çš„å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œä¼šäº§ç”ŸSQLæ³¨å…¥çš„é—®é¢˜ ç®€ä»‹Defï¼š MyBatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚çš„æ¡†æ¶ï¼Œæ”¯æŒå®šåˆ¶åŒ–SQLè¯­å¥ï¼Œå­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ï¼Œå¤§å¤§ç®€åŒ–äº†JDBCçš„ç¬¨é‡çš„ä»£ç ã€‚ MyBatiså¯ä»¥ä½¿ç”¨XMLé…ç½®æ–‡ä»¶æˆ–è€…æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œpojoï¼ˆPlain Object Java Objectï¼‰ æŒä¹…å±‚æ˜¯ä»€ä¹ˆï¼ŸæŒä¹…å±‚æ˜¯ä¸€ä¸ªå°†åº”ç”¨ä¸­äº§ç”Ÿçš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“çš„è¿‡ç¨‹ æ€è·¯ï¼šå¯¼å…¥ä¾èµ–â€”ã€‹ç¼–å†™ä»£ç â€”ã€‹æµ‹è¯• 12345&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.7&lt;/version&gt;&lt;/dependency&gt; å…¥é—¨MyBatisä¸­æœ€é‡è¦çš„ä¸‰ä¸ªç±» SqlSessionFactoryBuilder SqlSessionFactory SqlSession æ¯ä¸ªåŸºäºMyBatisçš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ªSqlSessionFactoryå®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚è¿™ä¸ªå®ä¾‹éœ€è¦é€šè¿‡SqlSessionFactoryBuilderåŠ è½½é…ç½®æ–‡ä»¶è·å¾—ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è·å¾—ï¼Œç¬¬ä¸€ç§æ˜¯ä»¥XMLæ–‡ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œç¬¬äºŒç§æ˜¯åœ¨javaä»£ç å¯¹è±¡çš„å½¢å¼å­˜åœ¨ æ„å»ºSqlSessionFactory mybatis-config.xmlé…ç½®æ„å»ºSqlSessionFactoryæ‰€éœ€è¦çš„å‚æ•° 1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;userName&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt;&lt;/configuration&gt; åœ¨javaä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡SqlSessionFactoryBuilderæ„å»ºSqlSessionFactoryå®ä¾‹ 123String resource=&quot;mybatis-config.xml&quot;;InputStream inputStream = Resources.getResourceAsStream(resource);SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); é€šè¿‡javaä»£ç é…ç½®ä¸æ¨èï¼Œç•¥ æ„å»ºSqlSessionSqlSessionï¼Œé€šè¿‡æ­¤å¯¹è±¡è·å¾—æ¥å£çš„æ˜ å°„å™¨å®ä¾‹ï¼Œè¯¥æ˜ å°„å¯¹è±¡å¯¹æ ‡JDBCä¸­æ¥å£çš„å®ç°ç±» 123456//å¼€å¯ä¸€ä¸ªsqlSessionå¯¹è±¡ï¼Œé»˜è®¤å…³é—­è‡ªåŠ¨æäº¤äº‹åŠ¡SqlSession sqlSession = sqlSessionFactory.openSession();//å¼€å¯è‡ªåŠ¨æäº¤äº‹åŠ¡SqlSession sqlSession = sqlSessionFactory.openSession(true);TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class); æ˜ å°„SQLè¯­å¥ é€šè¿‡XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼å’Œæ¥å£åšç»‘å®šï¼Œå®ç°æ¥å£æ–¹æ³• 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lizhi.mapper.TeacherMapper&quot;&gt; &lt;select id=&quot;listTeachers&quot; resultType=&quot;com.lizhi.pojo.Teacher&quot;&gt; SELECT * FROM teacher &lt;/select&gt;&lt;/mapper&gt; mapperæ ‡ç­¾çš„namespaceå±æ€§æŒ‡å‘è¢«ç»‘å®šçš„æ¥å£ æ ‡ç­¾å†…ä¹¦å†™SQLè¯­å¥ï¼Œidä¸ºæ¥å£ä¸­çš„æ–¹æ³•å selectæ ‡ç­¾å®ç°selectæ–¹æ³• insertæ ‡ç­¾å®ç°insertæ–¹æ³• updateæ ‡ç­¾å®ç°updateæ–¹æ³• deleteæ ‡ç­¾å®ç°deleteæ–¹æ³• é€šè¿‡æ³¨è§£çš„æ–¹å¼å®ç°SQLæ˜ å°„ 12@Select(&quot;SELECT * FROM teacher WHERE id = #&#123;id&#125;&quot;)Teacher getTeacherById(int id); é€‰æ‹©ä½•ç§æ–¹å¼å®ç°SQLæ˜ å°„ï¼Œå–å†³äºè‡ªèº«ã€‚ ä½†æ˜¯å¦‚æœSQLå¤æ‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¸è¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œä½¿ç”¨XMLçš„æ–¹å¼å»åšSQLæ˜ å°„ ä¸‰ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸï¼ˆScopeï¼‰ SqlSessionFactoryBuilder è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡è¯»å–ä¸€äº›é…ç½®è·å–SqlSessionFactoryå®ä¾‹å¯¹è±¡ã€‚ æˆ‘ä»¬æ²¡æœ‰ç†ç”±ä¸€ç›´ä¿ç•™å®ƒï¼Œå› ä¸ºSqlSessionFactoryå°†è¢«ä¿å­˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä»¥ä¿è¯æ‰€æœ‰çš„XMLè§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™åšå…¶ä»–äº‹æƒ…ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸŸåº”è¯¥æ˜¯å±€éƒ¨å˜é‡ SqlSession è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡getMapperæ–¹æ³•è·å–æ˜ å°„å™¨å®ä¾‹ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„SqlSessionå¯¹è±¡ï¼Œå› ä¸ºè¯¥å¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤å®ƒæ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³ä½œç”¨åŸŸæ˜¯å±€éƒ¨å˜é‡ã€‚ åœ¨webæ¡†æ¶ä¸­ï¼Œå¯ä»¥å°†å…¶æ”¾åˆ°requestçš„ä½œç”¨åŸŸä¸­ï¼Œè¿”å›ä¸€ä¸ªå“åº”å‰ï¼Œå…³é—­SqlSessionå¯¹è±¡ï¼Œè¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ SqlSessionFactory è¯¥å¯¹è±¡å°±ä¸€ä¸ªä½œç”¨ï¼Œé€šè¿‡openSessionæ–¹æ³•è·å–SqlSessionå¯¹è±¡ã€‚ å› ä¸ºSqlSessionå¯¹è±¡æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“éƒ½éœ€è¦ä¸€ä¸ªæ–°çš„SqlSessionå¯¹è±¡ï¼Œæ—¢ç„¶SqlSessionFactoryBuilderçš„ä½œç”¨åŸŸä¸ºå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡åˆ›å»ºå‡ºæ¥SqlSessionFactoryå¯¹è±¡çš„æ—¶å€™ï¼Œå°±å¯ä»¥å°†å…¶ä¿å­˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä¸‹æ¬¡å°±ä¸éœ€è¦å†åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡äº†ï¼Œæ‰€ä»¥SqlSessionFactoryçš„æœ€ä½³ä½œç”¨åŸŸæ˜¯å…¨å±€å”¯ä¸€å˜é‡ã€‚","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"http://li-zhi.net.cn/categories/javaEE/MyBatis/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://li-zhi.net.cn/tags/MyBatis/"}]},{"title":"Maven","slug":"Maven","date":"2022-01-26T15:36:37.000Z","updated":"2022-01-27T07:42:59.603Z","comments":true,"path":"javaEE/Maven/2022/01/26/Maven/","link":"","permalink":"http://li-zhi.net.cn/javaEE/Maven/2022/01/26/Maven/","excerpt":"","text":"MavenMavenç®€ä»‹å­¦mavené¦–å…ˆè®°ä½ä¸€å¥è¯ï¼Œçº¦å®šå¤§äºé…ç½® Mavenæ˜¯ä»€ä¹ˆ æœ¬è´¨æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå°†é¡¹ç›®å¼€å‘å’Œç®¡ç†è¿‡ç¨‹æŠ½è±¡æˆä¸€ä¸ªé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆpomï¼‰ POM(Project Object Model)ï¼šé¡¹ç›®å¯¹è±¡æ¨¡å‹ pom.xmlâ€”&gt;é¡¹ç›®ç®¡ç†æ¨¡å‹â€”â€”&gt;ä¾èµ–ç®¡ç†ï¼ˆDependencyï¼‰â€”&gt;æœ¬åœ°ä»“åº“â€”&gt;ç§æœä»“åº“â€”&gt;ä¸­å¤® Mavenæœ‰ä»€ä¹ˆç”¨ é¡¹ç›®æ„å»ºï¼šæä¾›æ ‡å‡†åŒ–ï¼Œè·¨å¹³å°çš„è‡ªåŠ¨åŒ–é¡¹ç›®æ„å»ºæ–¹å¼ ä¾èµ–ç®¡ç†ï¼šæ–¹ä¾¿å¿«æ·çš„ç®¡ç†é¡¹ç›®ä¾èµ–çš„èµ„æºåŒ…ï¼Œé¿å…èµ„æºé—´çš„ç‰ˆæœ¬å†²çªé—®é¢˜ ç»Ÿä¸€å¼€å‘ç»“æ„ï¼šæä¾›æ ‡å‡†çš„ï¼Œç»Ÿä¸€çš„é¡¹ç›®ç»“æ„ ä¸‹è½½ä¸å®‰è£… å®˜ç½‘ï¼šhttp://maven.apache.org/ ä¸‹è½½åœ°å€ï¼šhttp://maven.apache.org/download.cgi Mavenç¯å¢ƒé…ç½® ä¾èµ–javaï¼Œæ‰€ä»¥éœ€è¦JAVA_HOME è®¾ç½®Mavenè‡ªèº«çš„è¿è¡Œç¯å¢ƒï¼Œéœ€è¦é…ç½®MAVEN_HOME MavenåŸºç¡€æ¦‚è¦ä»“åº“ä»“åº“ï¼šç”¨äºå­˜å‚¨èµ„æºï¼ŒåŒ…å«å„ç§jaråŒ… ä»“åº“åˆ†ç±» æœ¬åœ°ä»“åº“ï¼šè‡ªå·±ç”µè„‘ä¸Šçš„å­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œè¿æ¥è¿œç¨‹ä»“åº“è·å–èµ„æº è¿œç¨‹ä»“åº“ï¼šéæœ¬æœºä¸Šçš„ä»“åº“ï¼Œä¸ºæœ¬åœ°ä»“åº“æä¾›èµ„æº ä¸­å¤®ä»“åº“ï¼šç”±Mavenå›¢é˜Ÿç»´æŠ¤ï¼Œå­˜å‚¨æ‰€æœ‰å¼€æºèµ„æºçš„ä»“åº“ ç§æœï¼šéƒ¨é—¨&#x2F;å…¬å¸èŒƒå›´å†…å­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œä»ä¸­å¤®ä»“åº“ä¸­è·å–èµ„æº ç§æœçš„ä½œç”¨ ä¿æŠ¤å…·æœ‰ç‰ˆæƒçš„èµ„æºï¼ŒåŒ…å«è´­ä¹°æˆ–è€…è‡ªä¸»ç ”å‘çš„jar ä¸­å¤®ä»“åº“ä¸­çš„jaréƒ½æ˜¯å¼€æºçš„ï¼Œä¸èƒ½å­˜å‚¨å…·æœ‰ç‰ˆæƒçš„èµ„æº ä¸€å®šèŒƒå›´å†…å…±äº«èµ„æºï¼Œå°±å¯¹å†…å¼€æ”¾ï¼Œä¸å¯¹å¤–å¼€æ”¾ åæ ‡GAV åæ ‡ï¼šMavenä¸­çš„åæ ‡ä¸»è¦ç”¨äºæè¿°ä»“åº“ä¸­èµ„æºçš„ä½ç½®ï¼Œè®°ä½è¿™ä¸ªç½‘ç«™ https://mvnrepository.com/ Mavenä¸»è¦ç»„æˆéƒ¨åˆ† groupIdï¼šå®šä¹‰å½“å‰é¡¹ç›®éš¶å±çš„ç»„ç»‡åç§°ï¼ˆé€šå¸¸æ˜¯åŸŸååå†™ org.mybatisï¼‰ artifactIdï¼šå®šä¹‰è¯¥é¡¹ç›®çš„é¡¹ç›®åç§°ï¼ˆé€šå¸¸æ˜¯æ¨¡å—åç§°ï¼‰ versionï¼šå®šä¹‰å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å· packagingï¼šå®šä¹‰è¯¥é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ ä½œç”¨ï¼šä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼Œå”¯ä¸€æ€§å®šä½èµ„æºä½ç½®ï¼Œé€šè¿‡è¯¥æ ‡è¯†å¯ä»¥å°†èµ„æºçš„è¯†åˆ«ä¸ä¸‹è½½å·¥ä½œäº¤ç”±æœºå™¨å®Œæˆ æœ¬åœ°ä»“åº“é…ç½®mavené»˜è®¤çš„æœ¬åœ°ä»“åº“ç›®å½•åœ¨cç›˜ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹çš„.m2æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœ‰éœ€è¦ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªè¡Œé…ç½®ã€‚ åœ¨è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘éœ€è¦å°†D:\\APP\\Maven\\mvn-repoè¯¥ç›®å½•ä½œä¸ºæˆ‘çš„mavenæœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚ åˆ›å»ºmvn-repoæ–‡ä»¶å¤¹ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­åˆ›å»ºrepositoryç›®å½• åœ¨mavenå®‰è£…æ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°settings.xmlæ‰¾åˆ°ä»¥ä¸‹é…ç½®æ‰€åœ¨ï¼Œç…§ç€ä»¥ä¸‹é…ç½®ä¿®æ”¹ 12345678910//è¿™é‡Œæ”¹æˆè‡ªå·±éœ€è¦é…ç½®çš„ä»“åº“ç›®å½•&lt;localRepository&gt;D:\\APP\\Maven\\mvn-repo\\repository&lt;/localRepository&gt;//é˜¿é‡Œäº‘çš„é•œåƒæœåŠ¡å™¨ï¼Œä¼šåŠ å¿«jaråŒ…çš„ä¸‹è½½é€Ÿåº¦ï¼Œç›´æ¥å¤åˆ¶å³å¯&lt;mirrors&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirrors&gt; å°†æ­¤ä»½é…ç½®æ–‡ä»¶ä¿å­˜å¹¶å¤åˆ¶åˆ°mvn-repoæ–‡ä»¶å¤¹ä¸­ å…¨å±€settingï¼ˆmavençš„configä¸­çš„settingæ–‡ä»¶ï¼‰å’Œç”¨æˆ·settingï¼ˆå°½é‡å’Œå…¨å±€settingä¸€æ ·ï¼‰åŒºåˆ« å…¨å±€settingå®šä¹‰äº†å½“å‰è®¡ç®—æœºä¸­Mavençš„å…¬å…±é…ç½® ç”¨æˆ·settingå®šä¹‰äº†å½“å‰ç”¨æˆ·çš„é…ç½® åˆ›å»ºmavené¡¹ç›®æ‰‹å·¥æ™®é€šmavenå·¥ç¨‹ 123456mvn archetype:generate -DgroupId = com.lizhi -DartifactId = project -DarchetypeArtifactId = maven-archetype-quickstart -Dversion = 0.0.1-snapshot -DinteractiveMode = false webå·¥ç¨‹ 123456mvn archetype:generate -DgroupId = com.lizhi -DartifactId = project -DarchetypeArtifactId = maven-archetype-webapp -Dversion = 0.0.1-snapshot -DinteractiveMode = false ä¾èµ–ç®¡ç†ä¾èµ–é…ç½®123456789101112&lt;!--è®¾ç½®å½“å‰é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–--&gt;&lt;dependencies&gt; &lt;!--è®¾ç½®å…·ä½“çš„ä¾èµ–--&gt; &lt;dependency&gt; &lt;!--ä¾èµ–æ‰€å±çš„ç¾¤ç»„id--&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;!--ä¾èµ–æ‰€å±çš„é¡¹ç›®id--&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;!--ä¾èµ–çš„ç‰ˆæœ¬å·--&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä¾èµ–ä¼ é€’ä¾èµ–å…·æœ‰ä¼ é€’æ€§ ç›´æ¥ä¼ é€’ï¼šåœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œé€šè¿‡ä¾èµ–é…ç½®å»ºç«‹çš„ä¾èµ–å…³ç³» é—´æ¥å…³ç³»ï¼šè¢«ä¾èµ–çš„èµ„æºå¦‚æœä¾èµ–å…¶ä»–çš„èµ„æºï¼Œå½“å‰é¡¹ç›®é—´æ¥ä¾èµ–å…¶ä»–é¡¹ç›® ä¾èµ–å†²çª è·¯å¾„ä¼˜å…ˆï¼šå½“ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„èµ„æºæ—¶ï¼Œå±‚æ¬¡è¶Šæ·±ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå±‚æ¬¡è¶Šæµ…ï¼Œä¼˜å…ˆçº§è¶Šé«˜ å£°æ˜ä¼˜å…ˆï¼šå½“èµ„æºåœ¨ç›¸åŒå±‚æ¬¡è¢«ä¾èµ–æ—¶ï¼Œé…ç½®é¡ºåºé å‰çš„è¦†ç›–é¡ºåºé åçš„ ç‰¹æ®Šä¼˜å…ˆï¼šå½“åŒçº§é…ç½®äº†ç›¸åŒèµ„æºçš„ä¸åŒç‰ˆæœ¬ï¼Œåé…ç½®çš„è¦†ç›–å…ˆé…ç½®çš„ å¯é€‰ä¾èµ–ï¼ˆä¸»åŠ¨è¡¨ç¤ºæ–­å¼€ï¼‰123456789&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;!--ä¸é€æ˜--&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt; æ’é™¤ä¾èµ–ï¼ˆä¸»åŠ¨æ–­å¼€ï¼‰ æ’é™¤ä¾èµ–æŒ‡çš„æ˜¯ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æºï¼Œè¢«æ’é™¤çš„èµ„æºæ— éœ€æŒ‡å®šç‰ˆæœ¬â€”ä¸éœ€è¦ 12345678910111213&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.hamcrest&lt;/groupId&gt; &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä¾èµ–èŒƒå›´12345678&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies ä¾èµ–çš„jaråŒ…é»˜è®¤æƒ…å†µä¸‹å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡scopeæ ‡ç­¾è®¾å®šèµ·ä½œç”¨èŒƒå›´ ä½œç”¨èŒƒå›´ ä¸»ç¨‹åºèŒƒå›´æœ‰æ•ˆï¼ˆmainæ–‡ä»¶èŒƒå›´å†…ï¼‰ æµ‹è¯•èŒƒå›´æœ‰æ•ˆï¼ˆtestæ–‡ä»¶å¤¹èŒƒå›´ï¼‰ æ˜¯å¦å‚ä¸æ‰“åŒ…ï¼ˆpackageæŒ‡ä»¤èŒƒå›´å†…ï¼‰ scope ä¸»ä»£ç  æµ‹è¯•ä»£ç  æ‰“åŒ… ç¤ºä¾‹ compile Y Y Y log4j test Y junit provided Y Y servlet-api runtime Y jdbc ä¾èµ–èŒƒå›´çš„ä¼ é€’æ€§ å¸¦æœ‰ä¾èµ–èŒƒå›´çš„èµ„æºåœ¨è¿›è¡Œä¼ é€’çš„æ—¶å€™ï¼Œä½œç”¨èŒƒå›´å°†ä¼šå—åˆ°å½±å“ è¡Œæ˜¯ç›´æ¥ä¾èµ–ï¼Œåˆ—æ˜¯é—´æ¥ä¾èµ– compile test provided runtime compile compile test provided runtime test provided runtime runtime test provided runtime ç”Ÿå‘½å‘¨æœŸä»¥åŠæ’ä»¶ç”Ÿå‘½å‘¨æœŸ Mavenå¯¹é¡¹ç›®æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ä¸º3å¥— cleanï¼šæ¸…ç†å·¥ä½œ defaultï¼šæ ¸å¿ƒå·¥ä½œï¼Œä¾‹å¦‚ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰ siteï¼šäº§ç”ŸæŠ¥å‘Šï¼Œå‘å¸ƒç«™ç‚¹ç­‰ cleanç”Ÿå‘½å‘¨æœŸ pre-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹å‰ç«‹å³å®Œæˆçš„å·¥ä½œ clean ç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„ä»¶ç”Ÿæˆçš„æ–‡ä»¶ post-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹åç«‹å³å®Œæˆçš„å·¥ä½œ defaultç”Ÿå‘½å‘¨æœŸ siteç”Ÿå‘½å‘¨æœŸ pre-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ site ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ post-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡å·¥ä½œ site-deploy å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šæœåŠ¡å™¨ä¸Šé¢å» æ’ä»¶ æ’ä»¶ä¸ç”Ÿå‘½å‘¨æœŸå†…çš„é˜¶æ®µç»‘å®šï¼Œåœ¨æ‰§è¡Œåˆ°å¯¹åº”ç”Ÿå‘½å‘¨æœŸæ—¶æ‰§è¡Œå¯¹åº”çš„æ’ä»¶åŠŸèƒ½ é»˜è®¤mavenåœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸Šç»‘å®šæœ‰é¢„è®¾çš„åŠŸèƒ½ é€šè¿‡æ’ä»¶å¯ä»¥è‡ªå®šä¹‰å…¶ä»–åŠŸèƒ½","categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"Maven","slug":"javaEE/Maven","permalink":"http://li-zhi.net.cn/categories/javaEE/Maven/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"http://li-zhi.net.cn/tags/Maven/"}]},{"title":"first","slug":"first","date":"2022-01-16T10:39:26.000Z","updated":"2022-01-16T10:39:58.900Z","comments":true,"path":"uncategorized/2022/01/16/first/","link":"","permalink":"http://li-zhi.net.cn/uncategorized/2022/01/16/first/","excerpt":"","text":"æµ‹è¯•åšå®¢çš„å‘å¸ƒ","categories":[],"tags":[]}],"categories":[{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/categories/javaEE/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue2","slug":"å‰ç«¯/Vue2","permalink":"http://li-zhi.net.cn/categories/%E5%89%8D%E7%AB%AF/Vue2/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"JVM","slug":"javaEE/JVM","permalink":"http://li-zhi.net.cn/categories/javaEE/JVM/"},{"name":"JavaScript","slug":"javaEE/JavaScript","permalink":"http://li-zhi.net.cn/categories/javaEE/JavaScript/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/categories/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"Redis","slug":"javaEE/Redis","permalink":"http://li-zhi.net.cn/categories/javaEE/Redis/"},{"name":"JUC","slug":"javaEE/JUC","permalink":"http://li-zhi.net.cn/categories/javaEE/JUC/"},{"name":"SpringBoot","slug":"javaEE/SpringBoot","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringBoot/"},{"name":"å¤šçº¿ç¨‹","slug":"javaEE/å¤šçº¿ç¨‹","permalink":"http://li-zhi.net.cn/categories/javaEE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"name":"SpringMVC","slug":"javaEE/SpringMVC","permalink":"http://li-zhi.net.cn/categories/javaEE/SpringMVC/"},{"name":"Linux","slug":"javaEE/Linux","permalink":"http://li-zhi.net.cn/categories/javaEE/Linux/"},{"name":"MyBatis","slug":"javaEE/MyBatis","permalink":"http://li-zhi.net.cn/categories/javaEE/MyBatis/"},{"name":"Spring","slug":"javaEE/Spring","permalink":"http://li-zhi.net.cn/categories/javaEE/Spring/"},{"name":"Maven","slug":"javaEE/Maven","permalink":"http://li-zhi.net.cn/categories/javaEE/Maven/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://li-zhi.net.cn/tags/Vue/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://li-zhi.net.cn/tags/%E7%AE%97%E6%B3%95/"},{"name":"Linux","slug":"Linux","permalink":"http://li-zhi.net.cn/tags/Linux/"},{"name":"javaEE","slug":"javaEE","permalink":"http://li-zhi.net.cn/tags/javaEE/"},{"name":"JVM","slug":"JVM","permalink":"http://li-zhi.net.cn/tags/JVM/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://li-zhi.net.cn/tags/JavaScript/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://li-zhi.net.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"çç¢çš„çŸ¥è¯†","slug":"çç¢çš„çŸ¥è¯†","permalink":"http://li-zhi.net.cn/tags/%E7%90%90%E7%A2%8E%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"Redis","slug":"Redis","permalink":"http://li-zhi.net.cn/tags/Redis/"},{"name":"JUC","slug":"JUC","permalink":"http://li-zhi.net.cn/tags/JUC/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://li-zhi.net.cn/tags/SpringBoot/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://li-zhi.net.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://li-zhi.net.cn/tags/SpringMVC/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://li-zhi.net.cn/tags/MyBatis/"},{"name":"Spring","slug":"Spring","permalink":"http://li-zhi.net.cn/tags/Spring/"},{"name":"Maven","slug":"Maven","permalink":"http://li-zhi.net.cn/tags/Maven/"}]}